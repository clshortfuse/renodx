#include "./common.hlsli"

cbuffer cb0_buf : register(b0) {
  uint4 cb0_m0 : packoffset(c0);
  uint4 cb0_m1 : packoffset(c1);
  uint4 cb0_m2 : packoffset(c2);
  uint4 cb0_m3 : packoffset(c3);
  uint4 cb0_m4 : packoffset(c4);
  uint4 cb0_m5 : packoffset(c5);
  uint4 cb0_m6 : packoffset(c6);
  uint4 cb0_m7 : packoffset(c7);
  uint4 cb0_m8 : packoffset(c8);
  uint4 cb0_m9 : packoffset(c9);
  uint4 cb0_m10 : packoffset(c10);
  uint4 cb0_m11 : packoffset(c11);
  uint4 cb0_m12 : packoffset(c12);
  uint2 cb0_m13 : packoffset(c13);
  float2 cb0_m14 : packoffset(c13.z);
  uint3 cb0_m15 : packoffset(c14);
  float cb0_m16 : packoffset(c14.w);
  float4 cb0_m17 : packoffset(c15);
};

SamplerState s0 : register(s0);
SamplerState s1 : register(s1);
Texture2D<float4> t0 : register(t0);
Texture2D<float4> t1 : register(t1);

static float2 TEXCOORD;
static float4 SV_Target;

struct SPIRV_Cross_Input {
  noperspective float2 TEXCOORD : TEXCOORD0;
};

struct SPIRV_Cross_Output {
  float4 SV_Target : SV_Target0;
};

float dp3_f32(float3 a, float3 b) {
  precise float _151 = a.x * b.x;
  return mad(a.z, b.z, mad(a.y, b.y, _151));
}

float dp2_f32(float2 a, float2 b) {
  precise float _139 = a.x * b.x;
  return mad(a.y, b.y, _139);
}

void frag_main() {
  float2 _168 = float2(TEXCOORD.x, TEXCOORD.y);
  float4 _171 = t0.Sample(s0, _168);
  float _175 = _171.w;
  float4 _179 = t1.Sample(s1, _168);

  if (HandleUICompositing(_171, _179.rgb, SV_Target)) {
    return;
  }

  float _183 = max(_171.x, 6.1035199905745685100555419921875e-05f);
  float _184 = max(_171.y, 6.1035199905745685100555419921875e-05f);
  float _185 = max(_171.z, 6.1035199905745685100555419921875e-05f);
  float3 _208 = float3((_183 > 0.040449999272823333740234375f) ? exp2(log2(mad(_183, 0.94786727428436279296875f, 0.0521326996386051177978515625f)) * 2.400000095367431640625f) : (_183 * 0.077399380505084991455078125f), (_184 > 0.040449999272823333740234375f) ? exp2(log2(mad(_184, 0.94786727428436279296875f, 0.0521326996386051177978515625f)) * 2.400000095367431640625f) : (_184 * 0.077399380505084991455078125f), (_185 > 0.040449999272823333740234375f) ? exp2(log2(mad(_185, 0.94786727428436279296875f, 0.0521326996386051177978515625f)) * 2.400000095367431640625f) : (_185 * 0.077399380505084991455078125f));
  float _209 = dp3_f32(float3(0.2125999927520751953125f, 0.715200006961822509765625f, 0.072200000286102294921875f), _208);
  float _217 = clamp(_209 / cb0_m14.x, 0.0f, 1.0f);
  float _218 = dp3_f32(float3(-0.114600002765655517578125f, -0.385399997234344482421875f, 0.5f), _208) * _217;
  float _219 = dp3_f32(float3(0.5f, -0.4541999995708465576171875f, -0.0458000004291534423828125f), _208) * _217;
  float _221 = dp2_f32(float2(1.0f, 1.574800014495849609375f), float2(_209, _219));
  float _223 = dp3_f32(float3(1.0f, -0.1872999966144561767578125f, -0.468100011348724365234375f), float3(_209, _218, _219));
  float _225 = dp2_f32(float2(1.0f, 1.85559999942779541015625f), float2(_209, _218));
  float _229 = clamp(_221 * 100.0f, 0.0f, 1.0f);
  float _230 = clamp(_223 * 100.0f, 0.0f, 1.0f);
  float _231 = clamp(_225 * 100.0f, 0.0f, 1.0f);
  bool _247 = cb0_m15.z != 0u;
  bool _253 = cb0_m13.y == 1u;
  bool _254 = cb0_m13.y == 2u;
  bool _255 = cb0_m13.y == 3u;
  bool _256 = cb0_m13.y == 4u;
  float3 _293 = float3(_253 ? 1.37915885448455810546875f : (_254 ? 1.025799274444580078125f : (_255 ? 0.695452213287353515625f : (_256 ? 1.0f : 1.70505154132843017578125f))), _253 ? (-0.3088507354259490966796875f) : (_254 ? (-0.02005250938236713409423828125f) : (_255 ? 0.140678703784942626953125f : (_256 ? 0.0f : (-0.621790707111358642578125f)))), _253 ? (-0.0703467428684234619140625f) : (_254 ? (-0.005771367810666561126708984375f) : (_255 ? 0.16386906802654266357421875f : (_256 ? 0.0f : (-0.083258397877216339111328125f)))));
  float3 _297 = float3(_253 ? (-0.06933529675006866455078125f) : (_254 ? (-0.00223502493463456630706787109375f) : (_255 ? 0.0447945632040500640869140625f : (_256 ? 0.0f : (-0.13025714457035064697265625f)))), _253 ? 1.0822923183441162109375f : (_254 ? 1.0045826435089111328125f : (_255 ? 0.859671115875244140625f : (_256 ? 1.0f : 1.140802860260009765625f))), _253 ? (-0.012962051667273044586181640625f) : (_254 ? (-0.00235231337137520313262939453125f) : (_255 ? 0.095534317195415496826171875f : (_256 ? 0.0f : (-0.0105485282838344573974609375f)))));
  float3 _301 = float3(_253 ? (-0.00215925858356058597564697265625f) : (_254 ? (-0.005014003254473209381103515625f) : (_255 ? (-0.0055258828215301036834716796875f) : (_256 ? 0.0f : (-0.024003274738788604736328125f)))), _253 ? (-0.0454653985798358917236328125f) : (_254 ? (-0.025293387472629547119140625f) : (_255 ? 0.0040252101607620716094970703125f : (_256 ? 0.0f : (-0.128968775272369384765625f)))), _253 ? 1.047759532928466796875f : (_254 ? 1.03044021129608154296875f : (_255 ? 1.00150072574615478515625f : (_256 ? 1.0f : 1.152971744537353515625f))));
  float3 _306 = float3(_247 ? (_221 * ((_229 * _229) * mad(_229, -2.0f, 3.0f))) : _221, _247 ? (_223 * ((_230 * _230) * mad(_230, -2.0f, 3.0f))) : _223, _247 ? (_225 * ((_231 * _231) * mad(_231, -2.0f, 3.0f))) : _225);
  float _318 = exp2(log2(_179.x) * 0.0126833133399486541748046875f);
  float _319 = exp2(log2(_179.y) * 0.0126833133399486541748046875f);
  float _320 = exp2(log2(_179.z) * 0.0126833133399486541748046875f);
  float _342 = exp2(log2(max(_318 - 0.8359375f, 0.0f) / mad(_318, -18.6875f, 18.8515625f)) * 6.277394771575927734375f) * 10000.0f;
  float _343 = exp2(log2(max(_319 - 0.8359375f, 0.0f) / mad(_319, -18.6875f, 18.8515625f)) * 6.277394771575927734375f) * 10000.0f;
  float _344 = exp2(log2(max(_320 - 0.8359375f, 0.0f) / mad(_320, -18.6875f, 18.8515625f)) * 6.277394771575927734375f) * 10000.0f;
  float _362;
  float _363;
  float _364;
  if ((_175 > 0.0f) && (_175 < 1.0f)) {
    float _358 = mad(_175, mad(1.0f / ((dp3_f32(float3(_342, _343, _344), float3(0.2989999949932098388671875f, 0.58700001239776611328125f, 0.114000000059604644775390625f)) / cb0_m16) + 1.0f), cb0_m16, -1.0f), 1.0f);
    _362 = _344 * _358;
    _363 = _343 * _358;
    _364 = _342 * _358;
  } else {
    _362 = _344;
    _363 = _343;
    _364 = _342;
  }
  float _365 = 1.0f - _175;
  float _391 = exp2(log2((((dp3_f32(float3(dp3_f32(_293, float3(0.61319148540496826171875f, 0.070206902921199798583984375f, 0.02061887085437774658203125f)), dp3_f32(_293, float3(0.3395120799541473388671875f, 0.9163358211517333984375f, 0.109567292034626007080078125f)), dp3_f32(_293, float3(0.0473663322627544403076171875f, 0.01345001161098480224609375f, 0.8696067333221435546875f))), _306) * cb0_m16) * cb0_m17.x) + (_365 * _364)) * 9.9999997473787516355514526367188e-05f) * 0.1593017578125f);
  float _392 = exp2(log2(((_365 * _363) + ((dp3_f32(float3(dp3_f32(_297, float3(0.61319148540496826171875f, 0.070206902921199798583984375f, 0.02061887085437774658203125f)), dp3_f32(_297, float3(0.3395120799541473388671875f, 0.9163358211517333984375f, 0.109567292034626007080078125f)), dp3_f32(_297, float3(0.0473663322627544403076171875f, 0.01345001161098480224609375f, 0.8696067333221435546875f))), _306) * cb0_m16) * cb0_m17.x)) * 9.9999997473787516355514526367188e-05f) * 0.1593017578125f);
  float _393 = exp2(log2(((_365 * _362) + ((dp3_f32(float3(dp3_f32(_301, float3(0.61319148540496826171875f, 0.070206902921199798583984375f, 0.02061887085437774658203125f)), dp3_f32(_301, float3(0.3395120799541473388671875f, 0.9163358211517333984375f, 0.109567292034626007080078125f)), dp3_f32(_301, float3(0.0473663322627544403076171875f, 0.01345001161098480224609375f, 0.8696067333221435546875f))), _306) * cb0_m16) * cb0_m17.x)) * 9.9999997473787516355514526367188e-05f) * 0.1593017578125f);
  SV_Target.x = exp2(log2(mad(_391, 18.8515625f, 0.8359375f) * (1.0f / mad(_391, 18.6875f, 1.0f))) * 78.84375f);
  SV_Target.y = exp2(log2((1.0f / mad(_392, 18.6875f, 1.0f)) * mad(_392, 18.8515625f, 0.8359375f)) * 78.84375f);
  SV_Target.z = exp2(log2((1.0f / mad(_393, 18.6875f, 1.0f)) * mad(_393, 18.8515625f, 0.8359375f)) * 78.84375f);
  SV_Target.w = 1.0f;
}

SPIRV_Cross_Output main(SPIRV_Cross_Input stage_input) {
  TEXCOORD = stage_input.TEXCOORD;
  frag_main();
  SPIRV_Cross_Output stage_output;
  stage_output.SV_Target = SV_Target;
  return stage_output;
}
