#include "../../common.hlsl"

// ---- Created with 3Dmigoto v1.4.1 on Tue Sep 30 08:58:46 2025
cbuffer cb1 : register(b1)
{
  float4 cb1[25];
}

cbuffer cb0 : register(b0)
{
  float4 cb0[44];
}




// 3Dmigoto declarations
#define cmp -


void main(
  linear noperspective float2 v0 : TEXCOORD0,
  float4 v1 : SV_POSITION0,
  uint v2 : SV_RenderTargetArrayIndex0,
  out float4 o0 : SV_Target0)
{
  float4 r0,r1,r2,r3,r4,r5,r6,r7,r8,r9,r10;
  uint4 bitmask, uiDest;
  float4 fDest;

  r0.x = 0.5 / cb0[37].x;
  r0.xy = v0.xy + -r0.xx;
  r0.xy = cb0[37].xx * r0.xy;
  r0.zw = cb0[37].xy + float2(-1,-6500);
  r1.xy = r0.xy / r0.zz;
  r0.x = (uint)v2.x;
  r1.z = r0.x / r0.z;
  r2.xyzw = cmp(int4(1,2,3,4) == asint(cb0[43].xxxx));
  r0.xyz = r2.www ? float3(1,0,0) : float3(1.70505095,-0.621792138,-0.0832588747);
  r3.xyz = r2.www ? float3(0,1,0) : float3(-0.130256414,1.14080477,-0.0105483187);
  r4.xyz = r2.www ? float3(0,0,1) : float3(-0.0240033567,-0.128968969,1.15297234);
  r0.xyz = r2.zzz ? float3(0.695452213,0.140678704,0.163869068) : r0.xyz;
  r3.xyz = r2.zzz ? float3(0.0447945632,0.859671116,0.0955343172) : r3.xyz;
  r4.xyz = r2.zzz ? float3(-0.00552588282,0.00402521016,1.00150073) : r4.xyz;
  r0.xyz = r2.yyy ? float3(1.02582479,-0.0200531911,-0.00577155687) : r0.xyz;
  r3.xyz = r2.yyy ? float3(-0.00223436952,1.00458646,-0.00235213246) : r3.xyz;
  r2.yzw = r2.yyy ? float3(-0.00501335133,-0.025290072,1.03030348) : r4.xyz;
  r0.xyz = r2.xxx ? float3(1.37921417,-0.308864146,-0.0703499839) : r0.xyz;
  r3.xyz = r2.xxx ? float3(-0.0693348572,1.08229673,-0.0129618878) : r3.xyz;
  r2.xyz = r2.xxx ? float3(-0.00215900945,-0.0454593264,1.04761839) : r2.yzw;
  r1.xyz = float3(-0.434017599,-0.434017599,-0.434017599) + r1.xyz;
  r1.xyz = float3(14,14,14) * r1.xyz;
  r1.xyz = exp2(r1.xyz);
  r1.xyz = r1.xyz * float3(0.180000007,0.180000007,0.180000007) + float3(-0.00266771927,-0.00266771927,-0.00266771927);
  r0.w = cmp(9.99999994e-09 < abs(r0.w));
  r1.w = cmp(9.99999994e-09 < abs(cb0[37].z));
  r0.w = (int)r0.w | (int)r1.w;
  if (r0.w != 0) {
    r0.w = cb0[37].y * 1.00055635;
    r0.w = 1 / r0.w;
    r1.w = cmp(6996.10791 >= cb0[37].y);
    r4.xy = -r0.ww * float2(4.60700006e+09,2.0064e+09) + float2(2967800,1901800);
    r4.xy = r4.xy * r0.ww + float2(99.1100006,247.479996);
    r4.xy = r4.xy * r0.ww + float2(0.244063005,0.237039998);
    r4.x = r1.w ? r4.x : r4.y;
    r0.w = r4.x * r4.x;
    r1.w = 2.86999989 * r4.x;
    r0.w = r0.w * -3 + r1.w;
    r4.y = -0.275000006 + r0.w;
    r5.xyz = cb0[37].yyy * float3(0.000154118257,0.00084242021,4.22806261e-05) + float3(0.860117733,1,0.317398727);
    r0.w = cb0[37].y * cb0[37].y;
    r5.xyz = r0.www * float3(1.28641219e-07,7.08145137e-07,4.20481676e-08) + r5.xyz;
    r1.w = r5.x / r5.y;
    r5.xyw = -cb0[37].yyy * float3(2.8974182e-05,1916156.25,705674) + float3(1,-1.13758118e+09,1.97471539e+09);
    r2.w = r0.w * 1.61456057e-07 + r5.x;
    r2.w = r5.z / r2.w;
    r3.w = 3 * r1.w;
    r4.z = r1.w + r1.w;
    r4.z = -r2.w * 8 + r4.z;
    r4.z = 4 + r4.z;
    r6.x = r3.w / r4.z;
    r3.w = r2.w + r2.w;
    r6.y = r3.w / r4.z;
    r3.w = cmp(cb0[37].y < 4000);
    r4.xy = r3.ww ? r6.xy : r4.xy;
    r4.zw = -r0.ww * float2(1.53176999,308.606995) + r5.yw;
    r3.w = cb0[37].y * 1189.62 + r0.w;
    r3.w = 1412139.88 + r3.w;
    r3.w = r3.w * r3.w;
    r5.x = r4.z / r3.w;
    r0.w = -cb0[37].y * 179.455994 + r0.w;
    r0.w = 6193636 + r0.w;
    r0.w = r0.w * r0.w;
    r5.y = r4.w / r0.w;
    r0.w = dot(r5.xy, r5.xy);
    r0.w = rsqrt(r0.w);
    r4.zw = r5.xy * r0.ww;
    r0.w = cb0[37].z * r4.w;
    r0.w = r0.w * 0.0500000007 + r1.w;
    r1.w = cb0[37].z * -r4.z;
    r1.w = r1.w * 0.0500000007 + r2.w;
    r2.w = 3 * r0.w;
    r0.w = r0.w + r0.w;
    r0.w = -r1.w * 8 + r0.w;
    r0.w = 4 + r0.w;
    r5.x = r2.w / r0.w;
    r1.w = r1.w + r1.w;
    r5.y = r1.w / r0.w;
    r4.zw = r5.xy + -r6.xy;
    r4.xy = r4.xy + r4.zw;
    r4.zw = float2(0.312700003,0.328999996);
    r4.xyzw = cb0[40].wwww ? r4.xyzw : r4.zwxy;
    r5.xy = max(float2(1.00000001e-10,1.00000001e-10), r4.yw);
    r5.zw = float2(1,1) + -r4.xz;
    r4.yw = r5.zw + -r4.yw;
    r6.xy = r4.xz / r5.xy;
    r4.xy = r4.yw / r5.xy;
    r6.z = 1;
    r6.w = r4.x;
    r0.w = dot(float3(0.895099998,0.266400009,-0.161400005), r6.xzw);
    r1.w = dot(float3(-0.750199974,1.71350002,0.0366999991), r6.xzw);
    r2.w = dot(float3(0.0388999991,-0.0684999973,1.02960002), r6.xzw);
    r4.zw = r6.yz;
    r3.w = dot(float3(-0.161400005,0.895099998,0.266400009), r4.yzw);
    r4.x = dot(float3(0.0366999991,-0.750199974,1.71350002), r4.yzw);
    r4.y = dot(float3(1.02960002,0.0388999991,-0.0684999973), r4.yzw);
    r0.w = r3.w / r0.w;
    r1.w = r4.x / r1.w;
    r2.w = r4.y / r2.w;
    r4.xyz = float3(0.895099998,0.266400009,-0.161400005) * r0.www;
    r5.xyz = float3(-0.750199974,1.71350002,0.0366999991) * r1.www;
    r6.xyz = float3(0.0388999991,-0.0684999973,1.02960002) * r2.www;
    r7.x = r4.x;
    r7.y = r5.x;
    r7.z = r6.x;
    r0.w = dot(float3(0.986992896,-0.1470543,0.159962699), r7.xyz);
    r8.x = r4.y;
    r8.y = r5.y;
    r8.z = r6.y;
    r1.w = dot(float3(0.986992896,-0.1470543,0.159962699), r8.xyz);
    r6.x = r4.z;
    r6.y = r5.z;
    r2.w = dot(float3(0.986992896,-0.1470543,0.159962699), r6.xyz);
    r3.w = dot(float3(0.432305306,0.518360317,0.0492912009), r7.xyz);
    r4.x = dot(float3(0.432305306,0.518360317,0.0492912009), r8.xyz);
    r4.y = dot(float3(0.432305306,0.518360317,0.0492912009), r6.xyz);
    r4.z = dot(float3(-0.0085287001,0.040042799,0.968486726), r7.xyz);
    r4.w = dot(float3(-0.0085287001,0.040042799,0.968486726), r8.xyz);
    r5.x = dot(float3(-0.0085287001,0.040042799,0.968486726), r6.xyz);
    r5.yzw = cb1[1].xyz * r1.www;
    r5.yzw = r0.www * cb1[0].xyz + r5.yzw;
    r5.yzw = r2.www * cb1[2].xyz + r5.yzw;
    r6.xyz = cb1[1].xyz * r4.xxx;
    r6.xyz = r3.www * cb1[0].xyz + r6.xyz;
    r6.xyz = r4.yyy * cb1[2].xyz + r6.xyz;
    r4.xyw = cb1[1].xyz * r4.www;
    r4.xyz = r4.zzz * cb1[0].xyz + r4.xyw;
    r4.xyz = r5.xxx * cb1[2].xyz + r4.xyz;
    r7.xyz = cb1[4].yyy * r6.xyz;
    r7.xyz = cb1[4].xxx * r5.yzw + r7.xyz;
    r7.xyz = cb1[4].zzz * r4.xyz + r7.xyz;
    r8.xyz = cb1[5].yyy * r6.xyz;
    r8.xyz = cb1[5].xxx * r5.yzw + r8.xyz;
    r8.xyz = cb1[5].zzz * r4.xyz + r8.xyz;
    r6.xyz = cb1[6].yyy * r6.xyz;
    r5.xyz = cb1[6].xxx * r5.yzw + r6.xyz;
    r4.xyz = cb1[6].zzz * r4.xyz + r5.xyz;
    r5.x = dot(r7.xyz, r1.xyz);
    r5.y = dot(r8.xyz, r1.xyz);
    r5.z = dot(r4.xyz, r1.xyz);
    r1.xyz = r5.xyz;
  }
  r4.x = dot(cb1[8].xyz, r1.xyz);
  r4.y = dot(cb1[9].xyz, r1.xyz);
  r4.z = dot(cb1[10].xyz, r1.xyz);
  r0.w = dot(r4.xyz, float3(0.272228718,0.674081743,0.0536895171));
  r1.xyz = r4.xyz / r0.www;
  r1.xyz = float3(-1,-1,-1) + r1.xyz;
  r1.x = dot(r1.xyz, r1.xyz);
  r1.x = -4 * r1.x;
  r1.x = exp2(r1.x);
  r1.x = 1 + -r1.x;
  r0.w = r0.w * r0.w;
  r0.w = cb0[38].w * r0.w;
  r0.w = -4 * r0.w;
  r0.w = exp2(r0.w);
  r0.w = 1 + -r0.w;
  r0.w = r1.x * r0.w;
  r1.x = dot(float3(1.37041235,-0.329292178,-0.0636831224), r4.xyz);
  r1.y = dot(float3(-0.083433494,1.09709275,-0.0108613791), r4.xyz);
  r1.z = dot(float3(-0.0257933214,-0.0986258015,1.20369494), r4.xyz);
  r1.xyz = r1.xyz + -r4.xyz;
  r1.xyz = r0.www * r1.xyz + r4.xyz;
  r0.w = dot(r1.xyz, float3(0.272228718,0.674081743,0.0536895171));
  r4.xyzw = cb0[22].xyzw * cb0[17].xyzw;
  r5.xyzw = cb0[23].xyzw * cb0[18].xyzw;
  r6.xyzw = cb0[24].xyzw * cb0[19].xyzw;
  r7.xyzw = cb0[25].xyzw * cb0[20].xyzw;
  r8.xyzw = cb0[26].xyzw + cb0[21].xyzw;
  r4.xyz = r4.xyz * r4.www;
  r1.xyz = r1.xyz + -r0.www;
  r4.xyz = r4.xyz * r1.xyz + r0.www;
  r4.xyz = max(float3(0,0,0), r4.xyz);
  r4.xyz = float3(5.55555534,5.55555534,5.55555534) * r4.xyz;
  r5.xyz = r5.xyz * r5.www;
  r4.xyz = log2(r4.xyz);
  r4.xyz = r5.xyz * r4.xyz;
  r4.xyz = exp2(r4.xyz);
  r4.xyz = float3(0.180000007,0.180000007,0.180000007) * r4.xyz;
  r5.xyz = r6.xyz * r6.www;
  r5.xyz = float3(1,1,1) / r5.xyz;
  r4.xyz = log2(r4.xyz);
  r4.xyz = r5.xyz * r4.xyz;
  r4.xyz = exp2(r4.xyz);
  r5.xyz = r7.xyz * r7.www;
  r6.xyz = r8.xyz + r8.www;
  r4.xyz = r4.xyz * r5.xyz + r6.xyz;
  r1.w = 1 / cb0[37].w;
  r1.w = saturate(r1.w * r0.w);
  r2.w = r1.w * -2 + 3;
  r1.w = r1.w * r1.w;
  r1.w = -r2.w * r1.w + 1;
  r5.xyzw = cb0[32].xyzw * cb0[17].xyzw;
  r6.xyzw = cb0[33].xyzw * cb0[18].xyzw;
  r7.xyzw = cb0[34].xyzw * cb0[19].xyzw;
  r8.xyzw = cb0[35].xyzw * cb0[20].xyzw;
  r9.xyzw = cb0[36].xyzw + cb0[21].xyzw;
  r5.xyz = r5.xyz * r5.www;
  r5.xyz = r5.xyz * r1.xyz + r0.www;
  r5.xyz = max(float3(0,0,0), r5.xyz);
  r5.xyz = float3(5.55555534,5.55555534,5.55555534) * r5.xyz;
  r6.xyz = r6.xyz * r6.www;
  r5.xyz = log2(r5.xyz);
  r5.xyz = r6.xyz * r5.xyz;
  r5.xyz = exp2(r5.xyz);
  r5.xyz = float3(0.180000007,0.180000007,0.180000007) * r5.xyz;
  r6.xyz = r7.xyz * r7.www;
  r6.xyz = float3(1,1,1) / r6.xyz;
  r5.xyz = log2(r5.xyz);
  r5.xyz = r6.xyz * r5.xyz;
  r5.xyz = exp2(r5.xyz);
  r6.xyz = r8.xyz * r8.www;
  r7.xyz = r9.xyz + r9.www;
  r5.xyz = r5.xyz * r6.xyz + r7.xyz;
  r2.w = cb0[38].y + -cb0[38].x;
  r3.w = -cb0[38].x + r0.w;
  r2.w = 1 / r2.w;
  r2.w = saturate(r3.w * r2.w);
  r3.w = r2.w * -2 + 3;
  r2.w = r2.w * r2.w;
  r4.w = r3.w * r2.w;
  r6.xyzw = cb0[27].xyzw * cb0[17].xyzw;
  r7.xyzw = cb0[28].xyzw * cb0[18].xyzw;
  r8.xyzw = cb0[29].xyzw * cb0[19].xyzw;
  r9.xyzw = cb0[30].xyzw * cb0[20].xyzw;
  r10.xyzw = cb0[31].xyzw + cb0[21].xyzw;
  r6.xyz = r6.xyz * r6.www;
  r1.xyz = r6.xyz * r1.xyz + r0.www;
  r1.xyz = max(float3(0,0,0), r1.xyz);
  r1.xyz = float3(5.55555534,5.55555534,5.55555534) * r1.xyz;
  r6.xyz = r7.xyz * r7.www;
  r1.xyz = log2(r1.xyz);
  r1.xyz = r6.xyz * r1.xyz;
  r1.xyz = exp2(r1.xyz);
  r1.xyz = float3(0.180000007,0.180000007,0.180000007) * r1.xyz;
  r6.xyz = r8.xyz * r8.www;
  r6.xyz = float3(1,1,1) / r6.xyz;
  r1.xyz = log2(r1.xyz);
  r1.xyz = r6.xyz * r1.xyz;
  r1.xyz = exp2(r1.xyz);
  r6.xyz = r9.xyz * r9.www;
  r7.xyz = r10.xyz + r10.www;
  r1.xyz = r1.xyz * r6.xyz + r7.xyz;
  r0.w = 1 + -r1.w;
  r0.w = -r3.w * r2.w + r0.w;
  r1.xyz = r1.xyz * r0.www;
  r1.xyz = r4.xyz * r1.www + r1.xyz;
  r1.xyz = r5.xyz * r4.www + r1.xyz;

  SetUntonemappedAP1(r1.xyz);

  r4.x = dot(float3(0.938639402,1.02359565e-10,0.0613606237), r1.xyz);
  r4.y = dot(float3(8.36008554e-11,0.830794156,0.169205874), r1.xyz);
  r4.z = dot(float3(2.13187367e-12,-5.63307213e-12,1), r1.xyz);
  r4.xyz = r4.xyz + -r1.xyz;
  r1.xyz = cb0[38].zzz * r4.xyz + r1.xyz;
  r4.y = dot(float3(0.695452213,0.140678704,0.163869068), r1.xyz);
  r4.z = dot(float3(0.0447945632,0.859671116,0.0955343172), r1.xyz);
  r4.w = dot(float3(-0.00552588236,0.00402521016,1.00150073), r1.xyz);
  r0.w = min(r4.y, r4.z);
  r0.w = min(r0.w, r4.w);
  r1.w = max(r4.y, r4.z);
  r1.w = max(r1.w, r4.w);
  r5.xy = max(float2(1.00000001e-10,0.00999999978), r1.ww);
  r0.w = max(1.00000001e-10, r0.w);
  r0.w = r5.x + -r0.w;
  r0.w = r0.w / r5.y;
  r5.xyz = r4.wzy + -r4.zyw;
  r5.xy = r5.xy * r4.wz;
  r1.w = r5.x + r5.y;
  r1.w = r4.y * r5.z + r1.w;
  r1.w = sqrt(r1.w);
  r2.w = r4.w + r4.z;
  r2.w = r2.w + r4.y;
  r1.w = r1.w * 1.75 + r2.w;
  r2.w = 0.333333343 * r1.w;
  r3.w = -0.400000006 + r0.w;
  r4.x = 2.5 * r3.w;
  r4.x = 1 + -abs(r4.x);
  r4.x = max(0, r4.x);
  r5.x = cmp(0 < r3.w);
  r3.w = cmp(r3.w < 0);
  r3.w = (int)-r5.x + (int)r3.w;
  r3.w = (int)r3.w;
  r4.x = -r4.x * r4.x + 1;
  r3.w = r3.w * r4.x + 1;
  r3.w = 0.0250000004 * r3.w;
  r4.x = cmp(0.159999996 >= r1.w);
  r1.w = cmp(r1.w >= 0.479999989);
  r2.w = 0.0799999982 / r2.w;
  r2.w = -0.5 + r2.w;
  r2.w = r3.w * r2.w;
  r1.w = r1.w ? 0 : r2.w;
  r1.w = r4.x ? r3.w : r1.w;
  r1.w = 1 + r1.w;
  r5.yzw = r4.yzw * r1.www;
  r6.xy = cmp(r5.zw == r5.yz);
  r2.w = r6.y ? r6.x : 0;
  r3.w = r4.z * r1.w + -r5.w;
  r3.w = 1.73205078 * r3.w;
  r4.x = r5.y * 2 + -r5.z;
  r4.x = -r4.w * r1.w + r4.x;
  r4.z = min(abs(r4.x), abs(r3.w));
  r4.w = max(abs(r4.x), abs(r3.w));
  r4.w = 1 / r4.w;
  r4.z = r4.z * r4.w;
  r4.w = r4.z * r4.z;
  r6.x = r4.w * 0.0208350997 + -0.0851330012;
  r6.x = r4.w * r6.x + 0.180141002;
  r6.x = r4.w * r6.x + -0.330299497;
  r4.w = r4.w * r6.x + 0.999866009;
  r6.x = r4.z * r4.w;
  r6.y = cmp(abs(r4.x) < abs(r3.w));
  r6.x = r6.x * -2 + 1.57079637;
  r6.x = r6.y ? r6.x : 0;
  r4.z = r4.z * r4.w + r6.x;
  r4.w = cmp(r4.x < -r4.x);
  r4.w = r4.w ? -3.141593 : 0;
  r4.z = r4.z + r4.w;
  r4.w = min(r4.x, r3.w);
  r3.w = max(r4.x, r3.w);
  r4.x = cmp(r4.w < -r4.w);
  r3.w = cmp(r3.w >= -r3.w);
  r3.w = r3.w ? r4.x : 0;
  r3.w = r3.w ? -r4.z : r4.z;
  r3.w = 57.2957802 * r3.w;
  r2.w = r2.w ? 0 : r3.w;
  r3.w = cmp(r2.w < 0);
  r4.x = 360 + r2.w;
  r2.w = r3.w ? r4.x : r2.w;
  r2.w = max(0, r2.w);
  r2.w = min(360, r2.w);
  r3.w = cmp(180 < r2.w);
  r4.x = -360 + r2.w;
  r2.w = r3.w ? r4.x : r2.w;
  r2.w = 0.0148148146 * r2.w;
  r2.w = 1 + -abs(r2.w);
  r2.w = max(0, r2.w);
  r3.w = r2.w * -2 + 3;
  r2.w = r2.w * r2.w;
  r2.w = r3.w * r2.w;
  r2.w = r2.w * r2.w;
  r0.w = r2.w * r0.w;
  r1.w = -r4.y * r1.w + 0.0299999993;
  r0.w = r1.w * r0.w;
  r5.x = r0.w * 0.180000007 + r5.y;
  r4.x = dot(float3(1.45143926,-0.236510754,-0.214928567), r5.xzw);
  r4.y = dot(float3(-0.0765537769,1.17622972,-0.0996759236), r5.xzw);
  r4.z = dot(float3(0.00831614807,-0.00603244966,0.997716308), r5.xzw);
  r4.xyz = max(float3(0,0,0), r4.xyz);
  r0.w = dot(r4.xyz, float3(0.272228718,0.674081743,0.0536895171));
  r4.xyz = r4.xyz + -r0.www;
  r4.xyz = r4.xyz * float3(0.959999979,0.959999979,0.959999979) + r0.www;
  r5.xyz = cb0[40].xyx + float3(1,1,0.180000007);
  r5.xw = -cb0[39].zw + r5.xy;
  r0.w = cmp(0.800000012 < cb0[39].z);
  r6.xy = -cb0[39].zz + float2(0.819999993,1);
  r6.xy = r6.xy / cb0[39].yy;
  r1.w = -0.744727492 + r6.x;
  r2.w = r5.z / r5.x;
  r3.w = -1 + r2.w;
  r3.w = 1 + -r3.w;
  r2.w = r2.w / r3.w;
  r2.w = log2(r2.w);
  r2.w = 0.346573591 * r2.w;
  r3.w = r5.x / cb0[39].y;
  r2.w = -r2.w * r3.w + -0.744727492;
  r0.w = r0.w ? r1.w : r2.w;
  r1.w = r6.y + -r0.w;
  r2.w = cb0[39].w / cb0[39].y;
  r2.w = r2.w + -r1.w;
  r4.xyz = log2(r4.xyz);
  r6.xyz = float3(0.30103001,0.30103001,0.30103001) * r4.xyz;
  r7.xyz = r4.xyz * float3(0.30103001,0.30103001,0.30103001) + r1.www;
  r7.xyz = cb0[39].yyy * r7.xyz;
  r8.xy = r5.xw + r5.xw;
  r1.w = cb0[39].y * -2;
  r1.w = r1.w / r5.x;
  r9.xyz = r4.xyz * float3(0.30103001,0.30103001,0.30103001) + -r0.www;
  r10.xyz = r9.xyz * r1.www;
  r10.xyz = float3(1.44269502,1.44269502,1.44269502) * r10.xyz;
  r10.xyz = exp2(r10.xyz);
  r10.xyz = float3(1,1,1) + r10.xyz;
  r8.xzw = r8.xxx / r10.xyz;
  r8.xzw = -cb0[40].xxx + r8.xzw;
  r1.w = cb0[39].y + cb0[39].y;
  r1.w = r1.w / r5.w;
  r4.xyz = r4.xyz * float3(0.30103001,0.30103001,0.30103001) + -r2.www;
  r4.xyz = r4.xyz * r1.www;
  r4.xyz = float3(1.44269502,1.44269502,1.44269502) * r4.xyz;
  r4.xyz = exp2(r4.xyz);
  r4.xyz = float3(1,1,1) + r4.xyz;
  r4.xyz = r8.yyy / r4.xyz;
  r4.xyz = r5.yyy + -r4.xyz;
  r5.xyz = cmp(r6.xyz < r0.www);
  r5.xyz = r5.xyz ? r8.xzw : r7.xyz;
  r6.xyz = cmp(r2.www < r6.xyz);
  r4.xyz = r6.xyz ? r4.xyz : r7.xyz;
  r1.w = r2.w + -r0.w;
  r6.xyz = saturate(r9.xyz / r1.www);
  r0.w = cmp(r2.w < r0.w);
  r7.xyz = float3(1,1,1) + -r6.xyz;
  r6.xyz = r0.www ? r7.xyz : r6.xyz;
  r7.xyz = -r6.xyz * float3(2,2,2) + float3(3,3,3);
  r6.xyz = r6.xyz * r6.xyz;
  r6.xyz = r6.xyz * r7.xyz;
  r4.xyz = r4.xyz + -r5.xyz;
  r4.xyz = r6.xyz * r4.xyz + r5.xyz;
  r0.w = dot(r4.xyz, float3(0.272228718,0.674081743,0.0536895171));
  r4.xyz = r4.xyz + -r0.www;
  r4.xyz = r4.xyz * float3(0.930000007,0.930000007,0.930000007) + r0.www;
  r4.xyz = max(float3(0,0,0), r4.xyz);
  r4.xyz = r4.xyz + -r1.xyz;
  r1.xyz = cb0[39].xxx * r4.xyz + r1.xyz;
  r4.x = dot(float3(1.06537485,1.44678506e-06,-0.0653710067), r1.xyz);
  r4.y = dot(float3(-3.45525592e-07,1.20366347,-0.203667715), r1.xyz);
  r4.z = dot(float3(1.9865448e-08,2.12079581e-08,0.999999583), r1.xyz);
  r4.xyz = r4.xyz + -r1.xyz;
  r1.xyz = cb0[38].zzz * r4.xyz + r1.xyz;
  r4.x = dot(cb1[12].xyz, r1.xyz);
  r4.y = dot(cb1[13].xyz, r1.xyz);
  r4.z = dot(cb1[14].xyz, r1.xyz);

  SetTonemappedBT709(r4.xyz);

  r1.xyz = max(float3(0,0,0), r4.xyz);
  r4.xyz = r1.xyz * r1.xyz;
  r1.xyz = cb0[41].yyy * r1.xyz;
  r1.xyz = cb0[41].xxx * r4.xyz + r1.xyz;
  r1.xyz = cb0[41].zzz + r1.xyz;
  r4.xyz = cb0[16].xyz * r1.xyz;
  r1.xyz = -r1.xyz * cb0[16].xyz + cb0[15].xyz;
  r1.xyz = cb0[15].www * r1.xyz + r4.xyz;
  r1.xyz = max(float3(0,0,0), r1.xyz);
  r1.xyz = log2(r1.xyz);
  r1.xyz = cb0[42].yyy * r1.xyz;
  r1.xyz = exp2(r1.xyz);

  if (RENODX_TONE_MAP_TYPE != 0) {
    o0 = GenerateOutput(r1.xyz);
    return;
  }

  r4.x = dot(cb1[8].xyz, r1.xyz);
  r4.y = dot(cb1[9].xyz, r1.xyz);
  r4.z = dot(cb1[10].xyz, r1.xyz);
  r0.x = dot(r0.xyz, r4.xyz);
  r0.y = dot(r3.xyz, r4.xyz);
  r0.z = dot(r2.xyz, r4.xyz);
  r0.xyz = cb1[24].xxx ? r1.xyz : r0.xyz;
  r1.xyz = float3(12.9200001,12.9200001,12.9200001) * r0.xyz;
  r2.xyz = cmp(r0.xyz >= float3(0.00313066994,0.00313066994,0.00313066994));
  r0.xyz = log2(r0.xyz);
  r0.xyz = float3(0.416666657,0.416666657,0.416666657) * r0.xyz;
  r0.xyz = exp2(r0.xyz);
  r0.xyz = r0.xyz * float3(1.05499995,1.05499995,1.05499995) + float3(-0.0549999997,-0.0549999997,-0.0549999997);
  r0.xyz = r2.xyz ? r0.xyz : r1.xyz;
  o0.xyz = float3(0.952381015,0.952381015,0.952381015) * r0.xyz;
  o0.w = 0;
  return;
}