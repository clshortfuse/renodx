// ---- Created with 3Dmigoto v1.4.1 on Wed Oct 15 21:46:44 2025

cbuffer _Globals : register(b0)
{
  float4 hdr10_parameters1 : packoffset(c0);
  float4 hdr10_parameters2 : packoffset(c1);
  float4 hdr10_parameters3 : packoffset(c2);
  float4 hdr10_parameters4 : packoffset(c3);
  float4 hdr10_parameters5 : packoffset(c4);
  float4 hdr10_parameters6 : packoffset(c5);
  float4 hdr10_parameters7 : packoffset(c6);
  float4 hdr10_parameters8 : packoffset(c7);
  float4 hdr10_parameters9 : packoffset(c8);
  float4 hdr10_parameters10 : packoffset(c9);
  row_major float4x4 m_wvp_prev : packoffset(c10);
  row_major float4x4 m_vp_prev : packoffset(c14);
  float4 ssfx_jitter : packoffset(c18);
  float4 L_hotness : packoffset(c19);
}

cbuffer static_globals : register(b1)
{
  row_major float3x4 m_V : packoffset(c0);
  row_major float3x4 m_inv_V : packoffset(c3);
  row_major float4x4 m_P : packoffset(c6);
  row_major float4x4 m_VP : packoffset(c10);
  float4 timers : packoffset(c14);
  float4 fog_plane : packoffset(c15);
  float4 fog_params : packoffset(c16);
  float4 fog_color : packoffset(c17);
  float4 L_ambient : packoffset(c18);
  float3 L_sun_color : packoffset(c19);
  float3 L_sun_dir_w : packoffset(c20);
  float4 L_hemi_color : packoffset(c21);
  float3 eye_position : packoffset(c22);
  float4 pos_decompression_params : packoffset(c23);
  float4 screen_res : packoffset(c24);
  float3 L_sun_dir_e : packoffset(c25);
  float4 parallax : packoffset(c26);
  float4 rain_params : packoffset(c27);
  float4 pp_img_corrections : packoffset(c28);
  float4 pp_img_cg : packoffset(c29);
  float4 actor_data : packoffset(c30);
}

SamplerState smp_rtlinear_s : register(s0);
SamplerState smp_point_s : register(s1);
Texture2D<float4> s_current : register(t0);
Texture2D<float4> s_previous : register(t1);
Texture2D<float4> s_motion_vectors : register(t2);
Texture2D<float4> s_mv : register(t3);
Texture2D<float4> s_depth : register(t4);


// 3Dmigoto declarations
#define cmp -


void main(
  float4 v0 : SV_Position0,
  float2 v1 : TEXCOORD0,
  out float4 o0 : SV_Target0)
{
  float4 r0,r1,r2,r3,r4,r5,r6,r7,r8,r9,r10,r11,r12,r13,r14,r15;
  uint4 bitmask, uiDest;
  float4 fDest;

  r0.xyzw = s_motion_vectors.Gather(smp_point_s, v1.xy).xyzw;
  r1.zw = s_motion_vectors.Gather(smp_point_s, v1.xy, int2(-1, 0)).xw;
  r2.zw = s_motion_vectors.Gather(smp_point_s, v1.xy, int2(0, -1)).wz;
  r3.y = s_motion_vectors.Gather(smp_point_s, v1.xy, int2(-1, -1)).w;
  r3.z = cmp(r2.z < r3.y);
  r2.xy = float2(0,-1);
  r3.x = -1;
  r3.xyz = r3.zzz ? r2.xyz : r3.xxy;
  r2.z = cmp(r2.w < r3.z);
  r2.xy = float2(1,-1);
  r2.xyz = r2.zzz ? r2.xyw : r3.xyz;
  r2.w = cmp(r1.w < r2.z);
  r3.xy = float2(-1,0);
  r3.z = r1.w;
  r2.xyz = r2.www ? r3.xyz : r2.xyz;
  r1.w = cmp(r0.w < r2.z);
  r3.x = 0;
  r3.z = r0.w;
  r2.xyz = r1.www ? r3.xxz : r2.xyz;
  r0.w = cmp(r0.z < r2.z);
  r3.xy = float2(1,0);
  r3.z = r0.z;
  r2.xyz = r0.www ? r3.xyz : r2.xyz;
  r0.z = cmp(r1.z < r2.z);
  r1.xy = float2(-1,1);
  r1.xyz = r0.zzz ? r1.xyz : r2.xyz;
  r0.z = cmp(r0.x < r1.z);
  r2.xy = float2(0,1);
  r2.z = r0.x;
  r0.xzw = r0.zzz ? r2.xyz : r1.xyz;
  r0.y = cmp(r0.y < r0.w);
  r0.xy = r0.yy ? float2(1,1) : r0.xz;
  r0.xy = r0.xy * screen_res.zw + v1.xy;
  r0.xy = s_motion_vectors.SampleLevel(smp_point_s, r0.xy, 0).xy;
  r0.z = s_mv.SampleLevel(smp_point_s, v1.xy, 0).w;
  r0.z = saturate(r0.z);
  r0.xy = v1.xy + -r0.xy;
  r1.xy = ddx_fine(v1.xy);
  r1.xy = -r1.xy * ssfx_jitter.xx + v1.xy;
  r1.zw = ddy_fine(v1.xy);
  r1.xy = r1.zw * ssfx_jitter.yy + r1.xy;
  r2.xyz = s_current.Sample(smp_point_s, r1.xy).xyz;
  r1.zw = saturate(r0.xy);
  r1.zw = cmp(r0.xy != r1.zw);
  r0.w = (int)r1.w | (int)r1.z;
  r1.z = cmp(r0.z >= 0.25);
  r0.w = (int)r0.w | (int)r1.z;
  if (r0.w != 0) {
    // clamp negative nit/color values to 0
    o0.xyz = max(r2.xyz, float3(0,0,0));
    o0.w = 1;
    return;
  }
  r3.xyz = s_current.SampleLevel(smp_rtlinear_s, r1.xy, 0, int2(-1, -1)).xyz;
  r4.xyz = s_current.SampleLevel(smp_rtlinear_s, r1.xy, 0, int2(0, -1)).xyz;
  r5.xyz = s_current.SampleLevel(smp_rtlinear_s, r1.xy, 0, int2(1, -1)).xyz;
  r6.xyz = s_current.SampleLevel(smp_rtlinear_s, r1.xy, 0, int2(-1, 0)).xyz;
  r7.xyz = s_current.SampleLevel(smp_rtlinear_s, r1.xy, 0, int2(1, 0)).xyz;
  r8.xyz = s_current.SampleLevel(smp_rtlinear_s, r1.xy, 0, int2(-1, 1)).xyz;
  r9.xyz = s_current.SampleLevel(smp_rtlinear_s, r1.xy, 0, int2(0, 1)).xyz;
  r1.xyz = s_current.SampleLevel(smp_rtlinear_s, r1.xy, 0, int2(1, 1)).xyz;
  r10.xyz = min(r3.xyz, r2.xyz);
  r10.xyz = min(r10.xyz, r4.xyz);
  r10.xyz = min(r10.xyz, r5.xyz);
  r10.xyz = min(r10.xyz, r6.xyz);
  r10.xyz = min(r10.xyz, r7.xyz);
  r10.xyz = min(r10.xyz, r8.xyz);
  r10.xyz = min(r10.xyz, r9.xyz);
  r10.xyz = min(r10.xyz, r1.xyz);
  r11.xyz = max(r3.xyz, r2.xyz);
  r11.xyz = max(r11.xyz, r4.xyz);
  r11.xyz = max(r11.xyz, r5.xyz);
  r11.xyz = max(r11.xyz, r6.xyz);
  r11.xyz = max(r11.xyz, r7.xyz);
  r11.xyz = max(r11.xyz, r8.xyz);
  r11.xyz = max(r11.xyz, r9.xyz);
  r11.xyz = max(r11.xyz, r1.xyz);
  r12.xyz = min(r4.xyz, r2.xyz);
  r12.xyz = min(r12.xyz, r6.xyz);
  r12.xyz = min(r12.xyz, r7.xyz);
  r12.xyz = min(r12.xyz, r9.xyz);
  r13.xyz = max(r4.xyz, r2.xyz);
  r13.xyz = max(r13.xyz, r6.xyz);
  r13.xyz = max(r13.xyz, r7.xyz);
  r13.xyz = max(r13.xyz, r9.xyz);
  r10.xyz = r12.xyz + r10.xyz;
  r10.xyz = float3(0.5,0.5,0.5) * r10.xyz;
  r11.xyz = r13.xyz + r11.xyz;
  r11.xyz = float3(0.5,0.5,0.5) * r11.xyz;
  r12.xyz = s_previous.Sample(smp_rtlinear_s, r0.xy).xyz;
  r0.xy = screen_res.xy * r0.xy + float2(-0.5,-0.5);
  r0.xy = frac(r0.xy);
  r13.xy = r0.xy * r0.xy + -r0.xy;
  r14.xyz = r7.xyz + -r6.xyz;
  r14.xyz = r0.xxx * r14.xyz + r6.xyz;
  r14.w = 0.519999981;
  r13.zw = float2(0.519999981,0.519999981) * r13.xy;
  r15.xyz = r9.xyz + -r4.xyz;
  r15.xyz = r0.yyy * r15.xyz + r4.xyz;
  r15.w = 0.519999981;
  r15.xyzw = r15.xyzw * r13.wwwy;
  r13.xyzw = r14.xyzw * r13.zzzx + r15.xyzw;
  r0.x = 1 + r13.w;
  r14.xyz = r13.www * r2.xyz;
  r12.xyz = r0.xxx * r12.xyz + -r14.xyz;
  r12.w = 1;
  r12.xyzw = r13.xyzw + r12.xyzw;
  r0.xyw = r12.xyz / r12.www;
  r12.xyz = r0.xyw + -r2.xyz;
  r13.xyz = min(float3(1e+09,1e+09,1e+09), r2.xyz);
  r14.xyz = max(float3(-1e+09,-1e+09,-1e+09), r2.xyz);
  r13.xyz = min(r13.xyz, r3.xyz);
  r14.xyz = max(r14.xyz, r3.xyz);
  r13.xyz = min(r13.xyz, r4.xyz);
  r14.xyz = max(r14.xyz, r4.xyz);
  r13.xyz = min(r13.xyz, r5.xyz);
  r14.xyz = max(r14.xyz, r5.xyz);
  r13.xyz = min(r13.xyz, r6.xyz);
  r14.xyz = max(r14.xyz, r6.xyz);
  r13.xyz = min(r13.xyz, r7.xyz);
  r14.xyz = max(r14.xyz, r7.xyz);
  r13.xyz = min(r13.xyz, r8.xyz);
  r14.xyz = max(r14.xyz, r8.xyz);
  r13.xyz = min(r13.xyz, r9.xyz);
  r14.xyz = max(r14.xyz, r9.xyz);
  r13.xyz = min(r13.xyz, r1.xyz);
  r14.xyz = max(r14.xzy, r1.xzy);
  r13.w = r14.x;
  r13.xw = r13.xw + -r2.xx;
  r15.xyz = float3(1,1,1) / r12.xyz;
  r13.xw = float2(-9.99999975e-06,9.99999975e-06) + r13.xw;
  r13.xw = r13.xw * r15.xx;
  r1.w = min(r13.x, r13.w);
  r1.w = max(-1e+09, r1.w);
  r2.w = max(r13.x, r13.w);
  r2.w = min(1e+09, r2.w);
  r14.xw = r13.zy;
  r13.xy = r14.wz + -r2.yy;
  r13.xy = float2(-9.99999975e-06,9.99999975e-06) + r13.xy;
  r13.xy = r13.xy * r15.yy;
  r3.w = min(r13.x, r13.y);
  r1.w = max(r3.w, r1.w);
  r3.w = max(r13.x, r13.y);
  r2.w = min(r3.w, r2.w);
  r13.xy = r14.xy + -r2.zz;
  r13.xy = float2(-9.99999975e-06,9.99999975e-06) + r13.xy;
  r13.xy = r13.xy * r15.zz;
  r3.w = min(r13.x, r13.y);
  r1.w = max(r3.w, r1.w);
  r3.w = max(r13.x, r13.y);
  r2.w = min(r3.w, r2.w);
  r3.w = dot(r2.xyz, float3(0.820080996,0.456726998,-0.344772995));
  r4.w = min(1e+09, r3.w);
  r5.w = max(-1e+09, r3.w);
  r6.w = dot(r3.xyz, float3(0.820080996,0.456726998,-0.344772995));
  r4.w = min(r6.w, r4.w);
  r5.w = max(r6.w, r5.w);
  r6.w = dot(r4.xyz, float3(0.820080996,0.456726998,-0.344772995));
  r4.w = min(r6.w, r4.w);
  r5.w = max(r6.w, r5.w);
  r6.w = dot(r5.xyz, float3(0.820080996,0.456726998,-0.344772995));
  r4.w = min(r6.w, r4.w);
  r5.w = max(r6.w, r5.w);
  r6.w = dot(r6.xyz, float3(0.820080996,0.456726998,-0.344772995));
  r4.w = min(r6.w, r4.w);
  r5.w = max(r6.w, r5.w);
  r6.w = dot(r7.xyz, float3(0.820080996,0.456726998,-0.344772995));
  r4.w = min(r6.w, r4.w);
  r5.w = max(r6.w, r5.w);
  r6.w = dot(r8.xyz, float3(0.820080996,0.456726998,-0.344772995));
  r4.w = min(r6.w, r4.w);
  r5.w = max(r6.w, r5.w);
  r6.w = dot(r9.xyz, float3(0.820080996,0.456726998,-0.344772995));
  r4.w = min(r6.w, r4.w);
  r5.w = max(r6.w, r5.w);
  r6.w = dot(r1.xyz, float3(0.820080996,0.456726998,-0.344772995));
  r13.x = min(r6.w, r4.w);
  r13.y = max(r6.w, r5.w);
  r13.xy = float2(-9.99999975e-06,9.99999975e-06) + r13.xy;
  r4.w = dot(r12.xyz, float3(0.820080996,0.456726998,-0.344772995));
  r4.w = 1 / r4.w;
  r13.xy = r13.xy + -r3.ww;
  r13.xy = r13.xy * r4.ww;
  r3.w = min(r13.x, r13.y);
  r1.w = max(r3.w, r1.w);
  r3.w = max(r13.x, r13.y);
  r2.w = min(r3.w, r2.w);
  r3.w = dot(r2.xyz, float3(0.540295005,0.829201996,0.143195003));
  r4.w = min(1e+09, r3.w);
  r5.w = max(-1e+09, r3.w);
  r6.w = dot(r3.xyz, float3(0.540295005,0.829201996,0.143195003));
  r4.w = min(r6.w, r4.w);
  r5.w = max(r6.w, r5.w);
  r6.w = dot(r4.xyz, float3(0.540295005,0.829201996,0.143195003));
  r4.w = min(r6.w, r4.w);
  r5.w = max(r6.w, r5.w);
  r6.w = dot(r5.xyz, float3(0.540295005,0.829201996,0.143195003));
  r4.w = min(r6.w, r4.w);
  r5.w = max(r6.w, r5.w);
  r6.w = dot(r6.xyz, float3(0.540295005,0.829201996,0.143195003));
  r4.w = min(r6.w, r4.w);
  r5.w = max(r6.w, r5.w);
  r6.w = dot(r7.xyz, float3(0.540295005,0.829201996,0.143195003));
  r4.w = min(r6.w, r4.w);
  r5.w = max(r6.w, r5.w);
  r6.w = dot(r8.xyz, float3(0.540295005,0.829201996,0.143195003));
  r4.w = min(r6.w, r4.w);
  r5.w = max(r6.w, r5.w);
  r6.w = dot(r9.xyz, float3(0.540295005,0.829201996,0.143195003));
  r4.w = min(r6.w, r4.w);
  r5.w = max(r6.w, r5.w);
  r6.w = dot(r1.xyz, float3(0.540295005,0.829201996,0.143195003));
  r13.x = min(r6.w, r4.w);
  r13.y = max(r6.w, r5.w);
  r13.xy = float2(-9.99999975e-06,9.99999975e-06) + r13.xy;
  r4.w = dot(r12.xyz, float3(0.540295005,0.829201996,0.143195003));
  r4.w = 1 / r4.w;
  r13.xy = r13.xy + -r3.ww;
  r13.xy = r13.xy * r4.ww;
  r3.w = min(r13.x, r13.y);
  r1.w = max(r3.w, r1.w);
  r3.w = max(r13.x, r13.y);
  r2.w = min(r3.w, r2.w);
  r3.w = dot(r2.xyz, float3(0.255800009,0.841084003,-0.476597011));
  r4.w = min(1e+09, r3.w);
  r5.w = max(-1e+09, r3.w);
  r6.w = dot(r3.xyz, float3(0.255800009,0.841084003,-0.476597011));
  r4.w = min(r6.w, r4.w);
  r5.w = max(r6.w, r5.w);
  r6.w = dot(r4.xyz, float3(0.255800009,0.841084003,-0.476597011));
  r4.w = min(r6.w, r4.w);
  r5.w = max(r6.w, r5.w);
  r6.w = dot(r5.xyz, float3(0.255800009,0.841084003,-0.476597011));
  r4.w = min(r6.w, r4.w);
  r5.w = max(r6.w, r5.w);
  r6.w = dot(r6.xyz, float3(0.255800009,0.841084003,-0.476597011));
  r4.w = min(r6.w, r4.w);
  r5.w = max(r6.w, r5.w);
  r6.w = dot(r7.xyz, float3(0.255800009,0.841084003,-0.476597011));
  r4.w = min(r6.w, r4.w);
  r5.w = max(r6.w, r5.w);
  r6.w = dot(r8.xyz, float3(0.255800009,0.841084003,-0.476597011));
  r4.w = min(r6.w, r4.w);
  r5.w = max(r6.w, r5.w);
  r6.w = dot(r9.xyz, float3(0.255800009,0.841084003,-0.476597011));
  r4.w = min(r6.w, r4.w);
  r5.w = max(r6.w, r5.w);
  r6.w = dot(r1.xyz, float3(0.255800009,0.841084003,-0.476597011));
  r13.x = min(r6.w, r4.w);
  r13.y = max(r6.w, r5.w);
  r13.xy = float2(-9.99999975e-06,9.99999975e-06) + r13.xy;
  r4.w = dot(r12.xyz, float3(0.255800009,0.841084003,-0.476597011));
  r4.w = 1 / r4.w;
  r13.xy = r13.xy + -r3.ww;
  r13.xy = r13.xy * r4.ww;
  r3.w = min(r13.x, r13.y);
  r1.w = max(r3.w, r1.w);
  r3.w = max(r13.x, r13.y);
  r2.w = min(r3.w, r2.w);
  r3.w = dot(r2.xyz, float3(-0.406935006,-0.389061987,0.826458991));
  r4.w = min(1e+09, r3.w);
  r5.w = max(-1e+09, r3.w);
  r6.w = dot(r3.xyz, float3(-0.406935006,-0.389061987,0.826458991));
  r4.w = min(r6.w, r4.w);
  r5.w = max(r6.w, r5.w);
  r6.w = dot(r4.xyz, float3(-0.406935006,-0.389061987,0.826458991));
  r4.w = min(r6.w, r4.w);
  r5.w = max(r6.w, r5.w);
  r6.w = dot(r5.xyz, float3(-0.406935006,-0.389061987,0.826458991));
  r4.w = min(r6.w, r4.w);
  r5.w = max(r6.w, r5.w);
  r6.w = dot(r6.xyz, float3(-0.406935006,-0.389061987,0.826458991));
  r4.w = min(r6.w, r4.w);
  r5.w = max(r6.w, r5.w);
  r6.w = dot(r7.xyz, float3(-0.406935006,-0.389061987,0.826458991));
  r4.w = min(r6.w, r4.w);
  r5.w = max(r6.w, r5.w);
  r6.w = dot(r8.xyz, float3(-0.406935006,-0.389061987,0.826458991));
  r4.w = min(r6.w, r4.w);
  r5.w = max(r6.w, r5.w);
  r6.w = dot(r9.xyz, float3(-0.406935006,-0.389061987,0.826458991));
  r4.w = min(r6.w, r4.w);
  r5.w = max(r6.w, r5.w);
  r6.w = dot(r1.xyz, float3(-0.406935006,-0.389061987,0.826458991));
  r13.x = min(r6.w, r4.w);
  r13.y = max(r6.w, r5.w);
  r13.xy = float2(-9.99999975e-06,9.99999975e-06) + r13.xy;
  r4.w = dot(r12.xyz, float3(-0.406935006,-0.389061987,0.826458991));
  r4.w = 1 / r4.w;
  r13.xy = r13.xy + -r3.ww;
  r13.xy = r13.xy * r4.ww;
  r3.w = min(r13.x, r13.y);
  r1.w = max(r3.w, r1.w);
  r3.w = max(r13.x, r13.y);
  r2.w = min(r3.w, r2.w);
  r3.w = dot(r2.xyz, float3(-0.826708019,-0.382923007,-0.412218988));
  r4.w = min(1e+09, r3.w);
  r5.w = max(-1e+09, r3.w);
  r6.w = dot(r3.xyz, float3(-0.826708019,-0.382923007,-0.412218988));
  r4.w = min(r6.w, r4.w);
  r5.w = max(r6.w, r5.w);
  r6.w = dot(r4.xyz, float3(-0.826708019,-0.382923007,-0.412218988));
  r4.w = min(r6.w, r4.w);
  r5.w = max(r6.w, r5.w);
  r6.w = dot(r5.xyz, float3(-0.826708019,-0.382923007,-0.412218988));
  r4.w = min(r6.w, r4.w);
  r5.w = max(r6.w, r5.w);
  r6.w = dot(r6.xyz, float3(-0.826708019,-0.382923007,-0.412218988));
  r4.w = min(r6.w, r4.w);
  r5.w = max(r6.w, r5.w);
  r6.w = dot(r7.xyz, float3(-0.826708019,-0.382923007,-0.412218988));
  r4.w = min(r6.w, r4.w);
  r5.w = max(r6.w, r5.w);
  r6.w = dot(r8.xyz, float3(-0.826708019,-0.382923007,-0.412218988));
  r4.w = min(r6.w, r4.w);
  r5.w = max(r6.w, r5.w);
  r6.w = dot(r9.xyz, float3(-0.826708019,-0.382923007,-0.412218988));
  r4.w = min(r6.w, r4.w);
  r5.w = max(r6.w, r5.w);
  r6.w = dot(r1.xyz, float3(-0.826708019,-0.382923007,-0.412218988));
  r13.x = min(r6.w, r4.w);
  r13.y = max(r6.w, r5.w);
  r13.xy = float2(-9.99999975e-06,9.99999975e-06) + r13.xy;
  r4.w = dot(r12.xyz, float3(-0.826708019,-0.382923007,-0.412218988));
  r4.w = 1 / r4.w;
  r13.xy = r13.xy + -r3.ww;
  r13.xy = r13.xy * r4.ww;
  r3.w = min(r13.x, r13.y);
  r1.w = max(r3.w, r1.w);
  r3.w = max(r13.x, r13.y);
  r2.w = min(r3.w, r2.w);
  r3.w = dot(r2.xyz, float3(0.260942012,-0.577481985,0.773577988));
  r4.w = min(1e+09, r3.w);
  r5.w = max(-1e+09, r3.w);
  r6.w = dot(r3.xyz, float3(0.260942012,-0.577481985,0.773577988));
  r4.w = min(r6.w, r4.w);
  r5.w = max(r6.w, r5.w);
  r6.w = dot(r4.xyz, float3(0.260942012,-0.577481985,0.773577988));
  r4.w = min(r6.w, r4.w);
  r5.w = max(r6.w, r5.w);
  r6.w = dot(r5.xyz, float3(0.260942012,-0.577481985,0.773577988));
  r4.w = min(r6.w, r4.w);
  r5.w = max(r6.w, r5.w);
  r6.w = dot(r6.xyz, float3(0.260942012,-0.577481985,0.773577988));
  r4.w = min(r6.w, r4.w);
  r5.w = max(r6.w, r5.w);
  r6.w = dot(r7.xyz, float3(0.260942012,-0.577481985,0.773577988));
  r4.w = min(r6.w, r4.w);
  r5.w = max(r6.w, r5.w);
  r6.w = dot(r8.xyz, float3(0.260942012,-0.577481985,0.773577988));
  r4.w = min(r6.w, r4.w);
  r5.w = max(r6.w, r5.w);
  r6.w = dot(r9.xyz, float3(0.260942012,-0.577481985,0.773577988));
  r4.w = min(r6.w, r4.w);
  r5.w = max(r6.w, r5.w);
  r6.w = dot(r1.xyz, float3(0.260942012,-0.577481985,0.773577988));
  r13.x = min(r6.w, r4.w);
  r13.y = max(r6.w, r5.w);
  r13.xy = float2(-9.99999975e-06,9.99999975e-06) + r13.xy;
  r4.w = dot(r12.xyz, float3(0.260942012,-0.577481985,0.773577988));
  r4.w = 1 / r4.w;
  r13.xy = r13.xy + -r3.ww;
  r13.xy = r13.xy * r4.ww;
  r3.w = min(r13.x, r13.y);
  r1.w = max(r3.w, r1.w);
  r3.w = max(r13.x, r13.y);
  r2.w = min(r3.w, r2.w);
  r3.w = dot(r2.xyz, float3(0.254397988,0.637821019,0.726957023));
  r4.w = min(1e+09, r3.w);
  r5.w = max(-1e+09, r3.w);
  r6.w = dot(r3.xyz, float3(0.254397988,0.637821019,0.726957023));
  r4.w = min(r6.w, r4.w);
  r5.w = max(r6.w, r5.w);
  r6.w = dot(r4.xyz, float3(0.254397988,0.637821019,0.726957023));
  r4.w = min(r6.w, r4.w);
  r5.w = max(r6.w, r5.w);
  r6.w = dot(r5.xyz, float3(0.254397988,0.637821019,0.726957023));
  r4.w = min(r6.w, r4.w);
  r5.w = max(r6.w, r5.w);
  r6.w = dot(r6.xyz, float3(0.254397988,0.637821019,0.726957023));
  r4.w = min(r6.w, r4.w);
  r5.w = max(r6.w, r5.w);
  r6.w = dot(r7.xyz, float3(0.254397988,0.637821019,0.726957023));
  r4.w = min(r6.w, r4.w);
  r5.w = max(r6.w, r5.w);
  r6.w = dot(r8.xyz, float3(0.254397988,0.637821019,0.726957023));
  r4.w = min(r6.w, r4.w);
  r5.w = max(r6.w, r5.w);
  r6.w = dot(r9.xyz, float3(0.254397988,0.637821019,0.726957023));
  r4.w = min(r6.w, r4.w);
  r5.w = max(r6.w, r5.w);
  r6.w = dot(r1.xyz, float3(0.254397988,0.637821019,0.726957023));
  r13.x = min(r6.w, r4.w);
  r13.y = max(r6.w, r5.w);
  r13.xy = float2(-9.99999975e-06,9.99999975e-06) + r13.xy;
  r4.w = dot(r12.xyz, float3(0.254397988,0.637821019,0.726957023));
  r4.w = 1 / r4.w;
  r13.xy = r13.xy + -r3.ww;
  r13.xy = r13.xy * r4.ww;
  r3.w = min(r13.x, r13.y);
  r1.w = max(r3.w, r1.w);
  r3.w = max(r13.x, r13.y);
  r2.w = min(r3.w, r2.w);
  r3.w = dot(r2.xyz, float3(0.310900003,-0.728083014,-0.610930026));
  r4.w = min(1e+09, r3.w);
  r5.w = max(-1e+09, r3.w);
  r6.w = dot(r3.xyz, float3(0.310900003,-0.728083014,-0.610930026));
  r4.w = min(r6.w, r4.w);
  r5.w = max(r6.w, r5.w);
  r6.w = dot(r4.xyz, float3(0.310900003,-0.728083014,-0.610930026));
  r4.w = min(r6.w, r4.w);
  r5.w = max(r6.w, r5.w);
  r6.w = dot(r5.xyz, float3(0.310900003,-0.728083014,-0.610930026));
  r4.w = min(r6.w, r4.w);
  r5.w = max(r6.w, r5.w);
  r6.w = dot(r6.xyz, float3(0.310900003,-0.728083014,-0.610930026));
  r4.w = min(r6.w, r4.w);
  r5.w = max(r6.w, r5.w);
  r6.w = dot(r7.xyz, float3(0.310900003,-0.728083014,-0.610930026));
  r4.w = min(r6.w, r4.w);
  r5.w = max(r6.w, r5.w);
  r6.w = dot(r8.xyz, float3(0.310900003,-0.728083014,-0.610930026));
  r4.w = min(r6.w, r4.w);
  r5.w = max(r6.w, r5.w);
  r6.w = dot(r9.xyz, float3(0.310900003,-0.728083014,-0.610930026));
  r4.w = min(r6.w, r4.w);
  r5.w = max(r6.w, r5.w);
  r6.w = dot(r1.xyz, float3(0.310900003,-0.728083014,-0.610930026));
  r13.x = min(r6.w, r4.w);
  r13.y = max(r6.w, r5.w);
  r13.xy = float2(-9.99999975e-06,9.99999975e-06) + r13.xy;
  r4.w = dot(r12.xyz, float3(0.310900003,-0.728083014,-0.610930026));
  r4.w = 1 / r4.w;
  r13.xy = r13.xy + -r3.ww;
  r13.xy = r13.xy * r4.ww;
  r3.w = min(r13.x, r13.y);
  r1.w = max(r3.w, r1.w);
  r3.w = max(r13.x, r13.y);
  r2.w = min(r3.w, r2.w);
  r3.w = dot(r2.xyz, float3(0.798512995,-0.556827009,-0.228737995));
  r4.w = min(1e+09, r3.w);
  r5.w = max(-1e+09, r3.w);
  r6.w = dot(r3.xyz, float3(0.798512995,-0.556827009,-0.228737995));
  r4.w = min(r6.w, r4.w);
  r5.w = max(r6.w, r5.w);
  r6.w = dot(r4.xyz, float3(0.798512995,-0.556827009,-0.228737995));
  r4.w = min(r6.w, r4.w);
  r5.w = max(r6.w, r5.w);
  r6.w = dot(r5.xyz, float3(0.798512995,-0.556827009,-0.228737995));
  r4.w = min(r6.w, r4.w);
  r5.w = max(r6.w, r5.w);
  r6.w = dot(r6.xyz, float3(0.798512995,-0.556827009,-0.228737995));
  r4.w = min(r6.w, r4.w);
  r5.w = max(r6.w, r5.w);
  r6.w = dot(r7.xyz, float3(0.798512995,-0.556827009,-0.228737995));
  r4.w = min(r6.w, r4.w);
  r5.w = max(r6.w, r5.w);
  r6.w = dot(r8.xyz, float3(0.798512995,-0.556827009,-0.228737995));
  r4.w = min(r6.w, r4.w);
  r5.w = max(r6.w, r5.w);
  r6.w = dot(r9.xyz, float3(0.798512995,-0.556827009,-0.228737995));
  r4.w = min(r6.w, r4.w);
  r5.w = max(r6.w, r5.w);
  r6.w = dot(r1.xyz, float3(0.798512995,-0.556827009,-0.228737995));
  r13.x = min(r6.w, r4.w);
  r13.y = max(r6.w, r5.w);
  r13.xy = float2(-9.99999975e-06,9.99999975e-06) + r13.xy;
  r4.w = dot(r12.xyz, float3(0.798512995,-0.556827009,-0.228737995));
  r4.w = 1 / r4.w;
  r13.xy = r13.xy + -r3.ww;
  r13.xy = r13.xy * r4.ww;
  r3.w = min(r13.x, r13.y);
  r1.w = max(r3.w, r1.w);
  r3.w = max(r13.x, r13.y);
  r2.w = min(r3.w, r2.w);
  r3.w = dot(r2.xyz, float3(0.673382998,-0.163601995,-0.720964015));
  r4.w = min(1e+09, r3.w);
  r5.w = max(-1e+09, r3.w);
  r6.w = dot(r3.xyz, float3(0.673382998,-0.163601995,-0.720964015));
  r4.w = min(r6.w, r4.w);
  r5.w = max(r6.w, r5.w);
  r6.w = dot(r4.xyz, float3(0.673382998,-0.163601995,-0.720964015));
  r4.w = min(r6.w, r4.w);
  r5.w = max(r6.w, r5.w);
  r6.w = dot(r5.xyz, float3(0.673382998,-0.163601995,-0.720964015));
  r4.w = min(r6.w, r4.w);
  r5.w = max(r6.w, r5.w);
  r6.w = dot(r6.xyz, float3(0.673382998,-0.163601995,-0.720964015));
  r4.w = min(r6.w, r4.w);
  r5.w = max(r6.w, r5.w);
  r6.w = dot(r7.xyz, float3(0.673382998,-0.163601995,-0.720964015));
  r4.w = min(r6.w, r4.w);
  r5.w = max(r6.w, r5.w);
  r6.w = dot(r8.xyz, float3(0.673382998,-0.163601995,-0.720964015));
  r4.w = min(r6.w, r4.w);
  r5.w = max(r6.w, r5.w);
  r6.w = dot(r9.xyz, float3(0.673382998,-0.163601995,-0.720964015));
  r4.w = min(r6.w, r4.w);
  r5.w = max(r6.w, r5.w);
  r6.w = dot(r1.xyz, float3(0.673382998,-0.163601995,-0.720964015));
  r13.x = min(r6.w, r4.w);
  r13.y = max(r6.w, r5.w);
  r13.xy = float2(-9.99999975e-06,9.99999975e-06) + r13.xy;
  r4.w = dot(r12.xyz, float3(0.673382998,-0.163601995,-0.720964015));
  r4.w = 1 / r4.w;
  r13.xy = r13.xy + -r3.ww;
  r13.xy = r13.xy * r4.ww;
  r3.w = min(r13.x, r13.y);
  r1.w = max(r3.w, r1.w);
  r3.w = max(r13.x, r13.y);
  r2.w = min(r3.w, r2.w);
  r3.w = dot(r2.xyz, float3(-0.813921988,0.369657993,-0.448201001));
  r4.w = min(1e+09, r3.w);
  r5.w = max(-1e+09, r3.w);
  r6.w = dot(r3.xyz, float3(-0.813921988,0.369657993,-0.448201001));
  r4.w = min(r6.w, r4.w);
  r5.w = max(r6.w, r5.w);
  r6.w = dot(r4.xyz, float3(-0.813921988,0.369657993,-0.448201001));
  r4.w = min(r6.w, r4.w);
  r5.w = max(r6.w, r5.w);
  r6.w = dot(r5.xyz, float3(-0.813921988,0.369657993,-0.448201001));
  r4.w = min(r6.w, r4.w);
  r5.w = max(r6.w, r5.w);
  r6.w = dot(r6.xyz, float3(-0.813921988,0.369657993,-0.448201001));
  r4.w = min(r6.w, r4.w);
  r5.w = max(r6.w, r5.w);
  r6.w = dot(r7.xyz, float3(-0.813921988,0.369657993,-0.448201001));
  r4.w = min(r6.w, r4.w);
  r5.w = max(r6.w, r5.w);
  r6.w = dot(r8.xyz, float3(-0.813921988,0.369657993,-0.448201001));
  r4.w = min(r6.w, r4.w);
  r5.w = max(r6.w, r5.w);
  r6.w = dot(r9.xyz, float3(-0.813921988,0.369657993,-0.448201001));
  r4.w = min(r6.w, r4.w);
  r5.w = max(r6.w, r5.w);
  r6.w = dot(r1.xyz, float3(-0.813921988,0.369657993,-0.448201001));
  r13.x = min(r6.w, r4.w);
  r13.y = max(r6.w, r5.w);
  r13.xy = float2(-9.99999975e-06,9.99999975e-06) + r13.xy;
  r4.w = dot(r12.xyz, float3(-0.813921988,0.369657993,-0.448201001));
  r4.w = 1 / r4.w;
  r13.xy = r13.xy + -r3.ww;
  r13.xy = r13.xy * r4.ww;
  r3.w = min(r13.x, r13.y);
  r1.w = max(r3.w, r1.w);
  r3.w = max(r13.x, r13.y);
  r2.w = min(r3.w, r2.w);
  r3.w = dot(r2.xyz, float3(0.477649987,-0.853721976,0.207384005));
  r4.w = min(1e+09, r3.w);
  r5.w = max(-1e+09, r3.w);
  r6.w = dot(r3.xyz, float3(0.477649987,-0.853721976,0.207384005));
  r4.w = min(r6.w, r4.w);
  r5.w = max(r6.w, r5.w);
  r6.w = dot(r4.xyz, float3(0.477649987,-0.853721976,0.207384005));
  r4.w = min(r6.w, r4.w);
  r5.w = max(r6.w, r5.w);
  r6.w = dot(r5.xyz, float3(0.477649987,-0.853721976,0.207384005));
  r4.w = min(r6.w, r4.w);
  r5.w = max(r6.w, r5.w);
  r6.w = dot(r6.xyz, float3(0.477649987,-0.853721976,0.207384005));
  r4.w = min(r6.w, r4.w);
  r5.w = max(r6.w, r5.w);
  r6.w = dot(r7.xyz, float3(0.477649987,-0.853721976,0.207384005));
  r4.w = min(r6.w, r4.w);
  r5.w = max(r6.w, r5.w);
  r6.w = dot(r8.xyz, float3(0.477649987,-0.853721976,0.207384005));
  r4.w = min(r6.w, r4.w);
  r5.w = max(r6.w, r5.w);
  r6.w = dot(r9.xyz, float3(0.477649987,-0.853721976,0.207384005));
  r4.w = min(r6.w, r4.w);
  r5.w = max(r6.w, r5.w);
  r6.w = dot(r1.xyz, float3(0.477649987,-0.853721976,0.207384005));
  r13.x = min(r6.w, r4.w);
  r13.y = max(r6.w, r5.w);
  r13.xy = float2(-9.99999975e-06,9.99999975e-06) + r13.xy;
  r4.w = dot(r12.xyz, float3(0.477649987,-0.853721976,0.207384005));
  r4.w = 1 / r4.w;
  r13.xy = r13.xy + -r3.ww;
  r13.xy = r13.xy * r4.ww;
  r3.w = min(r13.x, r13.y);
  r1.w = max(r3.w, r1.w);
  r3.w = max(r13.x, r13.y);
  r2.w = min(r3.w, r2.w);
  r3.w = dot(r2.xyz, float3(-0.554853976,-0.0415499993,-0.830910027));
  r4.w = min(1e+09, r3.w);
  r5.w = max(-1e+09, r3.w);
  r3.x = dot(r3.xyz, float3(-0.554853976,-0.0415499993,-0.830910027));
  r3.y = min(r3.x, r4.w);
  r3.x = max(r3.x, r5.w);
  r3.z = dot(r4.xyz, float3(-0.554853976,-0.0415499993,-0.830910027));
  r3.y = min(r3.z, r3.y);
  r3.x = max(r3.z, r3.x);
  r3.z = dot(r5.xyz, float3(-0.554853976,-0.0415499993,-0.830910027));
  r3.y = min(r3.z, r3.y);
  r3.x = max(r3.z, r3.x);
  r3.z = dot(r6.xyz, float3(-0.554853976,-0.0415499993,-0.830910027));
  r3.y = min(r3.z, r3.y);
  r3.x = max(r3.z, r3.x);
  r3.z = dot(r7.xyz, float3(-0.554853976,-0.0415499993,-0.830910027));
  r3.y = min(r3.z, r3.y);
  r3.x = max(r3.z, r3.x);
  r3.z = dot(r8.xyz, float3(-0.554853976,-0.0415499993,-0.830910027));
  r3.y = min(r3.z, r3.y);
  r3.x = max(r3.z, r3.x);
  r3.z = dot(r9.xyz, float3(-0.554853976,-0.0415499993,-0.830910027));
  r3.y = min(r3.z, r3.y);
  r3.x = max(r3.z, r3.x);
  r1.x = dot(r1.xyz, float3(-0.554853976,-0.0415499993,-0.830910027));
  r4.x = min(r1.x, r3.y);
  r4.y = max(r1.x, r3.x);
  r1.xy = float2(-9.99999975e-06,9.99999975e-06) + r4.xy;
  r1.z = dot(r12.xyz, float3(-0.554853976,-0.0415499993,-0.830910027));
  r1.z = 1 / r1.z;
  r1.xy = r1.xy + -r3.ww;
  r1.xy = r1.xy * r1.zz;
  r1.z = min(r1.x, r1.y);
  r1.xz = max(r1.xw, r1.yz);
  r1.x = min(r2.w, r1.x);
  r1.y = cmp(r1.x >= r1.z);
  r1.w = cmp(0 < r1.z);
  r2.w = cmp(0 < r1.x);
  r2.w = (int)r1.w | (int)r2.w;
  r1.y = r1.y ? r2.w : 0;
  r1.x = saturate(r1.w ? r1.z : r1.x);
  r1.xzw = r1.xxx * r12.xyz + r2.xyz;
  r1.xyz = r1.yyy ? r1.xzw : r2.xyz;
  r3.xyzw = s_depth.Gather(smp_point_s, v1.xy).xyzw;
  r4.xy = s_depth.Gather(smp_point_s, v1.xy, int2(-1, 0)).xw;
  r4.zw = s_depth.Gather(smp_point_s, v1.xy, int2(0, -1)).zw;
  r1.w = s_depth.Gather(smp_point_s, v1.xy, int2(-1, -1)).w;
  r2.w = min(1000000, r4.w);
  r2.w = min(r2.w, r4.z);
  r2.w = min(r2.w, r4.y);
  r2.w = min(r2.w, r3.w);
  r2.w = min(r2.w, r3.z);
  r2.w = min(r2.w, r4.x);
  r2.w = min(r2.w, r3.x);
  r2.w = min(r2.w, r3.y);
  r4.z = r4.w + r4.z;
  r4.y = r4.z + r4.y;
  r3.w = r4.y + r3.w;
  r3.z = r3.w + r3.z;
  r3.z = r3.z + r4.x;
  r3.x = r3.z + r3.x;
  r3.x = r3.x + r3.y;
  r1.w = r3.x + r1.w;
  r2.w = cmp(0.00100000005 >= r2.w);
  r1.w = cmp(0.00100000005 < r1.w);
  r1.w = r1.w ? r2.w : 0;
  r2.w = s_motion_vectors.SampleLevel(smp_point_s, v1.xy, 0).w;
  r3.x = r1.w ? 0.949999988 : 0.899999976;
  r3.y = 60 * r2.w;
  r3.y = max(0, r3.y);
  r3.y = min(0.600000024, r3.y);
  r3.x = r3.x + -r3.y;
  r3.yzw = max(r0.xyw, r10.xyz);
  r3.yzw = min(r3.yzw, r11.xyz);
  r2.w = saturate(r2.w * 100 + 0.400000006);
  r3.yzw = r3.yzw + -r0.xyw;
  r0.xyw = r2.www * r3.yzw + r0.xyw;
  r0.xyw = r1.www ? r0.xyw : r1.xyz;
  r0.z = r3.x + -r0.z;
  r0.z = max(0, r0.z);
  r0.xyw = r0.xyw + -r2.xyz;
  // Ensure final color doesn't go negative (clamp to 0)
  o0.xyz = max(r0.zzz * r0.xyw + r2.xyz, float3(0,0,0));
  o0.w = 1;
  return;
}