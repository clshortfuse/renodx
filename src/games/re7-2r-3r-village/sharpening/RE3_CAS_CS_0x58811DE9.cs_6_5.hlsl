#include "./sharpening.hlsli"

Texture2D<float4> SrcImage : register(t0);

RWTexture2D<float4> OutputImage : register(u0);

cbuffer cbCAS : register(b0) {
  uint4 const0 : packoffset(c000.x);
  uint4 const1 : packoffset(c001.x);
};

[numthreads(64, 1, 1)]
void main(
  uint3 SV_DispatchThreadID : SV_DispatchThreadID,
  uint3 SV_GroupID : SV_GroupID,
  uint3 SV_GroupThreadID : SV_GroupThreadID,
  uint SV_GroupIndex : SV_GroupIndex
) {
  int _15 = (((uint)(SV_GroupThreadID.x) >> 1) & 7) | ((uint)((uint)(SV_GroupID.x) << 4));
  int _16 = ((((uint)(SV_GroupThreadID.x) >> 3) & 6) | ((uint)(SV_GroupThreadID.x) & 1)) | ((uint)((uint)(SV_GroupID.y) << 4));
  float _24 = float((uint)_15);
  float _25 = float((uint)_16);
  float _32 = (asfloat(const0.x) * _24) + asfloat(const0.z);
  float _33 = (asfloat(const0.y) * _25) + asfloat(const0.w);
  float _34 = floor(_32);
  float _35 = floor(_33);
  float _36 = _32 - _34;
  float _37 = _33 - _35;
  int _38 = int(_34);
  int _39 = int(_35);
  
if (CUSTOM_SHARPENING == 0.f) {
  OutputImage[int2(_15, _16)] = float4(SrcImage.Load(int3(_38, _39, 0)).rgb, 1.0f);  // First pixel (_15, _16)
  
  int pass_759 = _15 | 8;
  float pass_767 = float((uint)pass_759);
  float pass_774 = (asfloat(const0.x) * pass_767) + asfloat(const0.z);
  float pass_775 = (asfloat(const0.y) * _25) + asfloat(const0.w);
  int pass_778 = int(floor(pass_774));
  int pass_779 = int(floor(pass_775));
  OutputImage[int2(pass_759, _16)] = float4(SrcImage.Load(int3(pass_778, pass_779, 0)).rgb, 1.0f);  // Second pixel (_15|8, _16)
  
  int pass_1501 = _16 | 8;
  float pass_1509 = float((uint)pass_1501);
  float pass_1516 = (asfloat(const0.x) * pass_767) + asfloat(const0.z);
  float pass_1517 = (asfloat(const0.y) * pass_1509) + asfloat(const0.w);
  int pass_1520 = int(floor(pass_1516));
  int pass_1521 = int(floor(pass_1517));
  OutputImage[int2(pass_759, pass_1501)] = float4(SrcImage.Load(int3(pass_1520, pass_1521, 0)).rgb, 1.0f);  // Third pixel (_15|8, _16|8)
  
  float pass_2247 = (asfloat(const0.x) * _24) + asfloat(const0.z);
  float pass_2248 = (asfloat(const0.y) * pass_1509) + asfloat(const0.w);
  int pass_2251 = int(floor(pass_2247));
  int pass_2252 = int(floor(pass_2248));
  OutputImage[int2(_15, pass_1501)] = float4(SrcImage.Load(int3(pass_2251, pass_2252, 0)).rgb, 1.0f);  // Fourth pixel (_15, _16|8)
  return;
} else if (CUSTOM_SHARPENING == 2.f) {  // Lilium RCAS
  float sharpness_strength = 0.75f; // asfloat(const1.x)
  
  int offset_x = _15 | 8;  // X offset
  int offset_y = _16 | 8;  // Y offset
  ApplyLiliumRCAS_RE3_Pattern(
    SrcImage,
    OutputImage,
    int2(_15, _16),           // base coordinates
    int2(offset_x, offset_y),         // offset coordinates  
    sharpness_strength
  );
  return;
}

  uint _40 = _39 + -1u;
  float4 _41 = SrcImage.Load(int3(_38, _40, 0));
  float _45 = max(0.0f, _41.x);
  float _46 = max(0.0f, _41.y);
  float _47 = max(0.0f, _41.z);
  float _58;
  float _69;
  float _80;
  float _99;
  float _110;
  float _121;
  float _139;
  float _150;
  float _161;
  float _180;
  float _191;
  float _202;
  float _220;
  float _231;
  float _242;
  float _261;
  float _272;
  float _283;
  float _302;
  float _313;
  float _324;
  float _342;
  float _353;
  float _364;
  float _383;
  float _394;
  float _405;
  float _423;
  float _434;
  float _445;
  float _463;
  float _474;
  float _485;
  float _503;
  float _514;
  float _525;
  float _736;
  float _747;
  float _758;
  float _800;
  float _811;
  float _822;
  float _841;
  float _852;
  float _863;
  float _881;
  float _892;
  float _903;
  float _922;
  float _933;
  float _944;
  float _962;
  float _973;
  float _984;
  float _1003;
  float _1014;
  float _1025;
  float _1044;
  float _1055;
  float _1066;
  float _1084;
  float _1095;
  float _1106;
  float _1125;
  float _1136;
  float _1147;
  float _1165;
  float _1176;
  float _1187;
  float _1205;
  float _1216;
  float _1227;
  float _1245;
  float _1256;
  float _1267;
  float _1478;
  float _1489;
  float _1500;
  float _1542;
  float _1553;
  float _1564;
  float _1583;
  float _1594;
  float _1605;
  float _1623;
  float _1634;
  float _1645;
  float _1664;
  float _1675;
  float _1686;
  float _1704;
  float _1715;
  float _1726;
  float _1745;
  float _1756;
  float _1767;
  float _1786;
  float _1797;
  float _1808;
  float _1826;
  float _1837;
  float _1848;
  float _1867;
  float _1878;
  float _1889;
  float _1907;
  float _1918;
  float _1929;
  float _1947;
  float _1958;
  float _1969;
  float _1987;
  float _1998;
  float _2009;
  float _2220;
  float _2231;
  float _2242;
  float _2282;
  float _2293;
  float _2304;
  float _2323;
  float _2334;
  float _2345;
  float _2363;
  float _2374;
  float _2385;
  float _2404;
  float _2415;
  float _2426;
  float _2444;
  float _2455;
  float _2466;
  float _2485;
  float _2496;
  float _2507;
  float _2526;
  float _2537;
  float _2548;
  float _2566;
  float _2577;
  float _2588;
  float _2607;
  float _2618;
  float _2629;
  float _2647;
  float _2658;
  float _2669;
  float _2687;
  float _2698;
  float _2709;
  float _2727;
  float _2738;
  float _2749;
  float _2960;
  float _2971;
  float _2982;
  if (_45 > 1.0f) {
    _58 = ((log2(_45 + -0.2846689224243164f) * 0.12395743280649185f) + 0.5599107146263123f);
  } else {
    _58 = (sqrt(_45) * 0.5f);
  }
  if (_46 > 1.0f) {
    _69 = ((log2(_46 + -0.2846689224243164f) * 0.12395743280649185f) + 0.5599107146263123f);
  } else {
    _69 = (sqrt(_46) * 0.5f);
  }
  if (_47 > 1.0f) {
    _80 = ((log2(_47 + -0.2846689224243164f) * 0.12395743280649185f) + 0.5599107146263123f);
  } else {
    _80 = (sqrt(_47) * 0.5f);
  }
  uint _81 = _38 + -1u;
  float4 _82 = SrcImage.Load(int3(_81, _39, 0));
  float _86 = max(0.0f, _82.x);
  float _87 = max(0.0f, _82.y);
  float _88 = max(0.0f, _82.z);
  if (_86 > 1.0f) {
    _99 = ((log2(_86 + -0.2846689224243164f) * 0.12395743280649185f) + 0.5599107146263123f);
  } else {
    _99 = (sqrt(_86) * 0.5f);
  }
  if (_87 > 1.0f) {
    _110 = ((log2(_87 + -0.2846689224243164f) * 0.12395743280649185f) + 0.5599107146263123f);
  } else {
    _110 = (sqrt(_87) * 0.5f);
  }
  if (_88 > 1.0f) {
    _121 = ((log2(_88 + -0.2846689224243164f) * 0.12395743280649185f) + 0.5599107146263123f);
  } else {
    _121 = (sqrt(_88) * 0.5f);
  }
  float4 _122 = SrcImage.Load(int3(_38, _39, 0));
  float _126 = max(0.0f, _122.x);
  float _127 = max(0.0f, _122.y);
  float _128 = max(0.0f, _122.z);
  if (_126 > 1.0f) {
    _139 = ((log2(_126 + -0.2846689224243164f) * 0.12395743280649185f) + 0.5599107146263123f);
  } else {
    _139 = (sqrt(_126) * 0.5f);
  }
  if (_127 > 1.0f) {
    _150 = ((log2(_127 + -0.2846689224243164f) * 0.12395743280649185f) + 0.5599107146263123f);
  } else {
    _150 = (sqrt(_127) * 0.5f);
  }
  if (_128 > 1.0f) {
    _161 = ((log2(_128 + -0.2846689224243164f) * 0.12395743280649185f) + 0.5599107146263123f);
  } else {
    _161 = (sqrt(_128) * 0.5f);
  }
  uint _162 = _38 + 1u;
  float4 _163 = SrcImage.Load(int3(_162, _40, 0));
  float _167 = max(0.0f, _163.x);
  float _168 = max(0.0f, _163.y);
  float _169 = max(0.0f, _163.z);
  if (_167 > 1.0f) {
    _180 = ((log2(_167 + -0.2846689224243164f) * 0.12395743280649185f) + 0.5599107146263123f);
  } else {
    _180 = (sqrt(_167) * 0.5f);
  }
  if (_168 > 1.0f) {
    _191 = ((log2(_168 + -0.2846689224243164f) * 0.12395743280649185f) + 0.5599107146263123f);
  } else {
    _191 = (sqrt(_168) * 0.5f);
  }
  if (_169 > 1.0f) {
    _202 = ((log2(_169 + -0.2846689224243164f) * 0.12395743280649185f) + 0.5599107146263123f);
  } else {
    _202 = (sqrt(_169) * 0.5f);
  }
  float4 _203 = SrcImage.Load(int3(_162, _39, 0));
  float _207 = max(0.0f, _203.x);
  float _208 = max(0.0f, _203.y);
  float _209 = max(0.0f, _203.z);
  if (_207 > 1.0f) {
    _220 = ((log2(_207 + -0.2846689224243164f) * 0.12395743280649185f) + 0.5599107146263123f);
  } else {
    _220 = (sqrt(_207) * 0.5f);
  }
  if (_208 > 1.0f) {
    _231 = ((log2(_208 + -0.2846689224243164f) * 0.12395743280649185f) + 0.5599107146263123f);
  } else {
    _231 = (sqrt(_208) * 0.5f);
  }
  if (_209 > 1.0f) {
    _242 = ((log2(_209 + -0.2846689224243164f) * 0.12395743280649185f) + 0.5599107146263123f);
  } else {
    _242 = (sqrt(_209) * 0.5f);
  }
  uint _243 = _38 + 2u;
  float4 _244 = SrcImage.Load(int3(_243, _39, 0));
  float _248 = max(0.0f, _244.x);
  float _249 = max(0.0f, _244.y);
  float _250 = max(0.0f, _244.z);
  if (_248 > 1.0f) {
    _261 = ((log2(_248 + -0.2846689224243164f) * 0.12395743280649185f) + 0.5599107146263123f);
  } else {
    _261 = (sqrt(_248) * 0.5f);
  }
  if (_249 > 1.0f) {
    _272 = ((log2(_249 + -0.2846689224243164f) * 0.12395743280649185f) + 0.5599107146263123f);
  } else {
    _272 = (sqrt(_249) * 0.5f);
  }
  if (_250 > 1.0f) {
    _283 = ((log2(_250 + -0.2846689224243164f) * 0.12395743280649185f) + 0.5599107146263123f);
  } else {
    _283 = (sqrt(_250) * 0.5f);
  }
  uint _284 = _39 + 1u;
  float4 _285 = SrcImage.Load(int3(_81, _284, 0));
  float _289 = max(0.0f, _285.x);
  float _290 = max(0.0f, _285.y);
  float _291 = max(0.0f, _285.z);
  if (_289 > 1.0f) {
    _302 = ((log2(_289 + -0.2846689224243164f) * 0.12395743280649185f) + 0.5599107146263123f);
  } else {
    _302 = (sqrt(_289) * 0.5f);
  }
  if (_290 > 1.0f) {
    _313 = ((log2(_290 + -0.2846689224243164f) * 0.12395743280649185f) + 0.5599107146263123f);
  } else {
    _313 = (sqrt(_290) * 0.5f);
  }
  if (_291 > 1.0f) {
    _324 = ((log2(_291 + -0.2846689224243164f) * 0.12395743280649185f) + 0.5599107146263123f);
  } else {
    _324 = (sqrt(_291) * 0.5f);
  }
  float4 _325 = SrcImage.Load(int3(_38, _284, 0));
  float _329 = max(0.0f, _325.x);
  float _330 = max(0.0f, _325.y);
  float _331 = max(0.0f, _325.z);
  if (_329 > 1.0f) {
    _342 = ((log2(_329 + -0.2846689224243164f) * 0.12395743280649185f) + 0.5599107146263123f);
  } else {
    _342 = (sqrt(_329) * 0.5f);
  }
  if (_330 > 1.0f) {
    _353 = ((log2(_330 + -0.2846689224243164f) * 0.12395743280649185f) + 0.5599107146263123f);
  } else {
    _353 = (sqrt(_330) * 0.5f);
  }
  if (_331 > 1.0f) {
    _364 = ((log2(_331 + -0.2846689224243164f) * 0.12395743280649185f) + 0.5599107146263123f);
  } else {
    _364 = (sqrt(_331) * 0.5f);
  }
  uint _365 = _39 + 2u;
  float4 _366 = SrcImage.Load(int3(_38, _365, 0));
  float _370 = max(0.0f, _366.x);
  float _371 = max(0.0f, _366.y);
  float _372 = max(0.0f, _366.z);
  if (_370 > 1.0f) {
    _383 = ((log2(_370 + -0.2846689224243164f) * 0.12395743280649185f) + 0.5599107146263123f);
  } else {
    _383 = (sqrt(_370) * 0.5f);
  }
  if (_371 > 1.0f) {
    _394 = ((log2(_371 + -0.2846689224243164f) * 0.12395743280649185f) + 0.5599107146263123f);
  } else {
    _394 = (sqrt(_371) * 0.5f);
  }
  if (_372 > 1.0f) {
    _405 = ((log2(_372 + -0.2846689224243164f) * 0.12395743280649185f) + 0.5599107146263123f);
  } else {
    _405 = (sqrt(_372) * 0.5f);
  }
  float4 _406 = SrcImage.Load(int3(_162, _284, 0));
  float _410 = max(0.0f, _406.x);
  float _411 = max(0.0f, _406.y);
  float _412 = max(0.0f, _406.z);
  if (_410 > 1.0f) {
    _423 = ((log2(_410 + -0.2846689224243164f) * 0.12395743280649185f) + 0.5599107146263123f);
  } else {
    _423 = (sqrt(_410) * 0.5f);
  }
  if (_411 > 1.0f) {
    _434 = ((log2(_411 + -0.2846689224243164f) * 0.12395743280649185f) + 0.5599107146263123f);
  } else {
    _434 = (sqrt(_411) * 0.5f);
  }
  if (_412 > 1.0f) {
    _445 = ((log2(_412 + -0.2846689224243164f) * 0.12395743280649185f) + 0.5599107146263123f);
  } else {
    _445 = (sqrt(_412) * 0.5f);
  }
  float4 _446 = SrcImage.Load(int3(_243, _284, 0));
  float _450 = max(0.0f, _446.x);
  float _451 = max(0.0f, _446.y);
  float _452 = max(0.0f, _446.z);
  if (_450 > 1.0f) {
    _463 = ((log2(_450 + -0.2846689224243164f) * 0.12395743280649185f) + 0.5599107146263123f);
  } else {
    _463 = (sqrt(_450) * 0.5f);
  }
  if (_451 > 1.0f) {
    _474 = ((log2(_451 + -0.2846689224243164f) * 0.12395743280649185f) + 0.5599107146263123f);
  } else {
    _474 = (sqrt(_451) * 0.5f);
  }
  if (_452 > 1.0f) {
    _485 = ((log2(_452 + -0.2846689224243164f) * 0.12395743280649185f) + 0.5599107146263123f);
  } else {
    _485 = (sqrt(_452) * 0.5f);
  }
  float4 _486 = SrcImage.Load(int3(_162, _365, 0));
  float _490 = max(0.0f, _486.x);
  float _491 = max(0.0f, _486.y);
  float _492 = max(0.0f, _486.z);
  if (_490 > 1.0f) {
    _503 = ((log2(_490 + -0.2846689224243164f) * 0.12395743280649185f) + 0.5599107146263123f);
  } else {
    _503 = (sqrt(_490) * 0.5f);
  }
  if (_491 > 1.0f) {
    _514 = ((log2(_491 + -0.2846689224243164f) * 0.12395743280649185f) + 0.5599107146263123f);
  } else {
    _514 = (sqrt(_491) * 0.5f);
  }
  if (_492 > 1.0f) {
    _525 = ((log2(_492 + -0.2846689224243164f) * 0.12395743280649185f) + 0.5599107146263123f);
  } else {
    _525 = (sqrt(_492) * 0.5f);
  }
  float _529 = min(min(min(min(_69, _110), _150), _231), _353);
  float _533 = max(max(max(max(_69, _110), _150), _231), _353);
  float _537 = min(min(min(min(_191, _150), _231), _272), _434);
  float _541 = max(max(max(max(_191, _150), _231), _272), _434);
  float _545 = min(min(min(min(_150, _313), _353), _434), _394);
  float _549 = max(max(max(max(_150, _313), _353), _434), _394);
  float _553 = min(min(min(min(_231, _353), _434), _474), _514);
  float _557 = max(max(max(max(_231, _353), _434), _474), _514);
  float _602 = asfloat(const1.x);
  float _607 = 1.0f - _36;
  float _608 = 1.0f - _37;
  float _618 = (_607 * _608) * asfloat(((uint)(2129690299u - (int)(asint(((0.03125f - _529) + _533))))));
  float _624 = (_608 * _36) * asfloat(((uint)(2129690299u - (int)(asint(((0.03125f - _537) + _541))))));
  float _630 = (_607 * _37) * asfloat(((uint)(2129690299u - (int)(asint(((0.03125f - _545) + _549))))));
  float _636 = (_36 * _37) * asfloat(((uint)(2129690299u - (int)(asint(((0.03125f - _553) + _557))))));
  float _637 = (asfloat(((uint)(((int)((uint)((int)(asint(saturate(min(_529, (1.0f - _533)) * asfloat(((uint)(2129690299u - (int)(asint(_533))))))))) >> 1)) + 532432441u))) * _602) * _618;
  float _638 = (asfloat(((uint)(((int)((uint)((int)(asint(saturate(min(_537, (1.0f - _541)) * asfloat(((uint)(2129690299u - (int)(asint(_541))))))))) >> 1)) + 532432441u))) * _602) * _624;
  float _639 = (asfloat(((uint)(((int)((uint)((int)(asint(saturate(min(_545, (1.0f - _549)) * asfloat(((uint)(2129690299u - (int)(asint(_549))))))))) >> 1)) + 532432441u))) * _602) * _630;
  float _641 = (_638 + _618) + _639;
  float _642 = (asfloat(((uint)(((int)((uint)((int)(asint(saturate(min(_553, (1.0f - _557)) * asfloat(((uint)(2129690299u - (int)(asint(_557))))))))) >> 1)) + 532432441u))) * _602) * _636;
  float _644 = (_637 + _624) + _642;
  float _646 = (_637 + _630) + _642;
  float _648 = (_638 + _636) + _639;
  float _656 = (((_648 + _641) + ((((_638 + _637) + _639) + _642) * 2.0f)) + _644) + _646;
  float _659 = asfloat(((uint)(2129764351u - (int)(asint(_656)))));
  float _662 = (2.0f - (_659 * _656)) * _659;
  float _683 = saturate(_662 * ((((((((_641 * _139) + (_637 * (_99 + _58))) + (_648 * _423)) + (_644 * _220)) + (_646 * _342)) + (_642 * (_503 + _463))) + (_639 * (_383 + _302))) + (_638 * (_261 + _180))));
  float _704 = saturate(_662 * ((((((((_641 * _150) + (_637 * (_110 + _69))) + (_648 * _434)) + (_644 * _231)) + (_646 * _353)) + (_642 * (_514 + _474))) + (_639 * (_394 + _313))) + (_638 * (_272 + _191))));
  float _725 = saturate(_662 * ((((((((_641 * _161) + (_637 * (_121 + _80))) + (_648 * _445)) + (_644 * _242)) + (_646 * _364)) + (_642 * (_525 + _485))) + (_639 * (_405 + _324))) + (_638 * (_283 + _202))));
  if (_683 > 2.0f) {
    _736 = (exp2((_683 + -0.5599107146263123f) * 8.067285537719727f) + 0.2846689224243164f);
  } else {
    _736 = ((_683 * _683) * 4.0f);
  }
  if (_704 > 2.0f) {
    _747 = (exp2((_704 + -0.5599107146263123f) * 8.067285537719727f) + 0.2846689224243164f);
  } else {
    _747 = ((_704 * _704) * 4.0f);
  }
  if (_725 > 2.0f) {
    _758 = (exp2((_725 + -0.5599107146263123f) * 8.067285537719727f) + 0.2846689224243164f);
  } else {
    _758 = ((_725 * _725) * 4.0f);
  }
  OutputImage[int2(_15, _16)] = float4(_736, _747, _758, 1.0f);
  int _759 = _15 | 8;
  float _767 = float((uint)_759);
  float _774 = (asfloat(const0.x) * _767) + asfloat(const0.z);
  float _775 = (asfloat(const0.y) * _25) + asfloat(const0.w);
  float _776 = floor(_774);
  float _777 = floor(_775);
  float _778 = _774 - _776;
  float _779 = _775 - _777;
  int _780 = int(_776);
  int _781 = int(_777);
  uint _782 = _781 + -1u;
  float4 _783 = SrcImage.Load(int3(_780, _782, 0));
  float _787 = max(0.0f, _783.x);
  float _788 = max(0.0f, _783.y);
  float _789 = max(0.0f, _783.z);
  if (_787 > 1.0f) {
    _800 = ((log2(_787 + -0.2846689224243164f) * 0.12395743280649185f) + 0.5599107146263123f);
  } else {
    _800 = (sqrt(_787) * 0.5f);
  }
  if (_788 > 1.0f) {
    _811 = ((log2(_788 + -0.2846689224243164f) * 0.12395743280649185f) + 0.5599107146263123f);
  } else {
    _811 = (sqrt(_788) * 0.5f);
  }
  if (_789 > 1.0f) {
    _822 = ((log2(_789 + -0.2846689224243164f) * 0.12395743280649185f) + 0.5599107146263123f);
  } else {
    _822 = (sqrt(_789) * 0.5f);
  }
  uint _823 = _780 + -1u;
  float4 _824 = SrcImage.Load(int3(_823, _781, 0));
  float _828 = max(0.0f, _824.x);
  float _829 = max(0.0f, _824.y);
  float _830 = max(0.0f, _824.z);
  if (_828 > 1.0f) {
    _841 = ((log2(_828 + -0.2846689224243164f) * 0.12395743280649185f) + 0.5599107146263123f);
  } else {
    _841 = (sqrt(_828) * 0.5f);
  }
  if (_829 > 1.0f) {
    _852 = ((log2(_829 + -0.2846689224243164f) * 0.12395743280649185f) + 0.5599107146263123f);
  } else {
    _852 = (sqrt(_829) * 0.5f);
  }
  if (_830 > 1.0f) {
    _863 = ((log2(_830 + -0.2846689224243164f) * 0.12395743280649185f) + 0.5599107146263123f);
  } else {
    _863 = (sqrt(_830) * 0.5f);
  }
  float4 _864 = SrcImage.Load(int3(_780, _781, 0));
  float _868 = max(0.0f, _864.x);
  float _869 = max(0.0f, _864.y);
  float _870 = max(0.0f, _864.z);
  if (_868 > 1.0f) {
    _881 = ((log2(_868 + -0.2846689224243164f) * 0.12395743280649185f) + 0.5599107146263123f);
  } else {
    _881 = (sqrt(_868) * 0.5f);
  }
  if (_869 > 1.0f) {
    _892 = ((log2(_869 + -0.2846689224243164f) * 0.12395743280649185f) + 0.5599107146263123f);
  } else {
    _892 = (sqrt(_869) * 0.5f);
  }
  if (_870 > 1.0f) {
    _903 = ((log2(_870 + -0.2846689224243164f) * 0.12395743280649185f) + 0.5599107146263123f);
  } else {
    _903 = (sqrt(_870) * 0.5f);
  }
  uint _904 = _780 + 1u;
  float4 _905 = SrcImage.Load(int3(_904, _782, 0));
  float _909 = max(0.0f, _905.x);
  float _910 = max(0.0f, _905.y);
  float _911 = max(0.0f, _905.z);
  if (_909 > 1.0f) {
    _922 = ((log2(_909 + -0.2846689224243164f) * 0.12395743280649185f) + 0.5599107146263123f);
  } else {
    _922 = (sqrt(_909) * 0.5f);
  }
  if (_910 > 1.0f) {
    _933 = ((log2(_910 + -0.2846689224243164f) * 0.12395743280649185f) + 0.5599107146263123f);
  } else {
    _933 = (sqrt(_910) * 0.5f);
  }
  if (_911 > 1.0f) {
    _944 = ((log2(_911 + -0.2846689224243164f) * 0.12395743280649185f) + 0.5599107146263123f);
  } else {
    _944 = (sqrt(_911) * 0.5f);
  }
  float4 _945 = SrcImage.Load(int3(_904, _781, 0));
  float _949 = max(0.0f, _945.x);
  float _950 = max(0.0f, _945.y);
  float _951 = max(0.0f, _945.z);
  if (_949 > 1.0f) {
    _962 = ((log2(_949 + -0.2846689224243164f) * 0.12395743280649185f) + 0.5599107146263123f);
  } else {
    _962 = (sqrt(_949) * 0.5f);
  }
  if (_950 > 1.0f) {
    _973 = ((log2(_950 + -0.2846689224243164f) * 0.12395743280649185f) + 0.5599107146263123f);
  } else {
    _973 = (sqrt(_950) * 0.5f);
  }
  if (_951 > 1.0f) {
    _984 = ((log2(_951 + -0.2846689224243164f) * 0.12395743280649185f) + 0.5599107146263123f);
  } else {
    _984 = (sqrt(_951) * 0.5f);
  }
  uint _985 = _780 + 2u;
  float4 _986 = SrcImage.Load(int3(_985, _781, 0));
  float _990 = max(0.0f, _986.x);
  float _991 = max(0.0f, _986.y);
  float _992 = max(0.0f, _986.z);
  if (_990 > 1.0f) {
    _1003 = ((log2(_990 + -0.2846689224243164f) * 0.12395743280649185f) + 0.5599107146263123f);
  } else {
    _1003 = (sqrt(_990) * 0.5f);
  }
  if (_991 > 1.0f) {
    _1014 = ((log2(_991 + -0.2846689224243164f) * 0.12395743280649185f) + 0.5599107146263123f);
  } else {
    _1014 = (sqrt(_991) * 0.5f);
  }
  if (_992 > 1.0f) {
    _1025 = ((log2(_992 + -0.2846689224243164f) * 0.12395743280649185f) + 0.5599107146263123f);
  } else {
    _1025 = (sqrt(_992) * 0.5f);
  }
  uint _1026 = _781 + 1u;
  float4 _1027 = SrcImage.Load(int3(_823, _1026, 0));
  float _1031 = max(0.0f, _1027.x);
  float _1032 = max(0.0f, _1027.y);
  float _1033 = max(0.0f, _1027.z);
  if (_1031 > 1.0f) {
    _1044 = ((log2(_1031 + -0.2846689224243164f) * 0.12395743280649185f) + 0.5599107146263123f);
  } else {
    _1044 = (sqrt(_1031) * 0.5f);
  }
  if (_1032 > 1.0f) {
    _1055 = ((log2(_1032 + -0.2846689224243164f) * 0.12395743280649185f) + 0.5599107146263123f);
  } else {
    _1055 = (sqrt(_1032) * 0.5f);
  }
  if (_1033 > 1.0f) {
    _1066 = ((log2(_1033 + -0.2846689224243164f) * 0.12395743280649185f) + 0.5599107146263123f);
  } else {
    _1066 = (sqrt(_1033) * 0.5f);
  }
  float4 _1067 = SrcImage.Load(int3(_780, _1026, 0));
  float _1071 = max(0.0f, _1067.x);
  float _1072 = max(0.0f, _1067.y);
  float _1073 = max(0.0f, _1067.z);
  if (_1071 > 1.0f) {
    _1084 = ((log2(_1071 + -0.2846689224243164f) * 0.12395743280649185f) + 0.5599107146263123f);
  } else {
    _1084 = (sqrt(_1071) * 0.5f);
  }
  if (_1072 > 1.0f) {
    _1095 = ((log2(_1072 + -0.2846689224243164f) * 0.12395743280649185f) + 0.5599107146263123f);
  } else {
    _1095 = (sqrt(_1072) * 0.5f);
  }
  if (_1073 > 1.0f) {
    _1106 = ((log2(_1073 + -0.2846689224243164f) * 0.12395743280649185f) + 0.5599107146263123f);
  } else {
    _1106 = (sqrt(_1073) * 0.5f);
  }
  uint _1107 = _781 + 2u;
  float4 _1108 = SrcImage.Load(int3(_780, _1107, 0));
  float _1112 = max(0.0f, _1108.x);
  float _1113 = max(0.0f, _1108.y);
  float _1114 = max(0.0f, _1108.z);
  if (_1112 > 1.0f) {
    _1125 = ((log2(_1112 + -0.2846689224243164f) * 0.12395743280649185f) + 0.5599107146263123f);
  } else {
    _1125 = (sqrt(_1112) * 0.5f);
  }
  if (_1113 > 1.0f) {
    _1136 = ((log2(_1113 + -0.2846689224243164f) * 0.12395743280649185f) + 0.5599107146263123f);
  } else {
    _1136 = (sqrt(_1113) * 0.5f);
  }
  if (_1114 > 1.0f) {
    _1147 = ((log2(_1114 + -0.2846689224243164f) * 0.12395743280649185f) + 0.5599107146263123f);
  } else {
    _1147 = (sqrt(_1114) * 0.5f);
  }
  float4 _1148 = SrcImage.Load(int3(_904, _1026, 0));
  float _1152 = max(0.0f, _1148.x);
  float _1153 = max(0.0f, _1148.y);
  float _1154 = max(0.0f, _1148.z);
  if (_1152 > 1.0f) {
    _1165 = ((log2(_1152 + -0.2846689224243164f) * 0.12395743280649185f) + 0.5599107146263123f);
  } else {
    _1165 = (sqrt(_1152) * 0.5f);
  }
  if (_1153 > 1.0f) {
    _1176 = ((log2(_1153 + -0.2846689224243164f) * 0.12395743280649185f) + 0.5599107146263123f);
  } else {
    _1176 = (sqrt(_1153) * 0.5f);
  }
  if (_1154 > 1.0f) {
    _1187 = ((log2(_1154 + -0.2846689224243164f) * 0.12395743280649185f) + 0.5599107146263123f);
  } else {
    _1187 = (sqrt(_1154) * 0.5f);
  }
  float4 _1188 = SrcImage.Load(int3(_985, _1026, 0));
  float _1192 = max(0.0f, _1188.x);
  float _1193 = max(0.0f, _1188.y);
  float _1194 = max(0.0f, _1188.z);
  if (_1192 > 1.0f) {
    _1205 = ((log2(_1192 + -0.2846689224243164f) * 0.12395743280649185f) + 0.5599107146263123f);
  } else {
    _1205 = (sqrt(_1192) * 0.5f);
  }
  if (_1193 > 1.0f) {
    _1216 = ((log2(_1193 + -0.2846689224243164f) * 0.12395743280649185f) + 0.5599107146263123f);
  } else {
    _1216 = (sqrt(_1193) * 0.5f);
  }
  if (_1194 > 1.0f) {
    _1227 = ((log2(_1194 + -0.2846689224243164f) * 0.12395743280649185f) + 0.5599107146263123f);
  } else {
    _1227 = (sqrt(_1194) * 0.5f);
  }
  float4 _1228 = SrcImage.Load(int3(_904, _1107, 0));
  float _1232 = max(0.0f, _1228.x);
  float _1233 = max(0.0f, _1228.y);
  float _1234 = max(0.0f, _1228.z);
  if (_1232 > 1.0f) {
    _1245 = ((log2(_1232 + -0.2846689224243164f) * 0.12395743280649185f) + 0.5599107146263123f);
  } else {
    _1245 = (sqrt(_1232) * 0.5f);
  }
  if (_1233 > 1.0f) {
    _1256 = ((log2(_1233 + -0.2846689224243164f) * 0.12395743280649185f) + 0.5599107146263123f);
  } else {
    _1256 = (sqrt(_1233) * 0.5f);
  }
  if (_1234 > 1.0f) {
    _1267 = ((log2(_1234 + -0.2846689224243164f) * 0.12395743280649185f) + 0.5599107146263123f);
  } else {
    _1267 = (sqrt(_1234) * 0.5f);
  }
  float _1271 = min(min(min(min(_811, _852), _892), _973), _1095);
  float _1275 = max(max(max(max(_811, _852), _892), _973), _1095);
  float _1279 = min(min(min(min(_933, _892), _973), _1014), _1176);
  float _1283 = max(max(max(max(_933, _892), _973), _1014), _1176);
  float _1287 = min(min(min(min(_892, _1055), _1095), _1176), _1136);
  float _1291 = max(max(max(max(_892, _1055), _1095), _1176), _1136);
  float _1295 = min(min(min(min(_973, _1095), _1176), _1216), _1256);
  float _1299 = max(max(max(max(_973, _1095), _1176), _1216), _1256);
  float _1344 = asfloat(const1.x);
  float _1349 = 1.0f - _778;
  float _1350 = 1.0f - _779;
  float _1360 = (_1349 * _1350) * asfloat(((uint)(2129690299u - (int)(asint(((0.03125f - _1271) + _1275))))));
  float _1366 = (_1350 * _778) * asfloat(((uint)(2129690299u - (int)(asint(((0.03125f - _1279) + _1283))))));
  float _1372 = (_1349 * _779) * asfloat(((uint)(2129690299u - (int)(asint(((0.03125f - _1287) + _1291))))));
  float _1378 = (_778 * _779) * asfloat(((uint)(2129690299u - (int)(asint(((0.03125f - _1295) + _1299))))));
  float _1379 = (asfloat(((uint)(((int)((uint)((int)(asint(saturate(min(_1271, (1.0f - _1275)) * asfloat(((uint)(2129690299u - (int)(asint(_1275))))))))) >> 1)) + 532432441u))) * _1344) * _1360;
  float _1380 = (asfloat(((uint)(((int)((uint)((int)(asint(saturate(min(_1279, (1.0f - _1283)) * asfloat(((uint)(2129690299u - (int)(asint(_1283))))))))) >> 1)) + 532432441u))) * _1344) * _1366;
  float _1381 = (asfloat(((uint)(((int)((uint)((int)(asint(saturate(min(_1287, (1.0f - _1291)) * asfloat(((uint)(2129690299u - (int)(asint(_1291))))))))) >> 1)) + 532432441u))) * _1344) * _1372;
  float _1383 = (_1380 + _1360) + _1381;
  float _1384 = (asfloat(((uint)(((int)((uint)((int)(asint(saturate(min(_1295, (1.0f - _1299)) * asfloat(((uint)(2129690299u - (int)(asint(_1299))))))))) >> 1)) + 532432441u))) * _1344) * _1378;
  float _1386 = (_1379 + _1366) + _1384;
  float _1388 = (_1379 + _1372) + _1384;
  float _1390 = (_1380 + _1378) + _1381;
  float _1398 = (((_1390 + _1383) + ((((_1380 + _1379) + _1381) + _1384) * 2.0f)) + _1386) + _1388;
  float _1401 = asfloat(((uint)(2129764351u - (int)(asint(_1398)))));
  float _1404 = (2.0f - (_1401 * _1398)) * _1401;
  float _1425 = saturate(_1404 * ((((((((_1383 * _881) + (_1379 * (_841 + _800))) + (_1390 * _1165)) + (_1386 * _962)) + (_1388 * _1084)) + (_1384 * (_1245 + _1205))) + (_1381 * (_1125 + _1044))) + (_1380 * (_1003 + _922))));
  float _1446 = saturate(_1404 * ((((((((_1383 * _892) + (_1379 * (_852 + _811))) + (_1390 * _1176)) + (_1386 * _973)) + (_1388 * _1095)) + (_1384 * (_1256 + _1216))) + (_1381 * (_1136 + _1055))) + (_1380 * (_1014 + _933))));
  float _1467 = saturate(_1404 * ((((((((_1383 * _903) + (_1379 * (_863 + _822))) + (_1390 * _1187)) + (_1386 * _984)) + (_1388 * _1106)) + (_1384 * (_1267 + _1227))) + (_1381 * (_1147 + _1066))) + (_1380 * (_1025 + _944))));
  if (_1425 > 2.0f) {
    _1478 = (exp2((_1425 + -0.5599107146263123f) * 8.067285537719727f) + 0.2846689224243164f);
  } else {
    _1478 = ((_1425 * _1425) * 4.0f);
  }
  if (_1446 > 2.0f) {
    _1489 = (exp2((_1446 + -0.5599107146263123f) * 8.067285537719727f) + 0.2846689224243164f);
  } else {
    _1489 = ((_1446 * _1446) * 4.0f);
  }
  if (_1467 > 2.0f) {
    _1500 = (exp2((_1467 + -0.5599107146263123f) * 8.067285537719727f) + 0.2846689224243164f);
  } else {
    _1500 = ((_1467 * _1467) * 4.0f);
  }
  OutputImage[int2(_759, _16)] = float4(_1478, _1489, _1500, 1.0f);
  int _1501 = _16 | 8;
  float _1509 = float((uint)_1501);
  float _1516 = (asfloat(const0.x) * _767) + asfloat(const0.z);
  float _1517 = (asfloat(const0.y) * _1509) + asfloat(const0.w);
  float _1518 = floor(_1516);
  float _1519 = floor(_1517);
  float _1520 = _1516 - _1518;
  float _1521 = _1517 - _1519;
  int _1522 = int(_1518);
  int _1523 = int(_1519);
  uint _1524 = _1523 + -1u;
  float4 _1525 = SrcImage.Load(int3(_1522, _1524, 0));
  float _1529 = max(0.0f, _1525.x);
  float _1530 = max(0.0f, _1525.y);
  float _1531 = max(0.0f, _1525.z);
  if (_1529 > 1.0f) {
    _1542 = ((log2(_1529 + -0.2846689224243164f) * 0.12395743280649185f) + 0.5599107146263123f);
  } else {
    _1542 = (sqrt(_1529) * 0.5f);
  }
  if (_1530 > 1.0f) {
    _1553 = ((log2(_1530 + -0.2846689224243164f) * 0.12395743280649185f) + 0.5599107146263123f);
  } else {
    _1553 = (sqrt(_1530) * 0.5f);
  }
  if (_1531 > 1.0f) {
    _1564 = ((log2(_1531 + -0.2846689224243164f) * 0.12395743280649185f) + 0.5599107146263123f);
  } else {
    _1564 = (sqrt(_1531) * 0.5f);
  }
  uint _1565 = _1522 + -1u;
  float4 _1566 = SrcImage.Load(int3(_1565, _1523, 0));
  float _1570 = max(0.0f, _1566.x);
  float _1571 = max(0.0f, _1566.y);
  float _1572 = max(0.0f, _1566.z);
  if (_1570 > 1.0f) {
    _1583 = ((log2(_1570 + -0.2846689224243164f) * 0.12395743280649185f) + 0.5599107146263123f);
  } else {
    _1583 = (sqrt(_1570) * 0.5f);
  }
  if (_1571 > 1.0f) {
    _1594 = ((log2(_1571 + -0.2846689224243164f) * 0.12395743280649185f) + 0.5599107146263123f);
  } else {
    _1594 = (sqrt(_1571) * 0.5f);
  }
  if (_1572 > 1.0f) {
    _1605 = ((log2(_1572 + -0.2846689224243164f) * 0.12395743280649185f) + 0.5599107146263123f);
  } else {
    _1605 = (sqrt(_1572) * 0.5f);
  }
  float4 _1606 = SrcImage.Load(int3(_1522, _1523, 0));
  float _1610 = max(0.0f, _1606.x);
  float _1611 = max(0.0f, _1606.y);
  float _1612 = max(0.0f, _1606.z);
  if (_1610 > 1.0f) {
    _1623 = ((log2(_1610 + -0.2846689224243164f) * 0.12395743280649185f) + 0.5599107146263123f);
  } else {
    _1623 = (sqrt(_1610) * 0.5f);
  }
  if (_1611 > 1.0f) {
    _1634 = ((log2(_1611 + -0.2846689224243164f) * 0.12395743280649185f) + 0.5599107146263123f);
  } else {
    _1634 = (sqrt(_1611) * 0.5f);
  }
  if (_1612 > 1.0f) {
    _1645 = ((log2(_1612 + -0.2846689224243164f) * 0.12395743280649185f) + 0.5599107146263123f);
  } else {
    _1645 = (sqrt(_1612) * 0.5f);
  }
  uint _1646 = _1522 + 1u;
  float4 _1647 = SrcImage.Load(int3(_1646, _1524, 0));
  float _1651 = max(0.0f, _1647.x);
  float _1652 = max(0.0f, _1647.y);
  float _1653 = max(0.0f, _1647.z);
  if (_1651 > 1.0f) {
    _1664 = ((log2(_1651 + -0.2846689224243164f) * 0.12395743280649185f) + 0.5599107146263123f);
  } else {
    _1664 = (sqrt(_1651) * 0.5f);
  }
  if (_1652 > 1.0f) {
    _1675 = ((log2(_1652 + -0.2846689224243164f) * 0.12395743280649185f) + 0.5599107146263123f);
  } else {
    _1675 = (sqrt(_1652) * 0.5f);
  }
  if (_1653 > 1.0f) {
    _1686 = ((log2(_1653 + -0.2846689224243164f) * 0.12395743280649185f) + 0.5599107146263123f);
  } else {
    _1686 = (sqrt(_1653) * 0.5f);
  }
  float4 _1687 = SrcImage.Load(int3(_1646, _1523, 0));
  float _1691 = max(0.0f, _1687.x);
  float _1692 = max(0.0f, _1687.y);
  float _1693 = max(0.0f, _1687.z);
  if (_1691 > 1.0f) {
    _1704 = ((log2(_1691 + -0.2846689224243164f) * 0.12395743280649185f) + 0.5599107146263123f);
  } else {
    _1704 = (sqrt(_1691) * 0.5f);
  }
  if (_1692 > 1.0f) {
    _1715 = ((log2(_1692 + -0.2846689224243164f) * 0.12395743280649185f) + 0.5599107146263123f);
  } else {
    _1715 = (sqrt(_1692) * 0.5f);
  }
  if (_1693 > 1.0f) {
    _1726 = ((log2(_1693 + -0.2846689224243164f) * 0.12395743280649185f) + 0.5599107146263123f);
  } else {
    _1726 = (sqrt(_1693) * 0.5f);
  }
  uint _1727 = _1522 + 2u;
  float4 _1728 = SrcImage.Load(int3(_1727, _1523, 0));
  float _1732 = max(0.0f, _1728.x);
  float _1733 = max(0.0f, _1728.y);
  float _1734 = max(0.0f, _1728.z);
  if (_1732 > 1.0f) {
    _1745 = ((log2(_1732 + -0.2846689224243164f) * 0.12395743280649185f) + 0.5599107146263123f);
  } else {
    _1745 = (sqrt(_1732) * 0.5f);
  }
  if (_1733 > 1.0f) {
    _1756 = ((log2(_1733 + -0.2846689224243164f) * 0.12395743280649185f) + 0.5599107146263123f);
  } else {
    _1756 = (sqrt(_1733) * 0.5f);
  }
  if (_1734 > 1.0f) {
    _1767 = ((log2(_1734 + -0.2846689224243164f) * 0.12395743280649185f) + 0.5599107146263123f);
  } else {
    _1767 = (sqrt(_1734) * 0.5f);
  }
  uint _1768 = _1523 + 1u;
  float4 _1769 = SrcImage.Load(int3(_1565, _1768, 0));
  float _1773 = max(0.0f, _1769.x);
  float _1774 = max(0.0f, _1769.y);
  float _1775 = max(0.0f, _1769.z);
  if (_1773 > 1.0f) {
    _1786 = ((log2(_1773 + -0.2846689224243164f) * 0.12395743280649185f) + 0.5599107146263123f);
  } else {
    _1786 = (sqrt(_1773) * 0.5f);
  }
  if (_1774 > 1.0f) {
    _1797 = ((log2(_1774 + -0.2846689224243164f) * 0.12395743280649185f) + 0.5599107146263123f);
  } else {
    _1797 = (sqrt(_1774) * 0.5f);
  }
  if (_1775 > 1.0f) {
    _1808 = ((log2(_1775 + -0.2846689224243164f) * 0.12395743280649185f) + 0.5599107146263123f);
  } else {
    _1808 = (sqrt(_1775) * 0.5f);
  }
  float4 _1809 = SrcImage.Load(int3(_1522, _1768, 0));
  float _1813 = max(0.0f, _1809.x);
  float _1814 = max(0.0f, _1809.y);
  float _1815 = max(0.0f, _1809.z);
  if (_1813 > 1.0f) {
    _1826 = ((log2(_1813 + -0.2846689224243164f) * 0.12395743280649185f) + 0.5599107146263123f);
  } else {
    _1826 = (sqrt(_1813) * 0.5f);
  }
  if (_1814 > 1.0f) {
    _1837 = ((log2(_1814 + -0.2846689224243164f) * 0.12395743280649185f) + 0.5599107146263123f);
  } else {
    _1837 = (sqrt(_1814) * 0.5f);
  }
  if (_1815 > 1.0f) {
    _1848 = ((log2(_1815 + -0.2846689224243164f) * 0.12395743280649185f) + 0.5599107146263123f);
  } else {
    _1848 = (sqrt(_1815) * 0.5f);
  }
  uint _1849 = _1523 + 2u;
  float4 _1850 = SrcImage.Load(int3(_1522, _1849, 0));
  float _1854 = max(0.0f, _1850.x);
  float _1855 = max(0.0f, _1850.y);
  float _1856 = max(0.0f, _1850.z);
  if (_1854 > 1.0f) {
    _1867 = ((log2(_1854 + -0.2846689224243164f) * 0.12395743280649185f) + 0.5599107146263123f);
  } else {
    _1867 = (sqrt(_1854) * 0.5f);
  }
  if (_1855 > 1.0f) {
    _1878 = ((log2(_1855 + -0.2846689224243164f) * 0.12395743280649185f) + 0.5599107146263123f);
  } else {
    _1878 = (sqrt(_1855) * 0.5f);
  }
  if (_1856 > 1.0f) {
    _1889 = ((log2(_1856 + -0.2846689224243164f) * 0.12395743280649185f) + 0.5599107146263123f);
  } else {
    _1889 = (sqrt(_1856) * 0.5f);
  }
  float4 _1890 = SrcImage.Load(int3(_1646, _1768, 0));
  float _1894 = max(0.0f, _1890.x);
  float _1895 = max(0.0f, _1890.y);
  float _1896 = max(0.0f, _1890.z);
  if (_1894 > 1.0f) {
    _1907 = ((log2(_1894 + -0.2846689224243164f) * 0.12395743280649185f) + 0.5599107146263123f);
  } else {
    _1907 = (sqrt(_1894) * 0.5f);
  }
  if (_1895 > 1.0f) {
    _1918 = ((log2(_1895 + -0.2846689224243164f) * 0.12395743280649185f) + 0.5599107146263123f);
  } else {
    _1918 = (sqrt(_1895) * 0.5f);
  }
  if (_1896 > 1.0f) {
    _1929 = ((log2(_1896 + -0.2846689224243164f) * 0.12395743280649185f) + 0.5599107146263123f);
  } else {
    _1929 = (sqrt(_1896) * 0.5f);
  }
  float4 _1930 = SrcImage.Load(int3(_1727, _1768, 0));
  float _1934 = max(0.0f, _1930.x);
  float _1935 = max(0.0f, _1930.y);
  float _1936 = max(0.0f, _1930.z);
  if (_1934 > 1.0f) {
    _1947 = ((log2(_1934 + -0.2846689224243164f) * 0.12395743280649185f) + 0.5599107146263123f);
  } else {
    _1947 = (sqrt(_1934) * 0.5f);
  }
  if (_1935 > 1.0f) {
    _1958 = ((log2(_1935 + -0.2846689224243164f) * 0.12395743280649185f) + 0.5599107146263123f);
  } else {
    _1958 = (sqrt(_1935) * 0.5f);
  }
  if (_1936 > 1.0f) {
    _1969 = ((log2(_1936 + -0.2846689224243164f) * 0.12395743280649185f) + 0.5599107146263123f);
  } else {
    _1969 = (sqrt(_1936) * 0.5f);
  }
  float4 _1970 = SrcImage.Load(int3(_1646, _1849, 0));
  float _1974 = max(0.0f, _1970.x);
  float _1975 = max(0.0f, _1970.y);
  float _1976 = max(0.0f, _1970.z);
  if (_1974 > 1.0f) {
    _1987 = ((log2(_1974 + -0.2846689224243164f) * 0.12395743280649185f) + 0.5599107146263123f);
  } else {
    _1987 = (sqrt(_1974) * 0.5f);
  }
  if (_1975 > 1.0f) {
    _1998 = ((log2(_1975 + -0.2846689224243164f) * 0.12395743280649185f) + 0.5599107146263123f);
  } else {
    _1998 = (sqrt(_1975) * 0.5f);
  }
  if (_1976 > 1.0f) {
    _2009 = ((log2(_1976 + -0.2846689224243164f) * 0.12395743280649185f) + 0.5599107146263123f);
  } else {
    _2009 = (sqrt(_1976) * 0.5f);
  }
  float _2013 = min(min(min(min(_1553, _1594), _1634), _1715), _1837);
  float _2017 = max(max(max(max(_1553, _1594), _1634), _1715), _1837);
  float _2021 = min(min(min(min(_1675, _1634), _1715), _1756), _1918);
  float _2025 = max(max(max(max(_1675, _1634), _1715), _1756), _1918);
  float _2029 = min(min(min(min(_1634, _1797), _1837), _1918), _1878);
  float _2033 = max(max(max(max(_1634, _1797), _1837), _1918), _1878);
  float _2037 = min(min(min(min(_1715, _1837), _1918), _1958), _1998);
  float _2041 = max(max(max(max(_1715, _1837), _1918), _1958), _1998);
  float _2086 = asfloat(const1.x);
  float _2091 = 1.0f - _1520;
  float _2092 = 1.0f - _1521;
  float _2102 = (_2091 * _2092) * asfloat(((uint)(2129690299u - (int)(asint(((0.03125f - _2013) + _2017))))));
  float _2108 = (_2092 * _1520) * asfloat(((uint)(2129690299u - (int)(asint(((0.03125f - _2021) + _2025))))));
  float _2114 = (_2091 * _1521) * asfloat(((uint)(2129690299u - (int)(asint(((0.03125f - _2029) + _2033))))));
  float _2120 = (_1520 * _1521) * asfloat(((uint)(2129690299u - (int)(asint(((0.03125f - _2037) + _2041))))));
  float _2121 = (asfloat(((uint)(((int)((uint)((int)(asint(saturate(min(_2013, (1.0f - _2017)) * asfloat(((uint)(2129690299u - (int)(asint(_2017))))))))) >> 1)) + 532432441u))) * _2086) * _2102;
  float _2122 = (asfloat(((uint)(((int)((uint)((int)(asint(saturate(min(_2021, (1.0f - _2025)) * asfloat(((uint)(2129690299u - (int)(asint(_2025))))))))) >> 1)) + 532432441u))) * _2086) * _2108;
  float _2123 = (asfloat(((uint)(((int)((uint)((int)(asint(saturate(min(_2029, (1.0f - _2033)) * asfloat(((uint)(2129690299u - (int)(asint(_2033))))))))) >> 1)) + 532432441u))) * _2086) * _2114;
  float _2125 = (_2122 + _2102) + _2123;
  float _2126 = (asfloat(((uint)(((int)((uint)((int)(asint(saturate(min(_2037, (1.0f - _2041)) * asfloat(((uint)(2129690299u - (int)(asint(_2041))))))))) >> 1)) + 532432441u))) * _2086) * _2120;
  float _2128 = (_2121 + _2108) + _2126;
  float _2130 = (_2121 + _2114) + _2126;
  float _2132 = (_2122 + _2120) + _2123;
  float _2140 = (((_2132 + _2125) + ((((_2122 + _2121) + _2123) + _2126) * 2.0f)) + _2128) + _2130;
  float _2143 = asfloat(((uint)(2129764351u - (int)(asint(_2140)))));
  float _2146 = (2.0f - (_2143 * _2140)) * _2143;
  float _2167 = saturate(_2146 * ((((((((_2125 * _1623) + (_2121 * (_1583 + _1542))) + (_2132 * _1907)) + (_2128 * _1704)) + (_2130 * _1826)) + (_2126 * (_1987 + _1947))) + (_2123 * (_1867 + _1786))) + (_2122 * (_1745 + _1664))));
  float _2188 = saturate(_2146 * ((((((((_2125 * _1634) + (_2121 * (_1594 + _1553))) + (_2132 * _1918)) + (_2128 * _1715)) + (_2130 * _1837)) + (_2126 * (_1998 + _1958))) + (_2123 * (_1878 + _1797))) + (_2122 * (_1756 + _1675))));
  float _2209 = saturate(_2146 * ((((((((_2125 * _1645) + (_2121 * (_1605 + _1564))) + (_2132 * _1929)) + (_2128 * _1726)) + (_2130 * _1848)) + (_2126 * (_2009 + _1969))) + (_2123 * (_1889 + _1808))) + (_2122 * (_1767 + _1686))));
  if (_2167 > 2.0f) {
    _2220 = (exp2((_2167 + -0.5599107146263123f) * 8.067285537719727f) + 0.2846689224243164f);
  } else {
    _2220 = ((_2167 * _2167) * 4.0f);
  }
  if (_2188 > 2.0f) {
    _2231 = (exp2((_2188 + -0.5599107146263123f) * 8.067285537719727f) + 0.2846689224243164f);
  } else {
    _2231 = ((_2188 * _2188) * 4.0f);
  }
  if (_2209 > 2.0f) {
    _2242 = (exp2((_2209 + -0.5599107146263123f) * 8.067285537719727f) + 0.2846689224243164f);
  } else {
    _2242 = ((_2209 * _2209) * 4.0f);
  }
  OutputImage[int2(_759, _1501)] = float4(_2220, _2231, _2242, 1.0f);
  float _2256 = (asfloat(const0.x) * _24) + asfloat(const0.z);
  float _2257 = (asfloat(const0.y) * _1509) + asfloat(const0.w);
  float _2258 = floor(_2256);
  float _2259 = floor(_2257);
  float _2260 = _2256 - _2258;
  float _2261 = _2257 - _2259;
  int _2262 = int(_2258);
  int _2263 = int(_2259);
  uint _2264 = _2263 + -1u;
  float4 _2265 = SrcImage.Load(int3(_2262, _2264, 0));
  float _2269 = max(0.0f, _2265.x);
  float _2270 = max(0.0f, _2265.y);
  float _2271 = max(0.0f, _2265.z);
  if (_2269 > 1.0f) {
    _2282 = ((log2(_2269 + -0.2846689224243164f) * 0.12395743280649185f) + 0.5599107146263123f);
  } else {
    _2282 = (sqrt(_2269) * 0.5f);
  }
  if (_2270 > 1.0f) {
    _2293 = ((log2(_2270 + -0.2846689224243164f) * 0.12395743280649185f) + 0.5599107146263123f);
  } else {
    _2293 = (sqrt(_2270) * 0.5f);
  }
  if (_2271 > 1.0f) {
    _2304 = ((log2(_2271 + -0.2846689224243164f) * 0.12395743280649185f) + 0.5599107146263123f);
  } else {
    _2304 = (sqrt(_2271) * 0.5f);
  }
  uint _2305 = _2262 + -1u;
  float4 _2306 = SrcImage.Load(int3(_2305, _2263, 0));
  float _2310 = max(0.0f, _2306.x);
  float _2311 = max(0.0f, _2306.y);
  float _2312 = max(0.0f, _2306.z);
  if (_2310 > 1.0f) {
    _2323 = ((log2(_2310 + -0.2846689224243164f) * 0.12395743280649185f) + 0.5599107146263123f);
  } else {
    _2323 = (sqrt(_2310) * 0.5f);
  }
  if (_2311 > 1.0f) {
    _2334 = ((log2(_2311 + -0.2846689224243164f) * 0.12395743280649185f) + 0.5599107146263123f);
  } else {
    _2334 = (sqrt(_2311) * 0.5f);
  }
  if (_2312 > 1.0f) {
    _2345 = ((log2(_2312 + -0.2846689224243164f) * 0.12395743280649185f) + 0.5599107146263123f);
  } else {
    _2345 = (sqrt(_2312) * 0.5f);
  }
  float4 _2346 = SrcImage.Load(int3(_2262, _2263, 0));
  float _2350 = max(0.0f, _2346.x);
  float _2351 = max(0.0f, _2346.y);
  float _2352 = max(0.0f, _2346.z);
  if (_2350 > 1.0f) {
    _2363 = ((log2(_2350 + -0.2846689224243164f) * 0.12395743280649185f) + 0.5599107146263123f);
  } else {
    _2363 = (sqrt(_2350) * 0.5f);
  }
  if (_2351 > 1.0f) {
    _2374 = ((log2(_2351 + -0.2846689224243164f) * 0.12395743280649185f) + 0.5599107146263123f);
  } else {
    _2374 = (sqrt(_2351) * 0.5f);
  }
  if (_2352 > 1.0f) {
    _2385 = ((log2(_2352 + -0.2846689224243164f) * 0.12395743280649185f) + 0.5599107146263123f);
  } else {
    _2385 = (sqrt(_2352) * 0.5f);
  }
  uint _2386 = _2262 + 1u;
  float4 _2387 = SrcImage.Load(int3(_2386, _2264, 0));
  float _2391 = max(0.0f, _2387.x);
  float _2392 = max(0.0f, _2387.y);
  float _2393 = max(0.0f, _2387.z);
  if (_2391 > 1.0f) {
    _2404 = ((log2(_2391 + -0.2846689224243164f) * 0.12395743280649185f) + 0.5599107146263123f);
  } else {
    _2404 = (sqrt(_2391) * 0.5f);
  }
  if (_2392 > 1.0f) {
    _2415 = ((log2(_2392 + -0.2846689224243164f) * 0.12395743280649185f) + 0.5599107146263123f);
  } else {
    _2415 = (sqrt(_2392) * 0.5f);
  }
  if (_2393 > 1.0f) {
    _2426 = ((log2(_2393 + -0.2846689224243164f) * 0.12395743280649185f) + 0.5599107146263123f);
  } else {
    _2426 = (sqrt(_2393) * 0.5f);
  }
  float4 _2427 = SrcImage.Load(int3(_2386, _2263, 0));
  float _2431 = max(0.0f, _2427.x);
  float _2432 = max(0.0f, _2427.y);
  float _2433 = max(0.0f, _2427.z);
  if (_2431 > 1.0f) {
    _2444 = ((log2(_2431 + -0.2846689224243164f) * 0.12395743280649185f) + 0.5599107146263123f);
  } else {
    _2444 = (sqrt(_2431) * 0.5f);
  }
  if (_2432 > 1.0f) {
    _2455 = ((log2(_2432 + -0.2846689224243164f) * 0.12395743280649185f) + 0.5599107146263123f);
  } else {
    _2455 = (sqrt(_2432) * 0.5f);
  }
  if (_2433 > 1.0f) {
    _2466 = ((log2(_2433 + -0.2846689224243164f) * 0.12395743280649185f) + 0.5599107146263123f);
  } else {
    _2466 = (sqrt(_2433) * 0.5f);
  }
  uint _2467 = _2262 + 2u;
  float4 _2468 = SrcImage.Load(int3(_2467, _2263, 0));
  float _2472 = max(0.0f, _2468.x);
  float _2473 = max(0.0f, _2468.y);
  float _2474 = max(0.0f, _2468.z);
  if (_2472 > 1.0f) {
    _2485 = ((log2(_2472 + -0.2846689224243164f) * 0.12395743280649185f) + 0.5599107146263123f);
  } else {
    _2485 = (sqrt(_2472) * 0.5f);
  }
  if (_2473 > 1.0f) {
    _2496 = ((log2(_2473 + -0.2846689224243164f) * 0.12395743280649185f) + 0.5599107146263123f);
  } else {
    _2496 = (sqrt(_2473) * 0.5f);
  }
  if (_2474 > 1.0f) {
    _2507 = ((log2(_2474 + -0.2846689224243164f) * 0.12395743280649185f) + 0.5599107146263123f);
  } else {
    _2507 = (sqrt(_2474) * 0.5f);
  }
  uint _2508 = _2263 + 1u;
  float4 _2509 = SrcImage.Load(int3(_2305, _2508, 0));
  float _2513 = max(0.0f, _2509.x);
  float _2514 = max(0.0f, _2509.y);
  float _2515 = max(0.0f, _2509.z);
  if (_2513 > 1.0f) {
    _2526 = ((log2(_2513 + -0.2846689224243164f) * 0.12395743280649185f) + 0.5599107146263123f);
  } else {
    _2526 = (sqrt(_2513) * 0.5f);
  }
  if (_2514 > 1.0f) {
    _2537 = ((log2(_2514 + -0.2846689224243164f) * 0.12395743280649185f) + 0.5599107146263123f);
  } else {
    _2537 = (sqrt(_2514) * 0.5f);
  }
  if (_2515 > 1.0f) {
    _2548 = ((log2(_2515 + -0.2846689224243164f) * 0.12395743280649185f) + 0.5599107146263123f);
  } else {
    _2548 = (sqrt(_2515) * 0.5f);
  }
  float4 _2549 = SrcImage.Load(int3(_2262, _2508, 0));
  float _2553 = max(0.0f, _2549.x);
  float _2554 = max(0.0f, _2549.y);
  float _2555 = max(0.0f, _2549.z);
  if (_2553 > 1.0f) {
    _2566 = ((log2(_2553 + -0.2846689224243164f) * 0.12395743280649185f) + 0.5599107146263123f);
  } else {
    _2566 = (sqrt(_2553) * 0.5f);
  }
  if (_2554 > 1.0f) {
    _2577 = ((log2(_2554 + -0.2846689224243164f) * 0.12395743280649185f) + 0.5599107146263123f);
  } else {
    _2577 = (sqrt(_2554) * 0.5f);
  }
  if (_2555 > 1.0f) {
    _2588 = ((log2(_2555 + -0.2846689224243164f) * 0.12395743280649185f) + 0.5599107146263123f);
  } else {
    _2588 = (sqrt(_2555) * 0.5f);
  }
  uint _2589 = _2263 + 2u;
  float4 _2590 = SrcImage.Load(int3(_2262, _2589, 0));
  float _2594 = max(0.0f, _2590.x);
  float _2595 = max(0.0f, _2590.y);
  float _2596 = max(0.0f, _2590.z);
  if (_2594 > 1.0f) {
    _2607 = ((log2(_2594 + -0.2846689224243164f) * 0.12395743280649185f) + 0.5599107146263123f);
  } else {
    _2607 = (sqrt(_2594) * 0.5f);
  }
  if (_2595 > 1.0f) {
    _2618 = ((log2(_2595 + -0.2846689224243164f) * 0.12395743280649185f) + 0.5599107146263123f);
  } else {
    _2618 = (sqrt(_2595) * 0.5f);
  }
  if (_2596 > 1.0f) {
    _2629 = ((log2(_2596 + -0.2846689224243164f) * 0.12395743280649185f) + 0.5599107146263123f);
  } else {
    _2629 = (sqrt(_2596) * 0.5f);
  }
  float4 _2630 = SrcImage.Load(int3(_2386, _2508, 0));
  float _2634 = max(0.0f, _2630.x);
  float _2635 = max(0.0f, _2630.y);
  float _2636 = max(0.0f, _2630.z);
  if (_2634 > 1.0f) {
    _2647 = ((log2(_2634 + -0.2846689224243164f) * 0.12395743280649185f) + 0.5599107146263123f);
  } else {
    _2647 = (sqrt(_2634) * 0.5f);
  }
  if (_2635 > 1.0f) {
    _2658 = ((log2(_2635 + -0.2846689224243164f) * 0.12395743280649185f) + 0.5599107146263123f);
  } else {
    _2658 = (sqrt(_2635) * 0.5f);
  }
  if (_2636 > 1.0f) {
    _2669 = ((log2(_2636 + -0.2846689224243164f) * 0.12395743280649185f) + 0.5599107146263123f);
  } else {
    _2669 = (sqrt(_2636) * 0.5f);
  }
  float4 _2670 = SrcImage.Load(int3(_2467, _2508, 0));
  float _2674 = max(0.0f, _2670.x);
  float _2675 = max(0.0f, _2670.y);
  float _2676 = max(0.0f, _2670.z);
  if (_2674 > 1.0f) {
    _2687 = ((log2(_2674 + -0.2846689224243164f) * 0.12395743280649185f) + 0.5599107146263123f);
  } else {
    _2687 = (sqrt(_2674) * 0.5f);
  }
  if (_2675 > 1.0f) {
    _2698 = ((log2(_2675 + -0.2846689224243164f) * 0.12395743280649185f) + 0.5599107146263123f);
  } else {
    _2698 = (sqrt(_2675) * 0.5f);
  }
  if (_2676 > 1.0f) {
    _2709 = ((log2(_2676 + -0.2846689224243164f) * 0.12395743280649185f) + 0.5599107146263123f);
  } else {
    _2709 = (sqrt(_2676) * 0.5f);
  }
  float4 _2710 = SrcImage.Load(int3(_2386, _2589, 0));
  float _2714 = max(0.0f, _2710.x);
  float _2715 = max(0.0f, _2710.y);
  float _2716 = max(0.0f, _2710.z);
  if (_2714 > 1.0f) {
    _2727 = ((log2(_2714 + -0.2846689224243164f) * 0.12395743280649185f) + 0.5599107146263123f);
  } else {
    _2727 = (sqrt(_2714) * 0.5f);
  }
  if (_2715 > 1.0f) {
    _2738 = ((log2(_2715 + -0.2846689224243164f) * 0.12395743280649185f) + 0.5599107146263123f);
  } else {
    _2738 = (sqrt(_2715) * 0.5f);
  }
  if (_2716 > 1.0f) {
    _2749 = ((log2(_2716 + -0.2846689224243164f) * 0.12395743280649185f) + 0.5599107146263123f);
  } else {
    _2749 = (sqrt(_2716) * 0.5f);
  }
  float _2753 = min(min(min(min(_2293, _2334), _2374), _2455), _2577);
  float _2757 = max(max(max(max(_2293, _2334), _2374), _2455), _2577);
  float _2761 = min(min(min(min(_2415, _2374), _2455), _2496), _2658);
  float _2765 = max(max(max(max(_2415, _2374), _2455), _2496), _2658);
  float _2769 = min(min(min(min(_2374, _2537), _2577), _2658), _2618);
  float _2773 = max(max(max(max(_2374, _2537), _2577), _2658), _2618);
  float _2777 = min(min(min(min(_2455, _2577), _2658), _2698), _2738);
  float _2781 = max(max(max(max(_2455, _2577), _2658), _2698), _2738);
  float _2826 = asfloat(const1.x);
  float _2831 = 1.0f - _2260;
  float _2832 = 1.0f - _2261;
  float _2842 = (_2831 * _2832) * asfloat(((uint)(2129690299u - (int)(asint(((0.03125f - _2753) + _2757))))));
  float _2848 = (_2832 * _2260) * asfloat(((uint)(2129690299u - (int)(asint(((0.03125f - _2761) + _2765))))));
  float _2854 = (_2831 * _2261) * asfloat(((uint)(2129690299u - (int)(asint(((0.03125f - _2769) + _2773))))));
  float _2860 = (_2260 * _2261) * asfloat(((uint)(2129690299u - (int)(asint(((0.03125f - _2777) + _2781))))));
  float _2861 = (asfloat(((uint)(((int)((uint)((int)(asint(saturate(min(_2753, (1.0f - _2757)) * asfloat(((uint)(2129690299u - (int)(asint(_2757))))))))) >> 1)) + 532432441u))) * _2826) * _2842;
  float _2862 = (asfloat(((uint)(((int)((uint)((int)(asint(saturate(min(_2761, (1.0f - _2765)) * asfloat(((uint)(2129690299u - (int)(asint(_2765))))))))) >> 1)) + 532432441u))) * _2826) * _2848;
  float _2863 = (asfloat(((uint)(((int)((uint)((int)(asint(saturate(min(_2769, (1.0f - _2773)) * asfloat(((uint)(2129690299u - (int)(asint(_2773))))))))) >> 1)) + 532432441u))) * _2826) * _2854;
  float _2865 = (_2862 + _2842) + _2863;
  float _2866 = (asfloat(((uint)(((int)((uint)((int)(asint(saturate(min(_2777, (1.0f - _2781)) * asfloat(((uint)(2129690299u - (int)(asint(_2781))))))))) >> 1)) + 532432441u))) * _2826) * _2860;
  float _2868 = (_2861 + _2848) + _2866;
  float _2870 = (_2861 + _2854) + _2866;
  float _2872 = (_2862 + _2860) + _2863;
  float _2880 = (((_2872 + _2865) + ((((_2862 + _2861) + _2863) + _2866) * 2.0f)) + _2868) + _2870;
  float _2883 = asfloat(((uint)(2129764351u - (int)(asint(_2880)))));
  float _2886 = (2.0f - (_2883 * _2880)) * _2883;
  float _2907 = saturate(_2886 * ((((((((_2865 * _2363) + (_2861 * (_2323 + _2282))) + (_2872 * _2647)) + (_2868 * _2444)) + (_2870 * _2566)) + (_2866 * (_2727 + _2687))) + (_2863 * (_2607 + _2526))) + (_2862 * (_2485 + _2404))));
  float _2928 = saturate(_2886 * ((((((((_2865 * _2374) + (_2861 * (_2334 + _2293))) + (_2872 * _2658)) + (_2868 * _2455)) + (_2870 * _2577)) + (_2866 * (_2738 + _2698))) + (_2863 * (_2618 + _2537))) + (_2862 * (_2496 + _2415))));
  float _2949 = saturate(_2886 * ((((((((_2865 * _2385) + (_2861 * (_2345 + _2304))) + (_2872 * _2669)) + (_2868 * _2466)) + (_2870 * _2588)) + (_2866 * (_2749 + _2709))) + (_2863 * (_2629 + _2548))) + (_2862 * (_2507 + _2426))));
  if (_2907 > 2.0f) {
    _2960 = (exp2((_2907 + -0.5599107146263123f) * 8.067285537719727f) + 0.2846689224243164f);
  } else {
    _2960 = ((_2907 * _2907) * 4.0f);
  }
  if (_2928 > 2.0f) {
    _2971 = (exp2((_2928 + -0.5599107146263123f) * 8.067285537719727f) + 0.2846689224243164f);
  } else {
    _2971 = ((_2928 * _2928) * 4.0f);
  }
  if (_2949 > 2.0f) {
    _2982 = (exp2((_2949 + -0.5599107146263123f) * 8.067285537719727f) + 0.2846689224243164f);
  } else {
    _2982 = ((_2949 * _2949) * 4.0f);
  }
  OutputImage[int2(_15, _1501)] = float4(_2960, _2971, _2982, 1.0f);
}
