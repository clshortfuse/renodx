#include "./filmiclutbuilder.hlsli"

// cbuffer cb0_buf : register(b0) {
//   uint4 cb0_m[42] : packoffset(c0);
// };

cbuffer cb1_buf : register(b1) {
  uint4 cb1_m[21] : packoffset(c0);
};

SamplerState s0 : register(s0);
Texture2D<float4> t0 : register(t0);

static uint gl_Layer;
static float2 TEXCOORD;
static float4 SV_Target;

struct SPIRV_Cross_Input {
  noperspective float2 TEXCOORD : TEXCOORD0;
  uint gl_Layer : SV_RenderTargetArrayIndex;
};

struct SPIRV_Cross_Output {
  float4 SV_Target : SV_Target0;
};

float dp3_f32(float3 a, float3 b) {
  precise float _371 = a.x * b.x;
  return mad(a.z, b.z, mad(a.y, b.y, _371));
}

int cvt_f32_i32(float v) {
  return isnan(v) ? 0 : ((v < (-2147483648.0f)) ? int(0x80000000) : ((v > 2147483520.0f) ? 2147483647 : int(v)));
}

float dp4_f32(float4 a, float4 b) {
  precise float _342 = a.x * b.x;
  return mad(a.w, b.w, mad(a.z, b.z, mad(a.y, b.y, _342)));
}

float dp2_f32(float2 a, float2 b) {
  precise float _330 = a.x * b.x;
  return mad(a.y, b.y, _330);
}

void frag_main() {
  float _385 = asfloat(cb0[35u].x);
  float _386 = 0.5f / _385;
  float _396 = _385 - 1.0f;
  float _397 = (_385 * (TEXCOORD.x - _386)) / _396;
  float _398 = (_385 * (TEXCOORD.y - _386)) / _396;
  float _401 = float(uint(gl_Layer)) / _396;
  bool _404 = cb0[41u].x == 1u;
  bool _405 = cb0[41u].x == 2u;
  bool _406 = cb0[41u].x == 3u;
  bool _407 = cb0[41u].x == 4u;
  float _435 = _404 ? 1.37921416759490966796875f : (_405 ? 1.0258247852325439453125f : (_406 ? 0.695452213287353515625f : (_407 ? 1.0f : 1.705050945281982421875f)));
  float _436 = _404 ? (-0.3088641464710235595703125f) : (_405 ? (-0.02005319111049175262451171875f) : (_406 ? 0.140678703784942626953125f : (_407 ? 0.0f : (-0.621792137622833251953125f))));
  float _437 = _404 ? (-0.070349983870983123779296875f) : (_405 ? (-0.00577155686914920806884765625f) : (_406 ? 0.16386906802654266357421875f : (_407 ? 0.0f : (-0.083258874714374542236328125f))));
  float _438 = _404 ? (-0.069334857165813446044921875f) : (_405 ? (-0.0022343695163726806640625f) : (_406 ? 0.0447945632040500640869140625f : (_407 ? 0.0f : (-0.1302564144134521484375f))));
  float _439 = _404 ? 1.08229672908782958984375f : (_405 ? 1.0045864582061767578125f : (_406 ? 0.859671115875244140625f : (_407 ? 1.0f : 1.140804767608642578125f)));
  float _440 = _404 ? (-0.012961887754499912261962890625f) : (_405 ? (-0.002352132461965084075927734375f) : (_406 ? 0.095534317195415496826171875f : (_407 ? 0.0f : (-0.010548318736255168914794921875f))));
  float _441 = _404 ? (-0.00215900945477187633514404296875f) : (_405 ? (-0.005013351328670978546142578125f) : (_406 ? (-0.0055258828215301036834716796875f) : (_407 ? 0.0f : (-0.0240033566951751708984375f))));
  float _442 = _404 ? (-0.0454593263566493988037109375f) : (_405 ? (-0.025290071964263916015625f) : (_406 ? 0.0040252101607620716094970703125f : (_407 ? 0.0f : (-0.12896896898746490478515625f))));
  float _443 = _404 ? 1.047618389129638671875f : (_405 ? 1.030303478240966796875f : (_406 ? 1.00150072574615478515625f : (_407 ? 1.0f : 1.15297234058380126953125f)));
  float _495;
  float _496;
  float _497;
  if (cb0[40u].w >= 3u) {
    float _456 = exp2(log2(_397) * 0.0126833133399486541748046875f);
    float _457 = exp2(log2(_398) * 0.0126833133399486541748046875f);
    float _458 = exp2(log2(_401) * 0.0126833133399486541748046875f);
    _495 = exp2(log2(max(_458 - 0.8359375f, 0.0f) / mad(_458, -18.6875f, 18.8515625f)) * 6.277394771575927734375f) * 100.0f;
    _496 = exp2(log2(max(_457 - 0.8359375f, 0.0f) / mad(_457, -18.6875f, 18.8515625f)) * 6.277394771575927734375f) * 100.0f;
    _497 = exp2(log2(max(_456 - 0.8359375f, 0.0f) / mad(_456, -18.6875f, 18.8515625f)) * 6.277394771575927734375f) * 100.0f;
  } else {
    _495 = mad(exp2((_401 - 0.434017598628997802734375f) * 14.0f), 0.180000007152557373046875f, -0.00266771926544606685638427734375f);
    _496 = mad(exp2((_398 - 0.434017598628997802734375f) * 14.0f), 0.180000007152557373046875f, -0.00266771926544606685638427734375f);
    _497 = mad(exp2((_397 - 0.434017598628997802734375f) * 14.0f), 0.180000007152557373046875f, -0.00266771926544606685638427734375f);
  }
  float3 _508 = float3(asfloat(cb1_m[8u].x), asfloat(cb1_m[8u].y), asfloat(cb1_m[8u].z));
  float3 _509 = float3(_497, _496, _495);
  float _510 = dp3_f32(_508, _509);
  float3 _519 = float3(asfloat(cb1_m[9u].x), asfloat(cb1_m[9u].y), asfloat(cb1_m[9u].z));
  float _520 = dp3_f32(_519, _509);
  float3 _529 = float3(asfloat(cb1_m[10u].x), asfloat(cb1_m[10u].y), asfloat(cb1_m[10u].z));
  float _530 = dp3_f32(_529, _509);
  float3 _531 = float3(_510, _520, _530);
  float _532 = dp3_f32(_531, float3(0.272228717803955078125f, 0.674081742763519287109375f, 0.053689517080783843994140625f));
  float3 _539 = float3((_510 / _532) - 1.0f, (_520 / _532) - 1.0f, (_530 / _532) - 1.0f);
  float _552 = (1.0f - exp2(dp3_f32(_539, _539) * (-4.0f))) * (1.0f - exp2(((_532 * _532) * asfloat(cb0[36u].w)) * (-4.0f)));
  float _559 = mad(_552, dp3_f32(float3(1.370412349700927734375f, -0.32929217815399169921875f, -0.0636831223964691162109375f), _531) - _510, _510);
  float _560 = mad(_552, dp3_f32(float3(-0.08343349397182464599609375f, 1.09709274768829345703125f, -0.010861379094421863555908203125f), _531) - _520, _520);
  float _561 = mad(_552, dp3_f32(float3(-0.025793321430683135986328125f, -0.098625801503658294677734375f, 1.20369493961334228515625f), _531) - _530, _530);
  float _563 = dp3_f32(float3(_559, _560, _561), float3(0.272228717803955078125f, 0.674081742763519287109375f, 0.053689517080783843994140625f));
  float _570 = asfloat(cb0[15u].x);
  float _571 = asfloat(cb0[15u].y);
  float _572 = asfloat(cb0[15u].z);
  float _573 = asfloat(cb0[15u].w);
  float _587 = _573 * asfloat(cb0[20u].w);
  float _594 = asfloat(cb0[16u].x);
  float _595 = asfloat(cb0[16u].y);
  float _596 = asfloat(cb0[16u].z);
  float _597 = asfloat(cb0[16u].w);
  float _611 = _597 * asfloat(cb0[21u].w);
  float _618 = asfloat(cb0[17u].x);
  float _619 = asfloat(cb0[17u].y);
  float _620 = asfloat(cb0[17u].z);
  float _621 = asfloat(cb0[17u].w);
  float _635 = _621 * asfloat(cb0[22u].w);
  float _642 = asfloat(cb0[18u].x);
  float _643 = asfloat(cb0[18u].y);
  float _644 = asfloat(cb0[18u].z);
  float _645 = asfloat(cb0[18u].w);
  float _659 = _645 * asfloat(cb0[23u].w);
  float _666 = asfloat(cb0[19u].x);
  float _667 = asfloat(cb0[19u].y);
  float _668 = asfloat(cb0[19u].z);
  float _669 = asfloat(cb0[19u].w);
  float _683 = _669 + asfloat(cb0[24u].w);
  float _687 = _559 - _563;
  float _688 = _560 - _563;
  float _689 = _561 - _563;
  float _743 = clamp(_563 * (1.0f / asfloat(cb0[35u].w)), 0.0f, 1.0f);
  float _744 = mad(_743, -2.0f, 3.0f);
  float _745 = _743 * _743;
  float _747 = mad(-_744, _745, 1.0f);
  float _761 = _573 * asfloat(cb0[30u].w);
  float _775 = _597 * asfloat(cb0[31u].w);
  float _789 = _621 * asfloat(cb0[32u].w);
  float _803 = _645 * asfloat(cb0[33u].w);
  float _817 = _669 + asfloat(cb0[34u].w);
  float _871 = asfloat(cb0[36u].x);
  float _879 = clamp((_563 - _871) * (1.0f / (asfloat(cb0[36u].y) - _871)), 0.0f, 1.0f);
  float _880 = mad(_879, -2.0f, 3.0f);
  float _881 = _879 * _879;
  float _882 = _880 * _881;
  float _896 = _573 * asfloat(cb0[25u].w);
  float _910 = _597 * asfloat(cb0[26u].w);
  float _924 = _621 * asfloat(cb0[27u].w);
  float _938 = _645 * asfloat(cb0[28u].w);
  float _952 = _669 + asfloat(cb0[29u].w);
  float _1007 = mad(-_880, _881, mad(_744, _745, -1.0f) + 1.0f);
  float _1017 = mad(mad(exp2((1.0f / ((_618 * asfloat(cb0[32u].x)) * _789)) * log2(exp2(((_594 * asfloat(cb0[31u].x)) * _775) * log2(max(mad(_687, (_570 * asfloat(cb0[30u].x)) * _761, _563), 0.0f) * 5.5555553436279296875f)) * 0.180000007152557373046875f)), (_642 * asfloat(cb0[33u].x)) * _803, (_666 + asfloat(cb0[34u].x)) + _817), _882, (mad(exp2((1.0f / ((_618 * asfloat(cb0[27u].x)) * _924)) * log2(exp2(((_594 * asfloat(cb0[26u].x)) * _910) * log2(max(mad(_687, (_570 * asfloat(cb0[25u].x)) * _896, _563), 0.0f) * 5.5555553436279296875f)) * 0.180000007152557373046875f)), (_642 * asfloat(cb0[28u].x)) * _938, (_666 + asfloat(cb0[29u].x)) + _952) * _1007) + (mad(exp2((1.0f / ((_618 * asfloat(cb0[22u].x)) * _635)) * log2(exp2(((_594 * asfloat(cb0[21u].x)) * _611) * log2(max(mad((_570 * asfloat(cb0[20u].x)) * _587, _687, _563), 0.0f) * 5.5555553436279296875f)) * 0.180000007152557373046875f)), (_642 * asfloat(cb0[23u].x)) * _659, (_666 + asfloat(cb0[24u].x)) + _683) * _747));
  float _1018 = mad(mad(_803 * (_643 * asfloat(cb0[33u].y)), exp2(log2(exp2(log2(max(mad(_761 * (_571 * asfloat(cb0[30u].y)), _688, _563), 0.0f) * 5.5555553436279296875f) * ((_595 * asfloat(cb0[31u].y)) * _775)) * 0.180000007152557373046875f) * (1.0f / ((_619 * asfloat(cb0[32u].y)) * _789))), _817 + (_667 + asfloat(cb0[34u].y))), _882, (_747 * mad(_659 * (_643 * asfloat(cb0[23u].y)), exp2(log2(exp2(log2(max(mad(_587 * (_571 * asfloat(cb0[20u].y)), _688, _563), 0.0f) * 5.5555553436279296875f) * (_611 * (_595 * asfloat(cb0[21u].y)))) * 0.180000007152557373046875f) * (1.0f / (_635 * (_619 * asfloat(cb0[22u].y))))), _683 + (_667 + asfloat(cb0[24u].y)))) + (_1007 * mad(_938 * (_643 * asfloat(cb0[28u].y)), exp2(log2(exp2(log2(max(mad(_688, (_571 * asfloat(cb0[25u].y)) * _896, _563), 0.0f) * 5.5555553436279296875f) * (_910 * (_595 * asfloat(cb0[26u].y)))) * 0.180000007152557373046875f) * (1.0f / (_924 * (_619 * asfloat(cb0[27u].y))))), _952 + (_667 + asfloat(cb0[29u].y)))));
  float _1019 = mad(mad(_803 * (_644 * asfloat(cb0[33u].z)), exp2(log2(exp2(log2(max(mad(_761 * (_572 * asfloat(cb0[30u].z)), _689, _563), 0.0f) * 5.5555553436279296875f) * ((_596 * asfloat(cb0[31u].z)) * _775)) * 0.180000007152557373046875f) * (1.0f / (_789 * (_620 * asfloat(cb0[32u].z))))), _817 + (_668 + asfloat(cb0[34u].z))), _882, (_747 * mad(exp2((1.0f / (_635 * (_620 * asfloat(cb0[22u].z)))) * log2(exp2((_611 * (_596 * asfloat(cb0[21u].z))) * log2(max(mad(_587 * (_572 * asfloat(cb0[20u].z)), _689, _563), 0.0f) * 5.5555553436279296875f)) * 0.180000007152557373046875f)), _659 * (_644 * asfloat(cb0[23u].z)), _683 + (_668 + asfloat(cb0[24u].z)))) + (_1007 * mad(_938 * (_644 * asfloat(cb0[28u].z)), exp2(log2(exp2(log2(max(mad(_689, _896 * (_572 * asfloat(cb0[25u].z)), _563), 0.0f) * 5.5555553436279296875f) * (_910 * (_596 * asfloat(cb0[26u].z)))) * 0.180000007152557373046875f) * (1.0f / (_924 * (_620 * asfloat(cb0[27u].z))))), _952 + (_668 + asfloat(cb0[29u].z)))));
  float3 _1020 = float3(_1017, _1018, _1019);

  float3 untonemapped_ap1 = _1020;

#if 1
  float3 _1357;
  ApplyFilmToneMapWithBlueCorrect(untonemapped_ap1.r, untonemapped_ap1.g, untonemapped_ap1.b,
                                  _1357.r, _1357.g, _1357.b);

#else
  float _1029 = asfloat(cb0[36u].z);
  float _1030 = mad(dp3_f32(float3(0.9386394023895263671875f, 1.0235956526827294510439969599247e-10f, 0.0613606236875057220458984375f), _1020) - _1017, _1029, _1017);
  float _1031 = mad(_1029, dp3_f32(float3(8.3600855405041585299841244705021e-11f, 0.830794155597686767578125f, 0.1692058742046356201171875f), _1020) - _1018, _1018);
  float _1032 = mad(_1029, dp3_f32(float3(2.1318736706521512758172320900485e-12f, -5.6330721337483069532936497125775e-12f, 1.0f), _1020) - _1019, _1019);
  float3 _1033 = float3(_1030, _1031, _1032);
  float _1034 = dp3_f32(float3(0.695452213287353515625f, 0.140678703784942626953125f, 0.16386906802654266357421875f), _1033);
  float _1035 = dp3_f32(float3(0.0447945632040500640869140625f, 0.859671115875244140625f, 0.095534317195415496826171875f), _1033);
  float _1036 = dp3_f32(float3(-0.005525882355868816375732421875f, 0.0040252101607620716094970703125f, 1.00150072574615478515625f), _1033);
  float _1040 = max(_1036, max(_1034, _1035));
  float _1045 = (max(_1040, 1.0000000133514319600180897396058e-10f) - max(min(_1036, min(_1034, _1035)), 1.0000000133514319600180897396058e-10f)) / max(_1040, 0.00999999977648258209228515625f);
  float _1056 = mad(sqrt(mad(_1034, _1034 - _1036, (_1036 * (_1036 - _1035)) + (_1035 * (_1035 - _1034)))), 1.75f, _1034 + (_1035 + _1036));
  float _1058 = _1045 - 0.4000000059604644775390625f;
  float _1062 = max(1.0f - abs(_1058 * 2.5f), 0.0f);
  float _1073 = mad(float(int(((_1058 < 0.0f) ? 4294967295u : 0u) + uint(_1058 > 0.0f))), mad(-_1062, _1062, 1.0f), 1.0f) * 0.02500000037252902984619140625f;
  float _1081 = ((_1056 <= 0.1599999964237213134765625f) ? _1073 : ((_1056 >= 0.4799999892711639404296875f) ? 0.0f : (_1073 * ((0.07999999821186065673828125f / (_1056 * 0.3333333432674407958984375f)) - 0.5f)))) + 1.0f;
  float _1082 = _1034 * _1081;
  float _1083 = _1035 * _1081;
  float _1084 = _1036 * _1081;
  float _1089 = (_1083 - _1084) * 1.73205077648162841796875f;
  float _1091 = (_1082 * 2.0f) - _1083;
  float _1093 = mad(-_1036, _1081, _1091);
  float _1094 = abs(_1089);
  float _1095 = abs(_1093);
  float _1099 = min(_1094, _1095) * (1.0f / max(_1094, _1095));
  float _1100 = _1099 * _1099;
  float _1104 = mad(_1100, mad(_1100, mad(_1100, mad(_1100, 0.02083509974181652069091796875f, -0.08513300120830535888671875f), 0.1801410019397735595703125f), -0.33029949665069580078125f), 0.999866008758544921875f);
  float _1114 = mad(_1099, _1104, (_1094 > _1095) ? mad(_1099 * _1104, -2.0f, 1.57079637050628662109375f) : 0.0f) + ((_1093 < mad(_1036, _1081, -_1091)) ? (-3.1415927410125732421875f) : 0.0f);
  float _1115 = min(_1089, _1093);
  float _1116 = max(_1089, _1093);
  float _1125 = ((_1082 == _1083) && (_1084 == _1083)) ? 0.0f : ((((_1115 < (-_1115)) && (_1116 >= (-_1116))) ? (-_1114) : _1114) * 57.295780181884765625f);
  float _1129 = clamp((_1125 < 0.0f) ? (_1125 + 360.0f) : _1125, 0.0f, 360.0f);
  float _1136 = max(1.0f - abs(((_1129 > 180.0f) ? (_1129 - 360.0f) : _1129) * 0.01481481455266475677490234375f), 0.0f);
  float _1139 = mad(_1136, -2.0f, 3.0f) * (_1136 * _1136);
  float3 _1147 = float3(_1082 + (((_1045 * (_1139 * _1139)) * mad(-_1034, _1081, 0.02999999932944774627685546875f)) * 0.180000007152557373046875f), _1083, _1084);
  float _1151 = max(dp3_f32(float3(1.45143926143646240234375f, -0.236510753631591796875f, -0.214928567409515380859375f), _1147), 0.0f);
  float _1152 = max(dp3_f32(float3(-0.07655377686023712158203125f, 1.1762297153472900390625f, -0.0996759235858917236328125f), _1147), 0.0f);
  float _1153 = max(dp3_f32(float3(0.0083161480724811553955078125f, -0.0060324496589601039886474609375f, 0.99771630764007568359375f), _1147), 0.0f);
  float _1155 = dp3_f32(float3(_1151, _1152, _1153), float3(0.272228717803955078125f, 0.674081742763519287109375f, 0.053689517080783843994140625f));
  float _1166 = asfloat(cb0[38u].x);
  float _1169 = asfloat(cb0[38u].y) + 1.0f;
  float _1177 = (_1166 + 1.0f) - asfloat(cb0[37u].z);
  float _1178 = _1169 - asfloat(cb0[37u].w);
  float _1181 = asfloat(cb0[37u].z);
  float _1187 = asfloat(cb0[37u].y);
  float _1189 = (1.0f - _1181) / _1187;
  float _1191 = (_1166 + 0.180000007152557373046875f) / _1177;
  float _1200 = (_1181 > 0.800000011920928955078125f) ? (((0.819999992847442626953125f - _1181) / _1187) - 0.74472749233245849609375f) : mad(-(log2(_1191 / ((1.0f - _1191) + 1.0f)) * 0.3465735912322998046875f), _1177 / _1187, -0.74472749233245849609375f);
  float _1201 = _1189 - _1200;
  float _1207 = (asfloat(cb0[37u].w) / _1187) + (_1200 - _1189);
  float _1208 = log2(mad(_1151 - _1155, 0.959999978542327880859375f, _1155));
  float _1209 = log2(mad(_1152 - _1155, 0.959999978542327880859375f, _1155));
  float _1210 = log2(mad(_1153 - _1155, 0.959999978542327880859375f, _1155));
  float _1211 = _1208 * 0.3010300099849700927734375f;
  float _1212 = _1209 * 0.3010300099849700927734375f;
  float _1213 = _1210 * 0.3010300099849700927734375f;
  float _1217 = _1187 * mad(_1208, 0.3010300099849700927734375f, _1201);
  float _1218 = _1187 * mad(_1209, 0.3010300099849700927734375f, _1201);
  float _1219 = _1187 * mad(_1210, 0.3010300099849700927734375f, _1201);
  float _1220 = _1177 + _1177;
  float _1221 = _1178 + _1178;
  float _1223 = (_1187 * (-2.0f)) / _1177;
  float _1225 = mad(_1208, 0.3010300099849700927734375f, -_1200);
  float _1227 = mad(_1209, 0.3010300099849700927734375f, -_1200);
  float _1229 = mad(_1210, 0.3010300099849700927734375f, -_1200);
  float _1247 = asfloat(cb0[38u].x);
  float _1252 = (_1187 + _1187) / _1178;
  float _1280 = (_1211 < _1200) ? ((_1220 / (exp2((_1223 * _1225) * 1.44269502162933349609375f) + 1.0f)) - _1247) : _1217;
  float _1281 = (_1200 > _1212) ? ((_1220 / (exp2((_1223 * _1227) * 1.44269502162933349609375f) + 1.0f)) - _1247) : _1218;
  float _1282 = (_1200 > _1213) ? ((_1220 / (exp2((_1223 * _1229) * 1.44269502162933349609375f) + 1.0f)) - _1247) : _1219;
  float _1289 = _1207 - _1200;
  float _1293 = clamp(_1225 / _1289, 0.0f, 1.0f);
  float _1294 = clamp(_1227 / _1289, 0.0f, 1.0f);
  float _1295 = clamp(_1229 / _1289, 0.0f, 1.0f);
  bool _1296 = _1207 < _1200;
  float _1300 = _1296 ? (1.0f - _1293) : _1293;
  float _1301 = _1296 ? (1.0f - _1294) : _1294;
  float _1302 = _1296 ? (1.0f - _1295) : _1295;
  float _1315 = mad(mad(_1300, -2.0f, 3.0f) * (_1300 * _1300), ((_1207 < _1211) ? (_1169 - (_1221 / (exp2((_1252 * mad(_1208, 0.3010300099849700927734375f, -_1207)) * 1.44269502162933349609375f) + 1.0f))) : _1217) - _1280, _1280);
  float _1316 = mad(((_1207 < _1212) ? (_1169 - (_1221 / (exp2((_1252 * mad(_1209, 0.3010300099849700927734375f, -_1207)) * 1.44269502162933349609375f) + 1.0f))) : _1218) - _1281, (_1301 * _1301) * mad(_1301, -2.0f, 3.0f), _1281);
  float _1317 = mad(((_1207 < _1213) ? (_1169 - (_1221 / (exp2((_1252 * mad(_1210, 0.3010300099849700927734375f, -_1207)) * 1.44269502162933349609375f) + 1.0f))) : _1219) - _1282, (_1302 * _1302) * mad(_1302, -2.0f, 3.0f), _1282);
  float _1319 = dp3_f32(float3(_1315, _1316, _1317), float3(0.272228717803955078125f, 0.674081742763519287109375f, 0.053689517080783843994140625f));
  float _1334 = asfloat(cb0[37u].x);
  float _1335 = mad(max(mad(_1315 - _1319, 0.930000007152557373046875f, _1319), 0.0f) - _1030, _1334, _1030);
  float _1336 = mad(_1334, max(mad(_1316 - _1319, 0.930000007152557373046875f, _1319), 0.0f) - _1031, _1031);
  float _1337 = mad(_1334, max(mad(_1317 - _1319, 0.930000007152557373046875f, _1319), 0.0f) - _1032, _1032);
  float3 _1338 = float3(_1335, _1336, _1337);
  float3 _1357 = float3(mad(_1029, dp3_f32(float3(1.065374851226806640625f, 1.4467850633081980049610137939453e-06f, -0.0653710067272186279296875f), _1338) - _1335, _1335), mad(_1029, dp3_f32(float3(-3.4552559213807398919016122817993e-07f, 1.20366346836090087890625f, -0.20366771519184112548828125f), _1338) - _1336, _1336), mad(_1029, dp3_f32(float3(1.9865447953293369209859520196915e-08f, 2.1207958056379538902547210454941e-08f, 0.999999582767486572265625f), _1338) - _1337, _1337));
#endif
  float3 _1356 = float3(asfloat(cb1_m[12u].x), asfloat(cb1_m[12u].y), asfloat(cb1_m[12u].z));

  float _1359 = (dp3_f32(_1356, _1357));
  float3 _1368 = float3(asfloat(cb1_m[13u].x), asfloat(cb1_m[13u].y), asfloat(cb1_m[13u].z));
  float _1370 = (dp3_f32(_1368, _1357));
  float3 _1379 = float3(asfloat(cb1_m[14u].x), asfloat(cb1_m[14u].y), asfloat(cb1_m[14u].z));
  float _1381 = (dp3_f32(_1379, _1357));

#if 1
  float _1470, _1471, _1472;
  SampleLUTUpgradeToneMap(float3(_1359, _1370, _1381), s0, t0, _1470, _1471, _1472);
#else
  float _1400 = (_1359 >= 0.00313066993840038776397705078125f) ? mad(exp2(log2(_1359) * 0.4166666567325592041015625f), 1.05499994754791259765625f, -0.054999999701976776123046875f) : (_1359 * 12.9200000762939453125f);
  float _1401 = (_1370 >= 0.00313066993840038776397705078125f) ? mad(exp2(log2(_1370) * 0.4166666567325592041015625f), 1.05499994754791259765625f, -0.054999999701976776123046875f) : (_1370 * 12.9200000762939453125f);
  float _1402 = (_1381 >= 0.00313066993840038776397705078125f) ? mad(exp2(log2(_1381) * 0.4166666567325592041015625f), 1.05499994754791259765625f, -0.054999999701976776123046875f) : (_1381 * 12.9200000762939453125f);
  float _1404 = mad(_1401, 0.9375f, 0.03125f);
  float _1406 = mad(mad(_1402, 0.9375f, 0.03125f), 16.0f, -0.5f);
  float _1407 = floor(_1406);
  float _1408 = _1406 - _1407;
  float _1409 = _1407 + mad(_1400, 0.9375f, 0.03125f);
  float4 _1416 = t0.Sample(s0, float2(_1409 * 0.0625f, _1404));
  float _1417 = _1416.x;
  float _1418 = _1416.y;
  float _1419 = _1416.z;
  float4 _1424 = t0.Sample(s0, float2(mad(_1409, 0.0625f, 0.0625f), _1404 + 0.0f));
  float _1436 = asfloat(cb0[5u].y);
  float _1442 = asfloat(cb0[5u].x);
  float _1449 = max((mad(_1408, _1424.x - _1417, _1417) * _1436) + (_1442 * _1400), 6.1035199905745685100555419921875e-05f);
  float _1450 = max((_1442 * _1401) + (_1436 * mad(_1408, _1424.y - _1418, _1418)), 6.1035199905745685100555419921875e-05f);
  float _1451 = max((_1442 * _1402) + (_1436 * mad(_1408, _1424.z - _1419, _1419)), 6.1035199905745685100555419921875e-05f);
  float _1470 = (_1449 > 0.040449999272823333740234375f) ? exp2(log2(mad(_1449, 0.94786727428436279296875f, 0.0521326996386051177978515625f)) * 2.400000095367431640625f) : (_1449 * 0.077399380505084991455078125f);
  float _1471 = (_1450 > 0.040449999272823333740234375f) ? exp2(log2(mad(_1450, 0.94786727428436279296875f, 0.0521326996386051177978515625f)) * 2.400000095367431640625f) : (_1450 * 0.077399380505084991455078125f);
  float _1472 = (_1451 > 0.040449999272823333740234375f) ? exp2(log2(mad(_1451, 0.94786727428436279296875f, 0.0521326996386051177978515625f)) * 2.400000095367431640625f) : (_1451 * 0.077399380505084991455078125f);
#endif
  float _1478 = asfloat(cb0[39u].y);
  float _1484 = asfloat(cb0[39u].x);
  float _1493 = asfloat(cb0[39u].z);
  float _1494 = ((_1478 * _1470) + ((_1470 * _1470) * _1484)) + _1493;
  float _1495 = _1493 + ((_1484 * (_1471 * _1471)) + (_1478 * _1471));
  float _1496 = _1493 + ((_1484 * (_1472 * _1472)) + (_1478 * _1472));
  float _1502 = asfloat(cb0[14u].x);
  float _1503 = asfloat(cb0[14u].y);
  float _1504 = asfloat(cb0[14u].z);
  float _1513 = asfloat(cb0[13u].x);
  float _1514 = asfloat(cb0[13u].y);
  float _1515 = asfloat(cb0[13u].z);
  float _1524 = asfloat(cb0[13u].w);
  float _1528 = (_1494 * _1502) + (mad(-_1494, _1502, _1513) * _1524);
  float _1529 = (_1524 * mad(-_1503, _1495, _1514)) + (_1503 * _1495);
  float _1530 = (_1524 * mad(-_1504, _1496, _1515)) + (_1504 * _1496);
  //   float _1539 = asfloat(cb0[40u].y);
  //   float _1543 = exp2(log2(max(_1528, 0.0f)) * _1539);
  //   float _1544 = exp2(_1539 * log2(max(_1529, 0.0f)));
  //   float _1545 = exp2(_1539 * log2(max(_1530, 0.0f)));

  float _1543 = _1528;
  float _1544 = _1529;
  float _1545 = _1530;

  if (RENODX_TONE_MAP_TYPE != 0) {
    GenerateOutput(_1528, _1529, _1530, SV_Target, output_device);
    return;
  }

  float _3760;
  float _3761;
  float _3762;
  if (cb0[40u].w == 0u) {
    float3 _1550 = float3(_1543, _1544, _1545);

#if 1
    _1550 = saturate(_1550);
#endif

    float3 _1555 = float3(dp3_f32(_508, _1550), dp3_f32(_519, _1550), dp3_f32(_529, _1550));
    bool _1563 = cb1_m[20u].x != 0u;
    float _1564 = _1563 ? _1543 : dp3_f32(float3(_435, _436, _437), _1555);
    float _1565 = _1563 ? _1544 : dp3_f32(float3(_438, _439, _440), _1555);
    float _1566 = _1563 ? _1545 : dp3_f32(float3(_441, _442, _443), _1555);
    _3760 = (_1566 >= 0.00313066993840038776397705078125f) ? mad(exp2(log2(_1566) * 0.4166666567325592041015625f), 1.05499994754791259765625f, -0.054999999701976776123046875f) : (_1566 * 12.9200000762939453125f);
    _3761 = (_1565 >= 0.00313066993840038776397705078125f) ? mad(exp2(log2(_1565) * 0.4166666567325592041015625f), 1.05499994754791259765625f, -0.054999999701976776123046875f) : (_1565 * 12.9200000762939453125f);
    _3762 = (_1564 >= 0.00313066993840038776397705078125f) ? mad(exp2(log2(_1564) * 0.4166666567325592041015625f), 1.05499994754791259765625f, -0.054999999701976776123046875f) : (_1564 * 12.9200000762939453125f);
#if 1
    ScaleScene(_3760, _3761, _3762);
#endif

  } else {
    float _3757;
    float _3758;
    float _3759;
    if (cb0[40u].w == 1u) {
      float3 _1592 = float3(_1543, _1544, _1545);
      float3 _1597 = float3(dp3_f32(_508, _1592), dp3_f32(_519, _1592), dp3_f32(_529, _1592));
      float _1603 = max(dp3_f32(float3(_435, _436, _437), _1597), 6.1035199905745685100555419921875e-05f);
      float _1604 = max(dp3_f32(float3(_438, _439, _440), _1597), 6.1035199905745685100555419921875e-05f);
      float _1605 = max(dp3_f32(float3(_441, _442, _443), _1597), 6.1035199905745685100555419921875e-05f);
      _3757 = min(mad(exp2(log2(max(_1605, 0.017999999225139617919921875f)) * 0.449999988079071044921875f), 1.09899997711181640625f, -0.098999999463558197021484375f), _1605 * 4.5f);
      _3758 = min(mad(exp2(log2(max(_1604, 0.017999999225139617919921875f)) * 0.449999988079071044921875f), 1.09899997711181640625f, -0.098999999463558197021484375f), _1604 * 4.5f);
      _3759 = min(mad(exp2(log2(max(_1603, 0.017999999225139617919921875f)) * 0.449999988079071044921875f), 1.09899997711181640625f, -0.098999999463558197021484375f), _1603 * 4.5f);
    } else {
      float _1627 = dp3_f32(_1356, _1020);
      float _1628 = dp3_f32(_1368, _1020);
      float _1629 = dp3_f32(_1379, _1020);
      float _1642 = (_1502 * _1627) + (_1524 * mad(-_1502, _1627, _1513));
      float _1643 = (_1524 * mad(-_1503, _1628, _1514)) + (_1503 * _1628);
      float _1644 = (_1524 * mad(-_1504, _1629, _1515)) + (_1504 * _1629);
      float _3754;
      float _3755;
      float _3756;
      if ((cb0[40u].w == 3u) || (cb0[40u].w == 5u)) {
        float _1653 = asfloat(cb0[12u].z);
        float3 _1666 = float3(_1642 * _1653, _1653 * _1643, _1653 * _1644);
        float _1667 = dp3_f32(float3(asfloat(cb1_m[16u].x), asfloat(cb1_m[16u].y), asfloat(cb1_m[16u].z)), _1666);
        float _1677 = dp3_f32(float3(asfloat(cb1_m[17u].x), asfloat(cb1_m[17u].y), asfloat(cb1_m[17u].z)), _1666);
        float _1687 = dp3_f32(float3(asfloat(cb1_m[18u].x), asfloat(cb1_m[18u].y), asfloat(cb1_m[18u].z)), _1666);
        float3 _1688 = float3(_1667, _1677, _1687);
        float _1689 = dp3_f32(float3(1.45143926143646240234375f, -0.236510753631591796875f, -0.214928567409515380859375f), _1688);
        float _1690 = dp3_f32(float3(-0.07655377686023712158203125f, 1.1762297153472900390625f, -0.0996759235858917236328125f), _1688);
        float _1691 = dp3_f32(float3(0.0083161480724811553955078125f, -0.0060324496589601039886474609375f, 0.99771630764007568359375f), _1688);
        float _1693 = max(_1689, max(_1690, _1691));
        float _1759;
        float _1760;
        float _1761;
        if (!((((_1667 < 0.0f) || (_1677 < 0.0f)) || (_1687 < 0.0f)) || (_1693 < 1.0000000133514319600180897396058e-10f))) {
          float _1707 = abs(_1693);
          float _1708 = (_1693 - _1689) / _1707;
          float _1709 = (_1693 - _1690) / _1707;
          float _1710 = (_1693 - _1691) / _1707;
          float _1714 = _1708 - 0.814999997615814208984375f;
          float _1715 = _1709 - 0.802999973297119140625f;
          float _1716 = _1710 - 0.87999999523162841796875f;
          _1759 = mad(-_1707, (_1710 < 0.87999999523162841796875f) ? _1710 : (((_1716 * 1.0f) / exp2(log2(exp2(log2(_1716 * 6.810994625091552734375f) * 1.2000000476837158203125f) + 1.0f) * 0.833333313465118408203125f)) + 0.87999999523162841796875f), _1693);
          _1760 = mad(-_1707, (_1709 < 0.802999973297119140625f) ? _1709 : (((_1715 * 1.0f) / exp2(log2(exp2(log2(_1715 * 3.49726104736328125f) * 1.2000000476837158203125f) + 1.0f) * 0.833333313465118408203125f)) + 0.802999973297119140625f), _1693);
          _1761 = mad(-_1707, (_1708 < 0.814999997615814208984375f) ? _1708 : (((_1714 * 1.0f) / exp2(log2(exp2(log2(_1714 * 3.055283069610595703125f) * 1.2000000476837158203125f) + 1.0f) * 0.833333313465118408203125f)) + 0.814999997615814208984375f), _1693);
        } else {
          _1759 = _1691;
          _1760 = _1690;
          _1761 = _1689;
        }
        float3 _1762 = float3(_1761, _1760, _1759);
        float _1771 = asfloat(cb0[12u].w);
        float _1772 = mad(dp3_f32(float3(0.695452213287353515625f, 0.140678703784942626953125f, 0.16386906802654266357421875f), _1762) - _1667, _1771, _1667);
        float _1773 = mad(_1771, dp3_f32(float3(0.0447945632040500640869140625f, 0.859671115875244140625f, 0.095534317195415496826171875f), _1762) - _1677, _1677);
        float _1774 = mad(_1771, dp3_f32(float3(-0.0055258828215301036834716796875f, 0.0040252101607620716094970703125f, 1.00150072574615478515625f), _1762) - _1687, _1687);
        float _1778 = max(max(_1772, _1773), _1774);
        float _1783 = (max(_1778, 1.0000000133514319600180897396058e-10f) - max(min(min(_1772, _1773), _1774), 1.0000000133514319600180897396058e-10f)) / max(_1778, 0.00999999977648258209228515625f);
        float _1794 = mad(sqrt(mad(_1772, _1772 - _1774, ((_1774 - _1773) * _1774) + ((_1773 - _1772) * _1773))), 1.75f, _1772 + (_1774 + _1773));
        float _1796 = _1783 - 0.4000000059604644775390625f;
        float _1800 = max(1.0f - abs(_1796 * 2.5f), 0.0f);
        float _1811 = mad(float(int(((_1796 < 0.0f) ? 4294967295u : 0u) + uint(_1796 > 0.0f))), mad(-_1800, _1800, 1.0f), 1.0f) * 0.02500000037252902984619140625f;
        float _1819 = ((_1794 <= 0.1599999964237213134765625f) ? _1811 : ((_1794 >= 0.4799999892711639404296875f) ? 0.0f : (_1811 * ((0.07999999821186065673828125f / (_1794 * 0.3333333432674407958984375f)) - 0.5f)))) + 1.0f;
        float _1820 = _1772 * _1819;
        float _1821 = _1819 * _1773;
        float _1822 = _1819 * _1774;
        float _1827 = (_1821 - _1822) * 1.73205077648162841796875f;
        float _1829 = (_1820 * 2.0f) - _1821;
        float _1831 = mad(-_1819, _1774, _1829);
        float _1832 = abs(_1827);
        float _1833 = abs(_1831);
        float _1837 = min(_1832, _1833) * (1.0f / max(_1832, _1833));
        float _1838 = _1837 * _1837;
        float _1842 = mad(_1838, mad(_1838, mad(_1838, mad(_1838, 0.02083509974181652069091796875f, -0.08513300120830535888671875f), 0.1801410019397735595703125f), -0.33029949665069580078125f), 0.999866008758544921875f);
        float _1852 = mad(_1837, _1842, (_1832 > _1833) ? mad(_1837 * _1842, -2.0f, 1.57079637050628662109375f) : 0.0f) + ((_1831 < mad(_1819, _1774, -_1829)) ? (-3.1415927410125732421875f) : 0.0f);
        float _1853 = min(_1827, _1831);
        float _1854 = max(_1827, _1831);
        float _1863 = ((_1820 == _1821) && (_1822 == _1821)) ? 0.0f : ((((_1853 < (-_1853)) && (_1854 >= (-_1854))) ? (-_1852) : _1852) * 57.295780181884765625f);
        float _1867 = clamp((_1863 < 0.0f) ? (_1863 + 360.0f) : _1863, 0.0f, 360.0f);
        float _1870 = (_1867 > 180.0f) ? (_1867 - 360.0f) : _1867;
        float _1907;
        if ((_1870 > (-67.5f)) && (_1870 < 67.5f)) {
          float _1877 = _1870 + 67.5f;
          float _1878 = _1877 * 0.0296296291053295135498046875f;
          float _1882 = mad(_1877, 0.0296296291053295135498046875f, -trunc(_1878));
          float _1883 = _1882 * _1882;
          float _1884 = _1882 * _1883;
          float _1888 = _1883 * 0.5f;
          uint _1896 = uint(cvt_f32_i32(_1878));
          _1907 = (_1896 == 3u) ? (mad(_1882, -0.5f, _1888 + (_1884 * (-0.16666667163372039794921875f))) + 0.16666667163372039794921875f) : ((_1896 == 2u) ? (((_1884 * 0.5f) - _1883) + 0.666666686534881591796875f) : ((_1896 == 1u) ? (mad(_1882, 0.5f, _1888 + (_1884 * (-0.5f))) + 0.16666667163372039794921875f) : ((_1896 != 0u) ? 0.0f : (_1884 * 0.16666667163372039794921875f))));
        } else {
          _1907 = 0.0f;
        }
        float3 _1918 = float3(clamp(_1820 + ((((_1783 * _1907) * 1.5f) * mad(-_1772, _1819, 0.02999999932944774627685546875f)) * 0.180000007152557373046875f), 0.0f, 65535.0f), clamp(_1821, 0.0f, 65535.0f), clamp(_1822, 0.0f, 65535.0f));
        float _1922 = clamp(dp3_f32(float3(1.45143926143646240234375f, -0.236510753631591796875f, -0.214928567409515380859375f), _1918), 0.0f, 65504.0f);
        float _1923 = clamp(dp3_f32(float3(-0.07655377686023712158203125f, 1.1762297153472900390625f, -0.0996759235858917236328125f), _1918), 0.0f, 65504.0f);
        float _1924 = clamp(dp3_f32(float3(0.0083161480724811553955078125f, -0.0060324496589601039886474609375f, 0.99771630764007568359375f), _1918), 0.0f, 65504.0f);
        float _1926 = dp3_f32(float3(_1922, _1923, _1924), float3(0.272228717803955078125f, 0.674081742763519287109375f, 0.053689517080783843994140625f));
        float _1939 = log2(max(mad(_1922 - _1926, 0.959999978542327880859375f, _1926), 1.0000000133514319600180897396058e-10f)) * 0.3010300099849700927734375f;
        float _1940 = log2(max(mad(_1923 - _1926, 0.959999978542327880859375f, _1926), 1.0000000133514319600180897396058e-10f)) * 0.3010300099849700927734375f;
        float _1941 = log2(max(mad(_1924 - _1926, 0.959999978542327880859375f, _1926), 1.0000000133514319600180897396058e-10f)) * 0.3010300099849700927734375f;
        float _1946 = log2(asfloat(cb0[8u].x)) * 0.3010300099849700927734375f;
        float _2153;
        if (_1939 <= _1946) {
          _2153 = log2(asfloat(cb0[8u].y)) * 0.3010300099849700927734375f;
        } else {
          float _1963 = log2(asfloat(cb0[9u].x)) * 0.3010300099849700927734375f;
          float _2152;
          if ((_1939 > _1946) && (_1939 < _1963)) {
            float _1972 = ((_1939 - _1946) * 3.0f) / (_1963 - _1946);
            int _1973 = cvt_f32_i32(_1972);
            float _1975 = _1972 - trunc(_1972);
            uint _1976 = uint(_1973);
            float4 _1998 = float4(asfloat(cb0[10u].x), asfloat(cb0[10u].y), asfloat(cb0[10u].z), asfloat(cb0[10u].w));
            float _2003 = asfloat(cb0[12u].x);
            float _2006 = mad(_2003, float(_1976 == 5u), mad(float(_1976 == 4u), _2003, dp4_f32(float4(float(_1976 == 0u), float(_1976 == 1u), float(_1976 == 2u), float(_1976 == 3u)), _1998)));
            uint _2008 = uint(_1973 + 1);
            uint _2010 = uint(_1973 + 2);
            float _2028 = mad(_2003, float(_2008 == 5u), mad(_2003, float(_2008 == 4u), dp4_f32(float4(float(_2008 == 0u), float(_2008 == 1u), float(_2008 == 2u), float(_2008 == 3u)), _1998)));
            float2 _2046 = float2(_2006, _2028);
            _2152 = dp3_f32(float3(_1975 * _1975, _1975, 1.0f), float3(dp3_f32(float3(_2006, mad(_2003, float(_2010 == 5u), mad(_2003, float(_2010 == 4u), dp4_f32(float4(float(_2010 == 0u), float(_2010 == 1u), float(_2010 == 2u), float(_2010 == 3u)), _1998))), _2028), float3(0.5f, 0.5f, -1.0f)), dp2_f32(_2046, float2(-1.0f, 1.0f)), dp2_f32(_2046, 0.5f.xx)));
          } else {
            float _2057 = log2(asfloat(cb0[8u].z)) * 0.3010300099849700927734375f;
            float _2151;
            if ((_1939 >= _1963) && (_1939 < _2057)) {
              float _2066 = ((_1939 - _1963) * 3.0f) / (_2057 - _1963);
              int _2067 = cvt_f32_i32(_2066);
              float _2069 = _2066 - trunc(_2066);
              uint _2070 = uint(_2067);
              float4 _2092 = float4(asfloat(cb0[11u].x), asfloat(cb0[11u].y), asfloat(cb0[11u].z), asfloat(cb0[11u].w));
              float _2097 = asfloat(cb0[12u].y);
              float _2100 = mad(_2097, float(_2070 == 5u), mad(float(_2070 == 4u), _2097, dp4_f32(float4(float(_2070 == 0u), float(_2070 == 1u), float(_2070 == 2u), float(_2070 == 3u)), _2092)));
              uint _2102 = uint(_2067 + 1);
              uint _2104 = uint(_2067 + 2);
              float _2122 = mad(_2097, float(_2102 == 5u), mad(_2097, float(_2102 == 4u), dp4_f32(float4(float(_2102 == 0u), float(_2102 == 1u), float(_2102 == 2u), float(_2102 == 3u)), _2092)));
              float2 _2140 = float2(_2100, _2122);
              _2151 = dp3_f32(float3(_2069 * _2069, _2069, 1.0f), float3(dp3_f32(float3(_2100, mad(_2097, float(_2104 == 5u), mad(_2097, float(_2104 == 4u), dp4_f32(float4(float(_2104 == 0u), float(_2104 == 1u), float(_2104 == 2u), float(_2104 == 3u)), _2092))), _2122), float3(0.5f, 0.5f, -1.0f)), dp2_f32(_2140, float2(-1.0f, 1.0f)), dp2_f32(_2140, 0.5f.xx)));
            } else {
              _2151 = log2(asfloat(cb0[8u].w)) * 0.3010300099849700927734375f;
            }
            _2152 = _2151;
          }
          _2153 = _2152;
        }
        float _2359;
        if (_1946 >= _1940) {
          _2359 = log2(asfloat(cb0[8u].y)) * 0.3010300099849700927734375f;
        } else {
          float _2169 = log2(asfloat(cb0[9u].x)) * 0.3010300099849700927734375f;
          float _2358;
          if ((_1946 < _1940) && (_2169 > _1940)) {
            float _2178 = ((_1940 - _1946) * 3.0f) / (_2169 - _1946);
            int _2179 = cvt_f32_i32(_2178);
            float _2181 = _2178 - trunc(_2178);
            uint _2182 = uint(_2179);
            float4 _2204 = float4(asfloat(cb0[10u].x), asfloat(cb0[10u].y), asfloat(cb0[10u].z), asfloat(cb0[10u].w));
            float _2209 = asfloat(cb0[12u].x);
            float _2212 = mad(_2209, float(_2182 == 5u), mad(float(_2182 == 4u), _2209, dp4_f32(float4(float(_2182 == 0u), float(_2182 == 1u), float(_2182 == 2u), float(_2182 == 3u)), _2204)));
            uint _2214 = uint(_2179 + 1);
            uint _2216 = uint(_2179 + 2);
            float _2234 = mad(_2209, float(_2214 == 5u), mad(_2209, float(_2214 == 4u), dp4_f32(float4(float(_2214 == 0u), float(_2214 == 1u), float(_2214 == 2u), float(_2214 == 3u)), _2204)));
            float2 _2252 = float2(_2212, _2234);
            _2358 = dp3_f32(float3(_2181 * _2181, _2181, 1.0f), float3(dp3_f32(float3(_2212, mad(_2209, float(_2216 == 5u), mad(_2209, float(_2216 == 4u), dp4_f32(float4(float(_2216 == 0u), float(_2216 == 1u), float(_2216 == 2u), float(_2216 == 3u)), _2204))), _2234), float3(0.5f, 0.5f, -1.0f)), dp2_f32(_2252, float2(-1.0f, 1.0f)), dp2_f32(_2252, 0.5f.xx)));
          } else {
            float _2263 = log2(asfloat(cb0[8u].z)) * 0.3010300099849700927734375f;
            float _2357;
            if ((_2169 <= _1940) && (_2263 > _1940)) {
              float _2272 = ((_1940 - _2169) * 3.0f) / (_2263 - _2169);
              int _2273 = cvt_f32_i32(_2272);
              float _2275 = _2272 - trunc(_2272);
              uint _2276 = uint(_2273);
              float4 _2298 = float4(asfloat(cb0[11u].x), asfloat(cb0[11u].y), asfloat(cb0[11u].z), asfloat(cb0[11u].w));
              float _2303 = asfloat(cb0[12u].y);
              float _2306 = mad(_2303, float(_2276 == 5u), mad(float(_2276 == 4u), _2303, dp4_f32(float4(float(_2276 == 0u), float(_2276 == 1u), float(_2276 == 2u), float(_2276 == 3u)), _2298)));
              uint _2308 = uint(_2273 + 1);
              uint _2310 = uint(_2273 + 2);
              float _2328 = mad(_2303, float(_2308 == 5u), mad(_2303, float(_2308 == 4u), dp4_f32(float4(float(_2308 == 0u), float(_2308 == 1u), float(_2308 == 2u), float(_2308 == 3u)), _2298)));
              float2 _2346 = float2(_2306, _2328);
              _2357 = dp3_f32(float3(_2275 * _2275, _2275, 1.0f), float3(dp3_f32(float3(_2306, mad(_2303, float(_2310 == 5u), mad(_2303, float(_2310 == 4u), dp4_f32(float4(float(_2310 == 0u), float(_2310 == 1u), float(_2310 == 2u), float(_2310 == 3u)), _2298))), _2328), float3(0.5f, 0.5f, -1.0f)), dp2_f32(_2346, float2(-1.0f, 1.0f)), dp2_f32(_2346, 0.5f.xx)));
            } else {
              _2357 = log2(asfloat(cb0[8u].w)) * 0.3010300099849700927734375f;
            }
            _2358 = _2357;
          }
          _2359 = _2358;
        }
        float _2565;
        if (_1946 >= _1941) {
          _2565 = log2(asfloat(cb0[8u].y)) * 0.3010300099849700927734375f;
        } else {
          float _2375 = log2(asfloat(cb0[9u].x)) * 0.3010300099849700927734375f;
          float _2564;
          if ((_1946 < _1941) && (_2375 > _1941)) {
            float _2384 = ((_1941 - _1946) * 3.0f) / (_2375 - _1946);
            int _2385 = cvt_f32_i32(_2384);
            float _2387 = _2384 - trunc(_2384);
            uint _2388 = uint(_2385);
            float4 _2410 = float4(asfloat(cb0[10u].x), asfloat(cb0[10u].y), asfloat(cb0[10u].z), asfloat(cb0[10u].w));
            float _2415 = asfloat(cb0[12u].x);
            float _2418 = mad(_2415, float(_2388 == 5u), mad(float(_2388 == 4u), _2415, dp4_f32(float4(float(_2388 == 0u), float(_2388 == 1u), float(_2388 == 2u), float(_2388 == 3u)), _2410)));
            uint _2420 = uint(_2385 + 1);
            uint _2422 = uint(_2385 + 2);
            float _2440 = mad(_2415, float(_2420 == 5u), mad(_2415, float(_2420 == 4u), dp4_f32(float4(float(_2420 == 0u), float(_2420 == 1u), float(_2420 == 2u), float(_2420 == 3u)), _2410)));
            float2 _2458 = float2(_2418, _2440);
            _2564 = dp3_f32(float3(_2387 * _2387, _2387, 1.0f), float3(dp3_f32(float3(_2418, mad(_2415, float(_2422 == 5u), mad(_2415, float(_2422 == 4u), dp4_f32(float4(float(_2422 == 0u), float(_2422 == 1u), float(_2422 == 2u), float(_2422 == 3u)), _2410))), _2440), float3(0.5f, 0.5f, -1.0f)), dp2_f32(_2458, float2(-1.0f, 1.0f)), dp2_f32(_2458, 0.5f.xx)));
          } else {
            float _2469 = log2(asfloat(cb0[8u].z)) * 0.3010300099849700927734375f;
            float _2563;
            if ((_2375 <= _1941) && (_2469 > _1941)) {
              float _2478 = ((_1941 - _2375) * 3.0f) / (_2469 - _2375);
              int _2479 = cvt_f32_i32(_2478);
              float _2481 = _2478 - trunc(_2478);
              uint _2482 = uint(_2479);
              float4 _2504 = float4(asfloat(cb0[11u].x), asfloat(cb0[11u].y), asfloat(cb0[11u].z), asfloat(cb0[11u].w));
              float _2509 = asfloat(cb0[12u].y);
              float _2512 = mad(_2509, float(_2482 == 5u), mad(float(_2482 == 4u), _2509, dp4_f32(float4(float(_2482 == 0u), float(_2482 == 1u), float(_2482 == 2u), float(_2482 == 3u)), _2504)));
              uint _2514 = uint(_2479 + 1);
              uint _2516 = uint(_2479 + 2);
              float _2534 = mad(_2509, float(_2514 == 5u), mad(_2509, float(_2514 == 4u), dp4_f32(float4(float(_2514 == 0u), float(_2514 == 1u), float(_2514 == 2u), float(_2514 == 3u)), _2504)));
              float2 _2552 = float2(_2512, _2534);
              _2563 = dp3_f32(float3(_2481 * _2481, _2481, 1.0f), float3(dp3_f32(float3(_2512, mad(_2509, float(_2516 == 5u), mad(_2509, float(_2516 == 4u), dp4_f32(float4(float(_2516 == 0u), float(_2516 == 1u), float(_2516 == 2u), float(_2516 == 3u)), _2504))), _2534), float3(0.5f, 0.5f, -1.0f)), dp2_f32(_2552, float2(-1.0f, 1.0f)), dp2_f32(_2552, 0.5f.xx)));
            } else {
              _2563 = log2(asfloat(cb0[8u].w)) * 0.3010300099849700927734375f;
            }
            _2564 = _2563;
          }
          _2565 = _2564;
        }
        float _2570 = asfloat(cb0[8u].y);
        float _2574 = asfloat(cb0[8u].w);
        float _2575 = _2574 - _2570;
        float3 _2581 = float3((exp2(_2153 * 3.3219280242919921875f) - _2570) / _2575, (exp2(_2359 * 3.3219280242919921875f) - _2570) / _2575, (exp2(_2565 * 3.3219280242919921875f) - _2570) / _2575);
        float3 _2585 = float3(dp3_f32(float3(0.662454187870025634765625f, 0.1340042054653167724609375f, 0.1561876833438873291015625f), _2581), dp3_f32(float3(0.272228717803955078125f, 0.674081742763519287109375f, 0.053689517080783843994140625f), _2581), dp3_f32(float3(-0.0055746496655046939849853515625f, 0.0040607335977256298065185546875f, 1.01033914089202880859375f), _2581));
        float3 _2592 = float3(clamp(dp3_f32(float3(1.6410233974456787109375f, -0.324803292751312255859375f, -0.23642469942569732666015625f), _2585), 0.0f, 1.0f), clamp(dp3_f32(float3(-0.663662850856781005859375f, 1.6153316497802734375f, 0.016756348311901092529296875f), _2585), 0.0f, 1.0f), clamp(dp3_f32(float3(0.01172189414501190185546875f, -0.008284442126750946044921875f, 0.98839485645294189453125f), _2585), 0.0f, 1.0f));
        float3 _2596 = float3(dp3_f32(float3(0.662454187870025634765625f, 0.1340042054653167724609375f, 0.1561876833438873291015625f), _2592), dp3_f32(float3(0.272228717803955078125f, 0.674081742763519287109375f, 0.053689517080783843994140625f), _2592), dp3_f32(float3(-0.0055746496655046939849853515625f, 0.0040607335977256298065185546875f, 1.01033914089202880859375f), _2592));
        float _2606 = clamp(max(dp3_f32(float3(1.6410233974456787109375f, -0.324803292751312255859375f, -0.23642469942569732666015625f), _2596), 0.0f) * _2574, 0.0f, 65535.0f);
        float _2607 = clamp(_2574 * max(dp3_f32(float3(-0.663662850856781005859375f, 1.6153316497802734375f, 0.016756348311901092529296875f), _2596), 0.0f), 0.0f, 65535.0f);
        float _2608 = clamp(_2574 * max(dp3_f32(float3(0.01172189414501190185546875f, -0.008284442126750946044921875f, 0.98839485645294189453125f), _2596), 0.0f), 0.0f, 65535.0f);
        bool _2609 = cb0[40u].w != 5u;
        float3 _2611 = float3(_2606, _2607, _2608);
        float _2629 = exp2(log2((_2609 ? dp3_f32(float3(_435, _436, _437), _2611) : _2606) * 9.9999997473787516355514526367188e-05f) * 0.1593017578125f);
        float _2630 = exp2(log2((_2609 ? dp3_f32(float3(_438, _439, _440), _2611) : _2607) * 9.9999997473787516355514526367188e-05f) * 0.1593017578125f);
        float _2631 = exp2(log2((_2609 ? dp3_f32(float3(_441, _442, _443), _2611) : _2608) * 9.9999997473787516355514526367188e-05f) * 0.1593017578125f);
        _3754 = exp2(log2((1.0f / mad(_2631, 18.6875f, 1.0f)) * mad(_2631, 18.8515625f, 0.8359375f)) * 78.84375f);
        _3755 = exp2(log2((1.0f / mad(_2630, 18.6875f, 1.0f)) * mad(_2630, 18.8515625f, 0.8359375f)) * 78.84375f);
        _3756 = exp2(log2((1.0f / mad(_2629, 18.6875f, 1.0f)) * mad(_2629, 18.8515625f, 0.8359375f)) * 78.84375f);
      } else {
        float _3751;
        float _3752;
        float _3753;
        if ((cb0[40u].w == 4u) || (cb0[40u].w == 6u)) {
          float _2661 = asfloat(cb0[12u].z);
          float3 _2674 = float3(_1642 * _2661, _2661 * _1643, _2661 * _1644);
          float _2675 = dp3_f32(float3(asfloat(cb1_m[16u].x), asfloat(cb1_m[16u].y), asfloat(cb1_m[16u].z)), _2674);
          float _2685 = dp3_f32(float3(asfloat(cb1_m[17u].x), asfloat(cb1_m[17u].y), asfloat(cb1_m[17u].z)), _2674);
          float _2695 = dp3_f32(float3(asfloat(cb1_m[18u].x), asfloat(cb1_m[18u].y), asfloat(cb1_m[18u].z)), _2674);
          float3 _2696 = float3(_2675, _2685, _2695);
          float _2697 = dp3_f32(float3(1.45143926143646240234375f, -0.236510753631591796875f, -0.214928567409515380859375f), _2696);
          float _2698 = dp3_f32(float3(-0.07655377686023712158203125f, 1.1762297153472900390625f, -0.0996759235858917236328125f), _2696);
          float _2699 = dp3_f32(float3(0.0083161480724811553955078125f, -0.0060324496589601039886474609375f, 0.99771630764007568359375f), _2696);
          float _2701 = max(_2697, max(_2698, _2699));
          float _2767;
          float _2768;
          float _2769;
          if (!((((_2675 < 0.0f) || (_2685 < 0.0f)) || (_2695 < 0.0f)) || (_2701 < 1.0000000133514319600180897396058e-10f))) {
            float _2715 = abs(_2701);
            float _2716 = (_2701 - _2697) / _2715;
            float _2717 = (_2701 - _2698) / _2715;
            float _2718 = (_2701 - _2699) / _2715;
            float _2722 = _2716 - 0.814999997615814208984375f;
            float _2723 = _2717 - 0.802999973297119140625f;
            float _2724 = _2718 - 0.87999999523162841796875f;
            _2767 = mad(-_2715, (_2718 < 0.87999999523162841796875f) ? _2718 : (((_2724 * 1.0f) / exp2(log2(exp2(log2(_2724 * 6.810994625091552734375f) * 1.2000000476837158203125f) + 1.0f) * 0.833333313465118408203125f)) + 0.87999999523162841796875f), _2701);
            _2768 = mad(-_2715, (_2717 < 0.802999973297119140625f) ? _2717 : (((_2723 * 1.0f) / exp2(log2(exp2(log2(_2723 * 3.49726104736328125f) * 1.2000000476837158203125f) + 1.0f) * 0.833333313465118408203125f)) + 0.802999973297119140625f), _2701);
            _2769 = mad(-_2715, (_2716 < 0.814999997615814208984375f) ? _2716 : (((_2722 * 1.0f) / exp2(log2(exp2(log2(_2722 * 3.055283069610595703125f) * 1.2000000476837158203125f) + 1.0f) * 0.833333313465118408203125f)) + 0.814999997615814208984375f), _2701);
          } else {
            _2767 = _2699;
            _2768 = _2698;
            _2769 = _2697;
          }
          float3 _2770 = float3(_2769, _2768, _2767);
          float _2779 = asfloat(cb0[12u].w);
          float _2780 = mad(dp3_f32(float3(0.695452213287353515625f, 0.140678703784942626953125f, 0.16386906802654266357421875f), _2770) - _2675, _2779, _2675);
          float _2781 = mad(_2779, dp3_f32(float3(0.0447945632040500640869140625f, 0.859671115875244140625f, 0.095534317195415496826171875f), _2770) - _2685, _2685);
          float _2782 = mad(_2779, dp3_f32(float3(-0.0055258828215301036834716796875f, 0.0040252101607620716094970703125f, 1.00150072574615478515625f), _2770) - _2695, _2695);
          float _2786 = max(max(_2780, _2781), _2782);
          float _2791 = (max(_2786, 1.0000000133514319600180897396058e-10f) - max(min(min(_2780, _2781), _2782), 1.0000000133514319600180897396058e-10f)) / max(_2786, 0.00999999977648258209228515625f);
          float _2802 = mad(sqrt(mad(_2780, _2780 - _2782, ((_2782 - _2781) * _2782) + ((_2781 - _2780) * _2781))), 1.75f, _2780 + (_2782 + _2781));
          float _2804 = _2791 - 0.4000000059604644775390625f;
          float _2808 = max(1.0f - abs(_2804 * 2.5f), 0.0f);
          float _2819 = mad(float(int(((_2804 < 0.0f) ? 4294967295u : 0u) + uint(_2804 > 0.0f))), mad(-_2808, _2808, 1.0f), 1.0f) * 0.02500000037252902984619140625f;
          float _2827 = ((_2802 <= 0.1599999964237213134765625f) ? _2819 : ((_2802 >= 0.4799999892711639404296875f) ? 0.0f : (_2819 * ((0.07999999821186065673828125f / (_2802 * 0.3333333432674407958984375f)) - 0.5f)))) + 1.0f;
          float _2828 = _2780 * _2827;
          float _2829 = _2827 * _2781;
          float _2830 = _2827 * _2782;
          float _2835 = (_2829 - _2830) * 1.73205077648162841796875f;
          float _2837 = (_2828 * 2.0f) - _2829;
          float _2839 = mad(-_2827, _2782, _2837);
          float _2840 = abs(_2835);
          float _2841 = abs(_2839);
          float _2845 = min(_2840, _2841) * (1.0f / max(_2840, _2841));
          float _2846 = _2845 * _2845;
          float _2850 = mad(_2846, mad(_2846, mad(_2846, mad(_2846, 0.02083509974181652069091796875f, -0.08513300120830535888671875f), 0.1801410019397735595703125f), -0.33029949665069580078125f), 0.999866008758544921875f);
          float _2860 = mad(_2845, _2850, (_2840 > _2841) ? mad(_2845 * _2850, -2.0f, 1.57079637050628662109375f) : 0.0f) + ((_2839 < mad(_2827, _2782, -_2837)) ? (-3.1415927410125732421875f) : 0.0f);
          float _2861 = min(_2835, _2839);
          float _2862 = max(_2835, _2839);
          float _2871 = ((_2828 == _2829) && (_2830 == _2829)) ? 0.0f : ((((_2861 < (-_2861)) && (_2862 >= (-_2862))) ? (-_2860) : _2860) * 57.295780181884765625f);
          float _2875 = clamp((_2871 < 0.0f) ? (_2871 + 360.0f) : _2871, 0.0f, 360.0f);
          float _2878 = (_2875 > 180.0f) ? (_2875 - 360.0f) : _2875;
          float _2915;
          if ((_2878 > (-67.5f)) && (_2878 < 67.5f)) {
            float _2885 = _2878 + 67.5f;
            float _2886 = _2885 * 0.0296296291053295135498046875f;
            float _2890 = mad(_2885, 0.0296296291053295135498046875f, -trunc(_2886));
            float _2891 = _2890 * _2890;
            float _2892 = _2890 * _2891;
            float _2896 = _2891 * 0.5f;
            uint _2904 = uint(cvt_f32_i32(_2886));
            _2915 = (_2904 == 3u) ? (mad(_2890, -0.5f, (_2892 * (-0.16666667163372039794921875f)) + _2896) + 0.16666667163372039794921875f) : ((_2904 == 2u) ? (((_2892 * 0.5f) - _2891) + 0.666666686534881591796875f) : ((_2904 == 1u) ? (mad(_2890, 0.5f, _2896 + (_2892 * (-0.5f))) + 0.16666667163372039794921875f) : ((_2904 != 0u) ? 0.0f : (_2892 * 0.16666667163372039794921875f))));
          } else {
            _2915 = 0.0f;
          }
          float3 _2926 = float3(clamp(_2828 + ((((_2791 * _2915) * 1.5f) * mad(-_2780, _2827, 0.02999999932944774627685546875f)) * 0.180000007152557373046875f), 0.0f, 65535.0f), clamp(_2829, 0.0f, 65535.0f), clamp(_2830, 0.0f, 65535.0f));
          float _2930 = clamp(dp3_f32(float3(1.45143926143646240234375f, -0.236510753631591796875f, -0.214928567409515380859375f), _2926), 0.0f, 65504.0f);
          float _2931 = clamp(dp3_f32(float3(-0.07655377686023712158203125f, 1.1762297153472900390625f, -0.0996759235858917236328125f), _2926), 0.0f, 65504.0f);
          float _2932 = clamp(dp3_f32(float3(0.0083161480724811553955078125f, -0.0060324496589601039886474609375f, 0.99771630764007568359375f), _2926), 0.0f, 65504.0f);
          float _2934 = dp3_f32(float3(_2930, _2931, _2932), float3(0.272228717803955078125f, 0.674081742763519287109375f, 0.053689517080783843994140625f));
          float _2947 = log2(max(mad(_2930 - _2934, 0.959999978542327880859375f, _2934), 1.0000000133514319600180897396058e-10f)) * 0.3010300099849700927734375f;
          float _2948 = log2(max(mad(_2931 - _2934, 0.959999978542327880859375f, _2934), 1.0000000133514319600180897396058e-10f)) * 0.3010300099849700927734375f;
          float _2949 = log2(max(mad(_2932 - _2934, 0.959999978542327880859375f, _2934), 1.0000000133514319600180897396058e-10f)) * 0.3010300099849700927734375f;
          float _2954 = log2(asfloat(cb0[8u].x)) * 0.3010300099849700927734375f;
          float _3161;
          if (_2947 <= _2954) {
            _3161 = log2(asfloat(cb0[8u].y)) * 0.3010300099849700927734375f;
          } else {
            float _2971 = log2(asfloat(cb0[9u].x)) * 0.3010300099849700927734375f;
            float _3160;
            if ((_2947 > _2954) && (_2947 < _2971)) {
              float _2980 = ((_2947 - _2954) * 3.0f) / (_2971 - _2954);
              int _2981 = cvt_f32_i32(_2980);
              float _2983 = _2980 - trunc(_2980);
              uint _2984 = uint(_2981);
              float4 _3006 = float4(asfloat(cb0[10u].x), asfloat(cb0[10u].y), asfloat(cb0[10u].z), asfloat(cb0[10u].w));
              float _3011 = asfloat(cb0[12u].x);
              float _3014 = mad(_3011, float(_2984 == 5u), mad(float(_2984 == 4u), _3011, dp4_f32(float4(float(_2984 == 0u), float(_2984 == 1u), float(_2984 == 2u), float(_2984 == 3u)), _3006)));
              uint _3016 = uint(_2981 + 1);
              uint _3018 = uint(_2981 + 2);
              float _3036 = mad(_3011, float(_3016 == 5u), mad(_3011, float(_3016 == 4u), dp4_f32(float4(float(_3016 == 0u), float(_3016 == 1u), float(_3016 == 2u), float(_3016 == 3u)), _3006)));
              float2 _3054 = float2(_3014, _3036);
              _3160 = dp3_f32(float3(_2983 * _2983, _2983, 1.0f), float3(dp3_f32(float3(_3014, mad(_3011, float(_3018 == 5u), mad(_3011, float(_3018 == 4u), dp4_f32(float4(float(_3018 == 0u), float(_3018 == 1u), float(_3018 == 2u), float(_3018 == 3u)), _3006))), _3036), float3(0.5f, 0.5f, -1.0f)), dp2_f32(_3054, float2(-1.0f, 1.0f)), dp2_f32(_3054, 0.5f.xx)));
            } else {
              float _3065 = log2(asfloat(cb0[8u].z)) * 0.3010300099849700927734375f;
              float _3159;
              if ((_2947 >= _2971) && (_2947 < _3065)) {
                float _3074 = ((_2947 - _2971) * 3.0f) / (_3065 - _2971);
                int _3075 = cvt_f32_i32(_3074);
                float _3077 = _3074 - trunc(_3074);
                uint _3078 = uint(_3075);
                float4 _3100 = float4(asfloat(cb0[11u].x), asfloat(cb0[11u].y), asfloat(cb0[11u].z), asfloat(cb0[11u].w));
                float _3105 = asfloat(cb0[12u].y);
                float _3108 = mad(_3105, float(_3078 == 5u), mad(float(_3078 == 4u), _3105, dp4_f32(float4(float(_3078 == 0u), float(_3078 == 1u), float(_3078 == 2u), float(_3078 == 3u)), _3100)));
                uint _3110 = uint(_3075 + 1);
                uint _3112 = uint(_3075 + 2);
                float _3130 = mad(_3105, float(_3110 == 5u), mad(_3105, float(_3110 == 4u), dp4_f32(float4(float(_3110 == 0u), float(_3110 == 1u), float(_3110 == 2u), float(_3110 == 3u)), _3100)));
                float2 _3148 = float2(_3108, _3130);
                _3159 = dp3_f32(float3(_3077 * _3077, _3077, 1.0f), float3(dp3_f32(float3(_3108, mad(_3105, float(_3112 == 5u), mad(_3105, float(_3112 == 4u), dp4_f32(float4(float(_3112 == 0u), float(_3112 == 1u), float(_3112 == 2u), float(_3112 == 3u)), _3100))), _3130), float3(0.5f, 0.5f, -1.0f)), dp2_f32(_3148, float2(-1.0f, 1.0f)), dp2_f32(_3148, 0.5f.xx)));
              } else {
                _3159 = log2(asfloat(cb0[8u].w)) * 0.3010300099849700927734375f;
              }
              _3160 = _3159;
            }
            _3161 = _3160;
          }
          float _3367;
          if (_2948 <= _2954) {
            _3367 = log2(asfloat(cb0[8u].y)) * 0.3010300099849700927734375f;
          } else {
            float _3177 = log2(asfloat(cb0[9u].x)) * 0.3010300099849700927734375f;
            float _3366;
            if ((_2948 > _2954) && (_2948 < _3177)) {
              float _3186 = ((_2948 - _2954) * 3.0f) / (_3177 - _2954);
              int _3187 = cvt_f32_i32(_3186);
              float _3189 = _3186 - trunc(_3186);
              uint _3190 = uint(_3187);
              float4 _3212 = float4(asfloat(cb0[10u].x), asfloat(cb0[10u].y), asfloat(cb0[10u].z), asfloat(cb0[10u].w));
              float _3217 = asfloat(cb0[12u].x);
              float _3220 = mad(_3217, float(_3190 == 5u), mad(float(_3190 == 4u), _3217, dp4_f32(float4(float(_3190 == 0u), float(_3190 == 1u), float(_3190 == 2u), float(_3190 == 3u)), _3212)));
              uint _3222 = uint(_3187 + 1);
              uint _3224 = uint(_3187 + 2);
              float _3242 = mad(_3217, float(_3222 == 5u), mad(_3217, float(_3222 == 4u), dp4_f32(float4(float(_3222 == 0u), float(_3222 == 1u), float(_3222 == 2u), float(_3222 == 3u)), _3212)));
              float2 _3260 = float2(_3220, _3242);
              _3366 = dp3_f32(float3(_3189 * _3189, _3189, 1.0f), float3(dp3_f32(float3(_3220, mad(_3217, float(_3224 == 5u), mad(_3217, float(_3224 == 4u), dp4_f32(float4(float(_3224 == 0u), float(_3224 == 1u), float(_3224 == 2u), float(_3224 == 3u)), _3212))), _3242), float3(0.5f, 0.5f, -1.0f)), dp2_f32(_3260, float2(-1.0f, 1.0f)), dp2_f32(_3260, 0.5f.xx)));
            } else {
              float _3271 = log2(asfloat(cb0[8u].z)) * 0.3010300099849700927734375f;
              float _3365;
              if ((_2948 >= _3177) && (_2948 < _3271)) {
                float _3280 = ((_2948 - _3177) * 3.0f) / (_3271 - _3177);
                int _3281 = cvt_f32_i32(_3280);
                float _3283 = _3280 - trunc(_3280);
                uint _3284 = uint(_3281);
                float4 _3306 = float4(asfloat(cb0[11u].x), asfloat(cb0[11u].y), asfloat(cb0[11u].z), asfloat(cb0[11u].w));
                float _3311 = asfloat(cb0[12u].y);
                float _3314 = mad(_3311, float(_3284 == 5u), mad(float(_3284 == 4u), _3311, dp4_f32(float4(float(_3284 == 0u), float(_3284 == 1u), float(_3284 == 2u), float(_3284 == 3u)), _3306)));
                uint _3316 = uint(_3281 + 1);
                uint _3318 = uint(_3281 + 2);
                float _3336 = mad(_3311, float(_3316 == 5u), mad(_3311, float(_3316 == 4u), dp4_f32(float4(float(_3316 == 0u), float(_3316 == 1u), float(_3316 == 2u), float(_3316 == 3u)), _3306)));
                float2 _3354 = float2(_3314, _3336);
                _3365 = dp3_f32(float3(_3283 * _3283, _3283, 1.0f), float3(dp3_f32(float3(_3314, mad(_3311, float(_3318 == 5u), mad(_3311, float(_3318 == 4u), dp4_f32(float4(float(_3318 == 0u), float(_3318 == 1u), float(_3318 == 2u), float(_3318 == 3u)), _3306))), _3336), float3(0.5f, 0.5f, -1.0f)), dp2_f32(_3354, float2(-1.0f, 1.0f)), dp2_f32(_3354, 0.5f.xx)));
              } else {
                _3365 = log2(asfloat(cb0[8u].w)) * 0.3010300099849700927734375f;
              }
              _3366 = _3365;
            }
            _3367 = _3366;
          }
          float _3573;
          if (_2949 <= _2954) {
            _3573 = log2(asfloat(cb0[8u].y)) * 0.3010300099849700927734375f;
          } else {
            float _3383 = log2(asfloat(cb0[9u].x)) * 0.3010300099849700927734375f;
            float _3572;
            if ((_2949 > _2954) && (_2949 < _3383)) {
              float _3392 = ((_2949 - _2954) * 3.0f) / (_3383 - _2954);
              int _3393 = cvt_f32_i32(_3392);
              float _3395 = _3392 - trunc(_3392);
              uint _3396 = uint(_3393);
              float4 _3418 = float4(asfloat(cb0[10u].x), asfloat(cb0[10u].y), asfloat(cb0[10u].z), asfloat(cb0[10u].w));
              float _3423 = asfloat(cb0[12u].x);
              float _3426 = mad(_3423, float(_3396 == 5u), mad(float(_3396 == 4u), _3423, dp4_f32(float4(float(_3396 == 0u), float(_3396 == 1u), float(_3396 == 2u), float(_3396 == 3u)), _3418)));
              uint _3428 = uint(_3393 + 1);
              uint _3430 = uint(_3393 + 2);
              float _3448 = mad(_3423, float(_3428 == 5u), mad(_3423, float(_3428 == 4u), dp4_f32(float4(float(_3428 == 0u), float(_3428 == 1u), float(_3428 == 2u), float(_3428 == 3u)), _3418)));
              float2 _3466 = float2(_3426, _3448);
              _3572 = dp3_f32(float3(_3395 * _3395, _3395, 1.0f), float3(dp3_f32(float3(_3426, mad(_3423, float(_3430 == 5u), mad(_3423, float(_3430 == 4u), dp4_f32(float4(float(_3430 == 0u), float(_3430 == 1u), float(_3430 == 2u), float(_3430 == 3u)), _3418))), _3448), float3(0.5f, 0.5f, -1.0f)), dp2_f32(_3466, float2(-1.0f, 1.0f)), dp2_f32(_3466, 0.5f.xx)));
            } else {
              float _3477 = log2(asfloat(cb0[8u].z)) * 0.3010300099849700927734375f;
              float _3571;
              if ((_2949 >= _3383) && (_2949 < _3477)) {
                float _3486 = ((_2949 - _3383) * 3.0f) / (_3477 - _3383);
                int _3487 = cvt_f32_i32(_3486);
                float _3489 = _3486 - trunc(_3486);
                uint _3490 = uint(_3487);
                float4 _3512 = float4(asfloat(cb0[11u].x), asfloat(cb0[11u].y), asfloat(cb0[11u].z), asfloat(cb0[11u].w));
                float _3517 = asfloat(cb0[12u].y);
                float _3520 = mad(_3517, float(_3490 == 5u), mad(float(_3490 == 4u), _3517, dp4_f32(float4(float(_3490 == 0u), float(_3490 == 1u), float(_3490 == 2u), float(_3490 == 3u)), _3512)));
                uint _3522 = uint(_3487 + 1);
                uint _3524 = uint(_3487 + 2);
                float _3542 = mad(_3517, float(_3522 == 5u), mad(_3517, float(_3522 == 4u), dp4_f32(float4(float(_3522 == 0u), float(_3522 == 1u), float(_3522 == 2u), float(_3522 == 3u)), _3512)));
                float2 _3560 = float2(_3520, _3542);
                _3571 = dp3_f32(float3(_3489 * _3489, _3489, 1.0f), float3(dp3_f32(float3(_3520, mad(_3517, float(_3524 == 5u), mad(_3517, float(_3524 == 4u), dp4_f32(float4(float(_3524 == 0u), float(_3524 == 1u), float(_3524 == 2u), float(_3524 == 3u)), _3512))), _3542), float3(0.5f, 0.5f, -1.0f)), dp2_f32(_3560, float2(-1.0f, 1.0f)), dp2_f32(_3560, 0.5f.xx)));
              } else {
                _3571 = log2(asfloat(cb0[8u].w)) * 0.3010300099849700927734375f;
              }
              _3572 = _3571;
            }
            _3573 = _3572;
          }
          float _3578 = asfloat(cb0[8u].y);
          float _3582 = asfloat(cb0[8u].w);
          float _3583 = _3582 - _3578;
          float3 _3589 = float3((exp2(_3161 * 3.3219280242919921875f) - _3578) / _3583, (exp2(_3367 * 3.3219280242919921875f) - _3578) / _3583, (exp2(_3573 * 3.3219280242919921875f) - _3578) / _3583);
          float3 _3593 = float3(dp3_f32(float3(0.662454187870025634765625f, 0.1340042054653167724609375f, 0.1561876833438873291015625f), _3589), dp3_f32(float3(0.272228717803955078125f, 0.674081742763519287109375f, 0.053689517080783843994140625f), _3589), dp3_f32(float3(-0.0055746496655046939849853515625f, 0.0040607335977256298065185546875f, 1.01033914089202880859375f), _3589));
          float3 _3600 = float3(clamp(dp3_f32(float3(1.6410233974456787109375f, -0.324803292751312255859375f, -0.23642469942569732666015625f), _3593), 0.0f, 1.0f), clamp(dp3_f32(float3(-0.663662850856781005859375f, 1.6153316497802734375f, 0.016756348311901092529296875f), _3593), 0.0f, 1.0f), clamp(dp3_f32(float3(0.01172189414501190185546875f, -0.008284442126750946044921875f, 0.98839485645294189453125f), _3593), 0.0f, 1.0f));
          float3 _3604 = float3(dp3_f32(float3(0.662454187870025634765625f, 0.1340042054653167724609375f, 0.1561876833438873291015625f), _3600), dp3_f32(float3(0.272228717803955078125f, 0.674081742763519287109375f, 0.053689517080783843994140625f), _3600), dp3_f32(float3(-0.0055746496655046939849853515625f, 0.0040607335977256298065185546875f, 1.01033914089202880859375f), _3600));
          float _3614 = clamp(max(dp3_f32(float3(1.6410233974456787109375f, -0.324803292751312255859375f, -0.23642469942569732666015625f), _3604), 0.0f) * _3582, 0.0f, 65535.0f);
          float _3615 = clamp(max(dp3_f32(float3(-0.663662850856781005859375f, 1.6153316497802734375f, 0.016756348311901092529296875f), _3604), 0.0f) * _3582, 0.0f, 65535.0f);
          float _3616 = clamp(max(dp3_f32(float3(0.01172189414501190185546875f, -0.008284442126750946044921875f, 0.98839485645294189453125f), _3604), 0.0f) * _3582, 0.0f, 65535.0f);
          bool _3617 = cb0[40u].w != 6u;
          float3 _3619 = float3(_3614, _3615, _3616);
          float _3637 = exp2(log2((_3617 ? dp3_f32(float3(_435, _436, _437), _3619) : _3614) * 9.9999997473787516355514526367188e-05f) * 0.1593017578125f);
          float _3638 = exp2(log2((_3617 ? dp3_f32(float3(_438, _439, _440), _3619) : _3615) * 9.9999997473787516355514526367188e-05f) * 0.1593017578125f);
          float _3639 = exp2(log2((_3617 ? dp3_f32(float3(_441, _442, _443), _3619) : _3616) * 9.9999997473787516355514526367188e-05f) * 0.1593017578125f);
          _3751 = exp2(log2((1.0f / mad(_3639, 18.6875f, 1.0f)) * mad(_3639, 18.8515625f, 0.8359375f)) * 78.84375f);
          _3752 = exp2(log2((1.0f / mad(_3638, 18.6875f, 1.0f)) * mad(_3638, 18.8515625f, 0.8359375f)) * 78.84375f);
          _3753 = exp2(log2(mad(_3637, 18.8515625f, 0.8359375f) * (1.0f / mad(_3637, 18.6875f, 1.0f))) * 78.84375f);
        } else {
          float _3748;
          float _3749;
          float _3750;
          if (cb0[40u].w == 7u) {
            float3 _3665 = float3(_1642, _1643, _1644);
            float3 _3670 = float3(dp3_f32(_508, _3665), dp3_f32(_519, _3665), dp3_f32(_529, _3665));
            float _3685 = exp2(log2(dp3_f32(float3(_435, _436, _437), _3670) * 9.9999997473787516355514526367188e-05f) * 0.1593017578125f);
            float _3686 = exp2(log2(dp3_f32(float3(_438, _439, _440), _3670) * 9.9999997473787516355514526367188e-05f) * 0.1593017578125f);
            float _3687 = exp2(log2(dp3_f32(float3(_441, _442, _443), _3670) * 9.9999997473787516355514526367188e-05f) * 0.1593017578125f);
            _3748 = exp2(log2((1.0f / mad(_3687, 18.6875f, 1.0f)) * mad(_3687, 18.8515625f, 0.8359375f)) * 78.84375f);
            _3749 = exp2(log2((1.0f / mad(_3686, 18.6875f, 1.0f)) * mad(_3686, 18.8515625f, 0.8359375f)) * 78.84375f);
            _3750 = exp2(log2(mad(_3685, 18.8515625f, 0.8359375f) * (1.0f / mad(_3685, 18.6875f, 1.0f))) * 78.84375f);
          } else {
            bool _3709 = cb0[40u].w == 8u;
            bool _3710 = cb0[40u].w == 9u;
            float3 _3711 = float3(_1528, _1529, _1530);
            float3 _3715 = float3(_435, _436, _437);
            float3 _3716 = float3(dp3_f32(_508, _3711), dp3_f32(_519, _3711), dp3_f32(_529, _3711));
            float3 _3718 = float3(_438, _439, _440);
            float3 _3720 = float3(_441, _442, _443);
            float3 _3722 = float3(_1543, _1544, _1545);
            float3 _3726 = float3(dp3_f32(_508, _3722), dp3_f32(_519, _3722), dp3_f32(_529, _3722));
            float _3735 = asfloat(cb0[40u].z);
            _3748 = _3709 ? _1644 : (_3710 ? dp3_f32(_3720, _3716) : exp2(log2(dp3_f32(_3720, _3726)) * _3735));
            _3749 = _3709 ? _1643 : (_3710 ? dp3_f32(_3718, _3716) : exp2(log2(dp3_f32(_3718, _3726)) * _3735));
            _3750 = _3709 ? _1642 : (_3710 ? dp3_f32(_3715, _3716) : exp2(log2(dp3_f32(_3715, _3726)) * _3735));
          }
          _3751 = _3748;
          _3752 = _3749;
          _3753 = _3750;
        }
        _3754 = _3751;
        _3755 = _3752;
        _3756 = _3753;
      }
      _3757 = _3754;
      _3758 = _3755;
      _3759 = _3756;
    }
    _3760 = _3757;
    _3761 = _3758;
    _3762 = _3759;
  }
  SV_Target.x = _3762 * 0.95238101482391357421875f;
  SV_Target.y = _3761 * 0.95238101482391357421875f;
  SV_Target.z = _3760 * 0.95238101482391357421875f;
  SV_Target.w = 0.0f;
}

SPIRV_Cross_Output main(SPIRV_Cross_Input stage_input) {
  gl_Layer = stage_input.gl_Layer;
  TEXCOORD = stage_input.TEXCOORD;
  frag_main();
  SPIRV_Cross_Output stage_output;
  stage_output.SV_Target = SV_Target;
  return stage_output;
}
