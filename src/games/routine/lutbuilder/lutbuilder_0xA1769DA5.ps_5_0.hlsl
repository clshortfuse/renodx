#include "./filmiclutbuilder.hlsli"

// cbuffer cb0_buf : register(b0) {
//   uint4 cb0_m[42] : packoffset(c0);
// };

cbuffer cb1_buf : register(b1) {
  uint4 cb1_m[21] : packoffset(c0);
};

SamplerState s0 : register(s0);
SamplerState s1 : register(s1);
Texture2D<float4> t0 : register(t0);
Texture2D<float4> t1 : register(t1);

static uint gl_Layer;
static float2 TEXCOORD;
static float4 SV_Target;

struct SPIRV_Cross_Input {
  noperspective float2 TEXCOORD : TEXCOORD0;
  uint gl_Layer : SV_RenderTargetArrayIndex;
};

struct SPIRV_Cross_Output {
  float4 SV_Target : SV_Target0;
};

float dp3_f32(float3 a, float3 b) {
  precise float _374 = a.x * b.x;
  return mad(a.z, b.z, mad(a.y, b.y, _374));
}

int cvt_f32_i32(float v) {
  return isnan(v) ? 0 : ((v < (-2147483648.0f)) ? int(0x80000000) : ((v > 2147483520.0f) ? 2147483647 : int(v)));
}

float dp4_f32(float4 a, float4 b) {
  precise float _345 = a.x * b.x;
  return mad(a.w, b.w, mad(a.z, b.z, mad(a.y, b.y, _345)));
}

float dp2_f32(float2 a, float2 b) {
  precise float _333 = a.x * b.x;
  return mad(a.y, b.y, _333);
}

void frag_main() {
  float _388 = asfloat(cb0[35u].x);
  float _389 = 0.5f / _388;
  float _399 = _388 - 1.0f;
  float _400 = (_388 * (TEXCOORD.x - _389)) / _399;
  float _401 = (_388 * (TEXCOORD.y - _389)) / _399;
  float _404 = float(uint(gl_Layer)) / _399;
  bool _407 = cb0[41u].x == 1u;
  bool _408 = cb0[41u].x == 2u;
  bool _409 = cb0[41u].x == 3u;
  bool _410 = cb0[41u].x == 4u;
  float _438 = _407 ? 1.37921416759490966796875f : (_408 ? 1.0258247852325439453125f : (_409 ? 0.695452213287353515625f : (_410 ? 1.0f : 1.705050945281982421875f)));
  float _439 = _407 ? (-0.3088641464710235595703125f) : (_408 ? (-0.02005319111049175262451171875f) : (_409 ? 0.140678703784942626953125f : (_410 ? 0.0f : (-0.621792137622833251953125f))));
  float _440 = _407 ? (-0.070349983870983123779296875f) : (_408 ? (-0.00577155686914920806884765625f) : (_409 ? 0.16386906802654266357421875f : (_410 ? 0.0f : (-0.083258874714374542236328125f))));
  float _441 = _407 ? (-0.069334857165813446044921875f) : (_408 ? (-0.0022343695163726806640625f) : (_409 ? 0.0447945632040500640869140625f : (_410 ? 0.0f : (-0.1302564144134521484375f))));
  float _442 = _407 ? 1.08229672908782958984375f : (_408 ? 1.0045864582061767578125f : (_409 ? 0.859671115875244140625f : (_410 ? 1.0f : 1.140804767608642578125f)));
  float _443 = _407 ? (-0.012961887754499912261962890625f) : (_408 ? (-0.002352132461965084075927734375f) : (_409 ? 0.095534317195415496826171875f : (_410 ? 0.0f : (-0.010548318736255168914794921875f))));
  float _444 = _407 ? (-0.00215900945477187633514404296875f) : (_408 ? (-0.005013351328670978546142578125f) : (_409 ? (-0.0055258828215301036834716796875f) : (_410 ? 0.0f : (-0.0240033566951751708984375f))));
  float _445 = _407 ? (-0.0454593263566493988037109375f) : (_408 ? (-0.025290071964263916015625f) : (_409 ? 0.0040252101607620716094970703125f : (_410 ? 0.0f : (-0.12896896898746490478515625f))));
  float _446 = _407 ? 1.047618389129638671875f : (_408 ? 1.030303478240966796875f : (_409 ? 1.00150072574615478515625f : (_410 ? 1.0f : 1.15297234058380126953125f)));
  float _498;
  float _499;
  float _500;
  if (cb0[40u].w >= 3u) {
    float _459 = exp2(log2(_400) * 0.0126833133399486541748046875f);
    float _460 = exp2(log2(_401) * 0.0126833133399486541748046875f);
    float _461 = exp2(log2(_404) * 0.0126833133399486541748046875f);
    _498 = exp2(log2(max(_461 - 0.8359375f, 0.0f) / mad(_461, -18.6875f, 18.8515625f)) * 6.277394771575927734375f) * 100.0f;
    _499 = exp2(log2(max(_460 - 0.8359375f, 0.0f) / mad(_460, -18.6875f, 18.8515625f)) * 6.277394771575927734375f) * 100.0f;
    _500 = exp2(log2(max(_459 - 0.8359375f, 0.0f) / mad(_459, -18.6875f, 18.8515625f)) * 6.277394771575927734375f) * 100.0f;
  } else {
    _498 = mad(exp2((_404 - 0.434017598628997802734375f) * 14.0f), 0.180000007152557373046875f, -0.00266771926544606685638427734375f);
    _499 = mad(exp2((_401 - 0.434017598628997802734375f) * 14.0f), 0.180000007152557373046875f, -0.00266771926544606685638427734375f);
    _500 = mad(exp2((_400 - 0.434017598628997802734375f) * 14.0f), 0.180000007152557373046875f, -0.00266771926544606685638427734375f);
  }
  float3 _511 = float3(asfloat(cb1_m[8u].x), asfloat(cb1_m[8u].y), asfloat(cb1_m[8u].z));
  float3 _512 = float3(_500, _499, _498);
  float _513 = dp3_f32(_511, _512);
  float3 _522 = float3(asfloat(cb1_m[9u].x), asfloat(cb1_m[9u].y), asfloat(cb1_m[9u].z));
  float _523 = dp3_f32(_522, _512);
  float3 _532 = float3(asfloat(cb1_m[10u].x), asfloat(cb1_m[10u].y), asfloat(cb1_m[10u].z));
  float _533 = dp3_f32(_532, _512);
  float3 _534 = float3(_513, _523, _533);
  float _535 = dp3_f32(_534, float3(0.272228717803955078125f, 0.674081742763519287109375f, 0.053689517080783843994140625f));
  float3 _542 = float3((_513 / _535) - 1.0f, (_523 / _535) - 1.0f, (_533 / _535) - 1.0f);
  float _555 = (1.0f - exp2(dp3_f32(_542, _542) * (-4.0f))) * (1.0f - exp2(((_535 * _535) * asfloat(cb0[36u].w)) * (-4.0f)));
  float _562 = mad(_555, dp3_f32(float3(1.370412349700927734375f, -0.32929217815399169921875f, -0.0636831223964691162109375f), _534) - _513, _513);
  float _563 = mad(_555, dp3_f32(float3(-0.08343349397182464599609375f, 1.09709274768829345703125f, -0.010861379094421863555908203125f), _534) - _523, _523);
  float _564 = mad(_555, dp3_f32(float3(-0.025793321430683135986328125f, -0.098625801503658294677734375f, 1.20369493961334228515625f), _534) - _533, _533);
  float _566 = dp3_f32(float3(_562, _563, _564), float3(0.272228717803955078125f, 0.674081742763519287109375f, 0.053689517080783843994140625f));
  float _573 = asfloat(cb0[15u].x);
  float _574 = asfloat(cb0[15u].y);
  float _575 = asfloat(cb0[15u].z);
  float _576 = asfloat(cb0[15u].w);
  float _590 = _576 * asfloat(cb0[20u].w);
  float _597 = asfloat(cb0[16u].x);
  float _598 = asfloat(cb0[16u].y);
  float _599 = asfloat(cb0[16u].z);
  float _600 = asfloat(cb0[16u].w);
  float _614 = _600 * asfloat(cb0[21u].w);
  float _621 = asfloat(cb0[17u].x);
  float _622 = asfloat(cb0[17u].y);
  float _623 = asfloat(cb0[17u].z);
  float _624 = asfloat(cb0[17u].w);
  float _638 = _624 * asfloat(cb0[22u].w);
  float _645 = asfloat(cb0[18u].x);
  float _646 = asfloat(cb0[18u].y);
  float _647 = asfloat(cb0[18u].z);
  float _648 = asfloat(cb0[18u].w);
  float _662 = _648 * asfloat(cb0[23u].w);
  float _669 = asfloat(cb0[19u].x);
  float _670 = asfloat(cb0[19u].y);
  float _671 = asfloat(cb0[19u].z);
  float _672 = asfloat(cb0[19u].w);
  float _686 = _672 + asfloat(cb0[24u].w);
  float _690 = _562 - _566;
  float _691 = _563 - _566;
  float _692 = _564 - _566;
  float _746 = clamp(_566 * (1.0f / asfloat(cb0[35u].w)), 0.0f, 1.0f);
  float _747 = mad(_746, -2.0f, 3.0f);
  float _748 = _746 * _746;
  float _750 = mad(-_747, _748, 1.0f);
  float _764 = _576 * asfloat(cb0[30u].w);
  float _778 = _600 * asfloat(cb0[31u].w);
  float _792 = _624 * asfloat(cb0[32u].w);
  float _806 = _648 * asfloat(cb0[33u].w);
  float _820 = _672 + asfloat(cb0[34u].w);
  float _874 = asfloat(cb0[36u].x);
  float _882 = clamp((_566 - _874) * (1.0f / (asfloat(cb0[36u].y) - _874)), 0.0f, 1.0f);
  float _883 = mad(_882, -2.0f, 3.0f);
  float _884 = _882 * _882;
  float _885 = _883 * _884;
  float _899 = _576 * asfloat(cb0[25u].w);
  float _913 = _600 * asfloat(cb0[26u].w);
  float _927 = _624 * asfloat(cb0[27u].w);
  float _941 = _648 * asfloat(cb0[28u].w);
  float _955 = _672 + asfloat(cb0[29u].w);
  float _1010 = mad(-_883, _884, mad(_747, _748, -1.0f) + 1.0f);
  float _1020 = mad(mad(exp2((1.0f / ((_621 * asfloat(cb0[32u].x)) * _792)) * log2(exp2(((_597 * asfloat(cb0[31u].x)) * _778) * log2(max(mad(_690, (_573 * asfloat(cb0[30u].x)) * _764, _566), 0.0f) * 5.5555553436279296875f)) * 0.180000007152557373046875f)), (_645 * asfloat(cb0[33u].x)) * _806, (_669 + asfloat(cb0[34u].x)) + _820), _885, (mad(exp2((1.0f / ((_621 * asfloat(cb0[27u].x)) * _927)) * log2(exp2(((_597 * asfloat(cb0[26u].x)) * _913) * log2(max(mad(_690, (_573 * asfloat(cb0[25u].x)) * _899, _566), 0.0f) * 5.5555553436279296875f)) * 0.180000007152557373046875f)), (_645 * asfloat(cb0[28u].x)) * _941, (_669 + asfloat(cb0[29u].x)) + _955) * _1010) + (mad(exp2((1.0f / ((_621 * asfloat(cb0[22u].x)) * _638)) * log2(exp2(((_597 * asfloat(cb0[21u].x)) * _614) * log2(max(mad((_573 * asfloat(cb0[20u].x)) * _590, _690, _566), 0.0f) * 5.5555553436279296875f)) * 0.180000007152557373046875f)), (_645 * asfloat(cb0[23u].x)) * _662, (_669 + asfloat(cb0[24u].x)) + _686) * _750));
  float _1021 = mad(mad(_806 * (_646 * asfloat(cb0[33u].y)), exp2(log2(exp2(log2(max(mad(_764 * (_574 * asfloat(cb0[30u].y)), _691, _566), 0.0f) * 5.5555553436279296875f) * ((_598 * asfloat(cb0[31u].y)) * _778)) * 0.180000007152557373046875f) * (1.0f / ((_622 * asfloat(cb0[32u].y)) * _792))), _820 + (_670 + asfloat(cb0[34u].y))), _885, (_750 * mad(_662 * (_646 * asfloat(cb0[23u].y)), exp2(log2(exp2(log2(max(mad(_590 * (_574 * asfloat(cb0[20u].y)), _691, _566), 0.0f) * 5.5555553436279296875f) * (_614 * (_598 * asfloat(cb0[21u].y)))) * 0.180000007152557373046875f) * (1.0f / (_638 * (_622 * asfloat(cb0[22u].y))))), _686 + (_670 + asfloat(cb0[24u].y)))) + (_1010 * mad(_941 * (_646 * asfloat(cb0[28u].y)), exp2(log2(exp2(log2(max(mad(_691, (_574 * asfloat(cb0[25u].y)) * _899, _566), 0.0f) * 5.5555553436279296875f) * (_913 * (_598 * asfloat(cb0[26u].y)))) * 0.180000007152557373046875f) * (1.0f / (_927 * (_622 * asfloat(cb0[27u].y))))), _955 + (_670 + asfloat(cb0[29u].y)))));
  float _1022 = mad(mad(_806 * (_647 * asfloat(cb0[33u].z)), exp2(log2(exp2(log2(max(mad(_764 * (_575 * asfloat(cb0[30u].z)), _692, _566), 0.0f) * 5.5555553436279296875f) * ((_599 * asfloat(cb0[31u].z)) * _778)) * 0.180000007152557373046875f) * (1.0f / (_792 * (_623 * asfloat(cb0[32u].z))))), _820 + (_671 + asfloat(cb0[34u].z))), _885, (_750 * mad(exp2((1.0f / (_638 * (_623 * asfloat(cb0[22u].z)))) * log2(exp2((_614 * (_599 * asfloat(cb0[21u].z))) * log2(max(mad(_590 * (_575 * asfloat(cb0[20u].z)), _692, _566), 0.0f) * 5.5555553436279296875f)) * 0.180000007152557373046875f)), _662 * (_647 * asfloat(cb0[23u].z)), _686 + (_671 + asfloat(cb0[24u].z)))) + (_1010 * mad(_941 * (_647 * asfloat(cb0[28u].z)), exp2(log2(exp2(log2(max(mad(_692, _899 * (_575 * asfloat(cb0[25u].z)), _566), 0.0f) * 5.5555553436279296875f) * (_913 * (_599 * asfloat(cb0[26u].z)))) * 0.180000007152557373046875f) * (1.0f / (_927 * (_623 * asfloat(cb0[27u].z))))), _955 + (_671 + asfloat(cb0[29u].z)))));
  float3 _1023 = float3(_1020, _1021, _1022);

  float3 untonemapped_ap1 = _1023;

#if 1
  float3 _1360;
  ApplyFilmToneMapWithBlueCorrect(untonemapped_ap1.r, untonemapped_ap1.g, untonemapped_ap1.b,
                                  _1360.r, _1360.g, _1360.b);

#else

  float _1032 = asfloat(cb0[36u].z);
  float _1033 = mad(dp3_f32(float3(0.9386394023895263671875f, 1.0235956526827294510439969599247e-10f, 0.0613606236875057220458984375f), _1023) - _1020, _1032, _1020);
  float _1034 = mad(_1032, dp3_f32(float3(8.3600855405041585299841244705021e-11f, 0.830794155597686767578125f, 0.1692058742046356201171875f), _1023) - _1021, _1021);
  float _1035 = mad(_1032, dp3_f32(float3(2.1318736706521512758172320900485e-12f, -5.6330721337483069532936497125775e-12f, 1.0f), _1023) - _1022, _1022);
  float3 _1036 = float3(_1033, _1034, _1035);
  float _1037 = dp3_f32(float3(0.695452213287353515625f, 0.140678703784942626953125f, 0.16386906802654266357421875f), _1036);
  float _1038 = dp3_f32(float3(0.0447945632040500640869140625f, 0.859671115875244140625f, 0.095534317195415496826171875f), _1036);
  float _1039 = dp3_f32(float3(-0.005525882355868816375732421875f, 0.0040252101607620716094970703125f, 1.00150072574615478515625f), _1036);
  float _1043 = max(_1039, max(_1037, _1038));
  float _1048 = (max(_1043, 1.0000000133514319600180897396058e-10f) - max(min(_1039, min(_1037, _1038)), 1.0000000133514319600180897396058e-10f)) / max(_1043, 0.00999999977648258209228515625f);
  float _1059 = mad(sqrt(mad(_1037, _1037 - _1039, (_1039 * (_1039 - _1038)) + (_1038 * (_1038 - _1037)))), 1.75f, _1037 + (_1038 + _1039));
  float _1061 = _1048 - 0.4000000059604644775390625f;
  float _1065 = max(1.0f - abs(_1061 * 2.5f), 0.0f);
  float _1076 = mad(float(int(((_1061 < 0.0f) ? 4294967295u : 0u) + uint(_1061 > 0.0f))), mad(-_1065, _1065, 1.0f), 1.0f) * 0.02500000037252902984619140625f;
  float _1084 = ((_1059 <= 0.1599999964237213134765625f) ? _1076 : ((_1059 >= 0.4799999892711639404296875f) ? 0.0f : (_1076 * ((0.07999999821186065673828125f / (_1059 * 0.3333333432674407958984375f)) - 0.5f)))) + 1.0f;
  float _1085 = _1037 * _1084;
  float _1086 = _1038 * _1084;
  float _1087 = _1039 * _1084;
  float _1092 = (_1086 - _1087) * 1.73205077648162841796875f;
  float _1094 = (_1085 * 2.0f) - _1086;
  float _1096 = mad(-_1039, _1084, _1094);
  float _1097 = abs(_1092);
  float _1098 = abs(_1096);
  float _1102 = min(_1097, _1098) * (1.0f / max(_1097, _1098));
  float _1103 = _1102 * _1102;
  float _1107 = mad(_1103, mad(_1103, mad(_1103, mad(_1103, 0.02083509974181652069091796875f, -0.08513300120830535888671875f), 0.1801410019397735595703125f), -0.33029949665069580078125f), 0.999866008758544921875f);
  float _1117 = mad(_1102, _1107, (_1097 > _1098) ? mad(_1102 * _1107, -2.0f, 1.57079637050628662109375f) : 0.0f) + ((_1096 < mad(_1039, _1084, -_1094)) ? (-3.1415927410125732421875f) : 0.0f);
  float _1118 = min(_1092, _1096);
  float _1119 = max(_1092, _1096);
  float _1128 = ((_1085 == _1086) && (_1087 == _1086)) ? 0.0f : ((((_1118 < (-_1118)) && (_1119 >= (-_1119))) ? (-_1117) : _1117) * 57.295780181884765625f);
  float _1132 = clamp((_1128 < 0.0f) ? (_1128 + 360.0f) : _1128, 0.0f, 360.0f);
  float _1139 = max(1.0f - abs(((_1132 > 180.0f) ? (_1132 - 360.0f) : _1132) * 0.01481481455266475677490234375f), 0.0f);
  float _1142 = mad(_1139, -2.0f, 3.0f) * (_1139 * _1139);
  float3 _1150 = float3(_1085 + (((_1048 * (_1142 * _1142)) * mad(-_1037, _1084, 0.02999999932944774627685546875f)) * 0.180000007152557373046875f), _1086, _1087);
  float _1154 = max(dp3_f32(float3(1.45143926143646240234375f, -0.236510753631591796875f, -0.214928567409515380859375f), _1150), 0.0f);
  float _1155 = max(dp3_f32(float3(-0.07655377686023712158203125f, 1.1762297153472900390625f, -0.0996759235858917236328125f), _1150), 0.0f);
  float _1156 = max(dp3_f32(float3(0.0083161480724811553955078125f, -0.0060324496589601039886474609375f, 0.99771630764007568359375f), _1150), 0.0f);
  float _1158 = dp3_f32(float3(_1154, _1155, _1156), float3(0.272228717803955078125f, 0.674081742763519287109375f, 0.053689517080783843994140625f));
  float _1169 = asfloat(cb0[38u].x);
  float _1172 = asfloat(cb0[38u].y) + 1.0f;
  float _1180 = (_1169 + 1.0f) - asfloat(cb0[37u].z);
  float _1181 = _1172 - asfloat(cb0[37u].w);
  float _1184 = asfloat(cb0[37u].z);
  float _1190 = asfloat(cb0[37u].y);
  float _1192 = (1.0f - _1184) / _1190;
  float _1194 = (_1169 + 0.180000007152557373046875f) / _1180;
  float _1203 = (_1184 > 0.800000011920928955078125f) ? (((0.819999992847442626953125f - _1184) / _1190) - 0.74472749233245849609375f) : mad(-(log2(_1194 / ((1.0f - _1194) + 1.0f)) * 0.3465735912322998046875f), _1180 / _1190, -0.74472749233245849609375f);
  float _1204 = _1192 - _1203;
  float _1210 = (asfloat(cb0[37u].w) / _1190) + (_1203 - _1192);
  float _1211 = log2(mad(_1154 - _1158, 0.959999978542327880859375f, _1158));
  float _1212 = log2(mad(_1155 - _1158, 0.959999978542327880859375f, _1158));
  float _1213 = log2(mad(_1156 - _1158, 0.959999978542327880859375f, _1158));
  float _1214 = _1211 * 0.3010300099849700927734375f;
  float _1215 = _1212 * 0.3010300099849700927734375f;
  float _1216 = _1213 * 0.3010300099849700927734375f;
  float _1220 = _1190 * mad(_1211, 0.3010300099849700927734375f, _1204);
  float _1221 = _1190 * mad(_1212, 0.3010300099849700927734375f, _1204);
  float _1222 = _1190 * mad(_1213, 0.3010300099849700927734375f, _1204);
  float _1223 = _1180 + _1180;
  float _1224 = _1181 + _1181;
  float _1226 = (_1190 * (-2.0f)) / _1180;
  float _1228 = mad(_1211, 0.3010300099849700927734375f, -_1203);
  float _1230 = mad(_1212, 0.3010300099849700927734375f, -_1203);
  float _1232 = mad(_1213, 0.3010300099849700927734375f, -_1203);
  float _1250 = asfloat(cb0[38u].x);
  float _1255 = (_1190 + _1190) / _1181;
  float _1283 = (_1214 < _1203) ? ((_1223 / (exp2((_1226 * _1228) * 1.44269502162933349609375f) + 1.0f)) - _1250) : _1220;
  float _1284 = (_1203 > _1215) ? ((_1223 / (exp2((_1226 * _1230) * 1.44269502162933349609375f) + 1.0f)) - _1250) : _1221;
  float _1285 = (_1203 > _1216) ? ((_1223 / (exp2((_1226 * _1232) * 1.44269502162933349609375f) + 1.0f)) - _1250) : _1222;
  float _1292 = _1210 - _1203;
  float _1296 = clamp(_1228 / _1292, 0.0f, 1.0f);
  float _1297 = clamp(_1230 / _1292, 0.0f, 1.0f);
  float _1298 = clamp(_1232 / _1292, 0.0f, 1.0f);
  bool _1299 = _1210 < _1203;
  float _1303 = _1299 ? (1.0f - _1296) : _1296;
  float _1304 = _1299 ? (1.0f - _1297) : _1297;
  float _1305 = _1299 ? (1.0f - _1298) : _1298;
  float _1318 = mad(mad(_1303, -2.0f, 3.0f) * (_1303 * _1303), ((_1210 < _1214) ? (_1172 - (_1224 / (exp2((_1255 * mad(_1211, 0.3010300099849700927734375f, -_1210)) * 1.44269502162933349609375f) + 1.0f))) : _1220) - _1283, _1283);
  float _1319 = mad(((_1210 < _1215) ? (_1172 - (_1224 / (exp2((_1255 * mad(_1212, 0.3010300099849700927734375f, -_1210)) * 1.44269502162933349609375f) + 1.0f))) : _1221) - _1284, (_1304 * _1304) * mad(_1304, -2.0f, 3.0f), _1284);
  float _1320 = mad(((_1210 < _1216) ? (_1172 - (_1224 / (exp2((_1255 * mad(_1213, 0.3010300099849700927734375f, -_1210)) * 1.44269502162933349609375f) + 1.0f))) : _1222) - _1285, (_1305 * _1305) * mad(_1305, -2.0f, 3.0f), _1285);
  float _1322 = dp3_f32(float3(_1318, _1319, _1320), float3(0.272228717803955078125f, 0.674081742763519287109375f, 0.053689517080783843994140625f));
  float _1337 = asfloat(cb0[37u].x);
  float _1338 = mad(max(mad(_1318 - _1322, 0.930000007152557373046875f, _1322), 0.0f) - _1033, _1337, _1033);
  float _1339 = mad(_1337, max(mad(_1319 - _1322, 0.930000007152557373046875f, _1322), 0.0f) - _1034, _1034);
  float _1340 = mad(_1337, max(mad(_1320 - _1322, 0.930000007152557373046875f, _1322), 0.0f) - _1035, _1035);
  float3 _1341 = float3(_1338, _1339, _1340);
  float3 _1360 = float3(mad(_1032, dp3_f32(float3(1.065374851226806640625f, 1.4467850633081980049610137939453e-06f, -0.0653710067272186279296875f), _1341) - _1338, _1338), mad(_1032, dp3_f32(float3(-3.4552559213807398919016122817993e-07f, 1.20366346836090087890625f, -0.20366771519184112548828125f), _1341) - _1339, _1339), mad(_1032, dp3_f32(float3(1.9865447953293369209859520196915e-08f, 2.1207958056379538902547210454941e-08f, 0.999999582767486572265625f), _1341) - _1340, _1340));
#endif
  float3 _1359 = float3(asfloat(cb1_m[12u].x), asfloat(cb1_m[12u].y), asfloat(cb1_m[12u].z));

  float _1362 = (dp3_f32(_1359, _1360));
  float3 _1371 = float3(asfloat(cb1_m[13u].x), asfloat(cb1_m[13u].y), asfloat(cb1_m[13u].z));
  float _1373 = (dp3_f32(_1371, _1360));
  float3 _1382 = float3(asfloat(cb1_m[14u].x), asfloat(cb1_m[14u].y), asfloat(cb1_m[14u].z));
  float _1384 = (dp3_f32(_1382, _1360));

#if 1
  float _1497, _1498, _1499;
  Sample2LUTsUpgradeToneMap(float3(_1362, _1373, _1384), s0, s1, t0, t1, _1497, _1498, _1499);
#else
  float _1403 = (_1362 >= 0.00313066993840038776397705078125f) ? mad(exp2(log2(_1362) * 0.4166666567325592041015625f), 1.05499994754791259765625f, -0.054999999701976776123046875f) : (_1362 * 12.9200000762939453125f);
  float _1404 = (_1373 >= 0.00313066993840038776397705078125f) ? mad(exp2(log2(_1373) * 0.4166666567325592041015625f), 1.05499994754791259765625f, -0.054999999701976776123046875f) : (_1373 * 12.9200000762939453125f);
  float _1405 = (_1384 >= 0.00313066993840038776397705078125f) ? mad(exp2(log2(_1384) * 0.4166666567325592041015625f), 1.05499994754791259765625f, -0.054999999701976776123046875f) : (_1384 * 12.9200000762939453125f);
  float _1407 = mad(_1404, 0.9375f, 0.03125f);
  float _1409 = mad(mad(_1405, 0.9375f, 0.03125f), 16.0f, -0.5f);
  float _1410 = floor(_1409);
  float _1411 = _1409 - _1410;
  float _1412 = _1410 + mad(_1403, 0.9375f, 0.03125f);
  float2 _1416 = float2(_1412 * 0.0625f, _1407);
  float4 _1419 = t0.Sample(s0, _1416);
  float _1420 = _1419.x;
  float _1421 = _1419.y;
  float _1422 = _1419.z;
  float2 _1425 = float2(mad(_1412, 0.0625f, 0.0625f), _1407 + 0.0f);
  float4 _1427 = t0.Sample(s0, _1425);
  float _1439 = asfloat(cb0[5u].y);
  float _1445 = asfloat(cb0[5u].x);
  float4 _1455 = t1.Sample(s1, _1416);
  float _1456 = _1455.x;
  float _1457 = _1455.y;
  float _1458 = _1455.z;
  float4 _1460 = t1.Sample(s1, _1425);
  float _1472 = asfloat(cb0[5u].z);
  float _1476 = max(mad(mad(_1411, _1460.x - _1456, _1456), _1472, (mad(_1411, _1427.x - _1420, _1420) * _1439) + (_1445 * _1403)), 6.1035199905745685100555419921875e-05f);
  float _1477 = max(mad(_1472, mad(_1411, _1460.y - _1457, _1457), (_1445 * _1404) + (_1439 * mad(_1411, _1427.y - _1421, _1421))), 6.1035199905745685100555419921875e-05f);
  float _1478 = max(mad(_1472, mad(_1411, _1460.z - _1458, _1458), (_1445 * _1405) + (_1439 * mad(_1411, _1427.z - _1422, _1422))), 6.1035199905745685100555419921875e-05f);
  float _1497 = (_1476 > 0.040449999272823333740234375f) ? exp2(log2(mad(_1476, 0.94786727428436279296875f, 0.0521326996386051177978515625f)) * 2.400000095367431640625f) : (_1476 * 0.077399380505084991455078125f);
  float _1498 = (_1477 > 0.040449999272823333740234375f) ? exp2(log2(mad(_1477, 0.94786727428436279296875f, 0.0521326996386051177978515625f)) * 2.400000095367431640625f) : (_1477 * 0.077399380505084991455078125f);
  float _1499 = (_1478 > 0.040449999272823333740234375f) ? exp2(log2(mad(_1478, 0.94786727428436279296875f, 0.0521326996386051177978515625f)) * 2.400000095367431640625f) : (_1478 * 0.077399380505084991455078125f);
#endif

  float _1505 = asfloat(cb0[39u].y);
  float _1511 = asfloat(cb0[39u].x);
  float _1520 = asfloat(cb0[39u].z);
  float _1521 = ((_1505 * _1497) + ((_1497 * _1497) * _1511)) + _1520;
  float _1522 = _1520 + ((_1511 * (_1498 * _1498)) + (_1505 * _1498));
  float _1523 = _1520 + ((_1511 * (_1499 * _1499)) + (_1505 * _1499));
  float _1529 = asfloat(cb0[14u].x);
  float _1530 = asfloat(cb0[14u].y);
  float _1531 = asfloat(cb0[14u].z);
  float _1540 = asfloat(cb0[13u].x);
  float _1541 = asfloat(cb0[13u].y);
  float _1542 = asfloat(cb0[13u].z);
  float _1551 = asfloat(cb0[13u].w);
  float _1555 = (_1521 * _1529) + (mad(-_1521, _1529, _1540) * _1551);
  float _1556 = (_1551 * mad(-_1530, _1522, _1541)) + (_1530 * _1522);
  float _1557 = (_1551 * mad(-_1531, _1523, _1542)) + (_1531 * _1523);

#if 1
  float _1570 = _1555;
  float _1571 = _1556;
  float _1572 = _1557;
#else
  float _1566 = asfloat(cb0[40u].y);
  float _1570 = exp2(log2(max(_1555, 0.0f)) * _1566);
  float _1571 = exp2(_1566 * log2(max(_1556, 0.0f)));
  float _1572 = exp2(_1566 * log2(max(_1557, 0.0f)));
#endif

  if (RENODX_TONE_MAP_TYPE != 0) {
    GenerateOutput(_1555, _1556, _1557, SV_Target, output_device);
    return;
  }

  float _3787;
  float _3788;
  float _3789;
  if (cb0[40u].w == 0u) {
    float3 _1577 = float3(_1570, _1571, _1572);
    float3 _1582 = float3(dp3_f32(_511, _1577), dp3_f32(_522, _1577), dp3_f32(_532, _1577));
    bool _1590 = cb1_m[20u].x != 0u;
    float _1591 = _1590 ? _1570 : dp3_f32(float3(_438, _439, _440), _1582);
    float _1592 = _1590 ? _1571 : dp3_f32(float3(_441, _442, _443), _1582);
    float _1593 = _1590 ? _1572 : dp3_f32(float3(_444, _445, _446), _1582);
    _3787 = (_1593 >= 0.00313066993840038776397705078125f) ? mad(exp2(log2(_1593) * 0.4166666567325592041015625f), 1.05499994754791259765625f, -0.054999999701976776123046875f) : (_1593 * 12.9200000762939453125f);
    _3788 = (_1592 >= 0.00313066993840038776397705078125f) ? mad(exp2(log2(_1592) * 0.4166666567325592041015625f), 1.05499994754791259765625f, -0.054999999701976776123046875f) : (_1592 * 12.9200000762939453125f);
    _3789 = (_1591 >= 0.00313066993840038776397705078125f) ? mad(exp2(log2(_1591) * 0.4166666567325592041015625f), 1.05499994754791259765625f, -0.054999999701976776123046875f) : (_1591 * 12.9200000762939453125f);
  } else {
    float _3784;
    float _3785;
    float _3786;
    if (cb0[40u].w == 1u) {
      float3 _1619 = float3(_1570, _1571, _1572);

#if 1
      _1619 = saturate(_1619);
#endif

      float3 _1624 = float3(dp3_f32(_511, _1619), dp3_f32(_522, _1619), dp3_f32(_532, _1619));
      float _1630 = max(dp3_f32(float3(_438, _439, _440), _1624), 6.1035199905745685100555419921875e-05f);
      float _1631 = max(dp3_f32(float3(_441, _442, _443), _1624), 6.1035199905745685100555419921875e-05f);
      float _1632 = max(dp3_f32(float3(_444, _445, _446), _1624), 6.1035199905745685100555419921875e-05f);
      _3784 = min(mad(exp2(log2(max(_1632, 0.017999999225139617919921875f)) * 0.449999988079071044921875f), 1.09899997711181640625f, -0.098999999463558197021484375f), _1632 * 4.5f);
      _3785 = min(mad(exp2(log2(max(_1631, 0.017999999225139617919921875f)) * 0.449999988079071044921875f), 1.09899997711181640625f, -0.098999999463558197021484375f), _1631 * 4.5f);
      _3786 = min(mad(exp2(log2(max(_1630, 0.017999999225139617919921875f)) * 0.449999988079071044921875f), 1.09899997711181640625f, -0.098999999463558197021484375f), _1630 * 4.5f);

#if 1
      ScaleScene(_3784, _3785, _3786);
#endif

    } else {
      float _1654 = dp3_f32(_1359, _1023);
      float _1655 = dp3_f32(_1371, _1023);
      float _1656 = dp3_f32(_1382, _1023);
      float _1669 = (_1529 * _1654) + (_1551 * mad(-_1529, _1654, _1540));
      float _1670 = (_1551 * mad(-_1530, _1655, _1541)) + (_1530 * _1655);
      float _1671 = (_1551 * mad(-_1531, _1656, _1542)) + (_1531 * _1656);
      float _3781;
      float _3782;
      float _3783;
      if ((cb0[40u].w == 3u) || (cb0[40u].w == 5u)) {
        float _1680 = asfloat(cb0[12u].z);
        float3 _1693 = float3(_1669 * _1680, _1680 * _1670, _1680 * _1671);
        float _1694 = dp3_f32(float3(asfloat(cb1_m[16u].x), asfloat(cb1_m[16u].y), asfloat(cb1_m[16u].z)), _1693);
        float _1704 = dp3_f32(float3(asfloat(cb1_m[17u].x), asfloat(cb1_m[17u].y), asfloat(cb1_m[17u].z)), _1693);
        float _1714 = dp3_f32(float3(asfloat(cb1_m[18u].x), asfloat(cb1_m[18u].y), asfloat(cb1_m[18u].z)), _1693);
        float3 _1715 = float3(_1694, _1704, _1714);
        float _1716 = dp3_f32(float3(1.45143926143646240234375f, -0.236510753631591796875f, -0.214928567409515380859375f), _1715);
        float _1717 = dp3_f32(float3(-0.07655377686023712158203125f, 1.1762297153472900390625f, -0.0996759235858917236328125f), _1715);
        float _1718 = dp3_f32(float3(0.0083161480724811553955078125f, -0.0060324496589601039886474609375f, 0.99771630764007568359375f), _1715);
        float _1720 = max(_1716, max(_1717, _1718));
        float _1786;
        float _1787;
        float _1788;
        if (!((((_1694 < 0.0f) || (_1704 < 0.0f)) || (_1714 < 0.0f)) || (_1720 < 1.0000000133514319600180897396058e-10f))) {
          float _1734 = abs(_1720);
          float _1735 = (_1720 - _1716) / _1734;
          float _1736 = (_1720 - _1717) / _1734;
          float _1737 = (_1720 - _1718) / _1734;
          float _1741 = _1735 - 0.814999997615814208984375f;
          float _1742 = _1736 - 0.802999973297119140625f;
          float _1743 = _1737 - 0.87999999523162841796875f;
          _1786 = mad(-_1734, (_1737 < 0.87999999523162841796875f) ? _1737 : (((_1743 * 1.0f) / exp2(log2(exp2(log2(_1743 * 6.810994625091552734375f) * 1.2000000476837158203125f) + 1.0f) * 0.833333313465118408203125f)) + 0.87999999523162841796875f), _1720);
          _1787 = mad(-_1734, (_1736 < 0.802999973297119140625f) ? _1736 : (((_1742 * 1.0f) / exp2(log2(exp2(log2(_1742 * 3.49726104736328125f) * 1.2000000476837158203125f) + 1.0f) * 0.833333313465118408203125f)) + 0.802999973297119140625f), _1720);
          _1788 = mad(-_1734, (_1735 < 0.814999997615814208984375f) ? _1735 : (((_1741 * 1.0f) / exp2(log2(exp2(log2(_1741 * 3.055283069610595703125f) * 1.2000000476837158203125f) + 1.0f) * 0.833333313465118408203125f)) + 0.814999997615814208984375f), _1720);
        } else {
          _1786 = _1718;
          _1787 = _1717;
          _1788 = _1716;
        }
        float3 _1789 = float3(_1788, _1787, _1786);
        float _1798 = asfloat(cb0[12u].w);
        float _1799 = mad(dp3_f32(float3(0.695452213287353515625f, 0.140678703784942626953125f, 0.16386906802654266357421875f), _1789) - _1694, _1798, _1694);
        float _1800 = mad(_1798, dp3_f32(float3(0.0447945632040500640869140625f, 0.859671115875244140625f, 0.095534317195415496826171875f), _1789) - _1704, _1704);
        float _1801 = mad(_1798, dp3_f32(float3(-0.0055258828215301036834716796875f, 0.0040252101607620716094970703125f, 1.00150072574615478515625f), _1789) - _1714, _1714);
        float _1805 = max(max(_1799, _1800), _1801);
        float _1810 = (max(_1805, 1.0000000133514319600180897396058e-10f) - max(min(min(_1799, _1800), _1801), 1.0000000133514319600180897396058e-10f)) / max(_1805, 0.00999999977648258209228515625f);
        float _1821 = mad(sqrt(mad(_1799, _1799 - _1801, ((_1801 - _1800) * _1801) + ((_1800 - _1799) * _1800))), 1.75f, _1799 + (_1801 + _1800));
        float _1823 = _1810 - 0.4000000059604644775390625f;
        float _1827 = max(1.0f - abs(_1823 * 2.5f), 0.0f);
        float _1838 = mad(float(int(((_1823 < 0.0f) ? 4294967295u : 0u) + uint(_1823 > 0.0f))), mad(-_1827, _1827, 1.0f), 1.0f) * 0.02500000037252902984619140625f;
        float _1846 = ((_1821 <= 0.1599999964237213134765625f) ? _1838 : ((_1821 >= 0.4799999892711639404296875f) ? 0.0f : (_1838 * ((0.07999999821186065673828125f / (_1821 * 0.3333333432674407958984375f)) - 0.5f)))) + 1.0f;
        float _1847 = _1799 * _1846;
        float _1848 = _1846 * _1800;
        float _1849 = _1846 * _1801;
        float _1854 = (_1848 - _1849) * 1.73205077648162841796875f;
        float _1856 = (_1847 * 2.0f) - _1848;
        float _1858 = mad(-_1846, _1801, _1856);
        float _1859 = abs(_1854);
        float _1860 = abs(_1858);
        float _1864 = min(_1859, _1860) * (1.0f / max(_1859, _1860));
        float _1865 = _1864 * _1864;
        float _1869 = mad(_1865, mad(_1865, mad(_1865, mad(_1865, 0.02083509974181652069091796875f, -0.08513300120830535888671875f), 0.1801410019397735595703125f), -0.33029949665069580078125f), 0.999866008758544921875f);
        float _1879 = mad(_1864, _1869, (_1859 > _1860) ? mad(_1864 * _1869, -2.0f, 1.57079637050628662109375f) : 0.0f) + ((_1858 < mad(_1846, _1801, -_1856)) ? (-3.1415927410125732421875f) : 0.0f);
        float _1880 = min(_1854, _1858);
        float _1881 = max(_1854, _1858);
        float _1890 = ((_1847 == _1848) && (_1849 == _1848)) ? 0.0f : ((((_1880 < (-_1880)) && (_1881 >= (-_1881))) ? (-_1879) : _1879) * 57.295780181884765625f);
        float _1894 = clamp((_1890 < 0.0f) ? (_1890 + 360.0f) : _1890, 0.0f, 360.0f);
        float _1897 = (_1894 > 180.0f) ? (_1894 - 360.0f) : _1894;
        float _1934;
        if ((_1897 > (-67.5f)) && (_1897 < 67.5f)) {
          float _1904 = _1897 + 67.5f;
          float _1905 = _1904 * 0.0296296291053295135498046875f;
          float _1909 = mad(_1904, 0.0296296291053295135498046875f, -trunc(_1905));
          float _1910 = _1909 * _1909;
          float _1911 = _1909 * _1910;
          float _1915 = _1910 * 0.5f;
          uint _1923 = uint(cvt_f32_i32(_1905));
          _1934 = (_1923 == 3u) ? (mad(_1909, -0.5f, _1915 + (_1911 * (-0.16666667163372039794921875f))) + 0.16666667163372039794921875f) : ((_1923 == 2u) ? (((_1911 * 0.5f) - _1910) + 0.666666686534881591796875f) : ((_1923 == 1u) ? (mad(_1909, 0.5f, _1915 + (_1911 * (-0.5f))) + 0.16666667163372039794921875f) : ((_1923 != 0u) ? 0.0f : (_1911 * 0.16666667163372039794921875f))));
        } else {
          _1934 = 0.0f;
        }
        float3 _1945 = float3(clamp(_1847 + ((((_1810 * _1934) * 1.5f) * mad(-_1799, _1846, 0.02999999932944774627685546875f)) * 0.180000007152557373046875f), 0.0f, 65535.0f), clamp(_1848, 0.0f, 65535.0f), clamp(_1849, 0.0f, 65535.0f));
        float _1949 = clamp(dp3_f32(float3(1.45143926143646240234375f, -0.236510753631591796875f, -0.214928567409515380859375f), _1945), 0.0f, 65504.0f);
        float _1950 = clamp(dp3_f32(float3(-0.07655377686023712158203125f, 1.1762297153472900390625f, -0.0996759235858917236328125f), _1945), 0.0f, 65504.0f);
        float _1951 = clamp(dp3_f32(float3(0.0083161480724811553955078125f, -0.0060324496589601039886474609375f, 0.99771630764007568359375f), _1945), 0.0f, 65504.0f);
        float _1953 = dp3_f32(float3(_1949, _1950, _1951), float3(0.272228717803955078125f, 0.674081742763519287109375f, 0.053689517080783843994140625f));
        float _1966 = log2(max(mad(_1949 - _1953, 0.959999978542327880859375f, _1953), 1.0000000133514319600180897396058e-10f)) * 0.3010300099849700927734375f;
        float _1967 = log2(max(mad(_1950 - _1953, 0.959999978542327880859375f, _1953), 1.0000000133514319600180897396058e-10f)) * 0.3010300099849700927734375f;
        float _1968 = log2(max(mad(_1951 - _1953, 0.959999978542327880859375f, _1953), 1.0000000133514319600180897396058e-10f)) * 0.3010300099849700927734375f;
        float _1973 = log2(asfloat(cb0[8u].x)) * 0.3010300099849700927734375f;
        float _2180;
        if (_1966 <= _1973) {
          _2180 = log2(asfloat(cb0[8u].y)) * 0.3010300099849700927734375f;
        } else {
          float _1990 = log2(asfloat(cb0[9u].x)) * 0.3010300099849700927734375f;
          float _2179;
          if ((_1966 > _1973) && (_1966 < _1990)) {
            float _1999 = ((_1966 - _1973) * 3.0f) / (_1990 - _1973);
            int _2000 = cvt_f32_i32(_1999);
            float _2002 = _1999 - trunc(_1999);
            uint _2003 = uint(_2000);
            float4 _2025 = float4(asfloat(cb0[10u].x), asfloat(cb0[10u].y), asfloat(cb0[10u].z), asfloat(cb0[10u].w));
            float _2030 = asfloat(cb0[12u].x);
            float _2033 = mad(_2030, float(_2003 == 5u), mad(float(_2003 == 4u), _2030, dp4_f32(float4(float(_2003 == 0u), float(_2003 == 1u), float(_2003 == 2u), float(_2003 == 3u)), _2025)));
            uint _2035 = uint(_2000 + 1);
            uint _2037 = uint(_2000 + 2);
            float _2055 = mad(_2030, float(_2035 == 5u), mad(_2030, float(_2035 == 4u), dp4_f32(float4(float(_2035 == 0u), float(_2035 == 1u), float(_2035 == 2u), float(_2035 == 3u)), _2025)));
            float2 _2073 = float2(_2033, _2055);
            _2179 = dp3_f32(float3(_2002 * _2002, _2002, 1.0f), float3(dp3_f32(float3(_2033, mad(_2030, float(_2037 == 5u), mad(_2030, float(_2037 == 4u), dp4_f32(float4(float(_2037 == 0u), float(_2037 == 1u), float(_2037 == 2u), float(_2037 == 3u)), _2025))), _2055), float3(0.5f, 0.5f, -1.0f)), dp2_f32(_2073, float2(-1.0f, 1.0f)), dp2_f32(_2073, 0.5f.xx)));
          } else {
            float _2084 = log2(asfloat(cb0[8u].z)) * 0.3010300099849700927734375f;
            float _2178;
            if ((_1966 >= _1990) && (_1966 < _2084)) {
              float _2093 = ((_1966 - _1990) * 3.0f) / (_2084 - _1990);
              int _2094 = cvt_f32_i32(_2093);
              float _2096 = _2093 - trunc(_2093);
              uint _2097 = uint(_2094);
              float4 _2119 = float4(asfloat(cb0[11u].x), asfloat(cb0[11u].y), asfloat(cb0[11u].z), asfloat(cb0[11u].w));
              float _2124 = asfloat(cb0[12u].y);
              float _2127 = mad(_2124, float(_2097 == 5u), mad(float(_2097 == 4u), _2124, dp4_f32(float4(float(_2097 == 0u), float(_2097 == 1u), float(_2097 == 2u), float(_2097 == 3u)), _2119)));
              uint _2129 = uint(_2094 + 1);
              uint _2131 = uint(_2094 + 2);
              float _2149 = mad(_2124, float(_2129 == 5u), mad(_2124, float(_2129 == 4u), dp4_f32(float4(float(_2129 == 0u), float(_2129 == 1u), float(_2129 == 2u), float(_2129 == 3u)), _2119)));
              float2 _2167 = float2(_2127, _2149);
              _2178 = dp3_f32(float3(_2096 * _2096, _2096, 1.0f), float3(dp3_f32(float3(_2127, mad(_2124, float(_2131 == 5u), mad(_2124, float(_2131 == 4u), dp4_f32(float4(float(_2131 == 0u), float(_2131 == 1u), float(_2131 == 2u), float(_2131 == 3u)), _2119))), _2149), float3(0.5f, 0.5f, -1.0f)), dp2_f32(_2167, float2(-1.0f, 1.0f)), dp2_f32(_2167, 0.5f.xx)));
            } else {
              _2178 = log2(asfloat(cb0[8u].w)) * 0.3010300099849700927734375f;
            }
            _2179 = _2178;
          }
          _2180 = _2179;
        }
        float _2386;
        if (_1973 >= _1967) {
          _2386 = log2(asfloat(cb0[8u].y)) * 0.3010300099849700927734375f;
        } else {
          float _2196 = log2(asfloat(cb0[9u].x)) * 0.3010300099849700927734375f;
          float _2385;
          if ((_1973 < _1967) && (_2196 > _1967)) {
            float _2205 = ((_1967 - _1973) * 3.0f) / (_2196 - _1973);
            int _2206 = cvt_f32_i32(_2205);
            float _2208 = _2205 - trunc(_2205);
            uint _2209 = uint(_2206);
            float4 _2231 = float4(asfloat(cb0[10u].x), asfloat(cb0[10u].y), asfloat(cb0[10u].z), asfloat(cb0[10u].w));
            float _2236 = asfloat(cb0[12u].x);
            float _2239 = mad(_2236, float(_2209 == 5u), mad(float(_2209 == 4u), _2236, dp4_f32(float4(float(_2209 == 0u), float(_2209 == 1u), float(_2209 == 2u), float(_2209 == 3u)), _2231)));
            uint _2241 = uint(_2206 + 1);
            uint _2243 = uint(_2206 + 2);
            float _2261 = mad(_2236, float(_2241 == 5u), mad(_2236, float(_2241 == 4u), dp4_f32(float4(float(_2241 == 0u), float(_2241 == 1u), float(_2241 == 2u), float(_2241 == 3u)), _2231)));
            float2 _2279 = float2(_2239, _2261);
            _2385 = dp3_f32(float3(_2208 * _2208, _2208, 1.0f), float3(dp3_f32(float3(_2239, mad(_2236, float(_2243 == 5u), mad(_2236, float(_2243 == 4u), dp4_f32(float4(float(_2243 == 0u), float(_2243 == 1u), float(_2243 == 2u), float(_2243 == 3u)), _2231))), _2261), float3(0.5f, 0.5f, -1.0f)), dp2_f32(_2279, float2(-1.0f, 1.0f)), dp2_f32(_2279, 0.5f.xx)));
          } else {
            float _2290 = log2(asfloat(cb0[8u].z)) * 0.3010300099849700927734375f;
            float _2384;
            if ((_2196 <= _1967) && (_2290 > _1967)) {
              float _2299 = ((_1967 - _2196) * 3.0f) / (_2290 - _2196);
              int _2300 = cvt_f32_i32(_2299);
              float _2302 = _2299 - trunc(_2299);
              uint _2303 = uint(_2300);
              float4 _2325 = float4(asfloat(cb0[11u].x), asfloat(cb0[11u].y), asfloat(cb0[11u].z), asfloat(cb0[11u].w));
              float _2330 = asfloat(cb0[12u].y);
              float _2333 = mad(_2330, float(_2303 == 5u), mad(float(_2303 == 4u), _2330, dp4_f32(float4(float(_2303 == 0u), float(_2303 == 1u), float(_2303 == 2u), float(_2303 == 3u)), _2325)));
              uint _2335 = uint(_2300 + 1);
              uint _2337 = uint(_2300 + 2);
              float _2355 = mad(_2330, float(_2335 == 5u), mad(_2330, float(_2335 == 4u), dp4_f32(float4(float(_2335 == 0u), float(_2335 == 1u), float(_2335 == 2u), float(_2335 == 3u)), _2325)));
              float2 _2373 = float2(_2333, _2355);
              _2384 = dp3_f32(float3(_2302 * _2302, _2302, 1.0f), float3(dp3_f32(float3(_2333, mad(_2330, float(_2337 == 5u), mad(_2330, float(_2337 == 4u), dp4_f32(float4(float(_2337 == 0u), float(_2337 == 1u), float(_2337 == 2u), float(_2337 == 3u)), _2325))), _2355), float3(0.5f, 0.5f, -1.0f)), dp2_f32(_2373, float2(-1.0f, 1.0f)), dp2_f32(_2373, 0.5f.xx)));
            } else {
              _2384 = log2(asfloat(cb0[8u].w)) * 0.3010300099849700927734375f;
            }
            _2385 = _2384;
          }
          _2386 = _2385;
        }
        float _2592;
        if (_1973 >= _1968) {
          _2592 = log2(asfloat(cb0[8u].y)) * 0.3010300099849700927734375f;
        } else {
          float _2402 = log2(asfloat(cb0[9u].x)) * 0.3010300099849700927734375f;
          float _2591;
          if ((_1973 < _1968) && (_2402 > _1968)) {
            float _2411 = ((_1968 - _1973) * 3.0f) / (_2402 - _1973);
            int _2412 = cvt_f32_i32(_2411);
            float _2414 = _2411 - trunc(_2411);
            uint _2415 = uint(_2412);
            float4 _2437 = float4(asfloat(cb0[10u].x), asfloat(cb0[10u].y), asfloat(cb0[10u].z), asfloat(cb0[10u].w));
            float _2442 = asfloat(cb0[12u].x);
            float _2445 = mad(_2442, float(_2415 == 5u), mad(float(_2415 == 4u), _2442, dp4_f32(float4(float(_2415 == 0u), float(_2415 == 1u), float(_2415 == 2u), float(_2415 == 3u)), _2437)));
            uint _2447 = uint(_2412 + 1);
            uint _2449 = uint(_2412 + 2);
            float _2467 = mad(_2442, float(_2447 == 5u), mad(_2442, float(_2447 == 4u), dp4_f32(float4(float(_2447 == 0u), float(_2447 == 1u), float(_2447 == 2u), float(_2447 == 3u)), _2437)));
            float2 _2485 = float2(_2445, _2467);
            _2591 = dp3_f32(float3(_2414 * _2414, _2414, 1.0f), float3(dp3_f32(float3(_2445, mad(_2442, float(_2449 == 5u), mad(_2442, float(_2449 == 4u), dp4_f32(float4(float(_2449 == 0u), float(_2449 == 1u), float(_2449 == 2u), float(_2449 == 3u)), _2437))), _2467), float3(0.5f, 0.5f, -1.0f)), dp2_f32(_2485, float2(-1.0f, 1.0f)), dp2_f32(_2485, 0.5f.xx)));
          } else {
            float _2496 = log2(asfloat(cb0[8u].z)) * 0.3010300099849700927734375f;
            float _2590;
            if ((_2402 <= _1968) && (_2496 > _1968)) {
              float _2505 = ((_1968 - _2402) * 3.0f) / (_2496 - _2402);
              int _2506 = cvt_f32_i32(_2505);
              float _2508 = _2505 - trunc(_2505);
              uint _2509 = uint(_2506);
              float4 _2531 = float4(asfloat(cb0[11u].x), asfloat(cb0[11u].y), asfloat(cb0[11u].z), asfloat(cb0[11u].w));
              float _2536 = asfloat(cb0[12u].y);
              float _2539 = mad(_2536, float(_2509 == 5u), mad(float(_2509 == 4u), _2536, dp4_f32(float4(float(_2509 == 0u), float(_2509 == 1u), float(_2509 == 2u), float(_2509 == 3u)), _2531)));
              uint _2541 = uint(_2506 + 1);
              uint _2543 = uint(_2506 + 2);
              float _2561 = mad(_2536, float(_2541 == 5u), mad(_2536, float(_2541 == 4u), dp4_f32(float4(float(_2541 == 0u), float(_2541 == 1u), float(_2541 == 2u), float(_2541 == 3u)), _2531)));
              float2 _2579 = float2(_2539, _2561);
              _2590 = dp3_f32(float3(_2508 * _2508, _2508, 1.0f), float3(dp3_f32(float3(_2539, mad(_2536, float(_2543 == 5u), mad(_2536, float(_2543 == 4u), dp4_f32(float4(float(_2543 == 0u), float(_2543 == 1u), float(_2543 == 2u), float(_2543 == 3u)), _2531))), _2561), float3(0.5f, 0.5f, -1.0f)), dp2_f32(_2579, float2(-1.0f, 1.0f)), dp2_f32(_2579, 0.5f.xx)));
            } else {
              _2590 = log2(asfloat(cb0[8u].w)) * 0.3010300099849700927734375f;
            }
            _2591 = _2590;
          }
          _2592 = _2591;
        }
        float _2597 = asfloat(cb0[8u].y);
        float _2601 = asfloat(cb0[8u].w);
        float _2602 = _2601 - _2597;
        float3 _2608 = float3((exp2(_2180 * 3.3219280242919921875f) - _2597) / _2602, (exp2(_2386 * 3.3219280242919921875f) - _2597) / _2602, (exp2(_2592 * 3.3219280242919921875f) - _2597) / _2602);
        float3 _2612 = float3(dp3_f32(float3(0.662454187870025634765625f, 0.1340042054653167724609375f, 0.1561876833438873291015625f), _2608), dp3_f32(float3(0.272228717803955078125f, 0.674081742763519287109375f, 0.053689517080783843994140625f), _2608), dp3_f32(float3(-0.0055746496655046939849853515625f, 0.0040607335977256298065185546875f, 1.01033914089202880859375f), _2608));
        float3 _2619 = float3(clamp(dp3_f32(float3(1.6410233974456787109375f, -0.324803292751312255859375f, -0.23642469942569732666015625f), _2612), 0.0f, 1.0f), clamp(dp3_f32(float3(-0.663662850856781005859375f, 1.6153316497802734375f, 0.016756348311901092529296875f), _2612), 0.0f, 1.0f), clamp(dp3_f32(float3(0.01172189414501190185546875f, -0.008284442126750946044921875f, 0.98839485645294189453125f), _2612), 0.0f, 1.0f));
        float3 _2623 = float3(dp3_f32(float3(0.662454187870025634765625f, 0.1340042054653167724609375f, 0.1561876833438873291015625f), _2619), dp3_f32(float3(0.272228717803955078125f, 0.674081742763519287109375f, 0.053689517080783843994140625f), _2619), dp3_f32(float3(-0.0055746496655046939849853515625f, 0.0040607335977256298065185546875f, 1.01033914089202880859375f), _2619));
        float _2633 = clamp(max(dp3_f32(float3(1.6410233974456787109375f, -0.324803292751312255859375f, -0.23642469942569732666015625f), _2623), 0.0f) * _2601, 0.0f, 65535.0f);
        float _2634 = clamp(_2601 * max(dp3_f32(float3(-0.663662850856781005859375f, 1.6153316497802734375f, 0.016756348311901092529296875f), _2623), 0.0f), 0.0f, 65535.0f);
        float _2635 = clamp(_2601 * max(dp3_f32(float3(0.01172189414501190185546875f, -0.008284442126750946044921875f, 0.98839485645294189453125f), _2623), 0.0f), 0.0f, 65535.0f);
        bool _2636 = cb0[40u].w != 5u;
        float3 _2638 = float3(_2633, _2634, _2635);
        float _2656 = exp2(log2((_2636 ? dp3_f32(float3(_438, _439, _440), _2638) : _2633) * 9.9999997473787516355514526367188e-05f) * 0.1593017578125f);
        float _2657 = exp2(log2((_2636 ? dp3_f32(float3(_441, _442, _443), _2638) : _2634) * 9.9999997473787516355514526367188e-05f) * 0.1593017578125f);
        float _2658 = exp2(log2((_2636 ? dp3_f32(float3(_444, _445, _446), _2638) : _2635) * 9.9999997473787516355514526367188e-05f) * 0.1593017578125f);
        _3781 = exp2(log2((1.0f / mad(_2658, 18.6875f, 1.0f)) * mad(_2658, 18.8515625f, 0.8359375f)) * 78.84375f);
        _3782 = exp2(log2((1.0f / mad(_2657, 18.6875f, 1.0f)) * mad(_2657, 18.8515625f, 0.8359375f)) * 78.84375f);
        _3783 = exp2(log2((1.0f / mad(_2656, 18.6875f, 1.0f)) * mad(_2656, 18.8515625f, 0.8359375f)) * 78.84375f);
      } else {
        float _3778;
        float _3779;
        float _3780;
        if ((cb0[40u].w == 4u) || (cb0[40u].w == 6u)) {
          float _2688 = asfloat(cb0[12u].z);
          float3 _2701 = float3(_1669 * _2688, _2688 * _1670, _2688 * _1671);
          float _2702 = dp3_f32(float3(asfloat(cb1_m[16u].x), asfloat(cb1_m[16u].y), asfloat(cb1_m[16u].z)), _2701);
          float _2712 = dp3_f32(float3(asfloat(cb1_m[17u].x), asfloat(cb1_m[17u].y), asfloat(cb1_m[17u].z)), _2701);
          float _2722 = dp3_f32(float3(asfloat(cb1_m[18u].x), asfloat(cb1_m[18u].y), asfloat(cb1_m[18u].z)), _2701);
          float3 _2723 = float3(_2702, _2712, _2722);
          float _2724 = dp3_f32(float3(1.45143926143646240234375f, -0.236510753631591796875f, -0.214928567409515380859375f), _2723);
          float _2725 = dp3_f32(float3(-0.07655377686023712158203125f, 1.1762297153472900390625f, -0.0996759235858917236328125f), _2723);
          float _2726 = dp3_f32(float3(0.0083161480724811553955078125f, -0.0060324496589601039886474609375f, 0.99771630764007568359375f), _2723);
          float _2728 = max(_2724, max(_2725, _2726));
          float _2794;
          float _2795;
          float _2796;
          if (!((((_2702 < 0.0f) || (_2712 < 0.0f)) || (_2722 < 0.0f)) || (_2728 < 1.0000000133514319600180897396058e-10f))) {
            float _2742 = abs(_2728);
            float _2743 = (_2728 - _2724) / _2742;
            float _2744 = (_2728 - _2725) / _2742;
            float _2745 = (_2728 - _2726) / _2742;
            float _2749 = _2743 - 0.814999997615814208984375f;
            float _2750 = _2744 - 0.802999973297119140625f;
            float _2751 = _2745 - 0.87999999523162841796875f;
            _2794 = mad(-_2742, (_2745 < 0.87999999523162841796875f) ? _2745 : (((_2751 * 1.0f) / exp2(log2(exp2(log2(_2751 * 6.810994625091552734375f) * 1.2000000476837158203125f) + 1.0f) * 0.833333313465118408203125f)) + 0.87999999523162841796875f), _2728);
            _2795 = mad(-_2742, (_2744 < 0.802999973297119140625f) ? _2744 : (((_2750 * 1.0f) / exp2(log2(exp2(log2(_2750 * 3.49726104736328125f) * 1.2000000476837158203125f) + 1.0f) * 0.833333313465118408203125f)) + 0.802999973297119140625f), _2728);
            _2796 = mad(-_2742, (_2743 < 0.814999997615814208984375f) ? _2743 : (((_2749 * 1.0f) / exp2(log2(exp2(log2(_2749 * 3.055283069610595703125f) * 1.2000000476837158203125f) + 1.0f) * 0.833333313465118408203125f)) + 0.814999997615814208984375f), _2728);
          } else {
            _2794 = _2726;
            _2795 = _2725;
            _2796 = _2724;
          }
          float3 _2797 = float3(_2796, _2795, _2794);
          float _2806 = asfloat(cb0[12u].w);
          float _2807 = mad(dp3_f32(float3(0.695452213287353515625f, 0.140678703784942626953125f, 0.16386906802654266357421875f), _2797) - _2702, _2806, _2702);
          float _2808 = mad(_2806, dp3_f32(float3(0.0447945632040500640869140625f, 0.859671115875244140625f, 0.095534317195415496826171875f), _2797) - _2712, _2712);
          float _2809 = mad(_2806, dp3_f32(float3(-0.0055258828215301036834716796875f, 0.0040252101607620716094970703125f, 1.00150072574615478515625f), _2797) - _2722, _2722);
          float _2813 = max(max(_2807, _2808), _2809);
          float _2818 = (max(_2813, 1.0000000133514319600180897396058e-10f) - max(min(min(_2807, _2808), _2809), 1.0000000133514319600180897396058e-10f)) / max(_2813, 0.00999999977648258209228515625f);
          float _2829 = mad(sqrt(mad(_2807, _2807 - _2809, ((_2809 - _2808) * _2809) + ((_2808 - _2807) * _2808))), 1.75f, _2807 + (_2809 + _2808));
          float _2831 = _2818 - 0.4000000059604644775390625f;
          float _2835 = max(1.0f - abs(_2831 * 2.5f), 0.0f);
          float _2846 = mad(float(int(((_2831 < 0.0f) ? 4294967295u : 0u) + uint(_2831 > 0.0f))), mad(-_2835, _2835, 1.0f), 1.0f) * 0.02500000037252902984619140625f;
          float _2854 = ((_2829 <= 0.1599999964237213134765625f) ? _2846 : ((_2829 >= 0.4799999892711639404296875f) ? 0.0f : (_2846 * ((0.07999999821186065673828125f / (_2829 * 0.3333333432674407958984375f)) - 0.5f)))) + 1.0f;
          float _2855 = _2807 * _2854;
          float _2856 = _2854 * _2808;
          float _2857 = _2854 * _2809;
          float _2862 = (_2856 - _2857) * 1.73205077648162841796875f;
          float _2864 = (_2855 * 2.0f) - _2856;
          float _2866 = mad(-_2854, _2809, _2864);
          float _2867 = abs(_2862);
          float _2868 = abs(_2866);
          float _2872 = min(_2867, _2868) * (1.0f / max(_2867, _2868));
          float _2873 = _2872 * _2872;
          float _2877 = mad(_2873, mad(_2873, mad(_2873, mad(_2873, 0.02083509974181652069091796875f, -0.08513300120830535888671875f), 0.1801410019397735595703125f), -0.33029949665069580078125f), 0.999866008758544921875f);
          float _2887 = mad(_2872, _2877, (_2867 > _2868) ? mad(_2872 * _2877, -2.0f, 1.57079637050628662109375f) : 0.0f) + ((_2866 < mad(_2854, _2809, -_2864)) ? (-3.1415927410125732421875f) : 0.0f);
          float _2888 = min(_2862, _2866);
          float _2889 = max(_2862, _2866);
          float _2898 = ((_2855 == _2856) && (_2857 == _2856)) ? 0.0f : ((((_2888 < (-_2888)) && (_2889 >= (-_2889))) ? (-_2887) : _2887) * 57.295780181884765625f);
          float _2902 = clamp((_2898 < 0.0f) ? (_2898 + 360.0f) : _2898, 0.0f, 360.0f);
          float _2905 = (_2902 > 180.0f) ? (_2902 - 360.0f) : _2902;
          float _2942;
          if ((_2905 > (-67.5f)) && (_2905 < 67.5f)) {
            float _2912 = _2905 + 67.5f;
            float _2913 = _2912 * 0.0296296291053295135498046875f;
            float _2917 = mad(_2912, 0.0296296291053295135498046875f, -trunc(_2913));
            float _2918 = _2917 * _2917;
            float _2919 = _2917 * _2918;
            float _2923 = _2918 * 0.5f;
            uint _2931 = uint(cvt_f32_i32(_2913));
            _2942 = (_2931 == 3u) ? (mad(_2917, -0.5f, (_2919 * (-0.16666667163372039794921875f)) + _2923) + 0.16666667163372039794921875f) : ((_2931 == 2u) ? (((_2919 * 0.5f) - _2918) + 0.666666686534881591796875f) : ((_2931 == 1u) ? (mad(_2917, 0.5f, _2923 + (_2919 * (-0.5f))) + 0.16666667163372039794921875f) : ((_2931 != 0u) ? 0.0f : (_2919 * 0.16666667163372039794921875f))));
          } else {
            _2942 = 0.0f;
          }
          float3 _2953 = float3(clamp(_2855 + ((((_2818 * _2942) * 1.5f) * mad(-_2807, _2854, 0.02999999932944774627685546875f)) * 0.180000007152557373046875f), 0.0f, 65535.0f), clamp(_2856, 0.0f, 65535.0f), clamp(_2857, 0.0f, 65535.0f));
          float _2957 = clamp(dp3_f32(float3(1.45143926143646240234375f, -0.236510753631591796875f, -0.214928567409515380859375f), _2953), 0.0f, 65504.0f);
          float _2958 = clamp(dp3_f32(float3(-0.07655377686023712158203125f, 1.1762297153472900390625f, -0.0996759235858917236328125f), _2953), 0.0f, 65504.0f);
          float _2959 = clamp(dp3_f32(float3(0.0083161480724811553955078125f, -0.0060324496589601039886474609375f, 0.99771630764007568359375f), _2953), 0.0f, 65504.0f);
          float _2961 = dp3_f32(float3(_2957, _2958, _2959), float3(0.272228717803955078125f, 0.674081742763519287109375f, 0.053689517080783843994140625f));
          float _2974 = log2(max(mad(_2957 - _2961, 0.959999978542327880859375f, _2961), 1.0000000133514319600180897396058e-10f)) * 0.3010300099849700927734375f;
          float _2975 = log2(max(mad(_2958 - _2961, 0.959999978542327880859375f, _2961), 1.0000000133514319600180897396058e-10f)) * 0.3010300099849700927734375f;
          float _2976 = log2(max(mad(_2959 - _2961, 0.959999978542327880859375f, _2961), 1.0000000133514319600180897396058e-10f)) * 0.3010300099849700927734375f;
          float _2981 = log2(asfloat(cb0[8u].x)) * 0.3010300099849700927734375f;
          float _3188;
          if (_2974 <= _2981) {
            _3188 = log2(asfloat(cb0[8u].y)) * 0.3010300099849700927734375f;
          } else {
            float _2998 = log2(asfloat(cb0[9u].x)) * 0.3010300099849700927734375f;
            float _3187;
            if ((_2974 > _2981) && (_2974 < _2998)) {
              float _3007 = ((_2974 - _2981) * 3.0f) / (_2998 - _2981);
              int _3008 = cvt_f32_i32(_3007);
              float _3010 = _3007 - trunc(_3007);
              uint _3011 = uint(_3008);
              float4 _3033 = float4(asfloat(cb0[10u].x), asfloat(cb0[10u].y), asfloat(cb0[10u].z), asfloat(cb0[10u].w));
              float _3038 = asfloat(cb0[12u].x);
              float _3041 = mad(_3038, float(_3011 == 5u), mad(float(_3011 == 4u), _3038, dp4_f32(float4(float(_3011 == 0u), float(_3011 == 1u), float(_3011 == 2u), float(_3011 == 3u)), _3033)));
              uint _3043 = uint(_3008 + 1);
              uint _3045 = uint(_3008 + 2);
              float _3063 = mad(_3038, float(_3043 == 5u), mad(_3038, float(_3043 == 4u), dp4_f32(float4(float(_3043 == 0u), float(_3043 == 1u), float(_3043 == 2u), float(_3043 == 3u)), _3033)));
              float2 _3081 = float2(_3041, _3063);
              _3187 = dp3_f32(float3(_3010 * _3010, _3010, 1.0f), float3(dp3_f32(float3(_3041, mad(_3038, float(_3045 == 5u), mad(_3038, float(_3045 == 4u), dp4_f32(float4(float(_3045 == 0u), float(_3045 == 1u), float(_3045 == 2u), float(_3045 == 3u)), _3033))), _3063), float3(0.5f, 0.5f, -1.0f)), dp2_f32(_3081, float2(-1.0f, 1.0f)), dp2_f32(_3081, 0.5f.xx)));
            } else {
              float _3092 = log2(asfloat(cb0[8u].z)) * 0.3010300099849700927734375f;
              float _3186;
              if ((_2974 >= _2998) && (_2974 < _3092)) {
                float _3101 = ((_2974 - _2998) * 3.0f) / (_3092 - _2998);
                int _3102 = cvt_f32_i32(_3101);
                float _3104 = _3101 - trunc(_3101);
                uint _3105 = uint(_3102);
                float4 _3127 = float4(asfloat(cb0[11u].x), asfloat(cb0[11u].y), asfloat(cb0[11u].z), asfloat(cb0[11u].w));
                float _3132 = asfloat(cb0[12u].y);
                float _3135 = mad(_3132, float(_3105 == 5u), mad(float(_3105 == 4u), _3132, dp4_f32(float4(float(_3105 == 0u), float(_3105 == 1u), float(_3105 == 2u), float(_3105 == 3u)), _3127)));
                uint _3137 = uint(_3102 + 1);
                uint _3139 = uint(_3102 + 2);
                float _3157 = mad(_3132, float(_3137 == 5u), mad(_3132, float(_3137 == 4u), dp4_f32(float4(float(_3137 == 0u), float(_3137 == 1u), float(_3137 == 2u), float(_3137 == 3u)), _3127)));
                float2 _3175 = float2(_3135, _3157);
                _3186 = dp3_f32(float3(_3104 * _3104, _3104, 1.0f), float3(dp3_f32(float3(_3135, mad(_3132, float(_3139 == 5u), mad(_3132, float(_3139 == 4u), dp4_f32(float4(float(_3139 == 0u), float(_3139 == 1u), float(_3139 == 2u), float(_3139 == 3u)), _3127))), _3157), float3(0.5f, 0.5f, -1.0f)), dp2_f32(_3175, float2(-1.0f, 1.0f)), dp2_f32(_3175, 0.5f.xx)));
              } else {
                _3186 = log2(asfloat(cb0[8u].w)) * 0.3010300099849700927734375f;
              }
              _3187 = _3186;
            }
            _3188 = _3187;
          }
          float _3394;
          if (_2975 <= _2981) {
            _3394 = log2(asfloat(cb0[8u].y)) * 0.3010300099849700927734375f;
          } else {
            float _3204 = log2(asfloat(cb0[9u].x)) * 0.3010300099849700927734375f;
            float _3393;
            if ((_2975 > _2981) && (_2975 < _3204)) {
              float _3213 = ((_2975 - _2981) * 3.0f) / (_3204 - _2981);
              int _3214 = cvt_f32_i32(_3213);
              float _3216 = _3213 - trunc(_3213);
              uint _3217 = uint(_3214);
              float4 _3239 = float4(asfloat(cb0[10u].x), asfloat(cb0[10u].y), asfloat(cb0[10u].z), asfloat(cb0[10u].w));
              float _3244 = asfloat(cb0[12u].x);
              float _3247 = mad(_3244, float(_3217 == 5u), mad(float(_3217 == 4u), _3244, dp4_f32(float4(float(_3217 == 0u), float(_3217 == 1u), float(_3217 == 2u), float(_3217 == 3u)), _3239)));
              uint _3249 = uint(_3214 + 1);
              uint _3251 = uint(_3214 + 2);
              float _3269 = mad(_3244, float(_3249 == 5u), mad(_3244, float(_3249 == 4u), dp4_f32(float4(float(_3249 == 0u), float(_3249 == 1u), float(_3249 == 2u), float(_3249 == 3u)), _3239)));
              float2 _3287 = float2(_3247, _3269);
              _3393 = dp3_f32(float3(_3216 * _3216, _3216, 1.0f), float3(dp3_f32(float3(_3247, mad(_3244, float(_3251 == 5u), mad(_3244, float(_3251 == 4u), dp4_f32(float4(float(_3251 == 0u), float(_3251 == 1u), float(_3251 == 2u), float(_3251 == 3u)), _3239))), _3269), float3(0.5f, 0.5f, -1.0f)), dp2_f32(_3287, float2(-1.0f, 1.0f)), dp2_f32(_3287, 0.5f.xx)));
            } else {
              float _3298 = log2(asfloat(cb0[8u].z)) * 0.3010300099849700927734375f;
              float _3392;
              if ((_2975 >= _3204) && (_2975 < _3298)) {
                float _3307 = ((_2975 - _3204) * 3.0f) / (_3298 - _3204);
                int _3308 = cvt_f32_i32(_3307);
                float _3310 = _3307 - trunc(_3307);
                uint _3311 = uint(_3308);
                float4 _3333 = float4(asfloat(cb0[11u].x), asfloat(cb0[11u].y), asfloat(cb0[11u].z), asfloat(cb0[11u].w));
                float _3338 = asfloat(cb0[12u].y);
                float _3341 = mad(_3338, float(_3311 == 5u), mad(float(_3311 == 4u), _3338, dp4_f32(float4(float(_3311 == 0u), float(_3311 == 1u), float(_3311 == 2u), float(_3311 == 3u)), _3333)));
                uint _3343 = uint(_3308 + 1);
                uint _3345 = uint(_3308 + 2);
                float _3363 = mad(_3338, float(_3343 == 5u), mad(_3338, float(_3343 == 4u), dp4_f32(float4(float(_3343 == 0u), float(_3343 == 1u), float(_3343 == 2u), float(_3343 == 3u)), _3333)));
                float2 _3381 = float2(_3341, _3363);
                _3392 = dp3_f32(float3(_3310 * _3310, _3310, 1.0f), float3(dp3_f32(float3(_3341, mad(_3338, float(_3345 == 5u), mad(_3338, float(_3345 == 4u), dp4_f32(float4(float(_3345 == 0u), float(_3345 == 1u), float(_3345 == 2u), float(_3345 == 3u)), _3333))), _3363), float3(0.5f, 0.5f, -1.0f)), dp2_f32(_3381, float2(-1.0f, 1.0f)), dp2_f32(_3381, 0.5f.xx)));
              } else {
                _3392 = log2(asfloat(cb0[8u].w)) * 0.3010300099849700927734375f;
              }
              _3393 = _3392;
            }
            _3394 = _3393;
          }
          float _3600;
          if (_2976 <= _2981) {
            _3600 = log2(asfloat(cb0[8u].y)) * 0.3010300099849700927734375f;
          } else {
            float _3410 = log2(asfloat(cb0[9u].x)) * 0.3010300099849700927734375f;
            float _3599;
            if ((_2976 > _2981) && (_2976 < _3410)) {
              float _3419 = ((_2976 - _2981) * 3.0f) / (_3410 - _2981);
              int _3420 = cvt_f32_i32(_3419);
              float _3422 = _3419 - trunc(_3419);
              uint _3423 = uint(_3420);
              float4 _3445 = float4(asfloat(cb0[10u].x), asfloat(cb0[10u].y), asfloat(cb0[10u].z), asfloat(cb0[10u].w));
              float _3450 = asfloat(cb0[12u].x);
              float _3453 = mad(_3450, float(_3423 == 5u), mad(float(_3423 == 4u), _3450, dp4_f32(float4(float(_3423 == 0u), float(_3423 == 1u), float(_3423 == 2u), float(_3423 == 3u)), _3445)));
              uint _3455 = uint(_3420 + 1);
              uint _3457 = uint(_3420 + 2);
              float _3475 = mad(_3450, float(_3455 == 5u), mad(_3450, float(_3455 == 4u), dp4_f32(float4(float(_3455 == 0u), float(_3455 == 1u), float(_3455 == 2u), float(_3455 == 3u)), _3445)));
              float2 _3493 = float2(_3453, _3475);
              _3599 = dp3_f32(float3(_3422 * _3422, _3422, 1.0f), float3(dp3_f32(float3(_3453, mad(_3450, float(_3457 == 5u), mad(_3450, float(_3457 == 4u), dp4_f32(float4(float(_3457 == 0u), float(_3457 == 1u), float(_3457 == 2u), float(_3457 == 3u)), _3445))), _3475), float3(0.5f, 0.5f, -1.0f)), dp2_f32(_3493, float2(-1.0f, 1.0f)), dp2_f32(_3493, 0.5f.xx)));
            } else {
              float _3504 = log2(asfloat(cb0[8u].z)) * 0.3010300099849700927734375f;
              float _3598;
              if ((_2976 >= _3410) && (_2976 < _3504)) {
                float _3513 = ((_2976 - _3410) * 3.0f) / (_3504 - _3410);
                int _3514 = cvt_f32_i32(_3513);
                float _3516 = _3513 - trunc(_3513);
                uint _3517 = uint(_3514);
                float4 _3539 = float4(asfloat(cb0[11u].x), asfloat(cb0[11u].y), asfloat(cb0[11u].z), asfloat(cb0[11u].w));
                float _3544 = asfloat(cb0[12u].y);
                float _3547 = mad(_3544, float(_3517 == 5u), mad(float(_3517 == 4u), _3544, dp4_f32(float4(float(_3517 == 0u), float(_3517 == 1u), float(_3517 == 2u), float(_3517 == 3u)), _3539)));
                uint _3549 = uint(_3514 + 1);
                uint _3551 = uint(_3514 + 2);
                float _3569 = mad(_3544, float(_3549 == 5u), mad(_3544, float(_3549 == 4u), dp4_f32(float4(float(_3549 == 0u), float(_3549 == 1u), float(_3549 == 2u), float(_3549 == 3u)), _3539)));
                float2 _3587 = float2(_3547, _3569);
                _3598 = dp3_f32(float3(_3516 * _3516, _3516, 1.0f), float3(dp3_f32(float3(_3547, mad(_3544, float(_3551 == 5u), mad(_3544, float(_3551 == 4u), dp4_f32(float4(float(_3551 == 0u), float(_3551 == 1u), float(_3551 == 2u), float(_3551 == 3u)), _3539))), _3569), float3(0.5f, 0.5f, -1.0f)), dp2_f32(_3587, float2(-1.0f, 1.0f)), dp2_f32(_3587, 0.5f.xx)));
              } else {
                _3598 = log2(asfloat(cb0[8u].w)) * 0.3010300099849700927734375f;
              }
              _3599 = _3598;
            }
            _3600 = _3599;
          }
          float _3605 = asfloat(cb0[8u].y);
          float _3609 = asfloat(cb0[8u].w);
          float _3610 = _3609 - _3605;
          float3 _3616 = float3((exp2(_3188 * 3.3219280242919921875f) - _3605) / _3610, (exp2(_3394 * 3.3219280242919921875f) - _3605) / _3610, (exp2(_3600 * 3.3219280242919921875f) - _3605) / _3610);
          float3 _3620 = float3(dp3_f32(float3(0.662454187870025634765625f, 0.1340042054653167724609375f, 0.1561876833438873291015625f), _3616), dp3_f32(float3(0.272228717803955078125f, 0.674081742763519287109375f, 0.053689517080783843994140625f), _3616), dp3_f32(float3(-0.0055746496655046939849853515625f, 0.0040607335977256298065185546875f, 1.01033914089202880859375f), _3616));
          float3 _3627 = float3(clamp(dp3_f32(float3(1.6410233974456787109375f, -0.324803292751312255859375f, -0.23642469942569732666015625f), _3620), 0.0f, 1.0f), clamp(dp3_f32(float3(-0.663662850856781005859375f, 1.6153316497802734375f, 0.016756348311901092529296875f), _3620), 0.0f, 1.0f), clamp(dp3_f32(float3(0.01172189414501190185546875f, -0.008284442126750946044921875f, 0.98839485645294189453125f), _3620), 0.0f, 1.0f));
          float3 _3631 = float3(dp3_f32(float3(0.662454187870025634765625f, 0.1340042054653167724609375f, 0.1561876833438873291015625f), _3627), dp3_f32(float3(0.272228717803955078125f, 0.674081742763519287109375f, 0.053689517080783843994140625f), _3627), dp3_f32(float3(-0.0055746496655046939849853515625f, 0.0040607335977256298065185546875f, 1.01033914089202880859375f), _3627));
          float _3641 = clamp(max(dp3_f32(float3(1.6410233974456787109375f, -0.324803292751312255859375f, -0.23642469942569732666015625f), _3631), 0.0f) * _3609, 0.0f, 65535.0f);
          float _3642 = clamp(max(dp3_f32(float3(-0.663662850856781005859375f, 1.6153316497802734375f, 0.016756348311901092529296875f), _3631), 0.0f) * _3609, 0.0f, 65535.0f);
          float _3643 = clamp(max(dp3_f32(float3(0.01172189414501190185546875f, -0.008284442126750946044921875f, 0.98839485645294189453125f), _3631), 0.0f) * _3609, 0.0f, 65535.0f);
          bool _3644 = cb0[40u].w != 6u;
          float3 _3646 = float3(_3641, _3642, _3643);
          float _3664 = exp2(log2((_3644 ? dp3_f32(float3(_438, _439, _440), _3646) : _3641) * 9.9999997473787516355514526367188e-05f) * 0.1593017578125f);
          float _3665 = exp2(log2((_3644 ? dp3_f32(float3(_441, _442, _443), _3646) : _3642) * 9.9999997473787516355514526367188e-05f) * 0.1593017578125f);
          float _3666 = exp2(log2((_3644 ? dp3_f32(float3(_444, _445, _446), _3646) : _3643) * 9.9999997473787516355514526367188e-05f) * 0.1593017578125f);
          _3778 = exp2(log2((1.0f / mad(_3666, 18.6875f, 1.0f)) * mad(_3666, 18.8515625f, 0.8359375f)) * 78.84375f);
          _3779 = exp2(log2((1.0f / mad(_3665, 18.6875f, 1.0f)) * mad(_3665, 18.8515625f, 0.8359375f)) * 78.84375f);
          _3780 = exp2(log2(mad(_3664, 18.8515625f, 0.8359375f) * (1.0f / mad(_3664, 18.6875f, 1.0f))) * 78.84375f);
        } else {
          float _3775;
          float _3776;
          float _3777;
          if (cb0[40u].w == 7u) {
            float3 _3692 = float3(_1669, _1670, _1671);
            float3 _3697 = float3(dp3_f32(_511, _3692), dp3_f32(_522, _3692), dp3_f32(_532, _3692));
            float _3712 = exp2(log2(dp3_f32(float3(_438, _439, _440), _3697) * 9.9999997473787516355514526367188e-05f) * 0.1593017578125f);
            float _3713 = exp2(log2(dp3_f32(float3(_441, _442, _443), _3697) * 9.9999997473787516355514526367188e-05f) * 0.1593017578125f);
            float _3714 = exp2(log2(dp3_f32(float3(_444, _445, _446), _3697) * 9.9999997473787516355514526367188e-05f) * 0.1593017578125f);
            _3775 = exp2(log2((1.0f / mad(_3714, 18.6875f, 1.0f)) * mad(_3714, 18.8515625f, 0.8359375f)) * 78.84375f);
            _3776 = exp2(log2((1.0f / mad(_3713, 18.6875f, 1.0f)) * mad(_3713, 18.8515625f, 0.8359375f)) * 78.84375f);
            _3777 = exp2(log2(mad(_3712, 18.8515625f, 0.8359375f) * (1.0f / mad(_3712, 18.6875f, 1.0f))) * 78.84375f);
          } else {
            bool _3736 = cb0[40u].w == 8u;
            bool _3737 = cb0[40u].w == 9u;
            float3 _3738 = float3(_1555, _1556, _1557);
            float3 _3742 = float3(_438, _439, _440);
            float3 _3743 = float3(dp3_f32(_511, _3738), dp3_f32(_522, _3738), dp3_f32(_532, _3738));
            float3 _3745 = float3(_441, _442, _443);
            float3 _3747 = float3(_444, _445, _446);
            float3 _3749 = float3(_1570, _1571, _1572);
            float3 _3753 = float3(dp3_f32(_511, _3749), dp3_f32(_522, _3749), dp3_f32(_532, _3749));
            float _3762 = asfloat(cb0[40u].z);
            _3775 = _3736 ? _1671 : (_3737 ? dp3_f32(_3747, _3743) : exp2(log2(dp3_f32(_3747, _3753)) * _3762));
            _3776 = _3736 ? _1670 : (_3737 ? dp3_f32(_3745, _3743) : exp2(log2(dp3_f32(_3745, _3753)) * _3762));
            _3777 = _3736 ? _1669 : (_3737 ? dp3_f32(_3742, _3743) : exp2(log2(dp3_f32(_3742, _3753)) * _3762));
          }
          _3778 = _3775;
          _3779 = _3776;
          _3780 = _3777;
        }
        _3781 = _3778;
        _3782 = _3779;
        _3783 = _3780;
      }
      _3784 = _3781;
      _3785 = _3782;
      _3786 = _3783;
    }
    _3787 = _3784;
    _3788 = _3785;
    _3789 = _3786;
  }
  SV_Target.x = _3789 * 0.95238101482391357421875f;
  SV_Target.y = _3788 * 0.95238101482391357421875f;
  SV_Target.z = _3787 * 0.95238101482391357421875f;
  SV_Target.w = 0.0f;
}

SPIRV_Cross_Output main(SPIRV_Cross_Input stage_input) {
  gl_Layer = stage_input.gl_Layer;
  TEXCOORD = stage_input.TEXCOORD;
  frag_main();
  SPIRV_Cross_Output stage_output;
  stage_output.SV_Target = SV_Target;
  return stage_output;
}
