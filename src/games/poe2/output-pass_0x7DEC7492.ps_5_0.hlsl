// ---- Created with 3Dmigoto v1.4.1 on Tue Dec  2 20:43:34 2025
#include "shared.h"

Texture2D<float4> t11 : register(t11);

Texture2D<float4> t10 : register(t10);

Texture2D<float4> t9 : register(t9);

Texture2D<float4> t8 : register(t8);

Texture2D<float4> t7 : register(t7);

Texture2D<float4> t6 : register(t6);

Texture2D<float4> t5 : register(t5);

Texture2D<float4> t4 : register(t4);

Texture2D<float4> t3 : register(t3);

Texture2D<float4> t2 : register(t2);

Texture2D<float4> t1 : register(t1);

Texture2D<float4> t0 : register(t0);

SamplerState s5_s : register(s5);

SamplerState s1_s : register(s1);

SamplerState s0_s : register(s0);

cbuffer cb0 : register(b0)
{
  float4 cb0[27];
}




// 3Dmigoto declarations
#define cmp -


void main(
  float4 v0 : SV_POSITION0,
  float2 v1 : TEXCOORD0,
  out float4 o0 : SV_TARGET0)
{
  float4 r0,r1,r2,r3,r4,r5,r6,r7,r8,r9,r10,r11;
  uint4 bitmask, uiDest;
  float4 fDest;

  r0.xyzw = asint(cb0[0].xyzw);
  r1.xy = v0.xy / r0.xy;
  r0.xy = r0.xy / r0.zw;
  r0.xy = (cb0[26].y != 0) ? float2(1,1) : r0.xy;
  r1.zw = asint(cb0[1].xy);
  r0.zw = r1.zw / r0.zw;
  r1.zw = r1.xy * r0.zw;
  r2.xyzw = t3.Sample(s1_s, r1.zw).xyzw;
  r1.zw = float2(0.0500000007,0.0500000007) * r2.zw;
  r1.xy = r2.xy * float2(0.0500000007,0.0500000007) + r1.xy;
  r2.x = dot(r1.zw, r1.zw);
  r2.x = sqrt(r2.x);
  r2.x = cmp(9.99999975e-06 < r2.x);
  if (r2.x != 0) {
    // Effect: Radial Blur / Bloom Loop
    r2.x = dot(r2.zw, r2.zw);
    r2.x = sqrt(r2.x);
    r2.x = r2.x * 20 + 1;
    r2.x = min(15, r2.x);
    r2.y = (int)r2.x;
    r2.x = trunc(r2.x);
    r3.xyzw = float4(0,0,0,0);
    r2.zw = float2(0,0);
    while (true) {
      r4.x = cmp((int)r2.w >= (int)r2.y);
      if (r4.x != 0) break;
      r4.x = (int)r2.w;
      r4.x = 0.5 + r4.x;
      r4.x = r4.x / r2.x;
      r4.y = 1 + -r4.x;
      r4.xz = r4.xx * r1.zw;
      r4.xz = r1.xy * r0.xy + r4.xz;
      r5.xyzw = t0.SampleLevel(s1_s, r4.xz, 0).xyzw;
      r3.xyzw = r5.xyzw * r4.yyyy + r3.xyzw;
      r2.z = r4.y + r2.z;
      r2.w = (int)r2.w + 1;
    }
    r1.z = max(9.99999975e-06, r2.z);
    r2.xyzw = r3.xyzw / r1.zzzz;
  } else {
    r0.xy = r1.xy * r0.xy;
    r2.xyzw = t0.SampleLevel(s1_s, r0.xy, 0).xyzw;
  }
  r0.xy = r1.xy * r0.zw;
  r0.x = t1.SampleLevel(s1_s, r0.xy, 0).x;
  r0.y = r1.x * 2 + -1;
  r1.z = 1 + -r1.y;
  r1.z = r1.z * 2 + -1;
  r3.xyzw = cb0[7].xyzw * r1.zzzz;
  r3.xyzw = r0.yyyy * cb0[6].xyzw + r3.xyzw;
  r3.xyzw = r0.xxxx * cb0[8].xyzw + r3.xyzw;
  r3.xyzw = cb0[9].xyzw + r3.xyzw;
  r3.xyz = r3.xyz / r3.www;
  // Edge Detection / Sharpening Logic
  r4.xyz = ddx_coarse(r3.zxy);
  r5.xyz = ddy_coarse(r3.yzx);
  r6.xyz = r5.xyz * r4.xyz;
  r4.xyz = r4.zxy * r5.yzx + -r6.xyz;
  r0.x = dot(r4.xyz, r4.xyz);
  r0.x = sqrt(r0.x);
  r0.x = 9.99999975e-06 + r0.x;
  r4.xyz = r4.xyz / r0.xxx;
  r4.xyz = float3(0.00100000005,0.00100000005,0.00100000005) + r4.xyz;
  r0.x = cmp(0 < cb0[18].x);
  r0.y = cmp(asint(cb0[21].y) != 0);
  r0.x = (r0.x != 0) ? r0.y : 0;
  // Force-disable built-in sharpening
  r0.x = 0;
  if (r0.x != 0) {
    r0.x = cmp(cb0[18].y < 1);
    if (r0.x != 0) {
      r0.xy = -cb0[16].xy + r3.xy;
      r5.xyz = cb0[16].zwz + -cb0[16].xyx;
      r1.zw = float2(9.99999975e-06,9.99999975e-06) + r5.zy;
      r0.xy = r0.xy / r1.zw;
      r6.xyzw = t8.SampleLevel(s0_s, r0.xy, 0).xyzw;
      r1.z = cb0[18].x + -r6.x;
      r0.x = t9.SampleLevel(s0_s, r0.xy, 0).x;
      r5.xyz = r5.xyz / cb0[17].xyx;
      r5.xyz = r6.yzw / r5.xyz;
      r0.y = dot(r5.xy, r5.xy);
      r0.y = sqrt(r0.y);
      r1.w = r0.y * 5 + 0.899999976;
      r1.w = 0.699999988 / r1.w;
      r1.w = 0.300000012 + r1.w;
      r3.w = 0.5 + -r1.w;
      r1.w = cb0[18].w * r3.w + r1.w;
      r6.yzw = -cb0[19].xyz + r3.xyz;
      r3.w = dot(r6.yzw, r6.yzw);
      r3.w = sqrt(r3.w);
      r3.w = -300 + r3.w;
      r4.w = max(0, cb0[18].z);
      r4.w = r4.w * r4.w;
      r3.w = -r4.w * 1000 + r3.w;
      r3.w = -r3.w * 0.000500000024 + 1;
      r0.y = 9.99999975e-05 + r0.y;
      r1.z = r1.z / r0.y;
      r1.z = r1.z * 0.0142857144 + 1;
      r3.w = -r3.w * 50 + 50;
      r1.z = max(r3.w, r1.z);
      r0.y = 1 / r0.y;
      r0.y = 0.0142857144 * r0.y;
      r7.xy = r5.xy * r0.yy;
      r7.z = 0;
      r0.y = saturate(8 + r6.x);
      r5.xyw = float3(9.99999975e-06,9.99999975e-06,9.99999975e-06) + r7.xyz;
      r3.w = dot(r5.xyw, r5.xyw);
      r3.w = sqrt(r3.w);
      r6.xyzw = -r7.yzxz / r3.wwww;
      r3.w = r5.z * 300 + 1;
      r3.w = 40.5 / r3.w;
      r4.w = max(0, r1.z);
      r5.x = dot(r7.xy, r7.xy);
      r5.y = r4.w + r4.w;
      r5.z = sqrt(r5.x);
      r3.w = 2 / r3.w;
      r3.w = r5.y * r5.z + r3.w;
      r5.y = r4.w * r4.w;
      r5.y = r5.y * r5.x;
      r5.y = 4 * r5.y;
      r5.y = r3.w * r3.w + -r5.y;
      r5.y = sqrt(r5.y);
      r3.w = r5.y + -r3.w;
      r5.x = r5.x * 2 + 9.99999975e-06;
      r3.w = -r3.w / r5.x;
      r5.x = cmp(0 < r0.x);
      r5.y = saturate(0.300000012 + -r0.x);
      r5.z = r5.y * r5.y;
      r5.z = r5.z * r5.z;
      r5.y = -r5.y * r5.z + 1;
      r5.y = r5.y * -r3.w + r3.w;
      r3.w = (r5.x != 0) ? r5.y : r3.w;
      r5.xyzw = -r6.xyzw * r3.wwww + r3.yzxz;
      r7.xyz = cb0[3].xyw * r5.xxx;
      r7.xyz = r5.zzz * cb0[2].xyw + r7.xyz;
      r7.xyz = r5.www * cb0[4].xyw + r7.xyz;
      r7.xyz = cb0[5].xyw + r7.xyz;
      r6.yw = r7.xy / r7.zz;
      r7.xy = r6.yw * float2(0.5,0.5) + float2(0.5,0.5);
      r7.z = 1 + -r7.y;
      r6.yw = r7.xz * r0.zw;
      r7.xyz = t0.SampleLevel(s1_s, r6.yw, 0).xyz;
      r8.xyzw = float4(0.00150000001,0.00150000001,0.00150000001,0.00150000001) * r5.xyzw;
      r5.y = t7.SampleLevel(s0_s, r8.xy, 0).z;
      r5.w = t7.SampleLevel(s0_s, r8.zw, 0).z;
      r5.xz = float2(0.00150000001,0.00150000001) * r5.zx;
      r5.x = t7.SampleLevel(s0_s, r5.xz, 0).z;
      r5.z = r5.w * abs(r4.y);
      r5.y = r5.y * abs(r4.x) + r5.z;
      r5.x = r5.x * abs(r4.z) + r5.y;
      r5.y = abs(r4.x) + abs(r4.y);
      r5.y = r5.y + abs(r4.z);
      r5.x = r5.x / r5.y;
      r5.x = -1 + r5.x;
      r4.w = log2(r4.w);
      r4.w = 0.200000003 * r4.w;
      r4.w = exp2(r4.w);
      r4.w = r4.w * 1.04999995 + r5.x;
      r0.x = saturate(r0.x);
      r0.x = r0.x * -r4.w + r4.w;
      r4.w = saturate(r0.x);
      r5.x = r4.w * r4.w;
      r5.x = r5.x * r5.x;
      r4.w = log2(r4.w);
      r4.w = 7 * r4.w;
      r4.w = exp2(r4.w);
      r1.w = r4.w * r1.w;
      r4.w = r1.w * r1.w;
      r5.yzw = r1.www * float3(0.446942955,2.44301867,0.122613817) + float3(0.860117733,1,0.317398727);
      r5.yzw = r4.www * float3(1.0818727,5.9555006,0.353625089) + r5.yzw;
      r5.y = r5.y / r5.z;
      r5.z = -r1.w * 0.0840251297 + 1;
      r4.w = r4.w * 1.35784543 + r5.z;
      r4.w = r5.w / r4.w;
      r5.z = 3 * r5.y;
      r5.y = r5.y + r5.y;
      r5.y = -r4.w * 8 + r5.y;
      r5.y = 4 + r5.y;
      r5.z = r5.z / r5.y;
      r4.w = r4.w + r4.w;
      r4.w = r4.w / r5.y;
      r5.y = 1 + -r5.z;
      r5.y = r5.y + -r4.w;
      r4.w = 1 / r4.w;
      r8.xz = r4.ww * r5.zy;
      r8.y = 1;
      r9.z = dot(float3(3.2404542,-1.53713846,-0.498531401), r8.xyz);
      r9.y = dot(float3(-0.969265997,1.87601078,0.0415560007), r8.xyz);
      r9.x = dot(float3(0.0556433983,-0.204025894,1.05722523), r8.xyz);
      r1.w = 1.15999997 * r1.w;
      r1.w = r1.w * r1.w;
      r1.w = r1.w * r1.w;
      r5.yzw = saturate(r9.xyz * r1.www);
      r5.yzw = log2(r5.yzw);
      r5.yzw = float3(2.20000005,2.20000005,2.20000005) * r5.yzw;
      r5.yzw = exp2(r5.yzw);
      r5.yzw = r5.yzw + r5.yzw;
      r1.w = cmp(r0.x < 1);
      r1.w = (r1.w != 0) ? 1.000000 : 0;
      r5.yzw = r5.yzw * r1.www;
      r0.x = cmp(1 < r0.x);
      if (r0.x != 0) {
        r0.x = r1.z * 0.800000012 + -5;
        r0.x = max(0, r0.x);
        r0.x = 1 + r0.x;
        r0.x = 1 / r0.x;
        r8.xw = float2(0.200000003,0.00800000038) * cb0[14].xx;
        r8.yz = float2(0,0);
        r6.yw = r3.xy * float2(0.00200000009,0.00200000009) + r8.xy;
        r6.yw = frac(r6.yw);
        r6.yw = t2.SampleLevel(s5_s, r6.yw, 0).xy;
        r1.z = -2.5 + r1.z;
        r1.z = saturate(0.100000001 * r1.z);
        r1.z = r1.z * r1.z;
        r1.z = 0.400000006 * r1.z;
        r6.yw = float2(-0.5,-0.5) + r6.yw;
        r1.zw = r6.yw * r1.zz;
        r6.xy = r1.zw * float2(2,2) + r6.zx;
        r6.z = 0;
        r9.xyz = cb0[3].xyw * r3.yyy;
        r9.xyz = r3.xxx * cb0[2].xyw + r9.xyz;
        r9.xyz = r3.zzz * cb0[4].xyw + r9.xyz;
        r9.xyz = cb0[5].xyw + r9.xyz;
        r1.zw = r9.xy / r9.zz;
        r9.xy = r1.zw * float2(0.5,0.5) + float2(0.5,0.5);
        r10.xyz = r6.xyz + r3.xyz;
        r11.xyz = cb0[3].xyw * r10.yyy;
        r10.xyw = r10.xxx * cb0[2].xyw + r11.xyz;
        r10.xyz = r10.zzz * cb0[4].xyw + r10.xyw;
        r10.xyz = cb0[5].xyw + r10.xyz;
        r1.zw = r10.xy / r10.zz;
        r10.xy = r1.zw * float2(0.5,0.5) + float2(0.5,0.5);
        r9.z = 1 + -r9.y;
        r10.z = 1 + -r10.y;
        r1.zw = r10.xz + -r9.xz;
        r3.w = r3.w * 0.0199999996 + 1;
        r3.w = 1 / r3.w;
        r6.xy = r6.xy * r3.ww;
        r6.xy = float2(50,50) * r6.xy;
        r6.z = 0;
        r6.xyz = r6.xyz + r3.xyz;
        r9.xyz = cb0[3].xyw * r6.yyy;
        r9.xyz = r6.xxx * cb0[2].xyw + r9.xyz;
        r9.xyz = r6.zzz * cb0[4].xyw + r9.xyz;
        r9.xyz = cb0[5].xyw + r9.xyz;
        r8.xy = r9.xy / r9.zz;
        r9.xy = r8.xy * float2(0.5,0.5) + float2(0.5,0.5);
        r6.xyz = float3(0.600000024,0.600000024,0.600000024) * r6.xyz;
        r6.xyz = trunc(r6.xyz);
        r3.w = dot(r6.xyz, float3(12.9898005,78.2330017,164.299896));
        r3.w = sin(r3.w);
        r3.w = 43758.5469 * r3.w;
        r3.w = frac(r3.w);
        r3.w = min(0.999999881, r3.w);
        r3.w = max(1.00000001e-07, r3.w);
        r4.w = max(0.300000012, r3.w);
        r4.w = 1 + -r4.w;
        r4.w = log2(r4.w);
        r4.w = 0.25 * r4.w;
        r4.w = exp2(r4.w);
        r3.w = min(0.300000012, r3.w);
        r3.w = log2(r3.w);
        r3.w = 0.25 * r3.w;
        r3.w = exp2(r3.w);
        r3.w = 0.405360073 * r3.w;
        r3.w = r4.w * -0.765285552 + r3.w;
        r3.w = 0.399999976 + r3.w;
        r1.zw = r3.ww * r1.zw;
        r9.z = 1 + -r9.y;
        r1.zw = r1.zw * float2(200,200) + r9.xz;
        r6.xy = r1.zw * r0.zw;
        r3.w = t1.SampleLevel(s1_s, r6.xy, 0).x;
        r1.z = r1.z * 2 + -1;
        r1.w = 1 + -r1.w;
        r1.w = r1.w * 2 + -1;
        r6.xyz = cb0[7].xyw * r1.www;
        r6.xyz = r1.zzz * cb0[6].xyw + r6.xyz;
        r6.xyz = r3.www * cb0[8].xyw + r6.xyz;
        r6.xyz = cb0[9].xyw + r6.xyz;
        r6.xyzw = r6.xyxy / r6.zzzz;
        r1.zw = float2(0.000300000014,0.000300000014) * r6.xy;
        r1.z = t7.SampleLevel(s0_s, r1.zw, 0).z;
        r1.z = 0.949999988 * r1.z;
        r6.xy = r6.zw * float2(9.99999975e-05,9.99999975e-05) + r8.zw;
        r1.w = t7.SampleLevel(s0_s, r6.xy, 0).z;
        r1.w = r1.w * 0.664999962 + 1.29999995;
        r1.z = r1.w * r1.z;
        r1.z = saturate(0.555555582 * r1.z);
        r0.x = r0.x * 1000 + 1800;
        r1.w = r1.z * r1.z;
        r1.z = r1.z * r1.w;
        r0.x = r1.z * r0.x;
        r6.xyz = r0.xxx * float3(0.000154118257,0.00084242021,4.22806261e-05) + float3(0.860117733,1,0.317398727);
        r1.z = r0.x * r0.x;
        r6.xyz = r1.zzz * float3(1.28641219e-07,7.08145137e-07,4.20481676e-08) + r6.xyz;
        r1.w = r6.x / r6.y;
        r3.w = -r0.x * 2.8974182e-05 + 1;
        r1.z = r1.z * 1.61456057e-07 + r3.w;
        r1.z = r6.z / r1.z;
        r3.w = 3 * r1.w;
        r1.w = r1.w + r1.w;
        r1.w = -r1.z * 8 + r1.w;
        r1.w = 4 + r1.w;
        r3.w = r3.w / r1.w;
        r1.z = r1.z + r1.z;
        r1.z = r1.z / r1.w;
        r1.w = 1 + -r3.w;
        r1.w = r1.w + -r1.z;
        r1.z = 1 / r1.z;
        r6.x = r1.z * r3.w;
        r6.z = r1.z * r1.w;
        r6.y = 1;
        r8.z = dot(float3(3.2404542,-1.53713846,-0.498531401), r6.xyz);
        r8.y = dot(float3(-0.969265997,1.87601078,0.0415560007), r6.xyz);
        r8.x = dot(float3(0.0556433983,-0.204025894,1.05722523), r6.xyz);
        r0.x = 0.00039999999 * r0.x;
        r0.x = r0.x * r0.x;
        r0.x = r0.x * r0.x;
        r6.xyz = saturate(r8.xyz * r0.xxx);
        r6.xyz = log2(r6.xyz);
        r6.xyz = float3(2.20000005,2.20000005,2.20000005) * r6.xyz;
        r6.xyz = exp2(r6.xyz);
        r6.xyz = r6.xyz + r6.xyz;
        r6.xyz = min(float3(1,1,1), r6.xyz);
      } else {
        r6.xyz = r5.xxx * -r7.xyz + r7.xyz;
      }
      r5.xyz = r5.yzw * r0.yyy + r6.xyz;
    } else {
      r0.x = cmp(cb0[18].y < 2);
      if (r0.x != 0) {
        r0.xy = -cb0[16].xy + r3.xy;
        r1.zw = cb0[16].zw + -cb0[16].xy;
        r6.xy = float2(9.99999975e-06,9.99999975e-06) + r1.zw;
        r0.xy = r0.xy / r6.xy;
        r6.xyz = t8.SampleLevel(s0_s, r0.xy, 0).xyz;
        r0.x = cb0[18].x + -r6.x;
        r1.zw = r1.zw / cb0[17].xy;
        r1.zw = r6.yz / r1.zw;
        r6.xyz = -cb0[19].xyz + r3.xyz;
        r0.y = dot(r6.xyz, r6.xyz);
        r0.y = sqrt(r0.y);
        r0.y = -300 + r0.y;
        r3.w = max(0, cb0[18].z);
        r3.w = r3.w * r3.w;
        r0.y = -r3.w * 1000 + r0.y;
        r0.y = -r0.y * 0.000500000024 + 1;
        r3.w = dot(r1.zw, r1.zw);
        r3.w = sqrt(r3.w);
        r3.w = 9.99999975e-05 + r3.w;
        r0.x = r0.x / r3.w;
        r0.x = r0.x * 0.0142857144 + 1;
        r0.y = -r0.y * 50 + 50;
        r0.x = max(r0.x, r0.y);
        r6.xyzw = float4(0.000500000024,0.000500000024,0.000500000024,0.000500000024) * r3.yzxz;
        r0.y = t7.SampleLevel(s0_s, r6.xy, 0).z;
        r4.w = t7.SampleLevel(s0_s, r6.zw, 0).z;
        r6.xy = float2(0.000500000024,0.000500000024) * r3.xy;
        r5.w = t7.SampleLevel(s0_s, r6.xy, 0).z;
        r4.w = r4.w * abs(r4.y);
        r0.y = r0.y * abs(r4.x) + r4.w;
        r0.y = r5.w * abs(r4.z) + r0.y;
        r4.w = abs(r4.x) + abs(r4.y);
        r4.w = r4.w + abs(r4.z);
        r0.y = r0.y / r4.w;
        r0.y = -1 + r0.y;
        r4.w = max(0, r0.x);
        r4.w = log2(r4.w);
        r4.w = 0.400000006 * r4.w;
        r4.w = exp2(r4.w);
        r0.y = r4.w * 1.04999995 + r0.y;
        r4.w = cmp(1 < r0.y);
        if (r4.w != 0) {
          r3.w = 1 / r3.w;
          r3.w = 0.0142857144 * r3.w;
          r6.xy = r3.ww * r1.zw;
          r6.z = 0;
          r7.xyz = float3(9.99999975e-06,9.99999975e-06,9.99999975e-06) + r6.xyz;
          r1.z = dot(r7.xyz, r7.xyz);
          r1.z = sqrt(r1.z);
          r1.zw = -r6.xy / r1.zz;
          r6.x = 0.200000003 * cb0[14].x;
          r6.y = 0;
          r6.xy = r3.xy * float2(0.00200000009,0.00200000009) + r6.xy;
          r6.xy = frac(r6.xy);
          r6.xy = t2.SampleLevel(s5_s, r6.xy, 0).xy;
          r0.x = -2.5 + r0.x;
          r0.x = saturate(0.100000001 * r0.x);
          r0.x = r0.x * r0.x;
          r0.x = 0.400000006 * r0.x;
          r6.xy = float2(-0.5,-0.5) + r6.xy;
          r6.xy = r6.xy * r0.xx;
          r6.xy = r6.xy * float2(2,2) + r1.zw;
          r6.z = 0;
          r7.xyz = cb0[3].xyw * r3.yyy;
          r7.xyz = r3.xxx * cb0[2].xyw + r7.xyz;
          r7.xyz = r3.zzz * cb0[4].xyw + r7.xyz;
          r7.xyz = cb0[5].xyw + r7.xyz;
          r1.zw = r7.xy / r7.zz;
          r7.xy = r1.zw * float2(0.5,0.5) + float2(0.5,0.5);
          r8.xyz = r6.xyz * float3(0.5,0.5,0.5) + r3.xyz;
          r9.xyz = cb0[3].xyw * r8.yyy;
          r8.xyw = r8.xxx * cb0[2].xyw + r9.xyz;
          r8.xyz = r8.zzz * cb0[4].xyw + r8.xyw;
          r8.xyz = cb0[5].xyw + r8.xyz;
          r1.zw = r8.xy / r8.zz;
          r8.xy = r1.zw * float2(0.5,0.5) + float2(0.5,0.5);
          r7.z = 1 + -r7.y;
          r8.z = 1 + -r8.y;
          r1.zw = r8.xz + -r7.xz;
          r6.xyz = r6.xyz * float3(50,50,50) + r3.xyz;
          r7.xyz = cb0[3].xyw * r6.yyy;
          r7.xyz = r6.xxx * cb0[2].xyw + r7.xyz;
          r7.xyz = r6.zzz * cb0[4].xyw + r7.xyz;
          r7.xyz = cb0[5].xyw + r7.xyz;
          r7.xy = r7.xy / r7.zz;
          r7.xy = r7.xy * float2(0.5,0.5) + float2(0.5,0.5);
          r6.xyz = float3(0.600000024,0.600000024,0.600000024) * r6.xyz;
          r6.xyz = trunc(r6.xyz);
          r0.x = dot(r6.xyz, float3(12.9898005,78.2330017,164.299896));
          r0.x = sin(r0.x);
          r0.x = 43758.5469 * r0.x;
          r0.x = frac(r0.x);
          r0.x = min(0.999999881, r0.x);
          r0.x = max(1.00000001e-07, r0.x);
          r3.w = max(0.300000012, r0.x);
          r3.w = 1 + -r3.w;
          r3.w = log2(r3.w);
          r3.w = 0.25 * r3.w;
          r3.w = exp2(r3.w);
          r0.x = min(0.300000012, r0.x);
          r0.x = log2(r0.x);
          r0.x = 0.25 * r0.x;
          r0.x = exp2(r0.x);
          r0.x = 0.405360073 * r0.x;
          r0.x = r3.w * -0.765285552 + r0.x;
          r0.x = 0.399999976 + r0.x;
          r1.zw = r1.zw * r0.xx;
          r7.z = 1 + -r7.y;
          r1.zw = r1.zw * float2(200,200) + r7.xz;
          r6.xy = r1.zw * r0.zw;
          r0.x = t1.SampleLevel(s1_s, r6.xy, 0).x;
          r1.z = r1.z * 2 + -1;
          r1.w = 1 + -r1.w;
          r1.w = r1.w * 2 + -1;
          r6.xyz = cb0[7].xyw * r1.www;
          r6.xyz = r1.zzz * cb0[6].xyw + r6.xyz;
          r6.xyz = r0.xxx * cb0[8].xyw + r6.xyz;
          r6.xyz = cb0[9].xyw + r6.xyz;
          r1.zw = r6.xy / r6.zz;
          r1.zw = float2(0.00100000005,0.00100000005) * r1.zw;
          r5.xyz = t10.SampleLevel(s0_s, r1.zw, 0).xyz;
        } else {
          r6.xyz = cb0[3].xyw * r3.yyy;
          r6.xyz = r3.xxx * cb0[2].xyw + r6.xyz;
          r6.xyz = r3.zzz * cb0[4].xyw + r6.xyz;
          r6.xyz = cb0[5].xyw + r6.xyz;
          r1.zw = r6.xy / r6.zz;
          r6.xy = r1.zw * float2(0.5,0.5) + float2(0.5,0.5);
          r6.z = 1 + -r6.y;
          r1.zw = r6.xz * r0.zw;
          r6.xyz = t0.SampleLevel(s1_s, r1.zw, 0).xyz;
          r0.y = saturate(r0.y);
          r0.x = r0.y * r0.y;
          r0.x = r0.x * r0.x;
          r5.xyz = r0.xxx * -r6.xyz + r6.xyz;
        }
      } else {
        r0.xy = -cb0[16].xy + r3.xy;
        r1.zw = cb0[16].zw + -cb0[16].xy;
        r6.xy = float2(9.99999975e-06,9.99999975e-06) + r1.zw;
        r0.xy = r0.xy / r6.xy;
        r6.xyz = t8.SampleLevel(s0_s, r0.xy, 0).xyz;
        r0.x = cb0[18].x + -r6.x;
        r1.zw = r1.zw / cb0[17].xy;
        r1.zw = r6.yz / r1.zw;
        r6.xyz = -cb0[19].xyz + r3.xyz;
        r0.y = dot(r6.xyz, r6.xyz);
        r0.y = sqrt(r0.y);
        r0.y = -300 + r0.y;
        r3.w = max(0, cb0[18].z);
        r3.w = r3.w * r3.w;
        r0.y = -r3.w * 1000 + r0.y;
        r0.y = -r0.y * 0.000500000024 + 1;
        r3.w = dot(r1.zw, r1.zw);
        r3.w = sqrt(r3.w);
        r3.w = 9.99999975e-05 + r3.w;
        r0.x = r0.x / r3.w;
        r0.x = r0.x * 0.0142857144 + 1;
        r0.y = -r0.y * 50 + 50;
        r0.x = max(r0.x, r0.y);
        r0.y = 1 / r3.w;
        r0.y = 0.0142857144 * r0.y;
        r6.xy = r1.zw * r0.yy;
        r6.z = 0;
        r7.xyz = float3(9.99999975e-06,9.99999975e-06,9.99999975e-06) + r6.xyz;
        r0.y = dot(r7.xyz, r7.xyz);
        r0.y = sqrt(r0.y);
        r6.xyz = -r6.xyz / r0.yyy;
        r0.x = saturate(0.100000001 * r0.x);
        r0.y = r0.x * r0.x;
        r0.y = r0.y * r0.y;
        r0.y = r0.x * r0.y;
        r1.z = 100 * r0.y;
        r1.w = 150 * r0.x;
        r7.xyz = floor(r3.xyz);
        r7.xyz = float3(0.103100002,0.103,0.0973000005) * r7.xyz;
        r7.xyz = frac(r7.xyz);
        r8.xyz = float3(19.1900005,19.1900005,19.1900005) + r7.yxz;
        r3.w = dot(r7.xyz, r8.xyz);
        r7.xyz = r7.xyz + r3.www;
        r3.w = r7.x + r7.y;
        r3.w = r3.w * r7.z;
        r3.w = frac(r3.w);
        r3.w = cb0[14].x + r3.w;
        r3.w = frac(r3.w);
        r7.xyz = float3(0,0,0);
        r4.w = 0;
        r5.w = 0;
        while (true) {
          r6.w = cmp((int)r5.w >= 30);
          if (r6.w != 0) break;
          r6.w = (int)r5.w;
          r6.w = r6.w + r3.w;
          r8.xy = float2(0.0333333351,0.333333343) * r6.ww;
          r9.xyz = r8.xxx * r6.xyz;
          r9.xyz = r9.xyz * r1.zzz + r3.xyz;
          r8.zw = float2(0.00499999989,0.00499999989) * r9.xy;
          r10.xyz = t2.SampleLevel(s0_s, r8.zw, 6).xyz;
          r10.xyz = float3(-0.5,-0.5,-0.5) + r10.xyz;
          r10.xyz = r10.xyz * r1.www;
          r8.xzw = r10.xyz * r8.xxx + r9.xyz;
          r9.xyz = cb0[3].xyw * r8.zzz;
          r9.xyz = r8.xxx * cb0[2].xyw + r9.xyz;
          r9.xyz = r8.www * cb0[4].xyw + r9.xyz;
          r9.xyz = cb0[5].xyw + r9.xyz;
          r9.xy = r9.xy / r9.zz;
          r9.xy = r9.xy * float2(0.5,0.5) + float2(0.5,0.5);
          r8.xz = float2(0.00100000005,0.00100000005) * r8.xz;
          r8.xzw = t11.SampleLevel(s0_s, r8.xz, 0).xyz;
          r9.z = 1 + -r9.y;
          r9.xy = r9.xz * r0.zw;
          r9.xyz = t0.SampleLevel(s0_s, r9.xy, 0).xyz;
          r6.w = -r6.w * 0.0333333351 + 1;
          r6.w = max(0, r6.w);
          r7.w = -cb0[14].x * 4 + r8.y;
          r7.w = sin(r7.w);
          r7.w = r7.w * 0.5 + 0.50999999;
          r8.y = r7.w * r6.w;
          r8.xzw = r9.xyz * float3(0.100000001,0.100000001,0.100000001) + r8.xzw;
          r8.xzw = r8.xzw + -r9.xyz;
          r8.xzw = r0.yyy * r8.xzw + r9.xyz;
          r7.xyz = r8.xzw * r8.yyy + r7.xyz;
          r4.w = r6.w * r7.w + r4.w;
          r5.w = (int)r5.w + 1;
        }
        r0.yzw = r7.xyz / r4.www;
        r0.yzw = r0.yzw + -r2.xyz;
        r5.xyz = r0.xxx * r0.yzw + r2.xyz;
      }
    }
  } else {
    r5.xyz = r4.xyz * float3(9.99999975e-06,9.99999975e-06,9.99999975e-06) + r2.xyz;
  }
  r0.x = cmp(0.00100000005 < cb0[14].z);
  if (r0.x != 0) {
    r1.xyzw = t4.Sample(s1_s, r1.xy).xyzw;
    r0.y = cb0[14].z * r1.w;
    r1.xyz = r1.xyz + -r5.xyz;
    r0.yzw = r0.yyy * r1.xyz + r5.xyz;
  }
  // Fix: Explicit scalar check for ternary
  r2.xyz = (r0.x != 0) ? r0.yzw : r5.xyz;
  r0.x = cmp(cb0[21].x != 0.000000);
  if (r0.x != 0) {
    r0.xyz = -cb0[20].xyz + r3.xyz;
    r0.z = dot(r0.xyz, r0.xyz);
    r0.w = sqrt(r0.z);
    r1.x = -250 + cb0[20].w;
    r1.y = cmp(r0.w >= r1.x);
    r1.z = cmp(0 < cb0[21].x);
    r1.y = (r1.z != 0) ? r1.y : 0;
    if (r1.y != 0) {
      r0.z = rsqrt(r0.z);
      r4.xyzw = r0.xyxy * r0.zzzz;
      r4.xyzw = float4(0.25,0.25,0.25,0.25) * r4.xyzw;
      r0.xy = cb0[14].xx * float2(0.5,0.5) + float2(0.5,0);
      r5.xyzw = frac(r0.xxyy);
      r0.xy = floor(r0.xy);
      r0.xy = r0.xy * float2(2,2) + float2(0,1);
      r1.yz = float2(1,1) + -r5.yw;
      r1.yz = min(r5.yw, r1.yz);
      r1.yz = r1.yz + r1.yz;
      r6.y = 0.103100002 * r0.x;
      r6.xzw = float3(0,0,0);
      r6.xyzw = frac(r6.xyzw);
      r6.xyzw = r6.yyyy * float4(19.1900005,19.1900005,19.1900005,19.1900005) + r6.xyzw;
      r7.xyzw = r6.yyyy + r6.ywwy;
      r6.xyzw = r7.xyzw * r6.xyzw;
      r6.xyzw = frac(r6.xyzw);
      r6.xyzw = r3.xyxy * float4(0.00249999994,0.00249999994,0.00499999989,0.00499999989) + r6.xyzw;
      r0.xz = t2.Sample(s0_s, r6.xy).xy;
      r0.xz = float2(-0.5,-0.5) + r0.xz;
      r3.zw = r5.yw * float2(0.300000012,0.300000012) + float2(0.5,0.5);
      r0.xz = r0.xz * r3.zz + r6.zw;
      r0.xz = r4.xy * r5.xy + r0.xz;
      r0.x = t2.Sample(s0_s, r0.xz).x;
      r6.y = 0.103100002 * r0.y;
      r6.xzw = float3(0,0,0);
      r6.xyzw = frac(r6.xyzw);
      r6.xyzw = r6.yyyy * float4(19.1900005,19.1900005,19.1900005,19.1900005) + r6.xyzw;
      r7.xyzw = r6.yyyy + r6.ywwy;
      r6.xyzw = r7.xyzw * r6.xyzw;
      r6.xyzw = frac(r6.xyzw);
      r6.xyzw = r3.xyxy * float4(0.00249999994,0.00249999994,0.00499999989,0.00499999989) + r6.xyzw;
      r0.yz = t2.Sample(s0_s, r6.xy).xy;
      r0.yz = float2(-0.5,-0.5) + r0.yz;
      r0.yz = r0.yz * r3.ww + r6.zw;
      r0.yz = r4.zw * r5.zw + r0.yz;
      r0.y = t2.Sample(s0_s, r0.yz).x;
      r0.y = r0.y * r1.z;
      r0.x = r0.x * r1.y + r0.y;
      r0.y = max(0.00100000005, cb0[21].x);
      r0.y = r1.x / r0.y;
      r0.y = r0.w + -r0.y;
      r0.y = saturate(0.00200000009 * r0.y);
      r0.x = r0.y * 2 + -r0.x;
      r0.x = saturate(1 + -r0.x);
      r2.xyz = r2.xyz * r0.xxx;
    } else {
      r0.x = 800 + cb0[20].w;
      r0.y = cmp(r0.w < r0.x);
      r0.z = cmp(cb0[21].x < 0);
      r0.y = (r0.z != 0) ? r0.y : 0;
      r0.x = r0.w / r0.x;
      r0.x = log2(r0.x);
      r0.x = 10 * r0.x;
      r0.x = exp2(r0.x);
      r0.x = min(1, r0.x);
      r0.xzw = r0.xxx * r2.xyz;
      if (r0.y != 0) r2.xyz = r0.xzw;
    }
  }
  if (cb0[26].x != 0) {
    // Final Pass: Vignette / Overlay
    r0.xy = -cb0[25].xy + r3.xy;
    r0.zw = cb0[25].zw + -cb0[25].xy;
    r0.xy = r0.xy / r0.zw;
    r0.xy = t5.Sample(s1_s, r0.xy).yz;
    r0.zw = float2(0.00200000009,0.00200000009) * r3.xy;
    r0.z = t6.Sample(s0_s, r0.zw).x;
    r0.z = r0.z * -0.899999976 + 0.899999976;
    r0.x = r0.x * 0.699999988 + 0.100000001;
    r0.xy = float2(1,1) + -r0.xy;
    r0.y = min(0.999999881, r0.y);
    r0.y = max(1.00000001e-07, r0.y);
    r0.xw = max(float2(0.00100000005,0.389999986), r0.xy);
    r0.w = 1 + -r0.w;
    r0.w = log2(r0.w);
    r0.w = 2.63636351 * r0.w;
    r0.w = exp2(r0.w);
    r0.y = min(0.389999986, r0.y);
    r0.y = log2(r0.y);
    r0.y = 2.63636351 * r0.y;
    r0.y = exp2(r0.y);
    r0.y = 4.66838789 * r0.y;
    r0.y = r0.w * -2.2453208 + r0.y;
    r0.y = 0.610000014 + r0.y;
    r0.y = min(0.999999881, r0.y);
    r0.y = max(1.00000001e-07, r0.y);
    r0.x = 2 / r0.x;
    r0.xw = float2(-1,-2) + r0.xx;
    r1.x = 1 + -r0.z;
    r1.y = max(r0.z, r0.y);
    r1.y = 1 + -r1.y;
    r1.y = max(0, r1.y);
    r1.y = log2(r1.y);
    r1.y = r1.y * r0.x;
    r1.y = exp2(r1.y);
    r1.z = saturate(r1.x);
    r1.z = log2(r1.z);
    r1.z = r1.z * -r0.w;
    r1.z = exp2(r1.z);
    r0.y = min(r0.z, r0.y);
    r0.y = max(0, r0.y);
    r0.y = log2(r0.y);
    r0.x = r0.x * r0.y;
    r0.x = exp2(r0.x);
    r0.y = saturate(r0.z);
    r0.y = log2(r0.y);
    r0.y = -r0.w * r0.y;
    r0.y = exp2(r0.y);
    r0.x = r0.x * r0.y;
    r0.x = -r1.y * r1.z + r0.x;
    r0.x = r1.x + r0.x;
    r0.y = cmp(r0.x != r0.x);
    r0.x = (r0.y != 0) ? r0.z : r0.x;
    r0.x = 1 + -r0.x;
    float vignette_strength = saturate(CUSTOM_VIGNETTE_STRENGTH);
    float vignette_factor = lerp(1.0f, r0.x, vignette_strength);
    r2.xyz = r2.xyz * vignette_factor;
  }
  o0.xyzw = r2.xyzw;
  return;
}