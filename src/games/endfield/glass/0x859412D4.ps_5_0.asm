//
// Generated by Microsoft (R) D3D Shader Disassembler
//
//   using 3Dmigoto v1.4.1 on Fri Feb  6 19:58:05 2026
//
//
// Input signature:
//
// Name                 Index   Mask Register SysValue  Format   Used
// -------------------- ----- ------ -------- -------- ------- ------
// SV_Position              0   xyzw        0      POS   float   xyz
// TEXCOORD                 0   xyzw        1     NONE   float   xyzw
// TEXCOORD                 1   xyzw        2     NONE   float   xyz
// TEXCOORD                 2   xyz         3     NONE   float   xyz
// TEXCOORD                 3   xyzw        4     NONE   float   xyzw
// TEXCOORD                 4   xyzw        5     NONE   float   xyzw
// TEXCOORD                 5   xyz         6     NONE   float   xyz
// TEXCOORD                 6   xyz         7     NONE   float   xyz
// TEXCOORD                 7   x           8     NONE    uint   x
// SV_IsFrontFace           0   x           9    FFACE    uint   x
//
//
// Output signature:
//
// Name                 Index   Mask Register SysValue  Format   Used
// -------------------- ----- ------ -------- -------- ------- ------
// SV_Target                0   xyzw        0   TARGET   float   xyzw
// SV_Target                1   xyzw        1   TARGET   float   xyzw
//
ps_5_0
dcl_globalFlags refactoringAllowed
dcl_immediateConstantBuffer { { 1.000000, 0, 0, 0},
                              { 0, 1.000000, 0, 0},
                              { 0, 0, 1.000000, 0},
                              { 0, 0, 0, 1.000000},
                              { 2, 1, -1.000000, 1.000000},
                              { 2, 1, 1.000000, 1.000000},
                              { 0, 2, 1.000000, -1.000000},
                              { 0, 2, 1.000000, 1.000000},
                              { 0, 1, 1.000000, 1.000000},
                              { 0, 1, -1.000000, 1.000000} }
dcl_constantbuffer CB0[244], immediateIndexed
dcl_constantbuffer CB1[4085], dynamicIndexed
dcl_constantbuffer CB2[28], immediateIndexed
dcl_constantbuffer CB3[259], dynamicIndexed
dcl_constantbuffer CB4[3], immediateIndexed
dcl_constantbuffer CB5[2054], dynamicIndexed
dcl_constantbuffer CB6[715], dynamicIndexed
dcl_constantbuffer CB7[160], dynamicIndexed
dcl_constantbuffer CB13[15], immediateIndexed
dcl_sampler s0, mode_default
dcl_sampler s1, mode_default
dcl_sampler s2, mode_default
dcl_sampler s3, mode_comparison
dcl_sampler s4, mode_default
dcl_sampler s5, mode_default
dcl_sampler s6, mode_default
dcl_resource_structured t0, 4
dcl_resource_texture2darray (float,float,float,float) t1
dcl_resource_texture2d (float,float,float,float) t2
dcl_resource_texture2d (float,float,float,float) t3
dcl_resource_texture2d (float,float,float,float) t4
dcl_resource_texture3d (float,float,float,float) t5
dcl_resource_texture3d (float,float,float,float) t6
dcl_resource_texture3d (float,float,float,float) t7
dcl_resource_texture3d (float,float,float,float) t8
dcl_resource_texture3d (float,float,float,float) t9
dcl_resource_texture3d (float,float,float,float) t10
dcl_resource_texture3d (float,float,float,float) t11
dcl_resource_texture2d (float,float,float,float) t12
dcl_resource_texture2d (float,float,float,float) t13
dcl_resource_texture2d (float,float,float,float) t14
dcl_resource_texture2d (float,float,float,float) t15
dcl_resource_texture2d (float,float,float,float) t16
dcl_resource_texture2d (float,float,float,float) t17
dcl_resource_texture2d (float,float,float,float) t18
dcl_input_ps_siv linear noperspective v0.xyz, position
dcl_input_ps linear v1.xyzw
dcl_input_ps linear v2.xyz
dcl_input_ps linear v3.xyz
dcl_input_ps linear v4.xyzw
dcl_input_ps linear v5.xyzw
dcl_input_ps linear v6.xyz
dcl_input_ps linear v7.xyz
dcl_input_ps constant v8.x
dcl_input_ps_sgv constant v9.x, is_front_face
dcl_output o0.xyzw
dcl_output o1.xyzw
dcl_temps 37
mul r0.xy, v0.xyxx, cb0[82].zwzz
mad r0.xy, r0.xyxx, l(2.000000, 2.000000, 0.000000, 0.000000), l(-1.000000, -1.000000, 0.000000, 0.000000)
mul r1.xyzw, -r0.yyyy, cb0[25].xyzw
mad r0.xyzw, cb0[24].xyzw, r0.xxxx, r1.xyzw
mad r0.xyzw, cb0[26].xyzw, v0.zzzz, r0.xyzw
add r0.xyzw, r0.xyzw, cb0[27].xyzw
div r0.xyz, r0.xyzx, r0.wwww
mul r1.x, r0.y, cb0[1].z
mad r1.x, cb0[0].z, r0.x, r1.x
mad r1.x, cb0[2].z, r0.z, r1.x
add r1.x, r1.x, cb0[3].z
mov r1.z, |r1.x|
lt r1.w, l(0.000000), v4.w
movc r1.w, r1.w, l(1.000000), l(-1.000000)
eq r2.x, l(0.000000), cb0[86].w
add r2.yzw, -r0.xxyz, cb0[44].xxyz
mov r3.x, cb0[0].z
mov r3.y, cb0[1].z
mov r3.z, cb0[2].z
movc r2.xyz, r2.xxxx, r2.yzwy, r3.xyzx
dp3 r2.w, r2.xyzx, r2.xyzx
max r3.w, r2.w, l(9.999999939E-09)
rsq r3.w, r3.w
mul r4.xyz, r2.xyzx, r3.wwww
mul r2.w, r2.w, r3.w
add r5.xyzw, -v5.xyzw, l(1.000000, 1.000000, 1.000000, 1.000000)
mad r5.xyzw, cb2[1].yyyy, r5.xyzw, v5.xyzw
mul r5.xyzw, r5.xyzw, cb2[4].xyzw
mul r5.xyzw, r5.xyzw, cb2[1].zzzw
add r4.w, l(1.000000), -cb2[3].x
mad r4.w, cb0[109].x, cb2[3].x, r4.w
div r5.xyz, r5.xyzx, r4.wwww
mul r6.xy, v2.xyxx, cb2[1].xxxx
mad r7.xyzw, v1.zzww, cb2[1].xxxx, -r6.xxyy
add r7.xyzw, r7.xyzw, v2.xxyy
mul r8.xyzw, r7.yyww, cb2[8].yyyy
mad r8.xyzw, v1.xxyy, cb2[8].xxxx, r8.xyzw
mad r8.xyzw, cb2[6].xxyy, cb0[183].wwww, r8.xyzw
mad r8.xyzw, cb2[6].zzww, r6.xxxx, r8.xyzw
add r8.xyzw, r8.xyzw, l(-0.500000, -0.500000, -0.500000, -0.500000)
mul r8.xyzw, r8.xyzw, cb2[7].xyzw
add r6.xz, r8.zzwz, r8.xxyx
add r6.xz, r6.xxzx, l(0.500000, 0.000000, 0.500000, 0.000000)
mad r8.xy, r6.xzxx, cb2[9].xyxx, cb2[9].zwzz
ishl r4.w, v8.x, l(4)
add r6.x, cb1[r4.w + 3].y, cb1[r4.w + 3].x
add r6.x, r6.x, cb1[r4.w + 3].z
frc r6.x, r6.x
mul r6.z, r6.x, cb2[26].z
min r6.z, r6.z, l(0.500000)
add r6.z, r6.z, l(1.000000)
mul r8.z, r6.z, r8.y
mad r6.xz, cb2[26].zzzz, r6.xxxx, r8.xxzx
add r6.w, l(1.000000), cb0[108].x
sample_b_indexable(texture2d)(float,float,float,float) r8.xyzw, r6.xzxx, t2.xyzw, s4, r6.w
mov r6.x, l(1.000000)
mov r6.w, r8.x
add r9.xyzw, -r8.xyzw, r6.xxxw
mad r8.xyzw, cb2[5].yyyy, r9.xyzw, r8.xyzw
mul r5.xyzw, r5.xyzw, r8.xyzw
mul r8.xyzw, r7.yyww, cb2[23].yyyy
mad r8.xyzw, v1.xxyy, cb2[23].xxxx, r8.xyzw
mad r8.xyzw, cb2[21].xxyy, cb0[183].wwww, r8.xyzw
mad r8.xyzw, cb2[21].zzww, r6.yyyy, r8.xyzw
add r8.xyzw, r8.xyzw, l(-0.500000, -0.500000, -0.500000, -0.500000)
mul r8.xyzw, r8.xyzw, cb2[22].xyzw
add r6.xz, r8.zzwz, r8.xxyx
add r6.xz, r6.xxzx, l(0.500000, 0.000000, 0.500000, 0.000000)
mad r6.xz, r6.xxzx, cb2[20].xxyx, cb2[20].zzwz
sample_b_indexable(texture2d)(float,float,float,float) r6.xzw, r6.xzxx, t3.xzyw, s5, cb0[108].x
mul r6.x, r6.x, r6.w
mad r6.xz, r6.xxzx, l(2.000000, 0.000000, 2.000000, 0.000000), l(-1.000000, 0.000000, -1.000000, 0.000000)
dp2 r6.w, r6.xzxx, r6.xzxx
min r6.w, r6.w, l(1.000000)
add r6.w, -r6.w, l(1.000000)
sqrt r6.w, r6.w
max r8.z, r6.w, l(1.000000017E-16)
mul r8.xy, r6.xzxx, cb2[19].xxxx
dp3 r6.x, r8.xyzx, r8.xyzx
rsq r6.x, r6.x
mul r6.xzw, r6.xxxx, r8.xxyz
mul r8.xyz, v3.zxyz, v4.yzxy
mad r8.xyz, v3.yzxy, v4.zxyz, -r8.xyzx
mul r8.xyz, r1.wwww, r8.xyzx
mul r8.xyz, r6.zzzz, r8.xyzx
mad r8.xyz, r6.xxxx, v4.xyzx, r8.xyzx
mad r6.xzw, r6.wwww, v3.xxyz, r8.xxyz
mul r7.xyzw, r7.xyzw, cb2[15].yyyy
mad r7.xyzw, v1.xxyy, cb2[15].xxxx, r7.xyzw
mad r7.xyzw, cb2[13].xxyy, cb0[183].wwww, r7.xyzw
mad r7.xyzw, cb2[13].zzww, r6.yyyy, r7.xyzw
add r7.xyzw, r7.xyzw, l(-0.500000, -0.500000, -0.500000, -0.500000)
mul r7.xyzw, r7.xyzw, cb2[14].xyzw
add r7.xy, r7.zwzz, r7.xyxx
add r7.xy, r7.xyxx, l(0.500000, 0.500000, 0.000000, 0.000000)
mad r7.xy, r7.xyxx, cb2[12].xyxx, cb2[12].zwzz
sample_b_indexable(texture2d)(float,float,float,float) r1.w, r7.xyxx, t4.yzwx, s6, cb0[108].x
mad r6.y, v2.z, cb2[1].x, cb2[11].y
add r7.x, -v5.x, v5.w
mad r7.x, cb2[26].w, r7.x, v5.x
add r7.x, r7.x, l(-1.000000)
mad r7.x, cb2[27].x, r7.x, l(1.000000)
add_sat r7.x, r7.x, -cb2[27].y
mad r6.y, r6.y, l(2.020000), l(-0.00999999046)
mad r6.y, r7.x, r6.y, l(-1.000000)
add r1.w, r1.w, -r6.y
mul_sat r6.y, r1.w, cb2[11].z
add r1.w, -r1.w, cb2[11].w
mul_sat r1.w, r1.w, cb2[11].z
movc r7.xyz, v9.xxxx, r6.xzwx, -r6.xzwx
mul r5.w, r5.w, r6.y
ne r6.x, l(0.000000), cb2[17].x
add r6.yz, r1.zzzz, -cb2[17].yywy
add r6.w, -cb2[17].y, cb2[17].z
div_sat r6.y, r6.y, r6.w
add r6.w, -cb2[17].w, cb2[18].x
div_sat r6.z, r6.z, r6.w
mul r6.y, r6.z, r6.y
movc r6.x, r6.x, r6.y, l(1.000000)
mul r5.w, r5.w, r6.x
add r6.x, v5.w, l(-1.000000)
mad r6.x, cb2[26].x, r6.x, l(1.000000)
mul r5.w, r5.w, r6.x
dp3 r6.x, v3.xyzx, r4.xyzx
log r6.x, |r6.x|
mul r6.x, r6.x, cb2[24].y
exp r6.x, r6.x
add r6.x, r6.x, l(-1.000000)
mad r6.x, cb2[24].w, r6.x, l(1.000000)
mul r5.w, r5.w, r6.x
add r4.w, l(1.000000), -cb1[r4.w + 4].y
mul_sat r4.w, r4.w, r5.w
mul r6.xyz, r1.wwww, cb2[16].xyzx
mad r6.xyz, r6.xyzx, cb2[1].zzzz, -r5.xyzx
mad r5.xyz, r1.wwww, r6.xyzx, r5.xyzx
max r5.xyz, r5.xyzx, l(0.000000, 0.000000, 0.000000, 0.000000)
min r5.xyz, r5.xyzx, l(1000.000000, 1000.000000, 1000.000000, 0.000000)
mul r6.xyz, r5.xyzx, cb2[25].xxxx
add r1.w, l(1.000000), cb2[0].w
add_sat r1.w, r1.w, -cb2[0].x
lt r1.w, l(0.500000), r1.w
max r5.w, v6.z, l(9.999999939E-09)
div r8.xy, v6.xyxx, r5.wwww
max r5.w, v7.z, l(9.999999939E-09)
div r8.zw, v7.xxxy, r5.wwww
add r8.xy, -r8.zwzz, r8.xyxx
mul r9.xy, r8.xyxx, l(0.500000, -0.500000, 0.000000, 0.000000)
sqrt r9.xy, |r9.xyxx|
sqrt r9.xy, r9.xyxx
mov r8.z, -r8.y
lt r8.yw, l(0.000000, 0.000000, 0.000000, 0.000000), r8.xxxz
lt r8.xz, r8.xxzx, l(0.000000, 0.000000, 0.000000, 0.000000)
iadd r8.xy, -r8.ywyy, r8.xzxx
itof r8.xy, r8.xyxx
mul r8.xy, r8.xyxx, r9.xyxx
mad r8.xy, r8.xyxx, l(0.500000, 0.500000, 0.000000, 0.000000), l(0.500000, 0.500000, 0.000000, 0.000000)
and r8.xy, r1.wwww, r8.xyxx
mul r1.w, l(0.080000), cb2[25].w
mul r9.xyz, r6.xyzx, cb2[25].yyyy
mad r9.xyz, r5.xyzx, cb2[25].xxxx, -r9.xyzx
mad r1.w, -r1.w, cb2[25].y, r1.w
mad r6.xyz, r6.xyzx, cb2[25].yyyy, r1.wwww
dp3 r1.w, r7.xyzx, r4.xyzx
mad r10.xyzw, cb2[25].zzzz, l(-1.000000, -0.027500, -0.572000, 0.022000), l(1.000000, 0.042500, 1.040000, -0.040000)
mul r5.w, r10.x, r10.x
max r1.w, r1.w, l(0.000000)
mul r6.w, r1.w, l(-9.280000)
exp r6.w, r6.w
min r5.w, r5.w, r6.w
mad r5.w, r5.w, r10.x, r10.y
mad r8.zw, r5.wwww, l(0.000000, 0.000000, -1.040000, 1.040000), r10.zzzw
eq r5.w, l(1.000000), cb0[113].y
mul r10.xyzw, r0.yyyy, cb0[241].xyzw
mad r10.xyzw, cb0[240].xyzw, r0.xxxx, r10.xyzw
mad r10.xyzw, cb0[242].xyzw, r0.zzzz, r10.xyzw
add r10.xyzw, r10.xyzw, cb0[243].xyzw
div r6.w, l(1.000000, 1.000000, 1.000000, 1.000000), r10.w
mul r10.xyz, r10.xyzx, l(1.000000, -1.000000, 1.000000, 0.000000)
mul r10.xyz, r6.wwww, r10.xyzx
mad_sat r10.xy, r10.xyxx, l(0.500000, 0.500000, 0.000000, 0.000000), l(0.500000, 0.500000, 0.000000, 0.000000)
mul r10.xy, r10.xyxx, cb0[82].xyxx
ftou r11.xy, r10.xyxx
mad r6.w, cb0[84].z, r10.z, cb0[84].w
div r11.z, l(1.000000, 1.000000, 1.000000, 1.000000), r6.w
ftou r1.xy, v0.xyxx
movc r10.xyz, r5.wwww, r11.xyzx, r1.xyzx
mad r1.xyz, r7.xyzx, l(0.250000, 0.250000, 0.250000, 0.000000), r0.xyzx
mad r11.xyz, cb0[6].xzyx, -cb0[212].wwww, cb0[210].xzyx
add r11.xyz, r1.xzyx, -r11.xyzx
max r5.w, |r11.y|, |r11.x|
add r5.w, r5.w, l(-464.000000)
mul_sat r5.w, r5.w, l(0.031250)
add r6.w, |r11.z|, l(-208.000000)
mul_sat r6.w, r6.w, l(0.031250)
max r5.w, r5.w, r6.w
ne r6.w, l(0.000000), cb0[210].w
lt r9.w, r5.w, l(1.000000)
and r6.w, r6.w, r9.w
if_nz r6.w
  mad r11.xyz, cb0[6].xzyx, -cb0[212].yyyy, cb0[210].xzyx
  add r11.xyz, r1.xzyx, -r11.xyzx
  max r6.w, |r11.y|, |r11.x|
  add r6.w, r6.w, l(-29.000000)
  mul_sat r6.w, r6.w, l(0.500000)
  add r9.w, |r11.z|, l(-13.000000)
  mul_sat r9.w, r9.w, l(0.500000)
  max r6.w, r6.w, r9.w
  lt r9.w, r6.w, l(1.000000)
  if_nz r9.w
    mad r11.xyz, r1.xyzx, l(2.000000, 2.000000, 2.000000, 0.000000), l(0.500000, 0.500000, 0.500000, 0.000000)
    mul r12.xyz, r11.xyzx, cb0[211].xyzx
    round_ni r12.xyz, r12.xyzx
    mad r11.xyz, r11.xyzx, cb0[211].xyzx, -r12.xyzx
    sample_l_indexable(texture3d)(float,float,float,float) r12.xyz, r11.xyzx, t6.xyzw, s1, l(0.000000)
    add r9.w, -r6.w, l(1.000000)
    mul r12.w, l(0.500000), cb0[211].y
    mad r13.x, -cb0[211].y, l(0.500000), l(1.000000)
    max r11.y, r11.y, r12.w
    min r11.y, r13.x, r11.y
    mul r11.w, r11.y, l(0.333333343)
    sample_l_indexable(texture3d)(float,float,float,float) r13.xyzw, r11.xwzx, t7.xyzw, s0, l(0.000000)
    mad r13.xyz, r13.xyzx, l(4.000000, 4.000000, 4.000000, 0.000000), l(-2.000000, -2.000000, -2.000000, 0.000000)
    mul r14.xyz, r12.xxxx, r13.xyzx
    add r13.xyz, r11.xwzx, l(0.000000, 0.333333343, 0.000000, 0.000000)
    sample_l_indexable(texture3d)(float,float,float,float) r13.xyz, r13.xyzx, t7.xyzw, s0, l(0.000000)
    mad r13.xyz, r13.xyzx, l(4.000000, 4.000000, 4.000000, 0.000000), l(-2.000000, -2.000000, -2.000000, 0.000000)
    mul r15.xyz, r12.yyyy, r13.xyzx
    add r11.xyz, r11.xwzx, l(0.000000, 0.666666687, 0.000000, 0.000000)
    sample_l_indexable(texture3d)(float,float,float,float) r11.xyz, r11.xyzx, t7.xyzw, s0, l(0.000000)
    mad r11.xyz, r11.xyzx, l(4.000000, 4.000000, 4.000000, 0.000000), l(-2.000000, -2.000000, -2.000000, 0.000000)
    mul r11.xyz, r12.zzzz, r11.xyzx
    mad r12.w, r13.w, r9.w, r5.w
    mov r11.w, r12.z
    mul r11.xyzw, r9.wwww, r11.xyzw
    mov r15.w, r12.y
    mul r13.xyzw, r9.wwww, r15.xyzw
    mov r14.w, r12.x
    mul r14.xyzw, r9.wwww, r14.xyzw
  else
    mov r11.xyzw, l(0,0,0,0)
    mov r13.xyzw, l(0,0,0,0)
    mov r14.xyzw, l(0,0,0,0)
    mov r12.w, r5.w
  endif
  mad r12.xyz, cb0[6].xzyx, -cb0[212].zzzz, cb0[210].xzyx
  add r12.xyz, r1.xzyx, -r12.xyzx
  max r9.w, |r12.y|, |r12.x|
  add r9.w, r9.w, l(-116.000000)
  mul_sat r9.w, r9.w, l(0.125000)
  add r12.x, |r12.z|, l(-52.000000)
  mul_sat r12.x, r12.x, l(0.125000)
  max r9.w, r9.w, r12.x
  lt r12.x, r9.w, l(1.000000)
  if_nz r12.x
    mad r12.xyz, r1.xyzx, l(0.500000, 0.500000, 0.500000, 0.000000), l(0.500000, 0.500000, 0.500000, 0.000000)
    mul r15.xyz, r12.xyzx, cb0[211].xyzx
    round_ni r15.xyz, r15.xyzx
    mad r15.xyz, r12.xyzx, cb0[211].xyzx, -r15.xyzx
    sample_l_indexable(texture3d)(float,float,float,float) r12.xyz, r15.xyzx, t8.xyzw, s1, l(0.000000)
    add r16.x, -r9.w, l(1.000000)
    mul r6.w, r6.w, r16.x
    mul r16.x, l(0.500000), cb0[211].y
    mad r16.y, -cb0[211].y, l(0.500000), l(1.000000)
    max r15.y, r15.y, r16.x
    min r15.y, r16.y, r15.y
    mul r15.w, r15.y, l(0.333333343)
    sample_l_indexable(texture3d)(float,float,float,float) r16.xyzw, r15.xwzx, t9.xyzw, s0, l(0.000000)
    mad r16.xyz, r16.xyzx, l(4.000000, 4.000000, 4.000000, 0.000000), l(-2.000000, -2.000000, -2.000000, 0.000000)
    mul r17.xyz, r12.xxxx, r16.xyzx
    add r16.xyz, r15.xwzx, l(0.000000, 0.333333343, 0.000000, 0.000000)
    sample_l_indexable(texture3d)(float,float,float,float) r16.xyz, r16.xyzx, t9.xyzw, s0, l(0.000000)
    mad r16.xyz, r16.xyzx, l(4.000000, 4.000000, 4.000000, 0.000000), l(-2.000000, -2.000000, -2.000000, 0.000000)
    mul r18.xyz, r12.yyyy, r16.xyzx
    add r15.xyz, r15.xwzx, l(0.000000, 0.666666687, 0.000000, 0.000000)
    sample_l_indexable(texture3d)(float,float,float,float) r15.xyz, r15.xyzx, t9.xyzw, s0, l(0.000000)
    mad r15.xyz, r15.xyzx, l(4.000000, 4.000000, 4.000000, 0.000000), l(-2.000000, -2.000000, -2.000000, 0.000000)
    mul r15.xyz, r12.zzzz, r15.xyzx
    mad r12.w, r16.w, r6.w, r12.w
    mov r15.w, r12.z
    mad r11.xyzw, r15.xyzw, r6.wwww, r11.xyzw
    mov r18.w, r12.y
    mad r13.xyzw, r18.xyzw, r6.wwww, r13.xyzw
    mov r17.w, r12.x
    mad r14.xyzw, r17.xyzw, r6.wwww, r14.xyzw
  endif
  lt r6.w, l(0.000000), r9.w
  if_nz r6.w
    mad r1.xyz, r1.xyzx, l(0.125000, 0.125000, 0.125000, 0.000000), l(0.500000, 0.500000, 0.500000, 0.000000)
    mul r12.xyz, r1.xyzx, cb0[211].xyzx
    mul r15.xyz, l(0.500000, 0.500000, 0.500000, 0.000000), cb0[211].xyzx
    round_ni r12.xyz, r12.xyzx
    mad r1.xyz, r1.xyzx, cb0[211].xyzx, -r12.xyzx
    mad r12.xyz, -cb0[211].xyzx, l(0.500000, 0.500000, 0.500000, 0.000000), l(1.000000, 1.000000, 1.000000, 0.000000)
    max r1.xyz, r15.xyzx, r1.xyzx
    min r16.xyz, r12.xyzx, r1.xyzx
    sample_l_indexable(texture3d)(float,float,float,float) r17.xyw, r16.xyzx, t10.yzwx, s1, l(0.000000)
    add r1.x, -r5.w, l(1.000000)
    mul r1.x, r1.x, r9.w
    max r1.y, r15.y, r16.y
    min r1.y, r12.y, r1.y
    mul r16.w, r1.y, l(0.333333343)
    sample_l_indexable(texture3d)(float,float,float,float) r15.xyzw, r16.xwzx, t11.xyzw, s0, l(0.000000)
    add r12.xyz, r16.xwzx, l(0.000000, 0.666666687, 0.000000, 0.000000)
    sample_l_indexable(texture3d)(float,float,float,float) r12.xyz, r12.xyzx, t11.xyzw, s0, l(0.000000)
    mad r12.xyz, r12.xyzx, l(4.000000, 4.000000, 4.000000, 0.000000), l(-2.000000, -2.000000, -2.000000, 0.000000)
    mul r18.xyz, r17.yyyy, r12.xyzx
    mov r18.w, r17.y
    mad r11.xyzw, r18.xyzw, r1.xxxx, r11.xyzw
    add r12.xyz, r16.xwzx, l(0.000000, 0.333333343, 0.000000, 0.000000)
    sample_l_indexable(texture3d)(float,float,float,float) r12.xyz, r12.xyzx, t11.xyzw, s0, l(0.000000)
    mad r12.xyz, r12.xyzx, l(4.000000, 4.000000, 4.000000, 0.000000), l(-2.000000, -2.000000, -2.000000, 0.000000)
    mul r16.xyz, r17.xxxx, r12.xyzx
    mov r16.w, r17.x
    mad r13.xyzw, r16.xyzw, r1.xxxx, r13.xyzw
    mad r12.xyz, r15.xyzx, l(4.000000, 4.000000, 4.000000, 0.000000), l(-2.000000, -2.000000, -2.000000, 0.000000)
    mul r17.xyz, r17.wwww, r12.xyzx
    mad r14.xyzw, r17.xyzw, r1.xxxx, r14.xyzw
    mad r12.w, r15.w, r1.x, r12.w
  endif
  mad_sat r1.x, r12.w, l(2.000000), l(-1.000000)
  add r12.x, -r5.w, r1.x
  add r1.x, r5.w, r1.x
  mul r12.y, r1.x, l(0.500000)
else
  mov r11.xyzw, l(0,0,0,0)
  mov r13.xyzw, l(0,0,0,0)
  mov r14.xyzw, l(0,0,0,0)
  mov r12.xy, l(0,1.000000,0,0)
endif
mul r15.xyzw, r12.yyyx, cb0[213].xyzw
mad r15.y, r15.w, l(0.500000), r15.y
mul r1.xy, r12.yxyy, cb0[213].wyww
mad r15.w, r1.y, l(0.375000), r1.x
add r14.xyzw, r14.xyzw, r15.xyzw
mul r15.xyzw, r12.yyyx, cb0[214].xyzw
mad r15.y, r15.w, l(0.500000), r15.y
mul r1.xy, r12.yxyy, cb0[214].wyww
mad r15.w, r1.y, l(0.375000), r1.x
add r13.xyzw, r13.xyzw, r15.xyzw
mul r15.xyzw, r12.yyyx, cb0[215].xyzw
mad r15.y, r15.w, l(0.500000), r15.y
mul r1.xy, r12.yxyy, cb0[215].wyww
mad r15.w, r1.y, l(0.375000), r1.x
add r11.xyzw, r11.xyzw, r15.xyzw
dp3 r1.x, r14.xyzx, r7.xyzx
add r1.x, r14.w, r1.x
max r1.x, r1.x, l(0.000000)
dp3 r5.w, r13.xyzx, r7.xyzx
add r5.w, r13.w, r5.w
max r1.y, r5.w, l(0.000000)
dp3 r5.w, r11.xyzx, r7.xyzx
add r5.w, r11.w, r5.w
max r1.z, r5.w, l(0.000000)
mul r11.xyz, r9.xyzx, r1.xyzx
mul r12.xy, r11.xyxx, cb0[111].xxxx
dp3 r5.w, -r4.xyzx, r7.xyzx
add r5.w, r5.w, r5.w
mad r13.xyz, r7.xyzx, -r5.wwww, -r4.xyzx
add r5.w, l(-1.000000), cb0[113].x
max r6.w, l(0.001000), cb2[25].z
log r6.w, r6.w
mad r6.w, -r6.w, l(1.200000), l(1.000000)
add r5.w, r5.w, -r6.w
utof r12.zw, r10.xxxy
mul r14.xy, r12.zwzz, cb3[0].wwww
round_ni r14.xy, r14.xyxx
add r6.w, r10.z, -cb3[2].y
round_ni r6.w, r6.w
add r9.w, l(-1.000000), cb3[1].x
max r11.w, r6.w, l(0.000000)
min r9.w, r9.w, r11.w
ge r6.w, r9.w, r6.w
mad r11.w, r14.y, cb3[0].x, r14.x
ftoi r11.w, r11.w
iadd r11.w, r11.w, cb0[110].z
ld_structured_indexable(structured_buffer, stride=4)(mixed,mixed,mixed,mixed) r11.w, r11.w, l(0), t0.xxxx
ftoi r9.w, r9.w
iadd r9.w, r9.w, cb0[110].w
ld_structured_indexable(structured_buffer, stride=4)(mixed,mixed,mixed,mixed) r9.w, r9.w, l(0), t0.xxxx
and r9.w, r9.w, r11.w
and r6.w, r6.w, r9.w
mul r1.xyz, r1.xyzx, cb0[111].xxxx
dp3 r1.x, r1.xyzx, l(0.212672904, 0.715152204, 0.072175, 0.000000)
mov r0.w, l(1.000000)
mov r7.w, l(1.000000)
mov r14.xyz, l(0,0,0,0)
mov r1.y, l(1.000000)
mov r1.z, r6.w
mov r9.w, l(0)
loop
  lt r11.w, l(0.010000), r1.y
  ine r13.w, r1.z, l(0)
  and r13.w, r11.w, r13.w
  if_nz r13.w
    firstbit_lo r13.w, r1.z
    ishl r14.w, l(1), r13.w
    xor r1.z, r1.z, r14.w
    ishl r13.w, r13.w, l(3)
    dp4 r15.x, cb3[r13.w + 6].xyzw, r0.xyzw
    dp4 r15.y, cb3[r13.w + 7].xyzw, r0.xyzw
    dp4 r15.z, cb3[r13.w + 8].xyzw, r0.xyzw
    ge r16.xyz, cb3[r13.w + 5].xyzx, |r15.xyzx|
    and r14.w, r16.y, r16.x
    and r14.w, r16.z, r14.w
    if_nz r14.w
      mul r14.w, l(0.100000), cb3[r13.w + 5].x
      mul r16.xyz, |r15.xyzx|, l(0.100000, 0.100000, 0.100000, 0.000000)
      mul r16.xy, r16.xyxx, r16.xyxx
      add r17.xyz, -|r15.xyzx|, cb3[r13.w + 5].xyzx
      mul r17.xyz, r17.xyzx, cb3[r13.w + 9].xyzx
      eq r15.w, l(1.000000), cb3[r13.w + 10].x
      if_nz r15.w
        dp3 r18.x, cb3[r13.w + 6].xyzx, r13.xyzx
        dp3 r18.y, cb3[r13.w + 7].xyzx, r13.xyzx
        dp3 r18.z, cb3[r13.w + 8].xyzx, r13.xyzx
        add r19.xyz, -r15.xyzx, cb3[r13.w + 5].xyzx
        div r19.xyz, r19.xyzx, r18.xyzx
        add r20.xyz, -r15.xyzx, -cb3[r13.w + 5].xyzx
        div r20.xyz, r20.xyzx, r18.xyzx
        lt r21.xyz, l(0.000000, 0.000000, 0.000000, 0.000000), r18.xyzx
        movc r19.xyz, r21.xyzx, r19.xyzx, r20.xyzx
        min r15.w, r19.y, r19.x
        min r15.w, r19.z, r15.w
        mad r15.xyz, r18.xyzx, r15.wwww, r15.xyzx
      else
        mov r15.xyz, r13.xyzx
      endif
      dp3 r15.w, r15.xyzx, r15.xyzx
      rsq r15.w, r15.w
      mul r15.xyz, r15.wwww, r15.xyzx
      lt r18.xyz, l(0.000000, 0.000000, 0.000000, 0.000000), r15.xyzx
      lt r19.xyz, r15.xyzx, l(0.000000, 0.000000, 0.000000, 0.000000)
      iadd r18.xyz, -r18.xyzx, r19.xyzx
      itof r18.xyz, r18.xyzx
      dp3 r15.w, r15.xyzx, r18.xyzx
      div r15.xyz, r15.xyzx, r15.wwww
      lt r15.z, r15.z, l(0.000000)
      add r18.zw, -|r15.yyyx|, l(0.000000, 0.000000, 1.000000, 1.000000)
      mul r18.xy, r18.zwzz, r18.xyxx
      movc r15.xy, r15.zzzz, r18.xyxx, r15.xyxx
      dp4 r15.z, cb3[r13.w + 4].xyzw, r7.xyzw
      max r15.z, r15.z, l(0.000000)
      max r15.z, r15.z, l(0.000100)
      min r15.w, r17.z, r17.y
      min r15.w, r15.w, r17.x
      add r16.x, r16.y, r16.x
      mad r16.x, r16.z, r16.z, r16.x
      mad r14.w, r14.w, r14.w, -r16.x
      mul r14.w, r14.w, cb3[r13.w + 9].x
      mul r14.w, r14.w, cb3[r13.w + 9].x
      add r16.x, l(1.000000), -cb3[r13.w + 10].y
      mul r14.w, r14.w, r16.x
      mul r14.w, r14.w, l(100.000000)
      mad_sat r14.w, r15.w, cb3[r13.w + 10].y, r14.w
      mul r15.w, r14.w, cb3[r13.w + 10].w
      mad r15.xy, r15.xyxx, l(0.500000, 0.500000, 0.000000, 0.000000), l(0.500000, 0.500000, 0.000000, 0.000000)
      mad r16.xy, r15.xyxx, cb3[1].wwww, cb3[2].wwww
      mov r16.z, cb3[r13.w + 5].w
      sample_l_indexable(texture2darray)(float,float,float,float) r16.xyz, r16.xyzx, t1.xyzw, s2, r5.w
      mul r16.xyz, r16.xyzx, cb3[r13.w + 9].wwww
      div r15.x, r1.x, r15.z
      min r15.x, |r15.x|, l(1.000000)
      mad r15.x, r15.x, l(2.000000), r1.x
      add r15.y, r15.z, l(2.000000)
      div r15.x, r15.x, r15.y
      add r15.x, r15.x, l(-1.000000)
      mad r15.x, r15.x, cb0[112].w, l(1.000000)
      mul r15.xyz, r15.xxxx, r16.xyzx
      mul r15.xyz, r15.wwww, r15.xyzx
      mad r14.xyz, r15.xyzx, r1.yyyy, r14.xyzx
      mad r13.w, -r14.w, cb3[r13.w + 10].w, l(1.000000)
      mul r1.y, r1.y, r13.w
    endif
    mov r9.w, l(-1)
    continue
  else
    mov r9.w, r11.w
    break
  endif
  mov r9.w, r11.w
endloop
if_nz r9.w
  dp3 r0.w, r13.xyzx, r13.xyzx
  rsq r0.w, r0.w
  mul r15.xyz, r0.wwww, r13.xyzx
  lt r16.xyz, l(0.000000, 0.000000, 0.000000, 0.000000), r15.xyzx
  lt r17.xyz, r15.xyzx, l(0.000000, 0.000000, 0.000000, 0.000000)
  iadd r16.xyz, -r16.xyzx, r17.xyzx
  itof r16.xyz, r16.xyzx
  dp3 r0.w, r15.xyzx, r16.xyzx
  div r15.xyz, r15.xyzx, r0.wwww
  lt r0.w, r15.z, l(0.000000)
  add r15.zw, -|r15.yyyx|, l(0.000000, 0.000000, 1.000000, 1.000000)
  mul r15.zw, r15.zzzw, r16.xxxy
  movc r15.xy, r0.wwww, r15.zwzz, r15.xyxx
  mov r7.w, l(1.000000)
  dp4 r0.w, cb3[3].xyzw, r7.xyzw
  max r0.w, r0.w, l(0.000000)
  max r0.w, r0.w, l(0.000100)
  mad r15.xy, r15.xyxx, l(0.500000, 0.500000, 0.000000, 0.000000), l(0.500000, 0.500000, 0.000000, 0.000000)
  mad r15.xy, r15.xyxx, cb3[1].wwww, cb3[2].wwww
  mov r15.z, l(0)
  sample_l_indexable(texture2darray)(float,float,float,float) r15.xyz, r15.xyzx, t1.xyzw, s2, r5.w
  div r1.z, r1.x, r0.w
  min r1.z, |r1.z|, l(1.000000)
  mad r1.x, r1.z, l(2.000000), r1.x
  add r0.w, r0.w, l(2.000000)
  div r0.w, r1.x, r0.w
  add r0.w, r0.w, l(-1.000000)
  mad r0.w, r0.w, cb0[112].w, l(1.000000)
  mul r15.xyz, r0.wwww, r15.xyzx
  mad r14.xyz, r15.xyzx, r1.yyyy, r14.xyzx
endif
mul r1.xyz, r14.xyzx, cb0[112].zzzz
// === Glass Fix: Reduce reflection probe intensity ===
lt r35.x, l(0.500000), cb13[14].x
if_nz r35.x
  mul r1.xyz, r1.xyzx, l(0.400000, 0.400000, 0.400000, 0.000000)
endif
mul r1.xyz, r1.xyzx, cb0[111].yyyy
mul_sat r0.w, r6.y, l(50.000000)
mul r0.w, r8.w, r0.w
mad r14.xyz, r6.xyzx, r8.zzzz, r0.wwww
mul r1.xyz, r1.xyzx, r14.xyzx
max r0.w, r4.w, l(0.010000)
div r1.xyz, r1.xyzx, r0.wwww
add r5.w, r12.y, r12.x
mad r5.w, r11.z, cb0[111].x, r5.w
mul r5.w, r5.w, l(0.333333343)
add r6.w, r1.y, r1.x
add r6.w, r1.z, r6.w
mul r7.w, r6.w, l(0.333333343)
mad r11.xyz, r11.xyzx, cb0[111].xxxx, -r5.wwww
mad r11.xyz, r11.xyzx, cb2[24].zzzz, r5.wwww
mad r1.xyz, -r6.wwww, l(0.333333343, 0.333333343, 0.333333343, 0.000000), r1.xyzx
mad r1.xyz, r1.xyzx, cb2[24].zzzz, r7.wwww
add r1.xyz, r1.xyzx, r11.xyzx
lt r5.w, cb6[35].w, l(0.990000)
if_nz r5.w
  mad r11.xyz, r7.xyzx, l(0.500000, 0.500000, 0.500000, 0.000000), r0.xyzx
  ftoi r5.w, cb6[35].x
  ieq r6.w, r5.w, l(2)
  movc r14.xyz, r6.wwww, cb6[20].xyzx, cb0[44].xyzx
  add r14.xyz, r11.xyzx, -r14.xyzx
  dp3 r6.w, r14.xyzx, r14.xyzx
  add r6.w, -r6.w, cb6[34].w
  mul_sat r6.w, r6.w, cb6[34].z
  lt r7.w, l(0.000000), r6.w
  if_nz r7.w
    ilt r5.w, l(0), r5.w
    if_nz r5.w
      add r14.xyz, r11.xyzx, -cb6[20].xyzx
      add r15.xyz, r11.xyzx, -cb6[21].xyzx
      add r16.xyz, r11.xyzx, -cb6[22].xyzx
      add r17.xyz, r11.xyzx, -cb6[23].xyzx
      dp3 r14.x, r14.xyzx, r14.xyzx
      dp3 r14.y, r15.xyzx, r15.xyzx
      dp3 r14.z, r16.xyzx, r16.xyzx
      dp3 r14.w, r17.xyzx, r17.xyzx
      lt r15.x, r14.x, cb6[20].w
      lt r15.y, r14.y, cb6[21].w
      lt r15.z, r14.z, cb6[22].w
      lt r15.w, r14.w, cb6[23].w
      and r16.xyzw, r15.xyzw, l(0x3f800000, 0x3f800000, 0x3f800000, 0x3f800000)
      movc r15.xyz, r15.xyzx, l(-1.000000,-1.000000,-1.000000,0), l(-0.000000,-0.000000,-0.000000,0)
      add r15.xyz, r15.xyzx, r16.yzwy
      max r16.yzw, r15.xxyz, l(0.000000, 0.000000, 0.000000, 0.000000)
      dp4 r5.w, r16.xyzw, l(4.000000, 3.000000, 2.000000, 1.000000)
      add r5.w, -r5.w, l(4.000000)
      max r5.w, r5.w, l(0.000000)
      min r5.w, r5.w, l(3.000000)
      add r7.w, r5.w, l(1.000000)
      min r7.w, r7.w, l(3.000000)
      ftou r7.w, r7.w
      dp3 r8.z, r14.yzwy, icb[r7.w + 0].yzwy
      div r7.w, r8.z, cb6[r7.w + 20].w
      ge r8.z, r7.w, l(0.000000)
      ge r7.w, l(1.000000), r7.w
      and r7.w, r7.w, r8.z
      if_nz r7.w
        ftou r7.w, r5.w
        add r8.zw, r12.zzzw, l(0.000000, 0.000000, 2.083000, 4.867000)
        dp2 r8.z, r8.zwzz, l(0.0671105608, 0.00583714992, 0.000000, 0.000000)
        frc r8.z, r8.z
        mul r8.z, r8.z, l(52.982918)
        frc r8.z, r8.z
        dp4 r8.w, r14.xyzw, icb[r7.w + 0].xyzw
        div r7.w, r8.w, cb6[r7.w + 20].w
        sqrt r7.w, r7.w
        add r7.w, r7.w, l(-0.900000)
        mul r7.w, r7.w, l(12.000000)
        ge r7.w, r7.w, r8.z
        and r7.w, r7.w, l(0x3f800000)
        add r5.w, r5.w, r7.w
      endif
      dp3 r7.w, r7.xyzx, cb5[0].xyzx
      max r7.w, r7.w, l(0.000000)
      min r7.w, r7.w, l(0.900000)
      add r7.w, -r7.w, l(1.000000)
      ftou r8.z, r5.w
      ishl r8.w, r8.z, l(2)
      mul r12.xy, r7.wwww, cb6[r8.z + 24].xyxx
      max r7.w, r12.x, l(0.000000)
      mad r14.xyz, -cb5[0].xyzx, r7.wwww, r11.xyzx
      mad r14.xyz, r7.xyzx, r12.yyyy, r14.xyzx
      mul r15.xyz, r14.yyyy, cb6[r8.w + 1].xyzx
      mad r14.xyw, cb6[r8.w + 0].xyxz, r14.xxxx, r15.xyxz
      mad r14.xyz, cb6[r8.w + 2].xyzx, r14.zzzz, r14.xywx
      add r14.xyz, r14.xyzx, cb6[r8.w + 3].xyzx
      ge r15.xyz, l(0.000000, 0.000000, 0.000000, 0.000000), r14.xyzx
      ge r16.xyz, r14.xyzx, l(1.000000, 1.000000, 1.000000, 0.000000)
      or r15.xyz, r15.xyzx, r16.xyzx
      or r7.w, r15.y, r15.x
      or r7.w, r15.z, r7.w
      and r8.z, r14.z, l(0x7fffffff)
      ult r8.z, l(0x7f800000), r8.z
      or r15.z, r7.w, r8.z
      ftoi r5.w, r5.w
      mad r8.zw, r14.xxxy, cb6[r5.w + 28].zzzw, cb6[r5.w + 28].xxxy
      mad r12.xy, r8.zwzz, cb6[32].zwzz, l(0.500000, 0.500000, 0.000000, 0.000000)
      round_ni r12.xy, r12.xyxx
      mad r8.zw, r8.zzzw, cb6[32].zzzw, -r12.xxxy
      add r16.xyzw, r8.zzww, l(0.500000, 1.000000, 0.500000, 1.000000)
      mul r17.xw, r16.xxxz, r16.xxxz
      min r14.xy, r8.zwzz, l(0.000000, 0.000000, 0.000000, 0.000000)
      max r16.xz, r8.zzwz, l(0.000000, 0.000000, 0.000000, 0.000000)
      mad r18.xy, r17.xwxx, l(0.500000, 0.500000, 0.000000, 0.000000), -r8.zwzz
      add r8.zw, -r8.zzzw, l(0.000000, 0.000000, 1.000000, 1.000000)
      mad r8.zw, -r14.xxxy, r14.xxxy, r8.zzzw
      mad r14.xy, -r16.xzxx, r16.xzxx, r16.ywyy
      mov r16.x, r18.x
      mov r16.y, r8.z
      mov r16.z, r14.x
      mov r16.w, r17.x
      mul r16.xyzw, r16.xyzw, l(0.444440, 0.444440, 0.444440, 0.222220)
      mov r17.x, r18.y
      mov r17.y, r8.w
      mov r17.z, r14.y
      mul r17.xyzw, r17.xyzw, l(0.444440, 0.444440, 0.444440, 0.222220)
      add r18.xyzw, r16.ywyw, r16.xzxz
      add r19.xyzw, r17.yyww, r17.xxzz
      div r8.zw, r16.yyyw, r18.zzzw
      add r8.zw, r8.zzzw, l(0.000000, 0.000000, -1.500000, 0.500000)
      mul r16.xy, r8.zwzz, cb6[32].xxxx
      div r8.zw, r17.yyyw, r19.yyyw
      add r8.zw, r8.zzzw, l(0.000000, 0.000000, -1.500000, 0.500000)
      mul r16.zw, r8.zzzw, cb6[32].yyyy
      mul r17.xyzw, r18.xyzw, r19.xyzw
      mad r18.xyzw, r12.xyxy, cb6[32].xyxy, r16.xzyz
      sample_c_lz_indexable(texture2d)(float,float,float,float) r5.w, r18.xyxx, t12.xxxx, s3, r14.z
      sample_c_lz_indexable(texture2d)(float,float,float,float) r7.w, r18.zwzz, t12.xxxx, s3, r14.z
      mul r7.w, r7.w, r17.y
      mad r5.w, r17.x, r5.w, r7.w
      mad r16.xyzw, r12.xyxy, cb6[32].xyxy, r16.xwyw
      sample_c_lz_indexable(texture2d)(float,float,float,float) r7.w, r16.xyxx, t12.xxxx, s3, r14.z
      mad r5.w, r17.z, r7.w, r5.w
      sample_c_lz_indexable(texture2d)(float,float,float,float) r7.w, r16.zwzz, t12.xxxx, s3, r14.z
      mad r5.w, r17.w, r7.w, r5.w
      movc r15.x, r15.z, l(1.000000), r5.w
    else
      mov r15.xz, l(1.000000,0,0,0)
    endif
  else
    mov r15.xz, l(1.000000,0,0,0)
  endif
  lt r5.w, r6.w, l(1.000000)
  if_nz r5.w
    dp3 r5.w, r7.xyzx, cb5[0].xyzx
    max r5.w, r5.w, l(0.000000)
    min r5.w, r5.w, l(0.900000)
    add r5.w, -r5.w, l(1.000000)
    mul r8.zw, r5.wwww, cb6[584].xxxy
    mad r14.xyz, -cb5[0].xyzx, r8.zzzz, r11.xyzx
    mad r14.xyz, r7.xyzx, r8.wwww, r14.xyzx
    mul r8.zw, r14.yyyy, cb6[581].xxxy
    mad r8.zw, cb6[580].xxxy, r14.xxxx, r8.zzzw
    mad r8.zw, cb6[582].xxxy, r14.zzzz, r8.zzzw
    add r8.zw, r8.zzzw, cb6[583].xxxy
    lt r12.xy, l(0.000000, 0.000000, 0.000000, 0.000000), r8.zwzz
    and r5.w, r12.y, r12.x
    lt r12.xy, r8.zwzz, l(1.000000, 1.000000, 0.000000, 0.000000)
    and r7.w, r12.y, r12.x
    and r5.w, r5.w, r7.w
    if_nz r5.w
      mul r5.w, r8.w, cb6[585].z
      round_ni r5.w, r5.w
      add r5.w, r8.z, r5.w
      mul r5.w, r5.w, cb6[585].y
      ftou r5.w, r5.w
      umin r5.w, r5.w, l(127)
      and r7.w, l(0x0000ffff), cb6[r5.w + 587].x
      f16tof32 r12.x, r7.w
      ge r7.w, r12.x, l(0.000000)
      if_nz r7.w
        mov r16.x, cb6[576].x
        mov r16.y, cb6[577].x
        mov r16.z, cb6[578].x
        mov r16.w, cb6[r5.w + 587].y
        mov r14.w, l(1.000000)
        dp4 r16.x, r16.xyzw, r14.xyzw
        mov r17.x, cb6[576].y
        mov r17.y, cb6[577].y
        mov r17.z, cb6[578].y
        mov r17.w, cb6[r5.w + 587].z
        dp4 r16.y, r17.xyzw, r14.xyzw
        mov r17.x, cb6[576].z
        mov r17.y, cb6[577].z
        mov r17.z, cb6[578].z
        mov r17.w, cb6[r5.w + 587].w
        dp4 r7.w, r17.xyzw, r14.xyzw
        lt r8.zw, l(0.000000, 0.000000, 0.000000, 0.000000), r16.xxxy
        lt r9.w, l(0.000000), r7.w
        and r8.z, r8.w, r8.z
        and r8.z, r9.w, r8.z
        lt r14.xy, r16.xyxx, l(1.000000, 1.000000, 0.000000, 0.000000)
        lt r8.w, r7.w, l(1.000000)
        and r9.w, r14.y, r14.x
        and r8.w, r8.w, r9.w
        and r8.z, r8.w, r8.z
        if_nz r8.z
          ushr r5.w, cb6[r5.w + 587].x, l(16)
          f16tof32 r12.y, r5.w
          mad r8.zw, r16.xxxy, cb6[584].zzzw, r12.xxxy
          mad r12.xy, r8.zwzz, cb6[586].zwzz, l(0.500000, 0.500000, 0.000000, 0.000000)
          round_ni r12.xy, r12.xyxx
          mad r8.zw, r8.zzzw, cb6[586].zzzw, -r12.xxxy
          add r14.xyzw, r8.zzww, l(0.500000, 1.000000, 0.500000, 1.000000)
          mul r16.xw, r14.xxxz, r14.xxxz
          min r14.xz, r8.zzwz, l(0.000000, 0.000000, 0.000000, 0.000000)
          max r17.xy, r8.zwzz, l(0.000000, 0.000000, 0.000000, 0.000000)
          mad r17.zw, r16.xxxw, l(0.000000, 0.000000, 0.500000, 0.500000), -r8.zzzw
          add r8.zw, -r8.zzzw, l(0.000000, 0.000000, 1.000000, 1.000000)
          mad r8.zw, -r14.xxxz, r14.xxxz, r8.zzzw
          mad r14.xy, -r17.xyxx, r17.xyxx, r14.ywyy
          mov r18.x, r17.z
          mov r18.y, r8.z
          mov r18.z, r14.x
          mov r18.w, r16.x
          mul r18.xyzw, r18.xyzw, l(0.444440, 0.444440, 0.444440, 0.222220)
          mov r16.x, r17.w
          mov r16.y, r8.w
          mov r16.z, r14.y
          mul r14.xyzw, r16.xyzw, l(0.444440, 0.444440, 0.444440, 0.222220)
          add r16.xyzw, r18.ywyw, r18.xzxz
          add r17.xyzw, r14.yyww, r14.xxzz
          div r8.zw, r18.yyyw, r16.zzzw
          add r8.zw, r8.zzzw, l(0.000000, 0.000000, -1.500000, 0.500000)
          mul r18.xy, r8.zwzz, cb6[586].xxxx
          div r8.zw, r14.yyyw, r17.yyyw
          add r8.zw, r8.zzzw, l(0.000000, 0.000000, -1.500000, 0.500000)
          mul r18.zw, r8.zzzw, cb6[586].yyyy
          mul r14.xyzw, r16.xyzw, r17.xyzw
          mad r16.xyzw, r12.xyxy, cb6[586].xyxy, r18.xzyz
          sample_c_lz_indexable(texture2d)(float,float,float,float) r5.w, r16.xyxx, t15.xxxx, s3, r7.w
          sample_c_lz_indexable(texture2d)(float,float,float,float) r8.z, r16.zwzz, t15.xxxx, s3, r7.w
          mul r8.z, r8.z, r14.y
          mad r5.w, r14.x, r5.w, r8.z
          mad r16.xyzw, r12.xyxy, cb6[586].xyxy, r18.xwyw
          sample_c_lz_indexable(texture2d)(float,float,float,float) r8.z, r16.xyxx, t15.xxxx, s3, r7.w
          mad r5.w, r14.z, r8.z, r5.w
          sample_c_lz_indexable(texture2d)(float,float,float,float) r7.w, r16.zwzz, t15.xxxx, s3, r7.w
          mad r15.y, r14.w, r7.w, r5.w
        else
          mov r15.y, l(1.000000)
        endif
      else
        mov r15.y, l(1.000000)
      endif
    else
      mov r15.y, l(1.000000)
    endif
    movc r15.x, r15.z, r15.y, r15.x
  else
    mov r15.y, l(1.000000)
  endif
  add r5.w, -r15.y, r15.x
  mad r5.w, r6.w, r5.w, r15.y
  lt r6.w, l(0.001000), r5.w
  if_nz r6.w
    add r11.xyz, r11.xyzx, -cb0[173].xyzx
    mad r8.zw, cb0[176].xxxz, r11.yyyy, r11.xxxz
    mul r11.yw, r8.zzzw, cb0[174].zzzz
    mul r12.xy, cb0[175].xyxx, cb0[183].wwww
    mad r8.zw, r8.zzzw, cb0[174].zzzz, r12.xxxy
    sample_l_indexable(texture2d)(float,float,float,float) r6.w, r8.zwzz, t14.yzwx, s1, l(0.000000)
    mad r8.zw, r11.yyyw, cb0[175].wwww, r12.xxxy
    sample_l_indexable(texture2d)(float,float,float,float) r7.w, r8.zwzz, t14.yzwx, s1, l(0.000000)
    dp2 r8.z, r11.xzxx, r11.xzxx
    sqrt r8.z, r8.z
    add r8.w, -cb0[174].x, cb0[174].y
    add r8.z, r8.z, -cb0[174].x
    div r8.w, l(1.000000, 1.000000, 1.000000, 1.000000), r8.w
    mul_sat r8.z, r8.w, r8.z
    mad r8.w, r8.z, l(-2.000000), l(3.000000)
    mul r8.z, r8.z, r8.z
    mul r8.z, r8.z, r8.w
    add r7.w, -r6.w, r7.w
    mad r6.w, r8.z, r7.w, r6.w
    add r6.w, r6.w, l(-1.000000)
    mad r6.w, cb0[175].z, r6.w, l(1.000000)
    mul r5.w, r5.w, r6.w
  endif
  add r6.w, -r5.w, cb6[35].z
  mad r5.w, cb6[35].w, r6.w, r5.w
else
  mov r5.w, cb6[35].z
endif
min r5.w, r5.w, l(1.000000)
add r5.w, r5.w, l(-1.000000)
mad r11.x, cb6[34].x, r5.w, l(1.000000)
lt r5.w, l(0.001000), r11.x
if_nz r5.w
  dp3 r5.w, -cb5[0].xyzx, r13.xyzx
  mad r14.xyz, cb5[0].xyzx, r5.wwww, r13.xyzx
  lt r5.w, r5.w, cb5[4].z
  dp3 r6.w, r14.xyzx, r14.xyzx
  max r6.w, r6.w, l(0.0000610351562)
  rsq r6.w, r6.w
  mul r14.xyz, r6.wwww, r14.xyzx
  mul r14.xyz, r14.xyzx, cb5[4].yyyy
  mad r14.xyz, -cb5[0].xyzx, cb5[4].zzzz, r14.xyzx
  dp3 r6.w, r14.xyzx, r14.xyzx
  rsq r6.w, r6.w
  mul r14.xyz, r6.wwww, r14.xyzx
  movc r14.xyz, r5.wwww, r14.xyzx, r13.xyzx
  mad r15.xyz, r2.xyzx, r3.wwww, r14.xyzx
  dp3 r5.w, r15.xyzx, r15.xyzx
  max r5.w, r5.w, l(0.0000610351562)
  rsq r5.w, r5.w
  mul r15.xyz, r5.wwww, r15.xyzx
  dp3_sat r14.z, r14.xyzx, r7.xyzx
  dp3_sat r5.w, r7.xyzx, r15.xyzx
  min r14.x, r1.w, l(1.000000)
  mul r6.w, cb2[25].z, cb2[25].z
  mul r6.w, r6.w, r6.w
  mad r7.w, r5.w, r6.w, -r5.w
  mad r5.w, r7.w, r5.w, l(1.000000)
  dp3_sat r7.w, r4.xyzx, r15.xyzx
  add r7.w, -r7.w, l(1.000000)
  mul r8.z, r7.w, r7.w
  mul r8.z, r8.z, r8.z
  mul r8.w, r7.w, r8.z
  add r9.w, l(1.000000), -cb2[25].z
  mad r11.z, -r9.w, l(0.383026), l(-0.0761947036)
  mad r11.z, r9.w, r11.z, l(1.049970)
  mad r9.w, r9.w, r11.z, l(0.409255)
  min r9.w, r9.w, l(0.999000)
  add r11.z, -r9.w, l(1.000000)
  add r15.xyz, -r6.xyzx, l(1.000000, 1.000000, 1.000000, 0.000000)
  mad r15.xyz, r15.xyzx, l(0.0476190485, 0.0476190485, 0.0476190485, 0.000000), r6.xyzx
  mad r7.w, -r8.z, r7.w, l(1.000000)
  mad r16.xyz, r6.xyzx, r7.wwww, r8.wwww
  mul r5.w, r5.w, r5.w
  div r5.w, r6.w, r5.w
  mad r8.zw, -r14.xxxz, r6.wwww, r14.xxxz
  mad r8.zw, r8.zzzw, r14.xxxz, r6.wwww
  sqrt r8.zw, r8.zzzw
  mul r8.zw, r8.zzzw, r14.zzzx
  add r6.w, r8.w, r8.z
  add r6.w, r6.w, l(0.000100)
  div r6.w, l(0.500000), r6.w
  mul r5.w, r5.w, r6.w
  mul r16.xyz, r5.wwww, r16.xyzx
  min r16.xyz, r16.xyzx, l(2048.000000, 2048.000000, 2048.000000, 0.000000)
  mov r14.yw, cb2[25].zzzz
  mad r17.xyzw, r14.xyzw, l(0.968750, 0.968750, 0.968750, 0.968750), l(0.015625, 0.015625, 0.015625, 0.015625)
  sample_l_indexable(texture2d)(float,float,float,float) r5.w, r17.xyxx, t17.yzwx, s0, l(0.000000)
  sample_l_indexable(texture2d)(float,float,float,float) r6.w, r17.zwzz, t17.yzwx, s0, l(0.000000)
  mul r5.w, r5.w, r6.w
  mul r5.w, r9.w, r5.w
  div r5.w, r5.w, r11.z
  mul r14.xyw, r15.xyxz, r15.xyxz
  mul r14.xyw, r5.wwww, r14.xyxw
  mad r15.xyz, -r15.xyzx, r11.zzzz, l(1.000000, 1.000000, 1.000000, 0.000000)
  div r14.xyw, r14.xyxw, r15.xyxz
  add r14.xyw, r14.xyxw, r16.xyxz
  mul r14.xyw, r14.xyxw, cb5[4].xxxx
  // === Glass Fix: Reduce sun specular intensity ===
  lt r35.x, l(0.500000), cb13[14].x
  if_nz r35.x
    mul r14.xyw, r14.xyxw, l(0.500000, 0.500000, 0.000000, 0.500000)
  endif
  max r14.xyw, r14.xyxw, l(0.000000, 0.000000, 0.000000, 0.000000)
  min r14.xyw, r14.xyxw, l(1000.000000, 1000.000000, 0.000000, 1000.000000)
  div r14.xyw, r14.xyxw, r0.wwww
  min r14.xyw, r14.xyxw, l(1000.000000, 1000.000000, 0.000000, 1000.000000)
  mul r14.xyw, r14.xyxw, cb2[24].xxxx
  mul r15.xyz, r9.xyzx, r14.zzzz
  mad r14.xyz, r14.xywx, r14.zzzz, r15.xyzx
  mul r14.xyz, r14.xyzx, cb5[1].xyzx
  mov r11.y, l(0.500000)
  sample_b_indexable(texture2d)(float,float,float,float) r11.yzw, r11.xyxx, t16.wxyz, s0, cb0[108].x
  add r0.w, -r11.x, l(1.000000)
  mad r11.xyz, r14.xyzx, r11.yzwy, -r14.xyzx
  mad r11.xyz, r0.wwww, r11.xyzx, r14.xyzx
else
  mov r11.xyz, l(0,0,0,0)
endif
mul r8.zw, r12.zzzw, l(0.000000, 0.000000, 0.031250, 0.031250)
round_ni r8.zw, r8.zzzw
mad r0.w, r8.w, cb4[1].y, r8.z
mul r0.w, r0.w, l(8.000000)
ftoi r0.w, r0.w
mad r5.w, -cb0[85].y, cb4[2].w, r10.z
round_ni r5.w, r5.w
add r6.w, l(-1.000000), cb4[1].w
max r7.w, r5.w, l(0.000000)
min r6.w, r6.w, r7.w
mul r7.w, r6.w, l(8.000000)
ftoi r7.w, r7.w
ge r5.w, r6.w, r5.w
iadd r6.w, r7.w, cb0[110].y
mul r7.w, cb2[25].z, cb2[25].z
min r12.x, r1.w, l(1.000000)
add r8.zw, l(0.000000, 0.000000, 1.000000, 1.000000), -cb2[25].zzzx
mad r1.w, -r8.z, l(0.383026), l(-0.0761947036)
mad r1.w, r8.z, r1.w, l(1.049970)
mad r1.w, r8.z, r1.w, l(0.409255)
min r1.w, r1.w, l(0.999000)
add r8.z, -r1.w, l(1.000000)
add r14.xyz, -r6.xyzx, l(1.000000, 1.000000, 1.000000, 0.000000)
mad r14.xyz, r14.xyzx, l(0.0476190485, 0.0476190485, 0.0476190485, 0.000000), r6.xyzx
mov r12.y, cb2[25].z
mad r15.xy, r12.xyxx, l(0.968750, 0.968750, 0.000000, 0.000000), l(0.015625, 0.015625, 0.000000, 0.000000)
sample_l_indexable(texture2d)(float,float,float,float) r9.w, r15.xyxx, t17.yzwx, s0, l(0.000000)
mad r15.xyz, -r14.xyzx, r8.zzzz, l(1.000000, 1.000000, 1.000000, 0.000000)
mul r14.xyz, r14.xyzx, r14.xyzx
mov r16.w, l(1.000000)
mov r17.y, l(1.000000)
mov r18.z, cb2[25].z
mov r19.xyz, l(0,0,0,0)
mov r11.w, l(1.000000)
mov r12.y, l(0)
loop
  ilt r13.w, l(7), r12.y
  breakc_nz r13.w
  iadd r13.w, r0.w, r12.y
  ld_structured_indexable(structured_buffer, stride=4)(mixed,mixed,mixed,mixed) r13.w, r13.w, l(0), t0.xxxx
  iadd r14.w, r6.w, r12.y
  ld_structured_indexable(structured_buffer, stride=4)(mixed,mixed,mixed,mixed) r14.w, r14.w, l(0), t0.xxxx
  and r13.w, r13.w, r14.w
  and r13.w, r5.w, r13.w
  ishl r14.w, r12.y, l(5)
  mov r20.xyz, l(0,0,0,0)
  mov r15.w, r11.w
  mov r17.z, r13.w
  loop
    breakc_z r17.z
    firstbit_lo r17.w, r17.z
    ishl r18.w, l(1), r17.w
    xor r18.w, r17.z, r18.w
    iadd r17.w, r14.w, r17.w
    bfi r21.xyzw, l(29, 29, 29, 29), l(3, 3, 3, 3), r17.wwww, l(1, 3, 5, 6)
    bfi r19.w, l(29), l(3), r17.w, l(7)
    ftou r20.w, cb5[r21.z + 6].w
    ieq r20.w, r20.w, l(1)
    if_nz r20.w
      add r16.xyz, r0.xyzx, -cb5[r21.x + 6].xyzx
      and r22.xyz, l(0x0000ffff, 0x0000ffff, 0x0000ffff, 0), cb5[r21.z + 6].xzyx
      and r23.xyz, l(0x0000ffff, 0x0000ffff, 0x0000ffff, 0), cb5[r21.w + 6].yxzy
      ushr r24.xyz, cb5[r21.z + 6].xzyx, l(16, 16, 16, 0)
      ushr r25.xyz, cb5[r21.w + 6].yxzy, l(16, 16, 16, 0)
      f16tof32 r22.xyz, r22.xyzx
      f16tof32 r23.xyz, r23.xyzx
      f16tof32 r24.xyz, r24.xyzx
      f16tof32 r25.xyw, r25.yxyz
      mov r26.xz, r22.xxzx
      mov r26.yw, r24.xxxz
      dp4 r20.w, r16.xyzw, r26.xyzw
      mov r24.x, r22.y
      mov r24.z, r23.y
      mov r24.w, r25.x
      dp4 r21.z, r16.xyzw, r24.xyzw
      mov r25.xz, r23.xxzx
      dp4 r16.x, r16.xyzw, r25.xyzw
      max r16.y, |r20.w|, |r21.z|
      max r16.x, |r16.x|, r16.y
      mad r16.y, cb5[r19.w + 6].x, l(0.500000), l(0.500000)
      add r16.x, -r16.y, r16.x
      mad r16.y, -cb5[r19.w + 6].x, l(0.500000), l(0.500000)
      div_sat r16.x, r16.x, r16.y
      add r16.x, -r16.x, l(1.000000)
      mul r16.x, r16.x, r16.x
    else
      mov r16.x, l(1.000000)
    endif
    lt r16.y, l(0.500000), cb5[r21.y + 6].z
    lt r16.z, r16.x, l(0.001000)
    or r16.z, r16.y, r16.z
    if_nz r16.z
      mov r17.z, r18.w
      continue
    endif
    ishl r16.z, r17.w, l(3)
    bfi r17.w, l(29), l(3), r17.w, l(2)
    lt r20.w, cb5[r16.z + 6].w, l(1.500000)
    if_nz r20.w
      mad r20.w, cb5[r17.w + 6].y, l(0.500000), l(0.500000)
      add r22.x, r20.w, -|cb5[r17.w + 6].x|
      add r22.y, -r22.x, cb5[r17.w + 6].y
      add r20.w, -|r22.x|, l(1.000000)
      add r20.w, -|r22.y|, r20.w
      max r20.w, r20.w, l(0.000488281250)
      ge r21.z, cb5[r17.w + 6].x, l(0.000000)
      movc r22.z, r21.z, r20.w, -r20.w
      dp3 r20.w, r22.xyzx, r22.xyzx
      rsq r20.w, r20.w
      mul r22.xyz, r20.wwww, r22.xyzx
      add r23.xyz, -r0.xyzx, cb5[r21.x + 6].xyzx
      dp3 r20.w, r23.xyzx, r23.xyzx
      rsq r21.z, r20.w
      mul r24.xyz, r21.zzzz, r23.xyzx
      ftoi r22.w, cb5[r19.w + 6].w
      mul r25.xyz, r22.xyzx, cb5[r17.w + 6].zzzz
      mad r26.xyz, -r25.xyzx, l(0.500000, 0.500000, 0.500000, 0.000000), r23.xyzx
      mad r27.xyz, r25.xyzx, l(0.500000, 0.500000, 0.500000, 0.000000), r23.xyzx
      ftou r23.w, cb5[r16.z + 6].w
      and r23.w, r23.w, l(1)
      ieq r24.w, r23.w, l(0)
      not r24.w, r24.w
      lt r25.w, l(0.000000), cb5[r17.w + 6].z
      and r24.w, r24.w, r25.w
      dp3 r25.w, r26.xyzx, r26.xyzx
      sqrt r25.w, r25.w
      dp3 r26.w, r27.xyzx, r27.xyzx
      sqrt r26.w, r26.w
      dp3 r27.w, r7.xyzx, r26.xyzx
      div r27.w, r27.w, r25.w
      dp3 r28.x, r7.xyzx, r27.xyzx
      div r28.x, r28.x, r26.w
      add r27.w, r27.w, r28.x
      mul_sat r28.x, r27.w, l(0.500000)
      dp3 r27.x, r26.xyzx, r27.xyzx
      mad r25.w, r25.w, r26.w, r27.x
      mad r25.w, r25.w, l(0.500000), l(1.000000)
      div r28.y, l(1.000000, 1.000000, 1.000000, 1.000000), r25.w
      dp3_sat r17.x, r7.xyzx, r24.xyzx
      movc r18.xy, r24.wwww, r28.xyxx, r17.xyxx
      lt r17.x, cb5[r21.w + 6].w, l(0.000000)
      if_nz r17.x
        mul r17.x, cb5[r21.x + 6].w, cb5[r21.x + 6].w
        mul r17.x, r17.x, r20.w
        mad r17.x, -r17.x, r17.x, l(1.000000)
        max r17.x, r17.x, l(0.000000)
        add r20.w, r20.w, l(1.000000)
        div r20.w, l(1.000000, 1.000000, 1.000000, 1.000000), r20.w
        and r25.w, r24.w, l(0x3f800000)
        add r26.w, r18.y, -r20.w
        mad r20.w, r25.w, r26.w, r20.w
        mul r17.x, r17.x, r17.x
        mul r17.x, r17.x, r20.w
      else
        mul r27.xyz, r23.xyzx, cb5[r21.x + 6].wwww
        dp3 r20.w, r27.xyzx, r27.xyzx
        min r20.w, r20.w, l(1.000000)
        add r20.w, -r20.w, l(1.000000)
        log r20.w, r20.w
        mul r20.w, r20.w, cb5[r21.w + 6].w
        exp r20.w, r20.w
        mul r17.x, r18.y, r20.w
      endif
      dp3 r18.y, r24.xyzx, -r22.xyzx
      add r18.y, r18.y, -cb5[r17.w + 6].z
      mul_sat r18.y, r18.y, cb5[r17.w + 6].w
      mul r18.y, r18.y, r18.y
      movc r18.y, r23.w, l(1.000000), r18.y
      mul r17.x, r17.x, r18.y
      not r18.y, r24.w
      ige r20.w, r22.w, l(0)
      and r18.y, r18.y, r20.w
      if_nz r18.y
        if_z r23.w
          ishl r18.y, r22.w, l(2)
          mul r22.xyz, r0.yyyy, cb7[r18.y + 33].xywx
          mad r22.xyz, cb7[r18.y + 32].xywx, r0.xxxx, r22.xyzx
          mad r22.xyz, cb7[r18.y + 34].xywx, r0.zzzz, r22.xyzx
          add r22.xyz, r22.xyzx, cb7[r18.y + 35].xywx
          div_sat r22.xy, r22.xyxx, r22.zzzz
          mad r22.xy, r22.xyxx, cb7[r22.w + 0].zwzz, cb7[r22.w + 0].xyxx
        else
          ishl r18.y, r22.w, l(2)
          dp3 r27.x, -r23.xyzx, cb7[r18.y + 32].xyzx
          dp3 r27.y, -r23.xyzx, cb7[r18.y + 33].xyzx
          dp3 r27.z, -r23.xyzx, cb7[r18.y + 34].xyzx
          lt r18.y, |r27.x|, |r27.y|
          and r18.y, r18.y, l(1)
          dp2 r20.w, |r27.xyxx|, icb[r18.y + 0].xyxx
          lt r20.w, r20.w, |r27.z|
          movc r18.y, r20.w, l(2), r18.y
          dp3 r20.w, r27.xyzx, icb[r18.y + 0].xyzx
          lt r20.w, r20.w, l(0.000000)
          bfi r18.y, l(31), l(1), r18.y, r20.w
          ushr r20.w, r18.y, l(1)
          dp3 r20.w, r27.xyzx, icb[r20.w + 0].xyzx
          div r22.z, l(0.000244140625), cb7[r22.w + 0].w
          add r22.z, -r22.z, l(0.500000)
          utof r23.x, r18.y
          ult r23.y, r18.y, l(2)
          and r23.y, r23.y, l(2)
          dp2 r23.y, r27.xzxx, icb[r23.y + 0].xzxx
          mul r23.y, r23.y, icb[r18.y + 4].z
          div r23.y, r23.y, |r20.w|
          mad r23.x, r23.y, r22.z, r23.x
          add r23.x, r23.x, l(0.500000)
          mul_sat r23.x, r23.x, l(0.166666672)
          iadd r23.z, l(-1), icb[r18.y + 4].y
          dp2 r23.z, r27.yzyy, icb[r23.z + 0].xyxx
          mul r18.y, r23.z, icb[r18.y + 4].w
          div r18.y, r18.y, |r20.w|
          mad_sat r23.y, -r18.y, r22.z, l(0.500000)
          mad r22.xy, r23.xyxx, cb7[r22.w + 0].zwzz, cb7[r22.w + 0].xyxx
        endif
        sample_l_indexable(texture2d)(float,float,float,float) r18.y, r22.xyxx, t18.yxzw, s0, l(0.000000)
        mul r17.x, r17.x, r18.y
      endif
      lt r18.y, l(0.000000), r17.x
      if_nz r18.y
        if_z r23.w
          ftoi r20.w, cb5[r21.y + 6].x
        else
          add r22.xyz, r0.xyzx, -cb5[r21.x + 6].xyzx
          lt r23.xyz, |r22.yzzy|, |r22.xxyx|
          and r22.w, r23.y, r23.x
          lt r22.xyz, l(0.000000, 0.000000, 0.000000, 0.000000), r22.xyzx
          ushr r23.x, cb5[r17.w + 6].w, l(24)
          ubfe r23.yw, l(0, 8, 0, 8), l(0, 16, 0, 8), cb5[r17.w + 6].wwww
          movc r22.x, r22.x, r23.x, r23.y
          and r23.x, l(255), cb5[r17.w + 6].w
          movc r22.y, r22.y, r23.w, r23.x
          ubfe r23.x, l(8), l(8), cb5[r21.y + 6].x
          and r23.y, l(255), cb5[r21.y + 6].x
          movc r22.z, r22.z, r23.x, r23.y
          movc r22.y, r23.z, r22.y, r22.z
          movc r22.x, r22.w, r22.x, r22.y
          ilt r22.y, r22.x, l(80)
          movc r20.w, r22.y, r22.x, l(-1)
        endif
        ishl r22.x, r20.w, l(2)
        mad r22.yzw, r24.xxyz, cb6[r20.w + 288].xxxx, r0.xxyz
        mul r23.x, l(5.000000), cb6[r20.w + 288].y
        mad r22.yzw, r7.xxyz, r23.xxxx, r22.yyzw
        mul r23.xyzw, r22.zzzz, cb6[r22.x + 65].xyzw
        mad r23.xyzw, cb6[r22.x + 64].xyzw, r22.yyyy, r23.xyzw
        mad r23.xyzw, cb6[r22.x + 66].xyzw, r22.wwww, r23.xyzw
        add r22.xyzw, r23.xyzw, cb6[r22.x + 67].xyzw
        div r22.xyz, r22.xyzx, r22.wwww
        ge r23.xyz, l(0.000000, 0.000000, 0.000000, 0.000000), r22.xyzx
        ge r27.xyz, r22.xyzx, l(1.000000, 1.000000, 1.000000, 0.000000)
        add r28.xy, -cb6[r20.w + 344].xyxx, cb6[r20.w + 344].zwzz
        mad r22.xy, r22.xyxx, r28.xyxx, cb6[r20.w + 344].xyxx
        mad r28.xy, r22.xyxx, cb6[400].zwzz, l(0.500000, 0.500000, 0.000000, 0.000000)
        round_ni r28.xy, r28.xyxx
        mad r22.xy, r22.xyxx, cb6[400].zwzz, -r28.xyxx
        add r29.xyzw, r22.xxyy, l(0.500000, 1.000000, 0.500000, 1.000000)
        mul r30.xyzw, r29.xxzz, r29.xxzz
        add r28.zw, -r22.xxxy, l(0.000000, 0.000000, 1.000000, 1.000000)
        min r29.xz, r22.xxyx, l(0.000000, 0.000000, 0.000000, 0.000000)
        max r31.xy, r22.xyxx, l(0.000000, 0.000000, 0.000000, 0.000000)
        mul r32.xy, r28.zwzz, l(0.160000, 0.160000, 0.000000, 0.000000)
        mad r31.xy, -r31.xyxx, r31.xyxx, r29.ywyy
        add r31.xy, r31.xyxx, l(1.000000, 1.000000, 0.000000, 0.000000)
        mul r31.xy, r31.xyxx, l(0.160000, 0.160000, 0.000000, 0.000000)
        mul r30.xz, r30.xxzx, l(0.080000, 0.000000, 0.080000, 0.000000)
        mad r22.xy, r30.ywyy, l(0.500000, 0.500000, 0.000000, 0.000000), -r22.xyxx
        mul r33.xy, r22.xyxx, l(0.160000, 0.160000, 0.000000, 0.000000)
        mad r22.xy, -r29.xzxx, r29.xzxx, r28.zwzz
        add r22.xy, r22.xyxx, l(1.000000, 1.000000, 0.000000, 0.000000)
        mul r34.xy, r22.xyxx, l(0.160000, 0.160000, 0.000000, 0.000000)
        mul r22.xy, r29.ywyy, l(0.160000, 0.160000, 0.000000, 0.000000)
        mov r33.z, r34.x
        mov r33.w, r22.x
        mov r32.z, r31.x
        mov r32.w, r30.x
        add r29.xyzw, r32.zwxz, r33.zwxz
        mov r34.z, r33.y
        mov r34.w, r22.y
        mov r31.z, r32.y
        mov r31.w, r30.z
        add r22.xyw, r31.zyzw, r34.zyzw
        div r30.xyz, r32.xzwx, r29.zwyz
        add r30.xyz, r30.xyzx, l(-2.500000, -0.500000, 1.500000, 0.000000)
        mul r30.xyz, r30.xyzx, cb6[400].xxxx
        div r31.xyz, r31.zywz, r22.xywx
        add r31.xyz, r31.xyzx, l(-2.500000, -0.500000, 1.500000, 0.000000)
        mul r31.xyw, r31.xyxz, cb6[400].yyyy
        mul r32.xyzw, r22.xxxy, r29.zwyz
        mov r30.w, r31.x
        mad r33.xyzw, r28.xyxy, cb6[400].xyxy, r30.xwyw
        sample_c_lz_indexable(texture2d)(float,float,float,float) r22.x, r33.xyxx, t13.xxxx, s3, r22.z
        sample_c_lz_indexable(texture2d)(float,float,float,float) r23.w, r33.zwzz, t13.xxxx, s3, r22.z
        mul r23.w, r23.w, r32.y
        mad r22.x, r32.x, r22.x, r23.w
        mad r28.zw, r28.xxxy, cb6[400].xxxy, r30.zzzw
        sample_c_lz_indexable(texture2d)(float,float,float,float) r23.w, r28.zwzz, t13.xxxx, s3, r22.z
        mad r22.x, r32.z, r23.w, r22.x
        mov r31.z, r30.x
        mad r33.xyzw, r28.xyxy, cb6[400].xyxy, r31.zyzw
        sample_c_lz_indexable(texture2d)(float,float,float,float) r23.w, r33.xyxx, t13.xxxx, s3, r22.z
        mad r22.x, r32.w, r23.w, r22.x
        mul r32.xyzw, r22.yyww, r29.xyzw
        mov r31.xz, r30.yyzy
        mad r30.xyzw, r28.xyxy, cb6[400].xyxy, r31.xyzy
        sample_c_lz_indexable(texture2d)(float,float,float,float) r22.y, r30.xyxx, t13.xxxx, s3, r22.z
        mad r22.x, r32.x, r22.y, r22.x
        sample_c_lz_indexable(texture2d)(float,float,float,float) r22.y, r30.zwzz, t13.xxxx, s3, r22.z
        mad r22.x, r32.y, r22.y, r22.x
        sample_c_lz_indexable(texture2d)(float,float,float,float) r22.y, r33.zwzz, t13.xxxx, s3, r22.z
        mad r22.x, r32.z, r22.y, r22.x
        ige r22.y, r20.w, l(0)
        or r23.xyz, r23.xyzx, r27.xyzx
        or r23.x, r23.y, r23.x
        or r23.x, r23.z, r23.x
        and r23.y, r22.z, l(0x7fffffff)
        ult r23.y, l(0x7f800000), r23.y
        or r23.x, r23.y, r23.x
        mad r27.xyzw, r28.xyxy, cb6[400].xyxy, r31.xwzw
        sample_c_lz_indexable(texture2d)(float,float,float,float) r23.y, r27.xyxx, t13.xxxx, s3, r22.z
        mad r22.x, r32.w, r23.y, r22.x
        mul r22.w, r22.w, r29.y
        sample_c_lz_indexable(texture2d)(float,float,float,float) r22.z, r27.zwzz, t13.xxxx, s3, r22.z
        mad r22.x, r22.w, r22.z, r22.x
        add r22.x, r22.x, l(-1.000000)
        mad r20.w, cb6[r20.w + 288].w, r22.x, l(1.000000)
        movc r20.w, r23.x, l(1.000000), r20.w
        movc r20.w, r22.y, r20.w, l(1.000000)
      else
        mov r20.w, l(1.000000)
      endif
      if_nz r24.w
        dp3 r22.x, r13.xyzx, r25.xyzx
        mul_sat r22.y, r21.z, cb5[r17.w + 6].z
        mad r22.y, r22.y, l(0.500000), r7.w
        min r22.y, r22.y, l(1.000000)
        div r22.y, r7.w, r22.y
        mad r23.xyz, r13.xyzx, r22.xxxx, -r25.xyzx
        dp3 r22.z, r26.xyzx, r23.xyzx
        mul r22.x, r22.x, r22.x
        mad r22.x, cb5[r17.w + 6].z, cb5[r17.w + 6].z, -r22.x
        div_sat r22.x, r22.z, r22.x
        mad r22.xzw, r25.xxyz, r22.xxxx, r26.xxyz
        dp3 r23.x, r22.xzwx, r22.xzwx
        rsq r23.x, r23.x
        mul r24.xyz, r22.xzwx, r23.xxxx
      else
        mov r22.y, l(1.000000)
      endif
      if_nz r18.y
        mul_sat r18.y, r21.z, cb5[r19.w + 6].y
        mad r22.xzw, r2.xxyz, r3.wwww, r24.xxyz
        dp3 r21.z, r22.xzwx, r22.xzwx
        max r21.z, r21.z, l(0.0000610351562)
        rsq r21.z, r21.z
        mul r22.xzw, r21.zzzz, r22.xxzw
        dp3_sat r21.z, r7.xyzx, r22.xzwx
        dp3_sat r22.x, r4.xyzx, r22.xzwx
        lt r22.z, l(0.000000), r18.y
        mul r18.y, r18.y, r18.y
        mad r22.w, r22.x, l(3.600000), l(0.400000)
        div r18.y, r18.y, r22.w
        mad r18.y, cb2[25].z, cb2[25].z, r18.y
        min r18.y, r18.y, l(1.000000)
        movc r18.y, r22.z, r18.y, r7.w
        mul r18.y, r18.y, r18.y
        mad r22.z, r21.z, r18.y, -r21.z
        mad r21.z, r22.z, r21.z, l(1.000000)
        add r22.x, -r22.x, l(1.000000)
        mul r22.z, r22.x, r22.x
        mul r22.z, r22.z, r22.z
        mul r22.w, r22.x, r22.z
        mad r22.x, -r22.z, r22.x, l(1.000000)
        mad r22.xzw, r6.xxyz, r22.xxxx, r22.wwww
        mul r21.z, r21.z, r21.z
        div r21.z, r18.y, r21.z
        mul r21.z, r22.y, r21.z
        mad r22.y, -r12.x, r18.y, r12.x
        mad r22.y, r22.y, r12.x, r18.y
        sqrt r22.y, r22.y
        mad r23.x, -r18.x, r18.y, r18.x
        mad r18.y, r23.x, r18.x, r18.y
        sqrt r18.y, r18.y
        mul r18.y, r12.x, r18.y
        mad r18.y, r18.x, r22.y, r18.y
        add r18.y, r18.y, l(0.000100)
        div r18.y, l(0.500000), r18.y
        mul r18.y, r18.y, r21.z
        mul r22.xyz, r18.yyyy, r22.xzwx
        min r22.xyz, r22.xyzx, l(2048.000000, 2048.000000, 2048.000000, 0.000000)
        mad r23.xy, r18.xzxx, l(0.968750, 0.968750, 0.000000, 0.000000), l(0.015625, 0.015625, 0.000000, 0.000000)
        sample_l_indexable(texture2d)(float,float,float,float) r18.y, r23.xyxx, t17.yxzw, s0, l(0.000000)
        mul r18.y, r9.w, r18.y
        mul r18.y, r1.w, r18.y
        div r18.y, r18.y, r8.z
        mul r23.xyz, r14.xyzx, r18.yyyy
        div r23.xyz, r23.xyzx, r15.xyzx
        add r22.xyz, r22.xyzx, r23.xyzx
        mul r22.xyz, r22.xyzx, cb5[r19.w + 6].zzzz
        max r22.xyz, r22.xyzx, l(0.000000, 0.000000, 0.000000, 0.000000)
        min r22.xyz, r22.xyzx, l(1000.000000, 1000.000000, 1000.000000, 0.000000)
        mul r23.xyz, r9.xyzx, r18.xxxx
        mad r22.xyz, r22.xyzx, r18.xxxx, r23.xyzx
        mul r23.xyz, r17.xxxx, cb5[r16.z + 6].xyzx
        mul r23.xyz, r20.wwww, r23.xyzx
        mul r23.xyz, r16.xxxx, r23.xyzx
        mul r22.xyz, r22.xyzx, r23.xyzx
      else
        mov r22.xyz, l(0,0,0,0)
      endif
    else
      if_z r16.y
        mad r16.x, cb5[r17.w + 6].y, l(0.500000), l(0.500000)
        add r23.x, r16.x, -|cb5[r17.w + 6].x|
        add r23.y, -r23.x, cb5[r17.w + 6].y
        add r16.x, -|r23.x|, l(1.000000)
        add r16.x, -|r23.y|, r16.x
        max r16.x, r16.x, l(0.000488281250)
        ge r16.y, cb5[r17.w + 6].x, l(0.000000)
        movc r23.z, r16.y, r16.x, -r16.x
        dp3 r16.x, r23.xyzx, r23.xyzx
        rsq r16.x, r16.x
        mul r23.xyz, r16.xxxx, r23.xyzx
        add r24.xyz, -r0.xyzx, cb5[r21.x + 6].xyzx
        dp3 r16.x, r24.xyzx, r24.xyzx
        rsq r16.y, r16.x
        mul r25.xyz, r16.yyyy, r24.xyzx
        ftoi r16.y, cb5[r19.w + 6].w
        mul r26.xyz, r23.xyzx, cb5[r17.w + 6].zzzz
        mad r27.xyz, -r26.xyzx, l(0.500000, 0.500000, 0.500000, 0.000000), r24.xyzx
        mad r26.xyz, r26.xyzx, l(0.500000, 0.500000, 0.500000, 0.000000), r24.xyzx
        ftou r16.z, cb5[r16.z + 6].w
        and r16.z, r16.z, l(1)
        ieq r17.x, r16.z, l(0)
        not r17.x, r17.x
        lt r18.x, l(0.000000), cb5[r17.w + 6].z
        and r17.x, r17.x, r18.x
        dp3 r18.x, r27.xyzx, r27.xyzx
        dp3 r18.y, r26.xyzx, r26.xyzx
        sqrt r18.xy, r18.xyxx
        dp3 r19.w, r27.xyzx, r26.xyzx
        mad r18.x, r18.x, r18.y, r19.w
        mad r18.x, r18.x, l(0.500000), l(1.000000)
        div r18.x, l(1.000000, 1.000000, 1.000000, 1.000000), r18.x
        movc r18.x, r17.x, r18.x, l(1.000000)
        lt r18.y, cb5[r21.w + 6].w, l(0.000000)
        if_nz r18.y
          mul r18.y, cb5[r21.x + 6].w, cb5[r21.x + 6].w
          mul r18.y, r16.x, r18.y
          mad r18.y, -r18.y, r18.y, l(1.000000)
          max r18.y, r18.y, l(0.000000)
          add r16.x, r16.x, l(1.000000)
          div r16.x, l(1.000000, 1.000000, 1.000000, 1.000000), r16.x
          and r19.w, r17.x, l(0x3f800000)
          add r20.w, -r16.x, r18.x
          mad r16.x, r19.w, r20.w, r16.x
          mul r18.y, r18.y, r18.y
          mul r16.x, r16.x, r18.y
        else
          mul r26.xyz, r24.xyzx, cb5[r21.x + 6].wwww
          dp3 r18.y, r26.xyzx, r26.xyzx
          min r18.y, r18.y, l(1.000000)
          add r18.y, -r18.y, l(1.000000)
          log r18.y, r18.y
          mul r18.y, r18.y, cb5[r21.w + 6].w
          exp r18.y, r18.y
          mul r16.x, r18.y, r18.x
        endif
        dp3 r18.x, r25.xyzx, -r23.xyzx
        add r18.x, r18.x, -cb5[r17.w + 6].z
        mul_sat r18.x, r18.x, cb5[r17.w + 6].w
        mul r18.x, r18.x, r18.x
        movc r18.x, r16.z, l(1.000000), r18.x
        mul r16.x, r16.x, r18.x
        not r17.x, r17.x
        ige r18.x, r16.y, l(0)
        and r17.x, r17.x, r18.x
        if_nz r17.x
          if_z r16.z
            ishl r17.x, r16.y, l(2)
            mul r23.xyz, r0.yyyy, cb7[r17.x + 33].xywx
            mad r23.xyz, cb7[r17.x + 32].xywx, r0.xxxx, r23.xyzx
            mad r23.xyz, cb7[r17.x + 34].xywx, r0.zzzz, r23.xyzx
            add r23.xyz, r23.xyzx, cb7[r17.x + 35].xywx
            div_sat r18.xy, r23.xyxx, r23.zzzz
            mad r18.xy, r18.xyxx, cb7[r16.y + 0].zwzz, cb7[r16.y + 0].xyxx
          else
            ishl r17.x, r16.y, l(2)
            dp3 r23.x, -r24.xyzx, cb7[r17.x + 32].xyzx
            dp3 r23.y, -r24.xyzx, cb7[r17.x + 33].xyzx
            dp3 r23.z, -r24.xyzx, cb7[r17.x + 34].xyzx
            lt r17.x, |r23.x|, |r23.y|
            and r17.x, r17.x, l(1)
            dp2 r19.w, |r23.xyxx|, icb[r17.x + 0].xyxx
            lt r19.w, r19.w, |r23.z|
            movc r17.x, r19.w, l(2), r17.x
            dp3 r19.w, r23.xyzx, icb[r17.x + 0].xyzx
            lt r19.w, r19.w, l(0.000000)
            bfi r17.x, l(31), l(1), r17.x, r19.w
            ushr r19.w, r17.x, l(1)
            dp3 r19.w, r23.xyzx, icb[r19.w + 0].xyzx
            div r20.w, l(0.000244140625), cb7[r16.y + 0].w
            add r20.w, -r20.w, l(0.500000)
            utof r21.z, r17.x
            ult r21.w, r17.x, l(2)
            and r21.w, r21.w, l(2)
            dp2 r21.w, r23.xzxx, icb[r21.w + 0].xzxx
            mul r21.w, r21.w, icb[r17.x + 4].z
            div r21.w, r21.w, |r19.w|
            mad r21.z, r21.w, r20.w, r21.z
            add r21.z, r21.z, l(0.500000)
            mul_sat r24.x, r21.z, l(0.166666672)
            iadd r21.z, l(-1), icb[r17.x + 4].y
            dp2 r21.z, r23.yzyy, icb[r21.z + 0].xyxx
            mul r17.x, r21.z, icb[r17.x + 4].w
            div r17.x, r17.x, |r19.w|
            mad_sat r24.y, -r17.x, r20.w, l(0.500000)
            mad r18.xy, r24.xyxx, cb7[r16.y + 0].zwzz, cb7[r16.y + 0].xyxx
          endif
          sample_l_indexable(texture2d)(float,float,float,float) r16.y, r18.xyxx, t18.yxzw, s0, l(0.000000)
          mul r16.x, r16.y, r16.x
        endif
        lt r16.x, l(0.000000), r16.x
        if_nz r16.x
          if_z r16.z
            ftoi r16.x, cb5[r21.y + 6].x
          else
            add r21.xzw, r0.xxyz, -cb5[r21.x + 6].xxyz
            lt r23.xyz, |r21.zwwz|, |r21.xxzx|
            and r16.y, r23.y, r23.x
            lt r21.xzw, l(0.000000, 0.000000, 0.000000, 0.000000), r21.xxzw
            ushr r16.z, cb5[r17.w + 6].w, l(24)
            ubfe r18.xy, l(8, 8, 0, 0), l(16, 8, 0, 0), cb5[r17.w + 6].wwww
            movc r16.z, r21.x, r16.z, r18.x
            and r17.x, l(255), cb5[r17.w + 6].w
            movc r17.x, r21.z, r18.y, r17.x
            ubfe r17.w, l(8), l(8), cb5[r21.y + 6].x
            and r18.x, l(255), cb5[r21.y + 6].x
            movc r17.w, r21.w, r17.w, r18.x
            movc r17.x, r23.z, r17.x, r17.w
            movc r16.y, r16.y, r16.z, r17.x
            ilt r16.z, r16.y, l(80)
            movc r16.x, r16.z, r16.y, l(-1)
          endif
          ishl r16.y, r16.x, l(2)
          mad r21.xyz, r25.xyzx, cb6[r16.x + 288].xxxx, r0.xyzx
          mul r16.z, l(5.000000), cb6[r16.x + 288].y
          mad r21.xyz, r7.xyzx, r16.zzzz, r21.xyzx
          mul r23.xyzw, r21.yyyy, cb6[r16.y + 65].xyzw
          mad r23.xyzw, cb6[r16.y + 64].xyzw, r21.xxxx, r23.xyzw
          mad r21.xyzw, cb6[r16.y + 66].xyzw, r21.zzzz, r23.xyzw
          add r21.xyzw, r21.xyzw, cb6[r16.y + 67].xyzw
          div r21.xyz, r21.xyzx, r21.wwww
          ge r23.xyz, l(0.000000, 0.000000, 0.000000, 0.000000), r21.xyzx
          ge r24.xyz, r21.xyzx, l(1.000000, 1.000000, 1.000000, 0.000000)
          add r16.yz, -cb6[r16.x + 344].xxyx, cb6[r16.x + 344].zzwz
          mad r16.yz, r21.xxyx, r16.yyzy, cb6[r16.x + 344].xxyx
          mad r17.xw, r16.yyyz, cb6[400].zzzw, l(0.500000, 0.000000, 0.000000, 0.500000)
          round_ni r17.xw, r17.xxxw
          mad r16.yz, r16.yyzy, cb6[400].zzwz, -r17.xxwx
          add r25.xyzw, r16.yyzz, l(0.500000, 1.000000, 0.500000, 1.000000)
          mul r26.xyzw, r25.xxzz, r25.xxzz
          add r18.xy, -r16.yzyy, l(1.000000, 1.000000, 0.000000, 0.000000)
          min r21.xy, r16.yzyy, l(0.000000, 0.000000, 0.000000, 0.000000)
          max r25.xz, r16.yyzy, l(0.000000, 0.000000, 0.000000, 0.000000)
          mul r27.xy, r18.xyxx, l(0.160000, 0.160000, 0.000000, 0.000000)
          mad r25.xz, -r25.xxzx, r25.xxzx, r25.yywy
          add r25.xz, r25.xxzx, l(1.000000, 0.000000, 1.000000, 0.000000)
          mul r28.xy, r25.xzxx, l(0.160000, 0.160000, 0.000000, 0.000000)
          mul r25.xz, r26.xxzx, l(0.080000, 0.000000, 0.080000, 0.000000)
          mad r16.yz, r26.yywy, l(0.000000, 0.500000, 0.500000, 0.000000), -r16.yyzy
          mul r26.xy, r16.yzyy, l(0.160000, 0.160000, 0.000000, 0.000000)
          mad r16.yz, -r21.xxyx, r21.xxyx, r18.xxyx
          add r16.yz, r16.yyzy, l(0.000000, 1.000000, 1.000000, 0.000000)
          mul r29.xy, r16.yzyy, l(0.160000, 0.160000, 0.000000, 0.000000)
          mul r16.yz, r25.yywy, l(0.000000, 0.160000, 0.160000, 0.000000)
          mov r26.z, r29.x
          mov r26.w, r16.y
          mov r27.z, r28.x
          mov r27.w, r25.x
          add r30.xyzw, r26.zwxz, r27.zwxz
          mov r29.z, r26.y
          mov r29.w, r16.z
          mov r28.z, r27.y
          mov r28.w, r25.z
          add r21.xyw, r28.zyzw, r29.zyzw
          div r25.xyz, r27.xzwx, r30.zwyz
          add r25.xyz, r25.xyzx, l(-2.500000, -0.500000, 1.500000, 0.000000)
          mul r25.xyz, r25.xyzx, cb6[400].xxxx
          div r26.xyz, r28.zywz, r21.xywx
          add r26.xyz, r26.xyzx, l(-2.500000, -0.500000, 1.500000, 0.000000)
          mul r26.xyw, r26.xyxz, cb6[400].yyyy
          mul r27.xyzw, r21.xxxy, r30.zwyz
          mov r25.w, r26.x
          mad r28.xyzw, r17.xwxw, cb6[400].xyxy, r25.xwyw
          sample_c_lz_indexable(texture2d)(float,float,float,float) r16.y, r28.xyxx, t13.xxxx, s3, r21.z
          sample_c_lz_indexable(texture2d)(float,float,float,float) r16.z, r28.zwzz, t13.xxxx, s3, r21.z
          mul r16.z, r16.z, r27.y
          mad r16.y, r27.x, r16.y, r16.z
          mad r18.xy, r17.xwxx, cb6[400].xyxx, r25.zwzz
          sample_c_lz_indexable(texture2d)(float,float,float,float) r16.z, r18.xyxx, t13.xxxx, s3, r21.z
          mad r16.y, r27.z, r16.z, r16.y
          mov r26.z, r25.x
          mad r28.xyzw, r17.xwxw, cb6[400].xyxy, r26.zyzw
          sample_c_lz_indexable(texture2d)(float,float,float,float) r16.z, r28.xyxx, t13.xxxx, s3, r21.z
          mad r16.y, r27.w, r16.z, r16.y
          mul r27.xyzw, r21.yyww, r30.xyzw
          mov r26.xz, r25.yyzy
          mad r25.xyzw, r17.xwxw, cb6[400].xyxy, r26.xyzy
          sample_c_lz_indexable(texture2d)(float,float,float,float) r16.z, r25.xyxx, t13.xxxx, s3, r21.z
          mad r16.y, r27.x, r16.z, r16.y
          sample_c_lz_indexable(texture2d)(float,float,float,float) r16.z, r25.zwzz, t13.xxxx, s3, r21.z
          mad r16.y, r27.y, r16.z, r16.y
          sample_c_lz_indexable(texture2d)(float,float,float,float) r16.z, r28.zwzz, t13.xxxx, s3, r21.z
          mad r16.y, r27.z, r16.z, r16.y
          ige r16.z, r16.x, l(0)
          or r23.xyz, r23.xyzx, r24.xyzx
          or r18.x, r23.y, r23.x
          or r18.x, r23.z, r18.x
          and r18.y, r21.z, l(0x7fffffff)
          ult r18.y, l(0x7f800000), r18.y
          or r18.x, r18.y, r18.x
          mad r23.xyzw, r17.xwxw, cb6[400].xyxy, r26.xwzw
          sample_c_lz_indexable(texture2d)(float,float,float,float) r17.x, r23.xyxx, t13.xxxx, s3, r21.z
          mad r16.y, r27.w, r17.x, r16.y
          mul r17.x, r21.w, r30.y
          sample_c_lz_indexable(texture2d)(float,float,float,float) r17.w, r23.zwzz, t13.xxxx, s3, r21.z
          mad r16.y, r17.x, r17.w, r16.y
          add r16.y, r16.y, l(-1.000000)
          mad r16.x, cb6[r16.x + 288].w, r16.y, l(1.000000)
          movc r16.x, r18.x, l(1.000000), r16.x
          movc r16.x, r16.z, r16.x, l(1.000000)
        else
          mov r16.x, l(1.000000)
        endif
      else
        mov r16.x, l(1.000000)
      endif
      mul r15.w, r15.w, r16.x
      mov r22.xyz, l(0,0,0,0)
    endif
    add r20.xyz, r20.xyzx, r22.xyzx
    mov r17.z, r18.w
  endloop
  mov r11.w, r15.w
  add r19.xyz, r19.xyzx, r20.xyzx
  iadd r12.y, r12.y, l(1)
endloop
add r0.x, l(1.000000), -cb2[0].y
mad r0.z, r0.y, cb0[156].w, cb0[157].w
mad r0.w, r2.w, cb0[154].w, -cb0[153].w
max r0.zw, r0.zzzw, l(0.000000, 0.000000, 0.010000, 0.000000)
mul r1.w, r0.z, l(-1.442695)
exp r1.w, r1.w
add r1.w, -r1.w, l(1.000000)
div r0.z, r1.w, r0.z
mad r1.w, r0.y, cb0[156].w, cb0[158].w
mul r1.w, r1.w, l(1.442695)
exp r1.w, r1.w
mul r0.z, r0.z, r1.w
mul r0.z, r0.z, -r0.w
mul r2.xyz, r0.zzzz, cb0[155].xyzx
mul r2.xyz, r2.xyzx, l(1.442695, 1.442695, 1.442695, 0.000000)
exp r2.xyz, r2.xyzx
dp3 r0.z, -r4.xyzx, cb0[154].xyzx
mad r0.w, cb0[155].w, cb0[155].w, l(1.000000)
dp2 r1.w, r0.zzzz, cb0[155].wwww
add r0.w, r0.w, -r1.w
lt r1.w, l(0.000000), cb0[163].z
if_nz r1.w
  and r10.w, l(7), cb0[108].w
  imad r6.xyz, r10.xywx, l(0x0019660d, 0x0019660d, 0x0019660d, 0), l(0x3c6ef35f, 0x3c6ef35f, 0x3c6ef35f, 0)
  imad r1.w, r6.y, r6.z, r6.x
  imad r3.w, r6.z, r1.w, r6.y
  imad r5.w, r1.w, r3.w, r6.z
  imad r6.x, r3.w, r5.w, r1.w
  dp3 r1.w, -r4.xyzx, -r3.xyzx
  add r3.x, r0.y, -cb0[44].y
  lt r3.y, l(5.960464478E-08), r1.w
  div r1.w, l(1.000000, 1.000000, 1.000000, 1.000000), r1.w
  and r1.w, r1.w, r3.y
  mul r1.w, r1.w, cb0[163].w
  div r3.y, l(1.000000, 1.000000, 1.000000, 1.000000), r2.w
  mul r3.z, r1.w, r3.y
  mad r4.x, r3.z, r3.x, cb0[44].y
  mad r3.x, -r3.z, r3.x, r3.x
  mul r3.z, r3.x, cb0[159].z
  mul r3.x, r3.x, cb0[162].x
  max r3.xz, r3.xxzx, l(-127.000000, 0.000000, -127.000000, 0.000000)
  add r4.y, r4.x, -cb0[159].x
  mul r4.y, r4.y, cb0[159].z
  max r4.y, r4.y, l(-127.000000)
  exp r4.y, -r4.y
  mul r4.y, r4.y, cb0[159].y
  lt r4.z, l(5.960464478E-08), |r3.z|
  exp r6.z, -r3.z
  add r6.z, -r6.z, l(1.000000)
  div r6.z, r6.z, r3.z
  mad r3.z, -r3.z, l(0.240226507), l(0.693147182)
  movc r3.z, r4.z, r6.z, r3.z
  add r4.x, r4.x, -cb0[162].z
  mul r4.x, r4.x, cb0[162].x
  max r4.x, r4.x, l(-127.000000)
  exp r4.x, -r4.x
  mul r4.x, r4.x, cb0[162].y
  lt r4.z, l(5.960464478E-08), |r3.x|
  exp r6.z, -r3.x
  add r6.z, -r6.z, l(1.000000)
  div r6.z, r6.z, r3.x
  mad r3.x, -r3.x, l(0.240226507), l(0.693147182)
  movc r3.x, r4.z, r6.z, r3.x
  mul r3.x, r3.x, r4.x
  mad r3.x, r4.y, r3.z, r3.x
  mad r1.w, -r1.w, r3.y, l(1.000000)
  mul r1.w, r2.w, r1.w
  mul r1.w, r1.w, r3.x
  exp r1.w, -r1.w
  min r1.w, r1.w, l(1.000000)
  max r1.w, r1.w, cb0[161].w
  mad_sat r3.xy, r2.wwww, cb0[160].ywyy, cb0[160].xzxx
  add r1.w, r1.w, r3.x
  add r1.w, r3.y, r1.w
  min r1.w, r1.w, l(1.000000)
  imad r6.y, r5.w, r6.x, r3.w
  ushr r3.xy, r6.xyxx, l(16, 16, 0, 0)
  utof r3.xy, r3.xyxx
  mad r3.xy, r3.xyxx, l(0.0000305180438, 0.0000305180438, 0.000000, 0.000000), l(-1.000000, -1.000000, 0.000000, 0.000000)
  mad r3.xy, r3.xyxx, cb0[167].wwww, r12.zwzz
  mul r3.xy, r3.xyxx, cb0[165].xyxx
  mad r3.w, r10.z, cb0[164].x, cb0[164].y
  log r3.w, r3.w
  mul r3.w, r3.w, cb0[164].z
  div r3.z, r3.w, cb0[163].z
  sample_l_indexable(texture3d)(float,float,float,float) r3.xyzw, r3.xyzx, t5.xyzw, s0, l(0.000000)
  add r4.x, r10.z, -cb0[166].z
  mul_sat r4.x, r4.x, l(1000000.000000)
  add r3.xyzw, r3.xyzw, l(-0.000000, -0.000000, -0.000000, -1.000000)
  mad r3.xyzw, r4.xxxx, r3.xyzw, l(0.000000, 0.000000, 0.000000, 1.000000)
  add r4.x, -r1.w, l(1.000000)
  mul r4.xyz, r4.xxxx, cb0[161].xyzx
  mad r3.xyz, r4.xyzx, r3.wwww, r3.xyzx
  mul r1.w, r1.w, r3.w
else
  add r0.y, r0.y, -cb0[44].y
  mul r3.w, r0.y, cb0[159].z
  max r3.w, r3.w, l(-127.000000)
  mul r0.y, r0.y, cb0[162].x
  max r0.y, r0.y, l(-127.000000)
  add r4.x, cb0[44].y, -cb0[159].x
  mul r4.x, r4.x, cb0[159].z
  max r4.x, r4.x, l(-127.000000)
  exp r4.x, -r4.x
  mul r4.x, r4.x, cb0[159].y
  lt r4.y, l(5.960464478E-08), |r3.w|
  exp r4.z, -r3.w
  add r4.z, -r4.z, l(1.000000)
  div r4.z, r4.z, r3.w
  mad r3.w, -r3.w, l(0.240226507), l(0.693147182)
  movc r3.w, r4.y, r4.z, r3.w
  add r4.y, cb0[44].y, -cb0[162].z
  mul r4.y, r4.y, cb0[162].x
  max r4.y, r4.y, l(-127.000000)
  exp r4.y, -r4.y
  mul r4.y, r4.y, cb0[162].y
  lt r4.z, l(5.960464478E-08), |r0.y|
  exp r5.w, -r0.y
  add r5.w, -r5.w, l(1.000000)
  div r5.w, r5.w, r0.y
  mad r0.y, -r0.y, l(0.240226507), l(0.693147182)
  movc r0.y, r4.z, r5.w, r0.y
  mul r0.y, r0.y, r4.y
  mad r0.y, r4.x, r3.w, r0.y
  mul r0.y, r2.w, r0.y
  exp r0.y, -r0.y
  min r0.y, r0.y, l(1.000000)
  max r0.y, r0.y, cb0[161].w
  mad_sat r4.xy, r2.wwww, cb0[160].ywyy, cb0[160].xzxx
  add r0.y, r0.y, r4.x
  add r0.y, r4.y, r0.y
  min r1.w, r0.y, l(1.000000)
  add r0.y, -r1.w, l(1.000000)
  mul r3.xyz, r0.yyyy, cb0[161].xyzx
endif
// === Glass Fix: Reduce clustered lights and overall brightness ===
lt r35.x, l(0.500000), cb13[14].x
if_nz r35.x
  mul r19.xyz, r19.xyzx, l(0.500000, 0.500000, 0.500000, 0.000000)
  mul r1.xyz, r1.xyzx, l(0.650000, 0.650000, 0.650000, 0.000000)
endif
dp3 r0.y, r1.xyzx, l(0.212672904, 0.715152204, 0.072175, 0.000000)
add r1.xyz, -r0.yyyy, r1.xyzx
mad r1.xyz, cb0[184].wwww, r1.xyzx, r0.yyyy
mul r4.xyz, r5.xyzx, r8.wwww
mad r1.xyz, r1.xyzx, cb0[184].xyzx, r4.xyzx
mad r4.xyz, r19.xyzx, r11.wwww, r11.xyzx
add r1.xyz, r1.xyzx, r4.xyzx
mul r4.xyz, r1.wwww, r2.xyzx
mad r0.y, r0.z, r0.z, l(1.000000)
mul r0.yz, r0.yywy, l(0.000000, 0.0596831031, 12.566371, 0.000000)
mad r5.xyz, cb0[156].xyzx, r0.yyyy, cb0[158].xyzx
mad r0.y, -cb0[155].w, cb0[155].w, l(1.000000)
sqrt r0.w, r0.w
mul r0.z, r0.w, r0.z
max r0.z, r0.z, l(0.001000)
div r0.y, r0.y, r0.z
mad_sat r0.yzw, cb0[157].xxyz, r0.yyyy, r5.xxyz
mul r0.yzw, r0.yyzw, l(0.000000, 255.000000, 255.000000, 255.000000)
add r2.xyz, -r2.xyzx, l(1.000000, 1.000000, 1.000000, 0.000000)
mul r0.yzw, r0.yyzw, r2.xxyz
mad r0.yzw, r0.yyzw, r1.wwww, r3.xxyz
mul r0.yzw, r0.xxxx, r0.yyzw
// === Glass Transparency Fix ===
lt r35.x, l(0.500000), cb13[14].x
if_nz r35.x
  // Boost transmittance: lerp(r4, 1, 0.5)
  add r35.xyz, -r4.xyzx, l(1.000000, 1.000000, 1.000000, 0.000000)
  mad r35.xyz, r35.xyzx, l(0.500000, 0.500000, 0.500000, 0.000000), r4.xyzx
  // Reduce inscatter intensity
  mul r36.xyz, r0.yzwy, l(0.350000, 0.350000, 0.350000, 0.000000)
  // Modified fog blend
  mad r0.yzw, r1.xxyz, r35.xxyz, r36.xxyz
else
  // Original fog blend
  mad r0.yzw, r1.xxyz, r4.xxyz, r0.yyzw
endif
mul r1.xyz, r4.wwww, r0.yzwy
mul r1.w, r0.x, r4.w
min o1.xy, r8.xyxx, l(1.000000, 1.000000, 0.000000, 0.000000)
dp3 r0.x, r1.xyzx, l(0.212672904, 0.715152204, 0.072175, 0.000000)
mul r0.x, r1.w, r0.x
max r0.x, r1.w, r0.x
mul_sat r0.x, r0.x, l(10.000000)
lt r0.x, l(0.500000), r0.x
and o1.z, r0.x, l(0x3f800000)
// === Glass Highlight Compression ===
lt r35.x, l(0.500000), cb13[14].x
if_nz r35.x
  dp3 r35.y, r1.xyzx, l(0.212600, 0.715200, 0.072200, 0.000000)
  lt r35.z, l(0.500000), r35.y
  if_nz r35.z
    add r35.w, r35.y, l(-0.500000)
    mul r35.w, r35.w, l(-0.666667)
    exp r35.w, r35.w
    add r35.w, -r35.w, l(1.000000)
    mad r35.w, r35.w, l(1.500000), l(0.500000)
    max r36.x, r35.y, l(0.001000)
    div r36.x, r35.w, r36.x
    mul r1.xyz, r1.xyzx, r36.xxxx
  endif
endif
mov o0.xyzw, r1.xyzw
mov o1.w, l(0)
ret
// Approximately 0 instruction slots used
