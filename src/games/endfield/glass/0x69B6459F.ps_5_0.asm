//
// Generated by Microsoft (R) D3D Shader Disassembler
//
//   using 3Dmigoto v1.4.1 on Fri Feb  6 19:58:05 2026
//
//
// Input signature:
//
// Name                 Index   Mask Register SysValue  Format   Used
// -------------------- ----- ------ -------- -------- ------- ------
// SV_Position              0   xyzw        0      POS   float   xyz
// TEXCOORD                 0   xy          1     NONE   float   xy
// TEXCOORD                 1     zw        1     NONE   float     zw
// TEXCOORD                 2   xyz         2     NONE   float   xyz
// TEXCOORD                 3   xyzw        3     NONE   float   xyzw
// TEXCOORD                 4   xyzw        4     NONE   float   x
// TEXCOORD                 5   xyz         5     NONE   float   xyz
// TEXCOORD                 6   xyz         6     NONE   float   xyz
// TEXCOORD                 7   x           7     NONE    uint   x
// SV_IsFrontFace           0   x           8    FFACE    uint   x
//
//
// Output signature:
//
// Name                 Index   Mask Register SysValue  Format   Used
// -------------------- ----- ------ -------- -------- ------- ------
// SV_Target                0   xyzw        0   TARGET   float   xyzw
// SV_Target                1   xyzw        1   TARGET   float   xyzw
//
ps_5_0
dcl_globalFlags refactoringAllowed
dcl_immediateConstantBuffer { { 1.000000, 0, 0, 0},
                              { 0, 1.000000, 0, 0},
                              { 0, 0, 1.000000, 0},
                              { 0, 0, 0, 1.000000},
                              { 2, 1, -1.000000, 1.000000},
                              { 2, 1, 1.000000, 1.000000},
                              { 0, 2, 1.000000, -1.000000},
                              { 0, 2, 1.000000, 1.000000},
                              { 0, 1, 1.000000, 1.000000},
                              { 0, 1, -1.000000, 1.000000} }
dcl_constantbuffer CB0[244], immediateIndexed
dcl_constantbuffer CB1[4096], dynamicIndexed
dcl_constantbuffer CB2[24], immediateIndexed
dcl_constantbuffer CB3[259], dynamicIndexed
dcl_constantbuffer CB4[3], immediateIndexed
dcl_constantbuffer CB5[2054], dynamicIndexed
dcl_constantbuffer CB6[715], dynamicIndexed
dcl_constantbuffer CB7[160], dynamicIndexed
dcl_constantbuffer CB13[15], immediateIndexed
dcl_sampler s0, mode_default
dcl_sampler s1, mode_default
dcl_sampler s2, mode_default
dcl_sampler s3, mode_comparison
dcl_sampler s4, mode_default
dcl_sampler s5, mode_default
dcl_sampler s6, mode_default
dcl_resource_structured t0, 4
dcl_resource_texture2darray (float,float,float,float) t1
dcl_resource_texture2d (float,float,float,float) t2
dcl_resource_texture2d (float,float,float,float) t3
dcl_resource_texture2d (float,float,float,float) t4
dcl_resource_texture2d (float,float,float,float) t5
dcl_resource_texture2d (float,float,float,float) t6
dcl_resource_texture2d (float,float,float,float) t7
dcl_resource_texture2d (float,float,float,float) t8
dcl_resource_texture2d (float,float,float,float) t9
dcl_resource_texture2d (float,float,float,float) t10
dcl_resource_texture3d (float,float,float,float) t11
dcl_resource_texture3d (float,float,float,float) t12
dcl_resource_texture3d (float,float,float,float) t13
dcl_resource_texture3d (float,float,float,float) t14
dcl_resource_texture3d (float,float,float,float) t15
dcl_resource_texture3d (float,float,float,float) t16
dcl_resource_texture3d (float,float,float,float) t17
dcl_resource_texture2d (float,float,float,float) t18
dcl_input_ps_siv linear noperspective v0.xyz, position
dcl_input_ps linear v1.xy
dcl_input_ps linear v1.zw
dcl_input_ps linear v2.xyz
dcl_input_ps linear v3.xyzw
dcl_input_ps linear v4.x
dcl_input_ps linear v5.xyz
dcl_input_ps linear v6.xyz
dcl_input_ps constant v7.x
dcl_input_ps_sgv constant v8.x, is_front_face
dcl_output o0.xyzw
dcl_output o1.xyzw
dcl_temps 43
ishl r0.x, v7.x, l(4)
max r0.y, cb1[r0.x + 4].z, cb1[r0.x + 4].y
dp2 r0.z, v0.xyxx, l(0.0671105608, 0.00583714992, 0.000000, 0.000000)
frc r0.z, r0.z
mul r0.z, r0.z, l(52.982918)
frc r0.z, r0.z
ge r0.w, cb1[r0.x + 4].x, l(0.000000)
movc r0.w, r0.w, r0.z, -r0.z
add r0.w, -r0.w, cb1[r0.x + 4].x
add r0.z, -r0.y, -r0.z
add r0.z, r0.z, l(1.000000)
min r0.z, r0.z, r0.w
lt r0.z, r0.z, l(0.000000)
discard_nz r0.z
mul r0.zw, v0.xxxy, cb0[82].zzzw
mad r1.xy, r0.zwzz, l(2.000000, 2.000000, 0.000000, 0.000000), l(-1.000000, -1.000000, 0.000000, 0.000000)
mul r2.xyzw, -r1.yyyy, cb0[25].xyzw
mad r1.xyzw, cb0[24].xyzw, r1.xxxx, r2.xyzw
mad r1.xyzw, cb0[26].xyzw, v0.zzzz, r1.xyzw
add r1.xyzw, r1.xyzw, cb0[27].xyzw
div r1.xyz, r1.xyzx, r1.wwww
lt r2.x, l(0.000000), v3.w
movc r2.x, r2.x, l(1.000000), l(-1.000000)
eq r2.y, l(0.000000), cb0[86].w
add r3.xyz, -r1.xyzx, cb0[44].xyzx
mov r4.x, cb0[0].z
mov r4.y, cb0[1].z
mov r4.z, cb0[2].z
movc r2.yzw, r2.yyyy, r3.xxyz, r4.xxyz
dp3 r3.x, r2.yzwy, r2.yzwy
max r3.y, r3.x, l(9.999999939E-09)
rsq r3.y, r3.y
mul r5.xyz, r2.yzwy, r3.yyyy
mul r3.x, r3.y, r3.x
add r3.zw, -v1.xxxy, v1.zzzw
mad r6.xy, cb2[2].wwww, r3.zwzz, v1.xyxx
mad r6.xy, r6.xyxx, cb2[11].xyxx, cb2[11].zwzz
sample_b_indexable(texture2d)(float,float,float,float) r6.xyzw, r6.xyxx, t2.xyzw, s4, cb0[108].x
mad r3.zw, cb2[3].xxxx, r3.zzzw, v1.xxxy
mad r3.zw, r3.zzzw, cb2[12].xxxy, cb2[12].zzzw
add r4.w, cb0[108].x, cb2[3].y
sample_b_indexable(texture2d)(float,float,float,float) r7.xyzw, r3.zwzz, t3.xyzw, s5, r4.w
mad r3.zw, r7.xxxy, l(0.000000, 0.000000, 2.000000, 2.000000), l(0.000000, 0.000000, -1.000000, -1.000000)
lt r7.xy, |r3.zwzz|, l(0.012000, 0.012000, 0.000000, 0.000000)
movc r3.zw, r7.xxxy, l(0,0,0,0), r3.zzzw
mul r7.xy, r3.zwzz, cb2[0].xxxx
add r8.xy, -r6.wwww, r7.wzww
mad r4.w, cb2[1].z, r8.x, r6.w
mul r4.w, r4.w, cb2[8].w
mad r5.w, r4.w, v4.x, -r4.w
mad r9.w, cb2[23].x, r5.w, r4.w
add r4.w, -cb2[0].z, cb2[0].w
mad r10.w, r7.z, r4.w, cb2[0].z
add_sat r4.w, l(-1.000000), cb2[3].w
add r5.w, -r6.w, cb2[4].y
mad r4.w, r4.w, r5.w, r6.w
mov_sat r5.w, cb2[21].y
add_sat r8.xz, l(-1.000000, 0.000000, -2.000000, 0.000000), cb2[21].yyyy
mad r6.w, r8.x, r8.y, r6.w
add r7.z, -r6.w, r7.w
mad r6.w, r8.z, r7.z, r6.w
add r6.w, r6.w, l(-1.000000)
mad r6.w, r5.w, r6.w, l(1.000000)
mad_sat r6.w, r6.w, l(1.11111116), l(-0.0555555597)
ge r7.z, r6.w, l(0.100000)
and r7.z, r7.z, l(0x3f800000)
mul r8.x, r7.z, cb1[r0.x + 15].w
mul r6.xyz, r6.xyzx, cb2[8].xyzx
mul_sat r6.xyz, r6.xyzx, cb2[4].zzzz
add r8.yzw, -r6.xxyz, cb2[8].xxyz
mad r6.xyz, cb2[4].xxxx, r8.yzwy, r6.xyzx
mad r7.z, -cb1[r0.x + 15].w, r7.z, l(1.000000)
mad r8.xyz, cb1[r0.x + 15].xyzx, r8.xxxx, r7.zzzz
mul r11.xyz, r6.xyzx, r8.xyzx
mul r12.xyz, v2.zxyz, v3.yzxy
mad r12.xyz, v2.yzxy, v3.zxyz, -r12.xyzx
mul r12.xyz, r2.xxxx, r12.xyzx
mul r12.xyz, r7.yyyy, r12.xyzx
mad r7.xyz, v3.xyzx, r7.xxxx, r12.xyzx
dp2 r2.x, r3.zwzz, r3.zwzz
add r2.x, -r2.x, l(1.000000)
max r2.x, r2.x, l(0.000000)
sqrt r2.x, r2.x
lt r3.z, l(0.000000), cb2[1].w
movc r3.z, r3.z, l(-1.000000), l(1.000000)
movc r3.z, v8.x, l(1.000000), r3.z
mul r2.x, r2.x, r3.z
mad r7.xyz, v2.xyzx, r2.xxxx, r7.xyzx
dp3 r2.x, r7.xyzx, r7.xyzx
rsq r2.x, r2.x
mul r12.xyz, r2.xxxx, r7.xyzx
dp3 r2.x, -r5.xyzx, r12.xyzx
mul r3.z, cb2[22].x, cb2[22].x
mad r3.w, -r2.x, r2.x, l(1.000000)
mad r3.z, -r3.z, r3.w, l(1.000000)
sqrt r3.w, r3.z
mad r3.w, cb2[22].x, r2.x, r3.w
ge r3.z, r3.z, l(0.000000)
mul r7.xyz, r12.xyzx, r3.wwww
mad r7.xyz, cb2[22].xxxx, -r5.xyzx, -r7.xyzx
and r7.xyz, r3.zzzz, r7.xyzx
mul r3.zw, r7.yyyy, cb0[1].xxxy
mad r3.zw, cb0[0].xxxy, r7.xxxx, r3.zzzw
mad r3.zw, cb0[2].xxxy, r7.zzzz, r3.zzzw
mul r3.zw, r3.zzzw, cb2[22].yyyy
mad r0.zw, r3.zzzw, r9.wwww, r0.zzzw
sample_b_indexable(texture2d)(float,float,float,float) r7.xyz, r0.zwzz, t4.xyzw, s6, cb0[108].x
max r0.z, v5.z, l(9.999999939E-09)
div r0.zw, v5.xxxy, r0.zzzz
max r3.z, v6.z, l(9.999999939E-09)
div r3.zw, v6.xxxy, r3.zzzz
add r13.xy, r0.zwzz, -r3.zwzz
mul r0.z, l(0.080000), cb2[0].y
mul r14.xyz, r4.wwww, r11.xyzx
mad r14.xyz, r6.xyzx, r8.xyzx, -r14.xyzx
mad r0.z, -r0.z, r4.w, r0.z
mad r15.xyz, r11.xyzx, r4.wwww, r0.zzzz
dp3 r0.z, r12.xyzx, r5.xyzx
mad r16.xyzw, r10.wwww, l(-1.000000, -0.027500, -0.572000, 0.022000), l(1.000000, 0.042500, 1.040000, -0.040000)
mul r0.w, r16.x, r16.x
max r0.z, r0.z, l(0.000000)
mul r3.z, r0.z, l(-9.280000)
exp r3.z, r3.z
min r0.w, r0.w, r3.z
mad r0.w, r0.w, r16.x, r16.y
mad r3.zw, r0.wwww, l(0.000000, 0.000000, -1.040000, 1.040000), r16.zzzw
eq r0.w, l(1.000000), cb0[113].y
mul r16.xyzw, r1.yyyy, cb0[241].xyzw
mad r16.xyzw, cb0[240].xyzw, r1.xxxx, r16.xyzw
mad r16.xyzw, cb0[242].xyzw, r1.zzzz, r16.xyzw
add r16.xyzw, r16.xyzw, cb0[243].xyzw
div r4.w, l(1.000000, 1.000000, 1.000000, 1.000000), r16.w
mul r16.xyz, r16.xyzx, l(1.000000, -1.000000, 1.000000, 0.000000)
mul r16.xyz, r4.wwww, r16.xyzx
mad_sat r16.xy, r16.xyxx, l(0.500000, 0.500000, 0.000000, 0.000000), l(0.500000, 0.500000, 0.000000, 0.000000)
mul r16.xy, r16.xyxx, cb0[82].xyxx
ftou r17.xy, r16.xyxx
mad r4.w, cb0[84].z, r16.z, cb0[84].w
div r17.z, l(1.000000, 1.000000, 1.000000, 1.000000), r4.w
ftou r16.xy, v0.xyxx
mul r4.w, r1.y, cb0[1].z
mad r4.w, cb0[0].z, r1.x, r4.w
mad r4.w, cb0[2].z, r1.z, r4.w
add r4.w, r4.w, cb0[3].z
mov r16.z, |r4.w|
movc r16.xyz, r0.wwww, r17.xyzx, r16.xyzx
mad r17.xyz, r12.xyzx, l(0.250000, 0.250000, 0.250000, 0.000000), r1.xyzx
mad r18.xyz, cb0[6].xzyx, -cb0[212].wwww, cb0[210].xzyx
add r18.xyz, r17.xzyx, -r18.xyzx
max r0.w, |r18.y|, |r18.x|
add r0.w, r0.w, l(-464.000000)
mul_sat r0.w, r0.w, l(0.031250)
add r4.w, |r18.z|, l(-208.000000)
mul_sat r4.w, r4.w, l(0.031250)
max r0.w, r0.w, r4.w
ne r4.w, l(0.000000), cb0[210].w
lt r8.w, r0.w, l(1.000000)
and r4.w, r4.w, r8.w
if_nz r4.w
  mad r18.xyz, cb0[6].xzyx, -cb0[212].yyyy, cb0[210].xzyx
  add r18.xyz, r17.xzyx, -r18.xyzx
  max r4.w, |r18.y|, |r18.x|
  add r4.w, r4.w, l(-29.000000)
  mul_sat r4.w, r4.w, l(0.500000)
  add r8.w, |r18.z|, l(-13.000000)
  mul_sat r8.w, r8.w, l(0.500000)
  max r4.w, r4.w, r8.w
  lt r8.w, r4.w, l(1.000000)
  if_nz r8.w
    mad r18.xyz, r17.xyzx, l(2.000000, 2.000000, 2.000000, 0.000000), l(0.500000, 0.500000, 0.500000, 0.000000)
    mul r19.xyz, r18.xyzx, cb0[211].xyzx
    round_ni r19.xyz, r19.xyzx
    mad r18.xyz, r18.xyzx, cb0[211].xyzx, -r19.xyzx
    sample_l_indexable(texture3d)(float,float,float,float) r19.xyw, r18.xyzx, t11.yzwx, s1, l(0.000000)
    add r8.w, -r4.w, l(1.000000)
    mul r11.w, l(0.500000), cb0[211].y
    mad r13.w, -cb0[211].y, l(0.500000), l(1.000000)
    max r11.w, r11.w, r18.y
    min r11.w, r13.w, r11.w
    mul r18.w, r11.w, l(0.333333343)
    sample_l_indexable(texture3d)(float,float,float,float) r20.xyzw, r18.xwzx, t12.xyzw, s0, l(0.000000)
    mad r11.w, r20.w, r8.w, r0.w
    add r21.xyz, r18.xwzx, l(0.000000, 0.666666687, 0.000000, 0.000000)
    sample_l_indexable(texture3d)(float,float,float,float) r21.xyz, r21.xyzx, t12.xyzw, s0, l(0.000000)
    mad r21.xyz, r21.xyzx, l(4.000000, 4.000000, 4.000000, 0.000000), l(-2.000000, -2.000000, -2.000000, 0.000000)
    mul r21.xyz, r19.yyyy, r21.xyzx
    mov r21.w, r19.y
    mul r21.xyzw, r8.wwww, r21.xyzw
    add r18.xyz, r18.xwzx, l(0.000000, 0.333333343, 0.000000, 0.000000)
    sample_l_indexable(texture3d)(float,float,float,float) r18.xyz, r18.xyzx, t12.xyzw, s0, l(0.000000)
    mad r18.xyz, r18.xyzx, l(4.000000, 4.000000, 4.000000, 0.000000), l(-2.000000, -2.000000, -2.000000, 0.000000)
    mul r18.xyz, r19.xxxx, r18.xyzx
    mov r18.w, r19.x
    mul r18.xyzw, r8.wwww, r18.xyzw
    mad r20.xyz, r20.xyzx, l(4.000000, 4.000000, 4.000000, 0.000000), l(-2.000000, -2.000000, -2.000000, 0.000000)
    mul r19.xyz, r19.wwww, r20.xyzx
    mul r19.xyzw, r8.wwww, r19.xyzw
  else
    mov r21.xyzw, l(0,0,0,0)
    mov r18.xyzw, l(0,0,0,0)
    mov r19.xyzw, l(0,0,0,0)
    mov r11.w, r0.w
  endif
  mad r20.xyz, cb0[6].xzyx, -cb0[212].zzzz, cb0[210].xzyx
  add r20.xyz, r17.xzyx, -r20.xyzx
  max r8.w, |r20.y|, |r20.x|
  add r8.w, r8.w, l(-116.000000)
  mul_sat r8.w, r8.w, l(0.125000)
  add r13.w, |r20.z|, l(-52.000000)
  mul_sat r13.w, r13.w, l(0.125000)
  max r8.w, r8.w, r13.w
  lt r13.w, r8.w, l(1.000000)
  if_nz r13.w
    mad r20.xyz, r17.xyzx, l(0.500000, 0.500000, 0.500000, 0.000000), l(0.500000, 0.500000, 0.500000, 0.000000)
    mul r22.xyz, r20.xyzx, cb0[211].xyzx
    round_ni r22.xyz, r22.xyzx
    mad r20.xyz, r20.xyzx, cb0[211].xyzx, -r22.xyzx
    sample_l_indexable(texture3d)(float,float,float,float) r22.xyw, r20.xyzx, t13.yzwx, s1, l(0.000000)
    add r13.w, -r8.w, l(1.000000)
    mul r4.w, r4.w, r13.w
    mul r13.w, l(0.500000), cb0[211].y
    mad r14.w, -cb0[211].y, l(0.500000), l(1.000000)
    max r13.w, r13.w, r20.y
    min r13.w, r14.w, r13.w
    mul r20.w, r13.w, l(0.333333343)
    sample_l_indexable(texture3d)(float,float,float,float) r23.xyzw, r20.xwzx, t14.xyzw, s0, l(0.000000)
    mad r11.w, r23.w, r4.w, r11.w
    add r24.xyz, r20.xwzx, l(0.000000, 0.666666687, 0.000000, 0.000000)
    sample_l_indexable(texture3d)(float,float,float,float) r24.xyz, r24.xyzx, t14.xyzw, s0, l(0.000000)
    mad r24.xyz, r24.xyzx, l(4.000000, 4.000000, 4.000000, 0.000000), l(-2.000000, -2.000000, -2.000000, 0.000000)
    mul r24.xyz, r22.yyyy, r24.xyzx
    mov r24.w, r22.y
    mad r21.xyzw, r24.xyzw, r4.wwww, r21.xyzw
    add r20.xyz, r20.xwzx, l(0.000000, 0.333333343, 0.000000, 0.000000)
    sample_l_indexable(texture3d)(float,float,float,float) r20.xyz, r20.xyzx, t14.xyzw, s0, l(0.000000)
    mad r20.xyz, r20.xyzx, l(4.000000, 4.000000, 4.000000, 0.000000), l(-2.000000, -2.000000, -2.000000, 0.000000)
    mul r20.xyz, r22.xxxx, r20.xyzx
    mov r20.w, r22.x
    mad r18.xyzw, r20.xyzw, r4.wwww, r18.xyzw
    mad r20.xyz, r23.xyzx, l(4.000000, 4.000000, 4.000000, 0.000000), l(-2.000000, -2.000000, -2.000000, 0.000000)
    mul r22.xyz, r22.wwww, r20.xyzx
    mad r19.xyzw, r22.xyzw, r4.wwww, r19.xyzw
  endif
  lt r4.w, l(0.000000), r8.w
  if_nz r4.w
    mad r17.xyz, r17.xyzx, l(0.125000, 0.125000, 0.125000, 0.000000), l(0.500000, 0.500000, 0.500000, 0.000000)
    mul r20.xyz, r17.xyzx, cb0[211].xyzx
    mul r22.xyz, l(0.500000, 0.500000, 0.500000, 0.000000), cb0[211].xyzx
    round_ni r20.xyz, r20.xyzx
    mad r17.xyz, r17.xyzx, cb0[211].xyzx, -r20.xyzx
    mad r20.xyz, -cb0[211].xyzx, l(0.500000, 0.500000, 0.500000, 0.000000), l(1.000000, 1.000000, 1.000000, 0.000000)
    max r17.xyz, r22.xyzx, r17.xyzx
    min r17.xyz, r20.xyzx, r17.xyzx
    sample_l_indexable(texture3d)(float,float,float,float) r23.xyw, r17.xyzx, t15.yzwx, s1, l(0.000000)
    add r4.w, -r0.w, l(1.000000)
    mul r4.w, r4.w, r8.w
    max r8.w, r22.y, r17.y
    min r8.w, r20.y, r8.w
    mul r17.w, r8.w, l(0.333333343)
    sample_l_indexable(texture3d)(float,float,float,float) r20.xyzw, r17.xwzx, t16.xyzw, s0, l(0.000000)
    add r22.xyz, r17.xwzx, l(0.000000, 0.666666687, 0.000000, 0.000000)
    sample_l_indexable(texture3d)(float,float,float,float) r22.xyz, r22.xyzx, t16.xyzw, s0, l(0.000000)
    mad r22.xyz, r22.xyzx, l(4.000000, 4.000000, 4.000000, 0.000000), l(-2.000000, -2.000000, -2.000000, 0.000000)
    mul r22.xyz, r23.yyyy, r22.xyzx
    mov r22.w, r23.y
    mad r21.xyzw, r22.xyzw, r4.wwww, r21.xyzw
    add r17.xyz, r17.xwzx, l(0.000000, 0.333333343, 0.000000, 0.000000)
    sample_l_indexable(texture3d)(float,float,float,float) r17.xyz, r17.xyzx, t16.xyzw, s0, l(0.000000)
    mad r17.xyz, r17.xyzx, l(4.000000, 4.000000, 4.000000, 0.000000), l(-2.000000, -2.000000, -2.000000, 0.000000)
    mul r17.xyz, r23.xxxx, r17.xyzx
    mov r17.w, r23.x
    mad r18.xyzw, r17.xyzw, r4.wwww, r18.xyzw
    mad r17.xyz, r20.xyzx, l(4.000000, 4.000000, 4.000000, 0.000000), l(-2.000000, -2.000000, -2.000000, 0.000000)
    mul r23.xyz, r23.wwww, r17.xyzx
    mad r19.xyzw, r23.xyzw, r4.wwww, r19.xyzw
    mad r11.w, r20.w, r4.w, r11.w
  endif
  mad_sat r4.w, r11.w, l(2.000000), l(-1.000000)
  add r17.x, -r0.w, r4.w
  add r0.w, r0.w, r4.w
  mul r17.y, r0.w, l(0.500000)
else
  mov r21.xyzw, l(0,0,0,0)
  mov r18.xyzw, l(0,0,0,0)
  mov r19.xyzw, l(0,0,0,0)
  mov r17.xy, l(0,1.000000,0,0)
endif
mul r20.xyzw, r17.yyyx, cb0[213].xyzw
mad r20.y, r20.w, l(0.500000), r20.y
mul r17.zw, r17.yyyx, cb0[213].wwwy
mad r20.w, r17.w, l(0.375000), r17.z
add r19.xyzw, r19.xyzw, r20.xyzw
mul r20.xyzw, r17.yyyx, cb0[214].xyzw
mad r20.y, r20.w, l(0.500000), r20.y
mul r17.zw, r17.yyyx, cb0[214].wwwy
mad r20.w, r17.w, l(0.375000), r17.z
add r18.xyzw, r18.xyzw, r20.xyzw
mul r20.xyzw, r17.yyyx, cb0[215].xyzw
mad r20.y, r20.w, l(0.500000), r20.y
mul r17.xy, r17.yxyy, cb0[215].wyww
mad r20.w, r17.y, l(0.375000), r17.x
add r17.xyzw, r20.xyzw, r21.xyzw
dp3 r0.w, r19.xyzx, r12.xyzx
add r0.w, r19.w, r0.w
max r19.x, r0.w, l(0.000000)
dp3 r0.w, r18.xyzx, r12.xyzx
add r0.w, r18.w, r0.w
max r19.y, r0.w, l(0.000000)
dp3 r0.w, r17.xyzx, r12.xyzx
add r0.w, r17.w, r0.w
max r19.z, r0.w, l(0.000000)
add r0.w, r2.x, r2.x
mad r17.xyz, r12.xyzx, -r0.wwww, -r5.xyzx
add r0.w, l(-1.000000), cb0[113].x
max r2.x, r10.w, l(0.001000)
log r2.x, r2.x
mad r2.x, -r2.x, l(1.200000), l(1.000000)
add r0.w, r0.w, -r2.x
utof r18.xy, r16.xyxx
mul r18.zw, r18.xxxy, cb3[0].wwww
round_ni r18.zw, r18.zzzw
add r2.x, r16.z, -cb3[2].y
round_ni r2.x, r2.x
add r4.w, l(-1.000000), cb3[1].x
max r8.w, r2.x, l(0.000000)
min r4.w, r4.w, r8.w
ge r2.x, r4.w, r2.x
mad r8.w, r18.w, cb3[0].x, r18.z
ftoi r8.w, r8.w
iadd r8.w, r8.w, cb0[110].z
ld_structured_indexable(structured_buffer, stride=4)(mixed,mixed,mixed,mixed) r8.w, r8.w, l(0), t0.xxxx
ftoi r4.w, r4.w
iadd r4.w, r4.w, cb0[110].w
ld_structured_indexable(structured_buffer, stride=4)(mixed,mixed,mixed,mixed) r4.w, r4.w, l(0), t0.xxxx
and r4.w, r4.w, r8.w
and r2.x, r2.x, r4.w
mul r20.xyz, r19.xyzx, cb0[111].xxxx
dp3 r4.w, r20.xyzx, l(0.212672904, 0.715152204, 0.072175, 0.000000)
mov r1.w, l(1.000000)
mov r12.w, l(1.000000)
mov r20.xyz, l(0,0,0,0)
mov r8.w, l(1.000000)
mov r11.w, r2.x
mov r13.w, l(0)
loop
  lt r14.w, l(0.010000), r8.w
  ine r15.w, r11.w, l(0)
  and r15.w, r14.w, r15.w
  if_nz r15.w
    firstbit_lo r15.w, r11.w
    ishl r17.w, l(1), r15.w
    xor r11.w, r11.w, r17.w
    ishl r15.w, r15.w, l(3)
    dp4 r21.x, cb3[r15.w + 6].xyzw, r1.xyzw
    dp4 r21.y, cb3[r15.w + 7].xyzw, r1.xyzw
    dp4 r21.z, cb3[r15.w + 8].xyzw, r1.xyzw
    ge r22.xyz, cb3[r15.w + 5].xyzx, |r21.xyzx|
    and r17.w, r22.y, r22.x
    and r17.w, r22.z, r17.w
    if_nz r17.w
      mul r17.w, l(0.100000), cb3[r15.w + 5].x
      mul r22.xyz, |r21.xyzx|, l(0.100000, 0.100000, 0.100000, 0.000000)
      mul r18.zw, r22.xxxy, r22.xxxy
      add r22.xyw, -|r21.xyxz|, cb3[r15.w + 5].xyxz
      mul r22.xyw, r22.xyxw, cb3[r15.w + 9].xyxz
      eq r19.w, l(1.000000), cb3[r15.w + 10].x
      if_nz r19.w
        dp3 r23.x, cb3[r15.w + 6].xyzx, r17.xyzx
        dp3 r23.y, cb3[r15.w + 7].xyzx, r17.xyzx
        dp3 r23.z, cb3[r15.w + 8].xyzx, r17.xyzx
        add r24.xyz, -r21.xyzx, cb3[r15.w + 5].xyzx
        div r24.xyz, r24.xyzx, r23.xyzx
        add r25.xyz, -r21.xyzx, -cb3[r15.w + 5].xyzx
        div r25.xyz, r25.xyzx, r23.xyzx
        lt r26.xyz, l(0.000000, 0.000000, 0.000000, 0.000000), r23.xyzx
        movc r24.xyz, r26.xyzx, r24.xyzx, r25.xyzx
        min r19.w, r24.y, r24.x
        min r19.w, r24.z, r19.w
        mad r21.xyz, r23.xyzx, r19.wwww, r21.xyzx
      else
        mov r21.xyz, r17.xyzx
      endif
      dp3 r19.w, r21.xyzx, r21.xyzx
      rsq r19.w, r19.w
      mul r21.xyz, r19.wwww, r21.xyzx
      lt r23.xyz, l(0.000000, 0.000000, 0.000000, 0.000000), r21.xyzx
      lt r24.xyz, r21.xyzx, l(0.000000, 0.000000, 0.000000, 0.000000)
      iadd r23.xyz, -r23.xyzx, r24.xyzx
      itof r23.xyz, r23.xyzx
      dp3 r19.w, r21.xyzx, r23.xyzx
      div r21.xyz, r21.xyzx, r19.wwww
      lt r19.w, r21.z, l(0.000000)
      add r21.zw, -|r21.yyyx|, l(0.000000, 0.000000, 1.000000, 1.000000)
      mul r21.zw, r21.zzzw, r23.xxxy
      movc r21.xy, r19.wwww, r21.zwzz, r21.xyxx
      dp4 r19.w, cb3[r15.w + 4].xyzw, r12.xyzw
      max r19.w, r19.w, l(0.000000)
      max r19.w, r19.w, l(0.000100)
      min r20.w, r22.w, r22.y
      min r20.w, r20.w, r22.x
      add r18.z, r18.w, r18.z
      mad r18.z, r22.z, r22.z, r18.z
      mad r17.w, r17.w, r17.w, -r18.z
      mul r17.w, r17.w, cb3[r15.w + 9].x
      mul r17.w, r17.w, cb3[r15.w + 9].x
      add r18.z, l(1.000000), -cb3[r15.w + 10].y
      mul r17.w, r17.w, r18.z
      mul r17.w, r17.w, l(100.000000)
      mad_sat r17.w, r20.w, cb3[r15.w + 10].y, r17.w
      mul r18.z, r17.w, cb3[r15.w + 10].w
      mad r21.xy, r21.xyxx, l(0.500000, 0.500000, 0.000000, 0.000000), l(0.500000, 0.500000, 0.000000, 0.000000)
      mad r21.xy, r21.xyxx, cb3[1].wwww, cb3[2].wwww
      mov r21.z, cb3[r15.w + 5].w
      sample_l_indexable(texture2darray)(float,float,float,float) r21.xyz, r21.xyzx, t1.xyzw, s2, r0.w
      mul r21.xyz, r21.xyzx, cb3[r15.w + 9].wwww
      div r18.w, r4.w, r19.w
      min r18.w, |r18.w|, l(1.000000)
      mad r18.w, r18.w, l(2.000000), r4.w
      add r19.w, r19.w, l(2.000000)
      div r18.w, r18.w, r19.w
      add r18.w, r18.w, l(-1.000000)
      mad r18.w, r18.w, cb0[112].w, l(1.000000)
      mul r21.xyz, r18.wwww, r21.xyzx
      mul r21.xyz, r18.zzzz, r21.xyzx
      mad r20.xyz, r21.xyzx, r8.wwww, r20.xyzx
      mad r15.w, -r17.w, cb3[r15.w + 10].w, l(1.000000)
      mul r8.w, r8.w, r15.w
    endif
    mov r13.w, l(-1)
    continue
  else
    mov r13.w, r14.w
    break
  endif
  mov r13.w, r14.w
endloop
if_nz r13.w
  dp3 r1.w, r17.xyzx, r17.xyzx
  rsq r1.w, r1.w
  mul r21.xyz, r1.wwww, r17.xyzx
  lt r22.xyz, l(0.000000, 0.000000, 0.000000, 0.000000), r21.xyzx
  lt r23.xyz, r21.xyzx, l(0.000000, 0.000000, 0.000000, 0.000000)
  iadd r22.xyz, -r22.xyzx, r23.xyzx
  itof r22.xyz, r22.xyzx
  dp3 r1.w, r21.xyzx, r22.xyzx
  div r21.xyz, r21.xyzx, r1.wwww
  lt r1.w, r21.z, l(0.000000)
  add r18.zw, -|r21.yyyx|, l(0.000000, 0.000000, 1.000000, 1.000000)
  mul r18.zw, r18.zzzw, r22.xxxy
  movc r18.zw, r1.wwww, r18.zzzw, r21.xxxy
  mov r12.w, l(1.000000)
  dp4 r1.w, cb3[3].xyzw, r12.xyzw
  max r1.w, r1.w, l(0.000000)
  max r1.w, r1.w, l(0.000100)
  mad r18.zw, r18.zzzw, l(0.000000, 0.000000, 0.500000, 0.500000), l(0.000000, 0.000000, 0.500000, 0.500000)
  mad r21.xy, r18.zwzz, cb3[1].wwww, cb3[2].wwww
  mov r21.z, l(0)
  sample_l_indexable(texture2darray)(float,float,float,float) r21.xyz, r21.xyzx, t1.xyzw, s2, r0.w
  div r0.w, r4.w, r1.w
  min r0.w, |r0.w|, l(1.000000)
  mad r0.w, r0.w, l(2.000000), r4.w
  add r1.w, r1.w, l(2.000000)
  div r0.w, r0.w, r1.w
  add r0.w, r0.w, l(-1.000000)
  mad r0.w, r0.w, cb0[112].w, l(1.000000)
  mul r21.xyz, r0.wwww, r21.xyzx
  mad r20.xyz, r21.xyzx, r8.wwww, r20.xyzx
endif
mul r19.xyz, r14.xyzx, r19.xyzx
add r0.w, r7.w, l(-1.000000)
mad r0.w, cb2[1].x, r0.w, l(1.000000)
mul r19.xyz, r0.wwww, r19.xyzx
mul r20.xyz, r20.xyzx, cb0[112].zzzz
// === Glass Fix: Reduce reflection probe intensity ===
lt r40.x, l(0.500000), cb13[13].z
if_nz r40.x
  mul r20.xyz, r20.xyzx, l(0.400000, 0.400000, 0.400000, 0.000000)
endif
mul r20.xyz, r20.xyzx, cb0[111].yyyy
mul_sat r0.w, r15.y, l(50.000000)
mul r0.w, r3.w, r0.w
mad r21.xyz, r15.xyzx, r3.zzzz, r0.wwww
mul r20.xyz, r20.xyzx, r21.xyzx
mad r19.xyz, r19.xyzx, cb0[111].xxxx, r20.xyzx
lt r0.w, cb6[35].w, l(0.990000)
if_nz r0.w
  ftoi r0.w, cb6[35].x
  ieq r1.w, r0.w, l(2)
  movc r20.xyz, r1.wwww, cb6[20].xyzx, cb0[44].xyzx
  add r20.xyz, r1.xyzx, -r20.xyzx
  dp3 r1.w, r20.xyzx, r20.xyzx
  add r1.w, -r1.w, cb6[34].w
  mul_sat r1.w, r1.w, cb6[34].z
  lt r2.x, l(0.000000), r1.w
  if_nz r2.x
    ilt r0.w, l(0), r0.w
    if_nz r0.w
      add r20.xyz, r1.xyzx, -cb6[20].xyzx
      add r21.xyz, r1.xyzx, -cb6[21].xyzx
      add r22.xyz, r1.xyzx, -cb6[22].xyzx
      add r23.xyz, r1.xyzx, -cb6[23].xyzx
      dp3 r20.x, r20.xyzx, r20.xyzx
      dp3 r20.y, r21.xyzx, r21.xyzx
      dp3 r20.z, r22.xyzx, r22.xyzx
      dp3 r20.w, r23.xyzx, r23.xyzx
      lt r21.x, r20.x, cb6[20].w
      lt r21.y, r20.y, cb6[21].w
      lt r21.z, r20.z, cb6[22].w
      lt r21.w, r20.w, cb6[23].w
      and r22.xyzw, r21.xyzw, l(0x3f800000, 0x3f800000, 0x3f800000, 0x3f800000)
      movc r21.xyz, r21.xyzx, l(-1.000000,-1.000000,-1.000000,0), l(-0.000000,-0.000000,-0.000000,0)
      add r21.xyz, r21.xyzx, r22.yzwy
      max r22.yzw, r21.xxyz, l(0.000000, 0.000000, 0.000000, 0.000000)
      dp4 r0.w, r22.xyzw, l(4.000000, 3.000000, 2.000000, 1.000000)
      add r0.w, -r0.w, l(4.000000)
      max r0.w, r0.w, l(0.000000)
      min r0.w, r0.w, l(3.000000)
      add r2.x, r0.w, l(1.000000)
      min r2.x, r2.x, l(3.000000)
      ftou r2.x, r2.x
      dp3 r3.z, r20.yzwy, icb[r2.x + 0].yzwy
      div r2.x, r3.z, cb6[r2.x + 20].w
      ge r3.z, r2.x, l(0.000000)
      ge r2.x, l(1.000000), r2.x
      and r2.x, r2.x, r3.z
      if_nz r2.x
        ftou r2.x, r0.w
        add r3.zw, r18.xxxy, l(0.000000, 0.000000, 2.083000, 4.867000)
        dp2 r3.z, r3.zwzz, l(0.0671105608, 0.00583714992, 0.000000, 0.000000)
        frc r3.z, r3.z
        mul r3.z, r3.z, l(52.982918)
        frc r3.z, r3.z
        dp4 r3.w, r20.xyzw, icb[r2.x + 0].xyzw
        div r2.x, r3.w, cb6[r2.x + 20].w
        sqrt r2.x, r2.x
        add r2.x, r2.x, l(-0.900000)
        mul r2.x, r2.x, l(12.000000)
        ge r2.x, r2.x, r3.z
        and r2.x, r2.x, l(0x3f800000)
        add r0.w, r0.w, r2.x
      endif
      dp3 r2.x, r12.xyzx, cb5[0].xyzx
      max r2.x, r2.x, l(0.000000)
      min r2.x, r2.x, l(0.900000)
      add r2.x, -r2.x, l(1.000000)
      ftou r3.z, r0.w
      ishl r3.w, r3.z, l(2)
      mul r18.zw, r2.xxxx, cb6[r3.z + 24].xxxy
      max r2.x, r18.z, l(0.000000)
      mad r20.xyz, -cb5[0].xyzx, r2.xxxx, r1.xyzx
      mad r20.xyz, r12.xyzx, r18.wwww, r20.xyzx
      mul r21.xyz, r20.yyyy, cb6[r3.w + 1].xyzx
      mad r20.xyw, cb6[r3.w + 0].xyxz, r20.xxxx, r21.xyxz
      mad r20.xyz, cb6[r3.w + 2].xyzx, r20.zzzz, r20.xywx
      add r20.xyz, r20.xyzx, cb6[r3.w + 3].xyzx
      ge r21.xyz, l(0.000000, 0.000000, 0.000000, 0.000000), r20.xyzx
      ge r22.xyz, r20.xyzx, l(1.000000, 1.000000, 1.000000, 0.000000)
      or r21.xyz, r21.xyzx, r22.xyzx
      or r2.x, r21.y, r21.x
      or r2.x, r21.z, r2.x
      and r3.z, r20.z, l(0x7fffffff)
      ult r3.z, l(0x7f800000), r3.z
      or r21.z, r2.x, r3.z
      ftoi r0.w, r0.w
      mad r3.zw, r20.xxxy, cb6[r0.w + 28].zzzw, cb6[r0.w + 28].xxxy
      mad r18.zw, r3.zzzw, cb6[32].zzzw, l(0.000000, 0.000000, 0.500000, 0.500000)
      round_ni r18.zw, r18.zzzw
      mad r3.zw, r3.zzzw, cb6[32].zzzw, -r18.zzzw
      add r22.xyzw, r3.zzww, l(0.500000, 1.000000, 0.500000, 1.000000)
      mul r23.xw, r22.xxxz, r22.xxxz
      min r20.xy, r3.zwzz, l(0.000000, 0.000000, 0.000000, 0.000000)
      max r22.xz, r3.zzwz, l(0.000000, 0.000000, 0.000000, 0.000000)
      mad r24.xy, r23.xwxx, l(0.500000, 0.500000, 0.000000, 0.000000), -r3.zwzz
      add r3.zw, -r3.zzzw, l(0.000000, 0.000000, 1.000000, 1.000000)
      mad r3.zw, -r20.xxxy, r20.xxxy, r3.zzzw
      mad r20.xy, -r22.xzxx, r22.xzxx, r22.ywyy
      mov r22.x, r24.x
      mov r22.y, r3.z
      mov r22.z, r20.x
      mov r22.w, r23.x
      mul r22.xyzw, r22.xyzw, l(0.444440, 0.444440, 0.444440, 0.222220)
      mov r23.x, r24.y
      mov r23.y, r3.w
      mov r23.z, r20.y
      mul r23.xyzw, r23.xyzw, l(0.444440, 0.444440, 0.444440, 0.222220)
      add r24.xyzw, r22.ywyw, r22.xzxz
      add r25.xyzw, r23.yyww, r23.xxzz
      div r3.zw, r22.yyyw, r24.zzzw
      add r3.zw, r3.zzzw, l(0.000000, 0.000000, -1.500000, 0.500000)
      mul r22.xy, r3.zwzz, cb6[32].xxxx
      div r3.zw, r23.yyyw, r25.yyyw
      add r3.zw, r3.zzzw, l(0.000000, 0.000000, -1.500000, 0.500000)
      mul r22.zw, r3.zzzw, cb6[32].yyyy
      mul r23.xyzw, r24.xyzw, r25.xyzw
      mad r24.xyzw, r18.zwzw, cb6[32].xyxy, r22.xzyz
      sample_c_lz_indexable(texture2d)(float,float,float,float) r0.w, r24.xyxx, t5.xxxx, s3, r20.z
      sample_c_lz_indexable(texture2d)(float,float,float,float) r2.x, r24.zwzz, t5.xxxx, s3, r20.z
      mul r2.x, r2.x, r23.y
      mad r0.w, r23.x, r0.w, r2.x
      mad r22.xyzw, r18.zwzw, cb6[32].xyxy, r22.xwyw
      sample_c_lz_indexable(texture2d)(float,float,float,float) r2.x, r22.xyxx, t5.xxxx, s3, r20.z
      mad r0.w, r23.z, r2.x, r0.w
      sample_c_lz_indexable(texture2d)(float,float,float,float) r2.x, r22.zwzz, t5.xxxx, s3, r20.z
      mad r0.w, r23.w, r2.x, r0.w
      movc r21.x, r21.z, l(1.000000), r0.w
    else
      mov r21.xz, l(1.000000,0,0,0)
    endif
  else
    mov r21.xz, l(1.000000,0,0,0)
  endif
  lt r0.w, r1.w, l(1.000000)
  if_nz r0.w
    dp3 r0.w, r12.xyzx, cb5[0].xyzx
    max r0.w, r0.w, l(0.000000)
    min r0.w, r0.w, l(0.900000)
    add r0.w, -r0.w, l(1.000000)
    mul r3.zw, r0.wwww, cb6[584].xxxy
    mad r20.xyz, -cb5[0].xyzx, r3.zzzz, r1.xyzx
    mad r20.xyz, r12.xyzx, r3.wwww, r20.xyzx
    mul r3.zw, r20.yyyy, cb6[581].xxxy
    mad r3.zw, cb6[580].xxxy, r20.xxxx, r3.zzzw
    mad r3.zw, cb6[582].xxxy, r20.zzzz, r3.zzzw
    add r3.zw, r3.zzzw, cb6[583].xxxy
    lt r18.zw, l(0.000000, 0.000000, 0.000000, 0.000000), r3.zzzw
    and r0.w, r18.w, r18.z
    lt r18.zw, r3.zzzw, l(0.000000, 0.000000, 1.000000, 1.000000)
    and r2.x, r18.w, r18.z
    and r0.w, r0.w, r2.x
    if_nz r0.w
      mul r0.w, r3.w, cb6[585].z
      round_ni r0.w, r0.w
      add r0.w, r3.z, r0.w
      mul r0.w, r0.w, cb6[585].y
      ftou r0.w, r0.w
      umin r0.w, r0.w, l(127)
      and r2.x, l(0x0000ffff), cb6[r0.w + 587].x
      f16tof32 r22.x, r2.x
      ge r2.x, r22.x, l(0.000000)
      if_nz r2.x
        mov r23.x, cb6[576].x
        mov r23.y, cb6[577].x
        mov r23.z, cb6[578].x
        mov r23.w, cb6[r0.w + 587].y
        mov r20.w, l(1.000000)
        dp4 r23.x, r23.xyzw, r20.xyzw
        mov r24.x, cb6[576].y
        mov r24.y, cb6[577].y
        mov r24.z, cb6[578].y
        mov r24.w, cb6[r0.w + 587].z
        dp4 r23.y, r24.xyzw, r20.xyzw
        mov r24.x, cb6[576].z
        mov r24.y, cb6[577].z
        mov r24.z, cb6[578].z
        mov r24.w, cb6[r0.w + 587].w
        dp4 r2.x, r24.xyzw, r20.xyzw
        lt r3.zw, l(0.000000, 0.000000, 0.000000, 0.000000), r23.xxxy
        lt r4.w, l(0.000000), r2.x
        and r3.z, r3.w, r3.z
        and r3.z, r4.w, r3.z
        lt r18.zw, r23.xxxy, l(0.000000, 0.000000, 1.000000, 1.000000)
        lt r3.w, r2.x, l(1.000000)
        and r4.w, r18.w, r18.z
        and r3.w, r3.w, r4.w
        and r3.z, r3.w, r3.z
        if_nz r3.z
          ushr r0.w, cb6[r0.w + 587].x, l(16)
          f16tof32 r22.y, r0.w
          mad r3.zw, r23.xxxy, cb6[584].zzzw, r22.xxxy
          mad r18.zw, r3.zzzw, cb6[586].zzzw, l(0.000000, 0.000000, 0.500000, 0.500000)
          round_ni r18.zw, r18.zzzw
          mad r3.zw, r3.zzzw, cb6[586].zzzw, -r18.zzzw
          add r20.xyzw, r3.zzww, l(0.500000, 1.000000, 0.500000, 1.000000)
          mul r22.xw, r20.xxxz, r20.xxxz
          min r20.xz, r3.zzwz, l(0.000000, 0.000000, 0.000000, 0.000000)
          max r23.xy, r3.zwzz, l(0.000000, 0.000000, 0.000000, 0.000000)
          mad r23.zw, r22.xxxw, l(0.000000, 0.000000, 0.500000, 0.500000), -r3.zzzw
          add r3.zw, -r3.zzzw, l(0.000000, 0.000000, 1.000000, 1.000000)
          mad r3.zw, -r20.xxxz, r20.xxxz, r3.zzzw
          mad r20.xy, -r23.xyxx, r23.xyxx, r20.ywyy
          mov r24.x, r23.z
          mov r24.y, r3.z
          mov r24.z, r20.x
          mov r24.w, r22.x
          mul r24.xyzw, r24.xyzw, l(0.444440, 0.444440, 0.444440, 0.222220)
          mov r22.x, r23.w
          mov r22.y, r3.w
          mov r22.z, r20.y
          mul r20.xyzw, r22.xyzw, l(0.444440, 0.444440, 0.444440, 0.222220)
          add r22.xyzw, r24.ywyw, r24.xzxz
          add r23.xyzw, r20.yyww, r20.xxzz
          div r3.zw, r24.yyyw, r22.zzzw
          add r3.zw, r3.zzzw, l(0.000000, 0.000000, -1.500000, 0.500000)
          mul r24.xy, r3.zwzz, cb6[586].xxxx
          div r3.zw, r20.yyyw, r23.yyyw
          add r3.zw, r3.zzzw, l(0.000000, 0.000000, -1.500000, 0.500000)
          mul r24.zw, r3.zzzw, cb6[586].yyyy
          mad r20.xyzw, r18.zwzw, cb6[586].xyxy, r24.xzyz
          mad r24.xyzw, r18.zwzw, cb6[586].xyxy, r24.xwyw
          mul r22.xyzw, r22.xyzw, r23.xyzw
          sample_c_lz_indexable(texture2d)(float,float,float,float) r0.w, r20.xyxx, t8.xxxx, s3, r2.x
          sample_c_lz_indexable(texture2d)(float,float,float,float) r3.z, r20.zwzz, t8.xxxx, s3, r2.x
          mul r3.z, r3.z, r22.y
          mad r0.w, r22.x, r0.w, r3.z
          sample_c_lz_indexable(texture2d)(float,float,float,float) r3.z, r24.xyxx, t8.xxxx, s3, r2.x
          mad r0.w, r22.z, r3.z, r0.w
          sample_c_lz_indexable(texture2d)(float,float,float,float) r2.x, r24.zwzz, t8.xxxx, s3, r2.x
          mad r21.y, r22.w, r2.x, r0.w
        else
          mov r21.y, l(1.000000)
        endif
      else
        mov r21.y, l(1.000000)
      endif
    else
      mov r21.y, l(1.000000)
    endif
    movc r21.x, r21.z, r21.y, r21.x
  else
    mov r21.y, l(1.000000)
  endif
  add r0.w, -r21.y, r21.x
  mad r0.w, r1.w, r0.w, r21.y
  lt r1.w, l(0.001000), r0.w
  if_nz r1.w
    add r20.xyz, r1.xyzx, -cb0[173].xyzx
    mad r3.zw, cb0[176].xxxz, r20.yyyy, r20.xxxz
    mul r18.zw, r3.zzzw, cb0[174].zzzz
    mul r20.yw, cb0[175].xxxy, cb0[183].wwww
    mad r3.zw, r3.zzzw, cb0[174].zzzz, r20.yyyw
    sample_l_indexable(texture2d)(float,float,float,float) r1.w, r3.zwzz, t7.yzwx, s1, l(0.000000)
    mad r3.zw, r18.zzzw, cb0[175].wwww, r20.yyyw
    sample_l_indexable(texture2d)(float,float,float,float) r2.x, r3.zwzz, t7.xyzw, s1, l(0.000000)
    dp2 r3.z, r20.xzxx, r20.xzxx
    sqrt r3.z, r3.z
    add r3.w, -cb0[174].x, cb0[174].y
    add r3.z, r3.z, -cb0[174].x
    div r3.w, l(1.000000, 1.000000, 1.000000, 1.000000), r3.w
    mul_sat r3.z, r3.w, r3.z
    mad r3.w, r3.z, l(-2.000000), l(3.000000)
    mul r3.z, r3.z, r3.z
    mul r3.z, r3.z, r3.w
    add r2.x, -r1.w, r2.x
    mad r1.w, r3.z, r2.x, r1.w
    add r1.w, r1.w, l(-1.000000)
    mad r1.w, cb0[175].z, r1.w, l(1.000000)
    mul r0.w, r0.w, r1.w
  endif
  add r1.w, -r0.w, cb6[35].z
  mad r0.w, cb6[35].w, r1.w, r0.w
else
  mov r0.w, cb6[35].z
endif
min r0.w, r0.w, l(1.000000)
add r0.w, r0.w, l(-1.000000)
mad r20.x, cb6[34].x, r0.w, l(1.000000)
lt r0.w, l(0.001000), r20.x
if_nz r0.w
  dp3 r0.w, -cb5[0].xyzx, r17.xyzx
  mad r21.xyz, cb5[0].xyzx, r0.wwww, r17.xyzx
  lt r0.w, r0.w, cb5[4].z
  dp3 r1.w, r21.xyzx, r21.xyzx
  max r1.w, r1.w, l(0.0000610351562)
  rsq r1.w, r1.w
  mul r21.xyz, r1.wwww, r21.xyzx
  mul r21.xyz, r21.xyzx, cb5[4].yyyy
  mad r21.xyz, -cb5[0].xyzx, cb5[4].zzzz, r21.xyzx
  dp3 r1.w, r21.xyzx, r21.xyzx
  rsq r1.w, r1.w
  mul r21.xyz, r1.wwww, r21.xyzx
  movc r21.xyz, r0.wwww, r21.xyzx, r17.xyzx
  mad r22.xyz, r2.yzwy, r3.yyyy, r21.xyzx
  dp3 r0.w, r22.xyzx, r22.xyzx
  max r0.w, r0.w, l(0.0000610351562)
  rsq r0.w, r0.w
  mul r22.xyz, r0.wwww, r22.xyzx
  dp3_sat r10.y, r21.xyzx, r12.xyzx
  dp3_sat r0.w, r12.xyzx, r22.xyzx
  min r10.z, r0.z, l(1.000000)
  mul r1.w, r10.w, r10.w
  mul r1.w, r1.w, r1.w
  mad r2.x, r0.w, r1.w, -r0.w
  mad r0.w, r2.x, r0.w, l(1.000000)
  dp3_sat r2.x, r5.xyzx, r22.xyzx
  add r2.x, -r2.x, l(1.000000)
  mul r3.z, r2.x, r2.x
  mul r3.z, r3.z, r3.z
  mul r3.w, r2.x, r3.z
  add r4.w, -r10.w, l(1.000000)
  mad r7.w, -r4.w, l(0.383026), l(-0.0761947036)
  mad r7.w, r4.w, r7.w, l(1.049970)
  mad r4.w, r4.w, r7.w, l(0.409255)
  min r4.w, r4.w, l(0.999000)
  add r7.w, -r4.w, l(1.000000)
  add r21.xyz, -r15.xyzx, l(1.000000, 1.000000, 1.000000, 0.000000)
  mad r21.xyz, r21.xyzx, l(0.0476190485, 0.0476190485, 0.0476190485, 0.000000), r15.xyzx
  mad r2.x, -r3.z, r2.x, l(1.000000)
  mad r22.xyz, r15.xyzx, r2.xxxx, r3.wwww
  mul r0.w, r0.w, r0.w
  div r0.w, r1.w, r0.w
  mad r3.zw, -r10.zzzy, r1.wwww, r10.zzzy
  mad r3.zw, r3.zzzw, r10.zzzy, r1.wwww
  sqrt r3.zw, r3.zzzw
  mul r3.zw, r3.zzzw, r10.yyyz
  add r1.w, r3.w, r3.z
  add r1.w, r1.w, l(0.000100)
  div r1.w, l(0.500000), r1.w
  mul r0.w, r0.w, r1.w
  mul r22.xyz, r0.wwww, r22.xyzx
  min r22.xyz, r22.xyzx, l(2048.000000, 2048.000000, 2048.000000, 0.000000)
  mad r23.xyzw, r10.zwyw, l(0.968750, 0.968750, 0.968750, 0.968750), l(0.015625, 0.015625, 0.015625, 0.015625)
  sample_l_indexable(texture2d)(float,float,float,float) r0.w, r23.xyxx, t10.yzwx, s0, l(0.000000)
  sample_l_indexable(texture2d)(float,float,float,float) r1.w, r23.zwzz, t10.yzwx, s0, l(0.000000)
  mul r0.w, r0.w, r1.w
  mul r0.w, r4.w, r0.w
  div r0.w, r0.w, r7.w
  mul r23.xyz, r21.xyzx, r21.xyzx
  mul r23.xyz, r0.wwww, r23.xyzx
  mad r21.xyz, -r21.xyzx, r7.wwww, l(1.000000, 1.000000, 1.000000, 0.000000)
  div r21.xyz, r23.xyzx, r21.xyzx
  add r21.xyz, r21.xyzx, r22.xyzx
  mul r21.xyz, r21.xyzx, cb5[4].xxxx
  // === Glass Fix: Reduce sun specular intensity ===
  lt r40.x, l(0.500000), cb13[13].z
  if_nz r40.x
    mul r21.xyz, r21.xyzx, l(0.500000, 0.500000, 0.500000, 0.000000)
  endif
  max r21.xyz, r21.xyzx, l(0.000000, 0.000000, 0.000000, 0.000000)
  min r21.xyz, r21.xyzx, l(1000.000000, 1000.000000, 1000.000000, 0.000000)
  mul r22.xyz, r10.yyyy, r14.xyzx
  mad r21.xyz, r21.xyzx, r10.yyyy, r22.xyzx
  mul r21.xyz, r21.xyzx, cb5[1].xyzx
  mov r20.y, l(0.500000)
  sample_b_indexable(texture2d)(float,float,float,float) r20.yzw, r20.xyxx, t9.wxyz, s0, cb0[108].x
  add r0.w, -r20.x, l(1.000000)
  mad r20.xyz, r21.xyzx, r20.yzwy, -r21.xyzx
  mad r20.xyz, r0.wwww, r20.xyzx, r21.xyzx
else
  mov r20.xyz, l(0,0,0,0)
endif
mul r3.zw, r18.xxxy, l(0.000000, 0.000000, 0.031250, 0.031250)
round_ni r3.zw, r3.zzzw
mad r0.w, r3.w, cb4[1].y, r3.z
mul r0.w, r0.w, l(8.000000)
ftoi r0.w, r0.w
mad r1.w, -cb0[85].y, cb4[2].w, r16.z
round_ni r1.w, r1.w
add r2.x, l(-1.000000), cb4[1].w
max r3.z, r1.w, l(0.000000)
min r2.x, r2.x, r3.z
mul r3.z, r2.x, l(8.000000)
ftoi r3.z, r3.z
ge r1.w, r2.x, r1.w
iadd r2.x, r3.z, cb0[110].y
mul r3.z, r10.w, r10.w
min r10.x, r0.z, l(1.000000)
add r0.z, -r10.w, l(1.000000)
mad r3.w, -r0.z, l(0.383026), l(-0.0761947036)
mad r3.w, r0.z, r3.w, l(1.049970)
mad r0.z, r0.z, r3.w, l(0.409255)
min r0.z, r0.z, l(0.999000)
add r3.w, -r0.z, l(1.000000)
add r21.xyz, -r15.xyzx, l(1.000000, 1.000000, 1.000000, 0.000000)
mad r21.xyz, r21.xyzx, l(0.0476190485, 0.0476190485, 0.0476190485, 0.000000), r15.xyzx
mad r10.yz, r10.xxwx, l(0.000000, 0.968750, 0.968750, 0.000000), l(0.000000, 0.015625, 0.015625, 0.000000)
sample_l_indexable(texture2d)(float,float,float,float) r4.w, r10.yzyy, t10.yzwx, s0, l(0.000000)
mad r22.xyz, -r21.xyzx, r3.wwww, l(1.000000, 1.000000, 1.000000, 0.000000)
mul r21.xyz, r21.xyzx, r21.xyzx
mov r23.w, l(1.000000)
mov r24.y, l(1.000000)
mov r25.z, r10.w
mov r26.xyz, l(0,0,0,0)
mov r7.w, l(1.000000)
mov r8.w, l(0)
loop
  ilt r10.y, l(7), r8.w
  breakc_nz r10.y
  iadd r10.y, r0.w, r8.w
  ld_structured_indexable(structured_buffer, stride=4)(mixed,mixed,mixed,mixed) r10.y, r10.y, l(0), t0.xxxx
  iadd r10.z, r2.x, r8.w
  ld_structured_indexable(structured_buffer, stride=4)(mixed,mixed,mixed,mixed) r10.z, r10.z, l(0), t0.xxxx
  and r10.y, r10.z, r10.y
  and r10.y, r1.w, r10.y
  ishl r10.z, r8.w, l(5)
  mov r27.xyz, l(0,0,0,0)
  mov r11.w, r7.w
  mov r12.w, r10.y
  loop
    breakc_z r12.w
    firstbit_lo r13.w, r12.w
    ishl r14.w, l(1), r13.w
    xor r14.w, r12.w, r14.w
    iadd r13.w, r10.z, r13.w
    bfi r28.xyzw, l(29, 29, 29, 29), l(3, 3, 3, 3), r13.wwww, l(1, 3, 5, 6)
    bfi r15.w, l(29), l(3), r13.w, l(7)
    ftou r17.w, cb5[r28.z + 6].w
    ieq r17.w, r17.w, l(1)
    if_nz r17.w
      add r23.xyz, r1.xyzx, -cb5[r28.x + 6].xyzx
      and r29.xyz, l(0x0000ffff, 0x0000ffff, 0x0000ffff, 0), cb5[r28.z + 6].xzyx
      and r30.xyz, l(0x0000ffff, 0x0000ffff, 0x0000ffff, 0), cb5[r28.w + 6].yxzy
      ushr r31.xyz, cb5[r28.z + 6].xzyx, l(16, 16, 16, 0)
      ushr r32.xyz, cb5[r28.w + 6].yxzy, l(16, 16, 16, 0)
      f16tof32 r29.xyz, r29.xyzx
      f16tof32 r30.xyz, r30.xyzx
      f16tof32 r31.xyz, r31.xyzx
      f16tof32 r32.xyw, r32.yxyz
      mov r33.xz, r29.xxzx
      mov r33.yw, r31.xxxz
      dp4 r17.w, r23.xyzw, r33.xyzw
      mov r31.x, r29.y
      mov r31.z, r30.y
      mov r31.w, r32.x
      dp4 r18.z, r23.xyzw, r31.xyzw
      mov r32.xz, r30.xxzx
      dp4 r18.w, r23.xyzw, r32.xyzw
      max r17.w, |r17.w|, |r18.z|
      max r17.w, |r18.w|, r17.w
      mad r18.z, cb5[r15.w + 6].x, l(0.500000), l(0.500000)
      add r17.w, r17.w, -r18.z
      mad r18.z, -cb5[r15.w + 6].x, l(0.500000), l(0.500000)
      div_sat r17.w, r17.w, r18.z
      add r17.w, -r17.w, l(1.000000)
      mul r17.w, r17.w, r17.w
    else
      mov r17.w, l(1.000000)
    endif
    lt r18.z, l(0.500000), cb5[r28.y + 6].z
    lt r18.w, r17.w, l(0.001000)
    or r18.w, r18.z, r18.w
    if_nz r18.w
      mov r12.w, r14.w
      continue
    endif
    ishl r18.w, r13.w, l(3)
    bfi r13.w, l(29), l(3), r13.w, l(2)
    lt r19.w, cb5[r18.w + 6].w, l(1.500000)
    if_nz r19.w
      mad r19.w, cb5[r13.w + 6].y, l(0.500000), l(0.500000)
      add r23.x, r19.w, -|cb5[r13.w + 6].x|
      add r23.y, -r23.x, cb5[r13.w + 6].y
      add r19.w, -|r23.x|, l(1.000000)
      add r19.w, -|r23.y|, r19.w
      max r19.w, r19.w, l(0.000488281250)
      ge r20.w, cb5[r13.w + 6].x, l(0.000000)
      movc r23.z, r20.w, r19.w, -r19.w
      dp3 r19.w, r23.xyzx, r23.xyzx
      rsq r19.w, r19.w
      mul r23.xyz, r19.wwww, r23.xyzx
      add r29.xyz, -r1.xyzx, cb5[r28.x + 6].xyzx
      dp3 r19.w, r29.xyzx, r29.xyzx
      rsq r20.w, r19.w
      mul r30.xyz, r20.wwww, r29.xyzx
      ftoi r21.w, cb5[r15.w + 6].w
      mul r31.xyz, r23.xyzx, cb5[r13.w + 6].zzzz
      mad r32.xyz, -r31.xyzx, l(0.500000, 0.500000, 0.500000, 0.000000), r29.xyzx
      mad r33.xyz, r31.xyzx, l(0.500000, 0.500000, 0.500000, 0.000000), r29.xyzx
      ftou r22.w, cb5[r18.w + 6].w
      and r22.w, r22.w, l(1)
      ieq r24.z, r22.w, l(0)
      not r24.z, r24.z
      lt r24.w, l(0.000000), cb5[r13.w + 6].z
      and r24.z, r24.w, r24.z
      dp3 r24.w, r32.xyzx, r32.xyzx
      sqrt r24.w, r24.w
      dp3 r25.w, r33.xyzx, r33.xyzx
      sqrt r25.w, r25.w
      dp3 r26.w, r12.xyzx, r32.xyzx
      div r26.w, r26.w, r24.w
      dp3 r27.w, r12.xyzx, r33.xyzx
      div r27.w, r27.w, r25.w
      add r26.w, r26.w, r27.w
      mul_sat r34.x, r26.w, l(0.500000)
      dp3 r26.w, r32.xyzx, r33.xyzx
      mad r24.w, r24.w, r25.w, r26.w
      mad r24.w, r24.w, l(0.500000), l(1.000000)
      div r34.y, l(1.000000, 1.000000, 1.000000, 1.000000), r24.w
      dp3_sat r24.x, r12.xyzx, r30.xyzx
      movc r25.xy, r24.zzzz, r34.xyxx, r24.xyxx
      lt r24.x, cb5[r28.w + 6].w, l(0.000000)
      if_nz r24.x
        mul r24.x, cb5[r28.x + 6].w, cb5[r28.x + 6].w
        mul r24.x, r19.w, r24.x
        mad r24.x, -r24.x, r24.x, l(1.000000)
        max r24.x, r24.x, l(0.000000)
        add r19.w, r19.w, l(1.000000)
        div r19.w, l(1.000000, 1.000000, 1.000000, 1.000000), r19.w
        and r24.w, r24.z, l(0x3f800000)
        add r25.w, -r19.w, r25.y
        mad r19.w, r24.w, r25.w, r19.w
        mul r24.x, r24.x, r24.x
        mul r19.w, r19.w, r24.x
      else
        mul r33.xyz, r29.xyzx, cb5[r28.x + 6].wwww
        dp3 r24.x, r33.xyzx, r33.xyzx
        min r24.x, r24.x, l(1.000000)
        add r24.x, -r24.x, l(1.000000)
        log r24.x, r24.x
        mul r24.x, r24.x, cb5[r28.w + 6].w
        exp r24.x, r24.x
        mul r19.w, r24.x, r25.y
      endif
      dp3 r23.x, r30.xyzx, -r23.xyzx
      add r23.x, r23.x, -cb5[r13.w + 6].z
      mul_sat r23.x, r23.x, cb5[r13.w + 6].w
      mul r23.x, r23.x, r23.x
      movc r23.x, r22.w, l(1.000000), r23.x
      mul r19.w, r19.w, r23.x
      not r23.x, r24.z
      ige r23.y, r21.w, l(0)
      and r23.x, r23.y, r23.x
      if_nz r23.x
        if_z r22.w
          ishl r23.x, r21.w, l(2)
          mul r33.xyz, r1.yyyy, cb7[r23.x + 33].xywx
          mad r33.xyz, cb7[r23.x + 32].xywx, r1.xxxx, r33.xyzx
          mad r33.xyz, cb7[r23.x + 34].xywx, r1.zzzz, r33.xyzx
          add r23.xyz, r33.xyzx, cb7[r23.x + 35].xywx
          div_sat r23.xy, r23.xyxx, r23.zzzz
          mad r23.xy, r23.xyxx, cb7[r21.w + 0].zwzz, cb7[r21.w + 0].xyxx
        else
          ishl r23.z, r21.w, l(2)
          dp3 r33.x, -r29.xyzx, cb7[r23.z + 32].xyzx
          dp3 r33.y, -r29.xyzx, cb7[r23.z + 33].xyzx
          dp3 r33.z, -r29.xyzx, cb7[r23.z + 34].xyzx
          lt r23.z, |r33.x|, |r33.y|
          and r23.z, r23.z, l(1)
          dp2 r24.x, |r33.xyxx|, icb[r23.z + 0].xyxx
          lt r24.x, r24.x, |r33.z|
          movc r23.z, r24.x, l(2), r23.z
          dp3 r24.x, r33.xyzx, icb[r23.z + 0].xyzx
          lt r24.x, r24.x, l(0.000000)
          bfi r23.z, l(31), l(1), r23.z, r24.x
          ushr r24.x, r23.z, l(1)
          dp3 r24.x, r33.xyzx, icb[r24.x + 0].xyzx
          div r24.w, l(0.000244140625), cb7[r21.w + 0].w
          add r24.w, -r24.w, l(0.500000)
          utof r25.y, r23.z
          ult r25.w, r23.z, l(2)
          and r25.w, r25.w, l(2)
          dp2 r25.w, r33.xzxx, icb[r25.w + 0].xzxx
          mul r25.w, r25.w, icb[r23.z + 4].z
          div r25.w, r25.w, |r24.x|
          mad r25.y, r25.w, r24.w, r25.y
          add r25.y, r25.y, l(0.500000)
          mul_sat r29.x, r25.y, l(0.166666672)
          iadd r25.y, l(-1), icb[r23.z + 4].y
          dp2 r25.y, r33.yzyy, icb[r25.y + 0].xyxx
          mul r23.z, r25.y, icb[r23.z + 4].w
          div r23.z, r23.z, |r24.x|
          mad_sat r29.y, -r23.z, r24.w, l(0.500000)
          mad r23.xy, r29.xyxx, cb7[r21.w + 0].zwzz, cb7[r21.w + 0].xyxx
        endif
        sample_l_indexable(texture2d)(float,float,float,float) r21.w, r23.xyxx, t18.yzwx, s0, l(0.000000)
        mul r19.w, r19.w, r21.w
      endif
      lt r21.w, l(0.000000), r19.w
      if_nz r21.w
        if_z r22.w
          ftoi r22.w, cb5[r28.y + 6].x
        else
          add r23.xyz, r1.xyzx, -cb5[r28.x + 6].xyzx
          lt r29.xyz, |r23.yzzy|, |r23.xxyx|
          and r24.x, r29.y, r29.x
          lt r23.xyz, l(0.000000, 0.000000, 0.000000, 0.000000), r23.xyzx
          ushr r24.w, cb5[r13.w + 6].w, l(24)
          ubfe r25.yw, l(0, 8, 0, 8), l(0, 16, 0, 8), cb5[r13.w + 6].wwww
          movc r23.x, r23.x, r24.w, r25.y
          and r24.w, l(255), cb5[r13.w + 6].w
          movc r23.y, r23.y, r25.w, r24.w
          ubfe r24.w, l(8), l(8), cb5[r28.y + 6].x
          and r25.y, l(255), cb5[r28.y + 6].x
          movc r23.z, r23.z, r24.w, r25.y
          movc r23.y, r29.z, r23.y, r23.z
          movc r23.x, r24.x, r23.x, r23.y
          ilt r23.y, r23.x, l(80)
          movc r22.w, r23.y, r23.x, l(-1)
        endif
        ishl r23.x, r22.w, l(2)
        mad r29.xyz, r30.xyzx, cb6[r22.w + 288].xxxx, r1.xyzx
        mul r23.y, l(5.000000), cb6[r22.w + 288].y
        mad r29.xyz, r12.xyzx, r23.yyyy, r29.xyzx
        mul r33.xyzw, r29.yyyy, cb6[r23.x + 65].xyzw
        mad r33.xyzw, cb6[r23.x + 64].xyzw, r29.xxxx, r33.xyzw
        mad r29.xyzw, cb6[r23.x + 66].xyzw, r29.zzzz, r33.xyzw
        add r29.xyzw, r29.xyzw, cb6[r23.x + 67].xyzw
        div r23.xyz, r29.xyzx, r29.wwww
        ge r29.xyz, l(0.000000, 0.000000, 0.000000, 0.000000), r23.xyzx
        ge r33.xyz, r23.xyzx, l(1.000000, 1.000000, 1.000000, 0.000000)
        add r24.xw, -cb6[r22.w + 344].xxxy, cb6[r22.w + 344].zzzw
        mad r23.xy, r23.xyxx, r24.xwxx, cb6[r22.w + 344].xyxx
        mad r24.xw, r23.xxxy, cb6[400].zzzw, l(0.500000, 0.000000, 0.000000, 0.500000)
        round_ni r24.xw, r24.xxxw
        mad r23.xy, r23.xyxx, cb6[400].zwzz, -r24.xwxx
        add r34.xyzw, r23.xxyy, l(0.500000, 1.000000, 0.500000, 1.000000)
        mul r35.xyzw, r34.xxzz, r34.xxzz
        add r25.yw, -r23.xxxy, l(0.000000, 1.000000, 0.000000, 1.000000)
        min r34.xz, r23.xxyx, l(0.000000, 0.000000, 0.000000, 0.000000)
        max r36.xy, r23.xyxx, l(0.000000, 0.000000, 0.000000, 0.000000)
        mul r37.xy, r25.ywyy, l(0.160000, 0.160000, 0.000000, 0.000000)
        mad r36.xy, -r36.xyxx, r36.xyxx, r34.ywyy
        add r36.xy, r36.xyxx, l(1.000000, 1.000000, 0.000000, 0.000000)
        mul r36.xy, r36.xyxx, l(0.160000, 0.160000, 0.000000, 0.000000)
        mul r35.xz, r35.xxzx, l(0.080000, 0.000000, 0.080000, 0.000000)
        mad r23.xy, r35.ywyy, l(0.500000, 0.500000, 0.000000, 0.000000), -r23.xyxx
        mul r38.xy, r23.xyxx, l(0.160000, 0.160000, 0.000000, 0.000000)
        mad r23.xy, -r34.xzxx, r34.xzxx, r25.ywyy
        add r23.xy, r23.xyxx, l(1.000000, 1.000000, 0.000000, 0.000000)
        mul r39.xy, r23.xyxx, l(0.160000, 0.160000, 0.000000, 0.000000)
        mul r23.xy, r34.ywyy, l(0.160000, 0.160000, 0.000000, 0.000000)
        mov r38.z, r39.x
        mov r38.w, r23.x
        mov r37.z, r36.x
        mov r37.w, r35.x
        add r34.xyzw, r37.zwxz, r38.zwxz
        mov r39.z, r38.y
        mov r39.w, r23.y
        mov r36.z, r37.y
        mov r36.w, r35.z
        add r35.xyz, r36.zywz, r39.zywz
        div r37.xyz, r37.xzwx, r34.zwyz
        add r37.xyz, r37.xyzx, l(-2.500000, -0.500000, 1.500000, 0.000000)
        mul r37.xyz, r37.xyzx, cb6[400].xxxx
        div r36.xyz, r36.zywz, r35.xyzx
        add r36.xyz, r36.xyzx, l(-2.500000, -0.500000, 1.500000, 0.000000)
        mul r36.xyw, r36.xyxz, cb6[400].yyyy
        mul r38.xyzw, r34.zwyz, r35.xxxy
        mov r37.w, r36.x
        mad r39.xyzw, r24.xwxw, cb6[400].xyxy, r37.xwyw
        sample_c_lz_indexable(texture2d)(float,float,float,float) r23.x, r39.xyxx, t6.xxxx, s3, r23.z
        sample_c_lz_indexable(texture2d)(float,float,float,float) r23.y, r39.zwzz, t6.xxxx, s3, r23.z
        mul r23.y, r23.y, r38.y
        mad r23.x, r38.x, r23.x, r23.y
        mad r25.yw, r24.xxxw, cb6[400].xxxy, r37.zzzw
        sample_c_lz_indexable(texture2d)(float,float,float,float) r23.y, r25.ywyy, t6.xxxx, s3, r23.z
        mad r23.x, r38.z, r23.y, r23.x
        mov r36.z, r37.x
        mad r39.xyzw, r24.xwxw, cb6[400].xyxy, r36.zyzw
        sample_c_lz_indexable(texture2d)(float,float,float,float) r23.y, r39.xyxx, t6.xxxx, s3, r23.z
        mad r23.x, r38.w, r23.y, r23.x
        mul r38.xyzw, r34.xyzw, r35.yyzz
        mov r36.xz, r37.yyzy
        mad r37.xyzw, r24.xwxw, cb6[400].xyxy, r36.xyzy
        sample_c_lz_indexable(texture2d)(float,float,float,float) r23.y, r37.xyxx, t6.xxxx, s3, r23.z
        mad r23.x, r38.x, r23.y, r23.x
        sample_c_lz_indexable(texture2d)(float,float,float,float) r23.y, r37.zwzz, t6.xxxx, s3, r23.z
        mad r23.x, r38.y, r23.y, r23.x
        sample_c_lz_indexable(texture2d)(float,float,float,float) r23.y, r39.zwzz, t6.xxxx, s3, r23.z
        mad r23.x, r38.z, r23.y, r23.x
        ige r23.y, r22.w, l(0)
        or r29.xyz, r29.xyzx, r33.xyzx
        or r25.y, r29.y, r29.x
        or r25.y, r29.z, r25.y
        and r25.w, r23.z, l(0x7fffffff)
        ult r25.w, l(0x7f800000), r25.w
        or r25.y, r25.w, r25.y
        mad r29.xyzw, r24.xwxw, cb6[400].xyxy, r36.xwzw
        sample_c_lz_indexable(texture2d)(float,float,float,float) r24.x, r29.xyxx, t6.xxxx, s3, r23.z
        mad r23.x, r38.w, r24.x, r23.x
        mul r24.x, r34.y, r35.z
        sample_c_lz_indexable(texture2d)(float,float,float,float) r23.z, r29.zwzz, t6.xxxx, s3, r23.z
        mad r23.x, r24.x, r23.z, r23.x
        add r23.x, r23.x, l(-1.000000)
        mad r22.w, cb6[r22.w + 288].w, r23.x, l(1.000000)
        movc r22.w, r25.y, l(1.000000), r22.w
        movc r22.w, r23.y, r22.w, l(1.000000)
      else
        mov r22.w, l(1.000000)
      endif
      if_nz r24.z
        dp3 r23.x, r17.xyzx, r31.xyzx
        mul_sat r23.y, r20.w, cb5[r13.w + 6].z
        mad r23.y, r23.y, l(0.500000), r3.z
        min r23.y, r23.y, l(1.000000)
        div r23.y, r3.z, r23.y
        mad r24.xzw, r17.xxyz, r23.xxxx, -r31.xxyz
        dp3 r23.z, r32.xyzx, r24.xzwx
        mul r23.x, r23.x, r23.x
        mad r23.x, cb5[r13.w + 6].z, cb5[r13.w + 6].z, -r23.x
        div_sat r23.x, r23.z, r23.x
        mad r24.xzw, r31.xxyz, r23.xxxx, r32.xxyz
        dp3 r23.x, r24.xzwx, r24.xzwx
        rsq r23.x, r23.x
        mul r30.xyz, r23.xxxx, r24.xzwx
      else
        mov r23.y, l(1.000000)
      endif
      if_nz r21.w
        mul_sat r20.w, r20.w, cb5[r15.w + 6].y
        mad r24.xzw, r2.yyzw, r3.yyyy, r30.xxyz
        dp3 r21.w, r24.xzwx, r24.xzwx
        max r21.w, r21.w, l(0.0000610351562)
        rsq r21.w, r21.w
        mul r24.xzw, r21.wwww, r24.xxzw
        dp3_sat r21.w, r12.xyzx, r24.xzwx
        dp3_sat r23.x, r5.xyzx, r24.xzwx
        lt r23.z, l(0.000000), r20.w
        mul r20.w, r20.w, r20.w
        mad r24.x, r23.x, l(3.600000), l(0.400000)
        div r20.w, r20.w, r24.x
        mad r20.w, r10.w, r10.w, r20.w
        min r20.w, r20.w, l(1.000000)
        movc r20.w, r23.z, r20.w, r3.z
        mul r20.w, r20.w, r20.w
        mad r23.z, r21.w, r20.w, -r21.w
        mad r21.w, r23.z, r21.w, l(1.000000)
        add r23.x, -r23.x, l(1.000000)
        mul r23.z, r23.x, r23.x
        mul r23.z, r23.z, r23.z
        mul r24.x, r23.x, r23.z
        mad r23.x, -r23.z, r23.x, l(1.000000)
        mad r24.xzw, r15.xxyz, r23.xxxx, r24.xxxx
        mul r21.w, r21.w, r21.w
        div r21.w, r20.w, r21.w
        mul r21.w, r23.y, r21.w
        mad r23.x, -r10.x, r20.w, r10.x
        mad r23.x, r23.x, r10.x, r20.w
        sqrt r23.x, r23.x
        mad r23.y, -r25.x, r20.w, r25.x
        mad r20.w, r23.y, r25.x, r20.w
        sqrt r20.w, r20.w
        mul r20.w, r10.x, r20.w
        mad r20.w, r25.x, r23.x, r20.w
        add r20.w, r20.w, l(0.000100)
        div r20.w, l(0.500000), r20.w
        mul r20.w, r20.w, r21.w
        mul r23.xyz, r20.wwww, r24.xzwx
        min r23.xyz, r23.xyzx, l(2048.000000, 2048.000000, 2048.000000, 0.000000)
        mad r24.xz, r25.xxzx, l(0.968750, 0.000000, 0.968750, 0.000000), l(0.015625, 0.000000, 0.015625, 0.000000)
        sample_l_indexable(texture2d)(float,float,float,float) r20.w, r24.xzxx, t10.yzwx, s0, l(0.000000)
        mul r20.w, r4.w, r20.w
        mul r20.w, r0.z, r20.w
        div r20.w, r20.w, r3.w
        mul r24.xzw, r20.wwww, r21.xxyz
        div r24.xzw, r24.xxzw, r22.xxyz
        add r23.xyz, r23.xyzx, r24.xzwx
        mul r23.xyz, r23.xyzx, cb5[r15.w + 6].zzzz
        max r23.xyz, r23.xyzx, l(0.000000, 0.000000, 0.000000, 0.000000)
        min r23.xyz, r23.xyzx, l(1000.000000, 1000.000000, 1000.000000, 0.000000)
        mul r24.xzw, r14.xxyz, r25.xxxx
        mad r23.xyz, r23.xyzx, r25.xxxx, r24.xzwx
        mul r24.xzw, r19.wwww, cb5[r18.w + 6].xxyz
        mul r24.xzw, r22.wwww, r24.xxzw
        mul r24.xzw, r17.wwww, r24.xxzw
        mul r23.xyz, r23.xyzx, r24.xzwx
      else
        mov r23.xyz, l(0,0,0,0)
      endif
    else
      if_z r18.z
        mad r17.w, cb5[r13.w + 6].y, l(0.500000), l(0.500000)
        add r29.x, r17.w, -|cb5[r13.w + 6].x|
        add r29.y, -r29.x, cb5[r13.w + 6].y
        add r17.w, -|r29.x|, l(1.000000)
        add r17.w, -|r29.y|, r17.w
        max r17.w, r17.w, l(0.000488281250)
        ge r18.z, cb5[r13.w + 6].x, l(0.000000)
        movc r29.z, r18.z, r17.w, -r17.w
        dp3 r17.w, r29.xyzx, r29.xyzx
        rsq r17.w, r17.w
        mul r24.xzw, r17.wwww, r29.xxyz
        add r25.xyw, -r1.xyxz, cb5[r28.x + 6].xyxz
        dp3 r17.w, r25.xywx, r25.xywx
        rsq r18.z, r17.w
        mul r29.xyz, r18.zzzz, r25.xywx
        ftoi r15.w, cb5[r15.w + 6].w
        mul r30.xyz, r24.xzwx, cb5[r13.w + 6].zzzz
        mad r31.xyz, -r30.xyzx, l(0.500000, 0.500000, 0.500000, 0.000000), r25.xywx
        mad r30.xyz, r30.xyzx, l(0.500000, 0.500000, 0.500000, 0.000000), r25.xywx
        ftou r18.z, cb5[r18.w + 6].w
        and r18.z, r18.z, l(1)
        ieq r18.w, r18.z, l(0)
        not r18.w, r18.w
        lt r19.w, l(0.000000), cb5[r13.w + 6].z
        and r18.w, r18.w, r19.w
        dp3 r19.w, r31.xyzx, r31.xyzx
        sqrt r19.w, r19.w
        dp3 r20.w, r30.xyzx, r30.xyzx
        sqrt r20.w, r20.w
        dp3 r21.w, r31.xyzx, r30.xyzx
        mad r19.w, r19.w, r20.w, r21.w
        mad r19.w, r19.w, l(0.500000), l(1.000000)
        div r19.w, l(1.000000, 1.000000, 1.000000, 1.000000), r19.w
        movc r19.w, r18.w, r19.w, l(1.000000)
        lt r20.w, cb5[r28.w + 6].w, l(0.000000)
        if_nz r20.w
          mul r20.w, cb5[r28.x + 6].w, cb5[r28.x + 6].w
          mul r20.w, r17.w, r20.w
          mad r20.w, -r20.w, r20.w, l(1.000000)
          max r20.w, r20.w, l(0.000000)
          add r17.w, r17.w, l(1.000000)
          div r17.w, l(1.000000, 1.000000, 1.000000, 1.000000), r17.w
          and r21.w, r18.w, l(0x3f800000)
          add r22.w, -r17.w, r19.w
          mad r17.w, r21.w, r22.w, r17.w
          mul r20.w, r20.w, r20.w
          mul r17.w, r17.w, r20.w
        else
          mul r30.xyz, r25.xywx, cb5[r28.x + 6].wwww
          dp3 r20.w, r30.xyzx, r30.xyzx
          min r20.w, r20.w, l(1.000000)
          add r20.w, -r20.w, l(1.000000)
          log r20.w, r20.w
          mul r20.w, r20.w, cb5[r28.w + 6].w
          exp r20.w, r20.w
          mul r17.w, r19.w, r20.w
        endif
        dp3 r19.w, r29.xyzx, -r24.xzwx
        add r19.w, r19.w, -cb5[r13.w + 6].z
        mul_sat r19.w, r19.w, cb5[r13.w + 6].w
        mul r19.w, r19.w, r19.w
        movc r19.w, r18.z, l(1.000000), r19.w
        mul r17.w, r17.w, r19.w
        not r18.w, r18.w
        ige r19.w, r15.w, l(0)
        and r18.w, r18.w, r19.w
        if_nz r18.w
          if_z r18.z
            ishl r18.w, r15.w, l(2)
            mul r24.xzw, r1.yyyy, cb7[r18.w + 33].xxyw
            mad r24.xzw, cb7[r18.w + 32].xxyw, r1.xxxx, r24.xxzw
            mad r24.xzw, cb7[r18.w + 34].xxyw, r1.zzzz, r24.xxzw
            add r24.xzw, r24.xxzw, cb7[r18.w + 35].xxyw
            div_sat r24.xz, r24.xxzx, r24.wwww
            mad r24.xz, r24.xxzx, cb7[r15.w + 0].zzwz, cb7[r15.w + 0].xxyx
          else
            ishl r18.w, r15.w, l(2)
            dp3 r30.x, -r25.xywx, cb7[r18.w + 32].xyzx
            dp3 r30.y, -r25.xywx, cb7[r18.w + 33].xyzx
            dp3 r30.z, -r25.xywx, cb7[r18.w + 34].xyzx
            lt r18.w, |r30.x|, |r30.y|
            and r18.w, r18.w, l(1)
            dp2 r19.w, |r30.xyxx|, icb[r18.w + 0].xyxx
            lt r19.w, r19.w, |r30.z|
            movc r18.w, r19.w, l(2), r18.w
            dp3 r19.w, r30.xyzx, icb[r18.w + 0].xyzx
            lt r19.w, r19.w, l(0.000000)
            bfi r18.w, l(31), l(1), r18.w, r19.w
            ushr r19.w, r18.w, l(1)
            dp3 r19.w, r30.xyzx, icb[r19.w + 0].xyzx
            div r20.w, l(0.000244140625), cb7[r15.w + 0].w
            add r20.w, -r20.w, l(0.500000)
            utof r21.w, r18.w
            ult r22.w, r18.w, l(2)
            and r22.w, r22.w, l(2)
            dp2 r22.w, r30.xzxx, icb[r22.w + 0].xzxx
            mul r22.w, r22.w, icb[r18.w + 4].z
            div r22.w, r22.w, |r19.w|
            mad r21.w, r22.w, r20.w, r21.w
            add r21.w, r21.w, l(0.500000)
            mul_sat r25.x, r21.w, l(0.166666672)
            iadd r21.w, l(-1), icb[r18.w + 4].y
            dp2 r21.w, r30.yzyy, icb[r21.w + 0].xyxx
            mul r18.w, r21.w, icb[r18.w + 4].w
            div r18.w, r18.w, |r19.w|
            mad_sat r25.y, -r18.w, r20.w, l(0.500000)
            mad r24.xz, r25.xxyx, cb7[r15.w + 0].zzwz, cb7[r15.w + 0].xxyx
          endif
          sample_l_indexable(texture2d)(float,float,float,float) r15.w, r24.xzxx, t18.yzwx, s0, l(0.000000)
          mul r17.w, r15.w, r17.w
        endif
        lt r15.w, l(0.000000), r17.w
        if_nz r15.w
          if_z r18.z
            ftoi r15.w, cb5[r28.y + 6].x
          else
            add r24.xzw, r1.xxyz, -cb5[r28.x + 6].xxyz
            lt r25.xyw, |r24.zwzw|, |r24.xxxz|
            and r17.w, r25.y, r25.x
            lt r24.xzw, l(0.000000, 0.000000, 0.000000, 0.000000), r24.xxzw
            ushr r18.z, cb5[r13.w + 6].w, l(24)
            ubfe r25.xy, l(8, 8, 0, 0), l(16, 8, 0, 0), cb5[r13.w + 6].wwww
            movc r18.z, r24.x, r18.z, r25.x
            and r13.w, l(255), cb5[r13.w + 6].w
            movc r13.w, r24.z, r25.y, r13.w
            ubfe r18.w, l(8), l(8), cb5[r28.y + 6].x
            and r19.w, l(255), cb5[r28.y + 6].x
            movc r18.w, r24.w, r18.w, r19.w
            movc r13.w, r25.w, r13.w, r18.w
            movc r13.w, r17.w, r18.z, r13.w
            ilt r17.w, r13.w, l(80)
            movc r15.w, r17.w, r13.w, l(-1)
          endif
          ishl r13.w, r15.w, l(2)
          mad r24.xzw, r29.xxyz, cb6[r15.w + 288].xxxx, r1.xxyz
          mul r17.w, l(5.000000), cb6[r15.w + 288].y
          mad r24.xzw, r12.xxyz, r17.wwww, r24.xxzw
          mul r28.xyzw, r24.zzzz, cb6[r13.w + 65].xyzw
          mad r28.xyzw, cb6[r13.w + 64].xyzw, r24.xxxx, r28.xyzw
          mad r28.xyzw, cb6[r13.w + 66].xyzw, r24.wwww, r28.xyzw
          add r28.xyzw, r28.xyzw, cb6[r13.w + 67].xyzw
          div r24.xzw, r28.xxyz, r28.wwww
          ge r25.xyw, l(0.000000, 0.000000, 0.000000, 0.000000), r24.xzxw
          ge r28.xyz, r24.xzwx, l(1.000000, 1.000000, 1.000000, 0.000000)
          add r18.zw, -cb6[r15.w + 344].xxxy, cb6[r15.w + 344].zzzw
          mad r18.zw, r24.xxxz, r18.zzzw, cb6[r15.w + 344].xxxy
          mad r24.xz, r18.zzwz, cb6[400].zzwz, l(0.500000, 0.000000, 0.500000, 0.000000)
          round_ni r24.xz, r24.xxzx
          mad r18.zw, r18.zzzw, cb6[400].zzzw, -r24.xxxz
          add r29.xyzw, r18.zzww, l(0.500000, 1.000000, 0.500000, 1.000000)
          mul r30.xyzw, r29.xxzz, r29.xxzz
          add r29.xz, -r18.zzwz, l(1.000000, 0.000000, 1.000000, 0.000000)
          min r31.xy, r18.zwzz, l(0.000000, 0.000000, 0.000000, 0.000000)
          max r31.zw, r18.zzzw, l(0.000000, 0.000000, 0.000000, 0.000000)
          mul r32.xy, r29.xzxx, l(0.160000, 0.160000, 0.000000, 0.000000)
          mad r31.zw, -r31.zzzw, r31.zzzw, r29.yyyw
          add r31.zw, r31.zzzw, l(0.000000, 0.000000, 1.000000, 1.000000)
          mul r33.xy, r31.zwzz, l(0.160000, 0.160000, 0.000000, 0.000000)
          mul r30.xz, r30.xxzx, l(0.080000, 0.000000, 0.080000, 0.000000)
          mad r18.zw, r30.yyyw, l(0.000000, 0.000000, 0.500000, 0.500000), -r18.zzzw
          mul r34.xy, r18.zwzz, l(0.160000, 0.160000, 0.000000, 0.000000)
          mad r18.zw, -r31.xxxy, r31.xxxy, r29.xxxz
          add r18.zw, r18.zzzw, l(0.000000, 0.000000, 1.000000, 1.000000)
          mul r31.xy, r18.zwzz, l(0.160000, 0.160000, 0.000000, 0.000000)
          mul r18.zw, r29.yyyw, l(0.000000, 0.000000, 0.160000, 0.160000)
          mov r34.z, r31.x
          mov r34.w, r18.z
          mov r32.z, r33.x
          mov r32.w, r30.x
          add r29.xyzw, r32.zwxz, r34.zwxz
          mov r31.z, r34.y
          mov r31.w, r18.w
          mov r33.z, r32.y
          mov r33.w, r30.z
          add r30.xyz, r31.zywz, r33.zywz
          div r31.xyz, r32.xzwx, r29.zwyz
          add r31.xyz, r31.xyzx, l(-2.500000, -0.500000, 1.500000, 0.000000)
          mul r31.xyz, r31.xyzx, cb6[400].xxxx
          div r32.xyz, r33.zywz, r30.xyzx
          add r32.xyz, r32.xyzx, l(-2.500000, -0.500000, 1.500000, 0.000000)
          mul r32.xyw, r32.xyxz, cb6[400].yyyy
          mul r33.xyzw, r29.zwyz, r30.xxxy
          mov r31.w, r32.x
          mad r34.xyzw, r24.xzxz, cb6[400].xyxy, r31.xwyw
          sample_c_lz_indexable(texture2d)(float,float,float,float) r13.w, r34.xyxx, t6.xxxx, s3, r24.w
          sample_c_lz_indexable(texture2d)(float,float,float,float) r17.w, r34.zwzz, t6.xxxx, s3, r24.w
          mul r17.w, r17.w, r33.y
          mad r13.w, r33.x, r13.w, r17.w
          mad r18.zw, r24.xxxz, cb6[400].xxxy, r31.zzzw
          sample_c_lz_indexable(texture2d)(float,float,float,float) r17.w, r18.zwzz, t6.xxxx, s3, r24.w
          mad r13.w, r33.z, r17.w, r13.w
          mov r32.z, r31.x
          mad r34.xyzw, r24.xzxz, cb6[400].xyxy, r32.zyzw
          sample_c_lz_indexable(texture2d)(float,float,float,float) r17.w, r34.xyxx, t6.xxxx, s3, r24.w
          mad r13.w, r33.w, r17.w, r13.w
          mul r33.xyzw, r29.xyzw, r30.yyzz
          mov r32.xz, r31.yyzy
          mad r31.xyzw, r24.xzxz, cb6[400].xyxy, r32.xyzy
          sample_c_lz_indexable(texture2d)(float,float,float,float) r17.w, r31.xyxx, t6.xxxx, s3, r24.w
          mad r13.w, r33.x, r17.w, r13.w
          sample_c_lz_indexable(texture2d)(float,float,float,float) r17.w, r31.zwzz, t6.xxxx, s3, r24.w
          mad r13.w, r33.y, r17.w, r13.w
          sample_c_lz_indexable(texture2d)(float,float,float,float) r17.w, r34.zwzz, t6.xxxx, s3, r24.w
          mad r13.w, r33.z, r17.w, r13.w
          ige r17.w, r15.w, l(0)
          or r25.xyw, r25.xyxw, r28.xyxz
          or r18.z, r25.y, r25.x
          or r18.z, r25.w, r18.z
          and r18.w, r24.w, l(0x7fffffff)
          ult r18.w, l(0x7f800000), r18.w
          or r18.z, r18.w, r18.z
          mad r28.xyzw, r24.xzxz, cb6[400].xyxy, r32.xwzw
          sample_c_lz_indexable(texture2d)(float,float,float,float) r18.w, r28.xyxx, t6.xxxx, s3, r24.w
          mad r13.w, r33.w, r18.w, r13.w
          mul r18.w, r29.y, r30.z
          sample_c_lz_indexable(texture2d)(float,float,float,float) r19.w, r28.zwzz, t6.xxxx, s3, r24.w
          mad r13.w, r18.w, r19.w, r13.w
          add r13.w, r13.w, l(-1.000000)
          mad r13.w, cb6[r15.w + 288].w, r13.w, l(1.000000)
          movc r13.w, r18.z, l(1.000000), r13.w
          movc r13.w, r17.w, r13.w, l(1.000000)
        else
          mov r13.w, l(1.000000)
        endif
      else
        mov r13.w, l(1.000000)
      endif
      mul r11.w, r11.w, r13.w
      mov r23.xyz, l(0,0,0,0)
    endif
    add r27.xyz, r23.xyzx, r27.xyzx
    mov r12.w, r14.w
  endloop
  mov r7.w, r11.w
  add r26.xyz, r26.xyzx, r27.xyzx
  iadd r8.w, r8.w, l(1)
endloop
// === Glass Fix: Reduce clustered lights and overall brightness ===
lt r40.x, l(0.500000), cb13[13].z
if_nz r40.x
  mul r26.xyz, r26.xyzx, l(0.500000, 0.500000, 0.500000, 0.000000)
  mul r19.xyz, r19.xyzx, l(0.650000, 0.650000, 0.650000, 0.000000)
endif
dp3 r0.z, r19.xyzx, l(0.212672904, 0.715152204, 0.072175, 0.000000)
add r1.xzw, -r0.zzzz, r19.xxyz
mad r1.xzw, cb0[184].wwww, r1.xxzw, r0.zzzz
add r2.xyz, -cb2[20].xyzx, cb1[r0.x + 13].xyzx
mad r2.xyz, cb1[r0.x + 13].wwww, r2.xyzx, cb2[20].xyzx
mul r2.xyz, r6.wwww, r2.xyzx
mul r2.xyz, r2.xyzx, cb2[21].xxxx
mul r2.xyz, r2.xyzx, r5.wwww
mad r3.yzw, -r6.xxyz, r8.xxyz, l(0.000000, 1.000000, 1.000000, 1.000000)
mad r3.yzw, cb2[19].yyyy, r3.yyzw, r11.xxyz
mul r2.xyz, r2.xyzx, r3.yzwy
add r0.x, l(1.000000), -cb1[r0.x + 11].x
mul r0.xzw, r0.xxxx, r2.xxyz
add r2.x, l(1.000000), -cb2[19].x
mad r2.x, cb0[109].x, cb2[19].x, r2.x
div r2.x, l(1.000000, 1.000000, 1.000000, 1.000000), r2.x
mul r0.xzw, r0.xxzw, r2.xxxx
mad r0.xzw, r1.xxzw, cb0[184].xxyz, r0.xxzw
mad r1.xzw, r26.xxyz, r7.wwww, r20.xxyz
add r0.xzw, r0.xxzw, r1.xxzw
mad r1.x, r1.y, cb0[156].w, cb0[157].w
mad r1.z, r3.x, cb0[154].w, -cb0[153].w
max r1.xz, r1.xxzx, l(0.010000, 0.000000, 0.000000, 0.000000)
mul r1.w, r1.x, l(-1.442695)
exp r1.w, r1.w
add r1.w, -r1.w, l(1.000000)
div r1.x, r1.w, r1.x
mad r1.w, r1.y, cb0[156].w, cb0[158].w
mul r1.w, r1.w, l(1.442695)
exp r1.w, r1.w
mul r1.x, r1.w, r1.x
mul r1.x, r1.x, -r1.z
mul r1.xzw, r1.xxxx, cb0[155].xxyz
mul r1.xzw, r1.xxzw, l(1.442695, 0.000000, 1.442695, 1.442695)
exp r1.xzw, r1.xxzw
dp3 r2.x, -r5.xyzx, cb0[154].xyzx
mad r2.y, cb0[155].w, cb0[155].w, l(1.000000)
dp2 r2.z, r2.xxxx, cb0[155].wwww
add r2.y, -r2.z, r2.y
lt r2.z, l(0.000000), cb0[163].z
if_nz r2.z
  and r16.w, l(7), cb0[108].w
  imad r3.yzw, r16.xxyw, l(0, 0x0019660d, 0x0019660d, 0x0019660d), l(0, 0x3c6ef35f, 0x3c6ef35f, 0x3c6ef35f)
  imad r2.z, r3.z, r3.w, r3.y
  imad r2.w, r3.w, r2.z, r3.z
  imad r3.y, r2.z, r2.w, r3.w
  imad r6.x, r2.w, r3.y, r2.z
  dp3 r2.z, -r5.xyzx, -r4.xyzx
  add r3.z, r1.y, -cb0[44].y
  lt r3.w, l(5.960464478E-08), r2.z
  div r2.z, l(1.000000, 1.000000, 1.000000, 1.000000), r2.z
  and r2.z, r2.z, r3.w
  mul r2.z, r2.z, cb0[163].w
  div r3.w, l(1.000000, 1.000000, 1.000000, 1.000000), r3.x
  mul r4.x, r2.z, r3.w
  mad r4.y, r4.x, r3.z, cb0[44].y
  mad r3.z, -r4.x, r3.z, r3.z
  mul r4.x, r3.z, cb0[159].z
  mul r3.z, r3.z, cb0[162].x
  max r3.z, r3.z, l(-127.000000)
  add r4.z, r4.y, -cb0[159].x
  mul r4.z, r4.z, cb0[159].z
  max r4.xz, r4.xxzx, l(-127.000000, 0.000000, -127.000000, 0.000000)
  exp r4.z, -r4.z
  mul r4.z, r4.z, cb0[159].y
  lt r4.w, l(5.960464478E-08), |r4.x|
  exp r5.x, -r4.x
  add r5.x, -r5.x, l(1.000000)
  div r5.x, r5.x, r4.x
  mad r4.x, -r4.x, l(0.240226507), l(0.693147182)
  movc r4.x, r4.w, r5.x, r4.x
  add r4.y, r4.y, -cb0[162].z
  mul r4.y, r4.y, cb0[162].x
  max r4.y, r4.y, l(-127.000000)
  exp r4.y, -r4.y
  mul r4.y, r4.y, cb0[162].y
  lt r4.w, l(5.960464478E-08), |r3.z|
  exp r5.x, -r3.z
  add r5.x, -r5.x, l(1.000000)
  div r5.x, r5.x, r3.z
  mad r3.z, -r3.z, l(0.240226507), l(0.693147182)
  movc r3.z, r4.w, r5.x, r3.z
  mul r3.z, r3.z, r4.y
  mad r3.z, r4.z, r4.x, r3.z
  mad r2.z, -r2.z, r3.w, l(1.000000)
  mul r2.z, r3.x, r2.z
  mul r2.z, r2.z, r3.z
  exp r2.z, -r2.z
  min r2.z, r2.z, l(1.000000)
  max r2.z, r2.z, cb0[161].w
  mad_sat r3.zw, r3.xxxx, cb0[160].yyyw, cb0[160].xxxz
  add r2.z, r2.z, r3.z
  add r2.z, r3.w, r2.z
  min r2.z, r2.z, l(1.000000)
  imad r6.y, r3.y, r6.x, r2.w
  ushr r3.yz, r6.xxyx, l(0, 16, 16, 0)
  utof r3.yz, r3.yyzy
  mad r3.yz, r3.yyzy, l(0.000000, 0.0000305180438, 0.0000305180438, 0.000000), l(0.000000, -1.000000, -1.000000, 0.000000)
  mad r3.yz, r3.yyzy, cb0[167].wwww, r18.xxyx
  mul r4.xy, r3.yzyy, cb0[165].xyxx
  mad r2.w, r16.z, cb0[164].x, cb0[164].y
  log r2.w, r2.w
  mul r2.w, r2.w, cb0[164].z
  div r4.z, r2.w, cb0[163].z
  sample_l_indexable(texture3d)(float,float,float,float) r4.xyzw, r4.xyzx, t17.xyzw, s0, l(0.000000)
  add r2.w, r16.z, -cb0[166].z
  mul_sat r2.w, r2.w, l(1000000.000000)
  add r4.xyzw, r4.xyzw, l(-0.000000, -0.000000, -0.000000, -1.000000)
  mad r4.xyzw, r2.wwww, r4.xyzw, l(0.000000, 0.000000, 0.000000, 1.000000)
  add r2.w, -r2.z, l(1.000000)
  mul r3.yzw, r2.wwww, cb0[161].xxyz
  mad r3.yzw, r3.yyzw, r4.wwww, r4.xxyz
  mul r2.z, r2.z, r4.w
else
  add r1.y, r1.y, -cb0[44].y
  mul r2.w, r1.y, cb0[159].z
  max r2.w, r2.w, l(-127.000000)
  mul r1.y, r1.y, cb0[162].x
  max r1.y, r1.y, l(-127.000000)
  add r4.x, cb0[44].y, -cb0[159].x
  mul r4.x, r4.x, cb0[159].z
  max r4.x, r4.x, l(-127.000000)
  exp r4.x, -r4.x
  mul r4.x, r4.x, cb0[159].y
  lt r4.y, l(5.960464478E-08), |r2.w|
  exp r4.z, -r2.w
  add r4.z, -r4.z, l(1.000000)
  div r4.z, r4.z, r2.w
  mad r2.w, -r2.w, l(0.240226507), l(0.693147182)
  movc r2.w, r4.y, r4.z, r2.w
  add r4.y, cb0[44].y, -cb0[162].z
  mul r4.y, r4.y, cb0[162].x
  max r4.y, r4.y, l(-127.000000)
  exp r4.y, -r4.y
  mul r4.y, r4.y, cb0[162].y
  lt r4.z, l(5.960464478E-08), |r1.y|
  exp r4.w, -r1.y
  add r4.w, -r4.w, l(1.000000)
  div r4.w, r4.w, r1.y
  mad r1.y, -r1.y, l(0.240226507), l(0.693147182)
  movc r1.y, r4.z, r4.w, r1.y
  mul r1.y, r1.y, r4.y
  mad r1.y, r4.x, r2.w, r1.y
  mul r1.y, r3.x, r1.y
  exp r1.y, -r1.y
  min r1.y, r1.y, l(1.000000)
  max r1.y, r1.y, cb0[161].w
  mad_sat r4.xy, r3.xxxx, cb0[160].ywyy, cb0[160].xzxx
  add r1.y, r1.y, r4.x
  add r1.y, r4.y, r1.y
  min r2.z, r1.y, l(1.000000)
  add r1.y, -r2.z, l(1.000000)
  mul r3.yzw, r1.yyyy, cb0[161].xxyz
endif
mul r4.xyz, r1.xzwx, r2.zzzz
mad r1.y, r2.x, r2.x, l(1.000000)
mul r1.y, r1.y, l(0.0596831031)
mad r5.xyz, cb0[156].xyzx, r1.yyyy, cb0[158].xyzx
mad r1.y, -cb0[155].w, cb0[155].w, l(1.000000)
mul r2.x, r2.y, l(12.566371)
sqrt r2.y, r2.y
mul r2.x, r2.y, r2.x
max r2.x, r2.x, l(0.001000)
div r1.y, r1.y, r2.x
mad_sat r2.xyw, cb0[157].xyxz, r1.yyyy, r5.xyxz
mul r2.xyw, r2.xyxw, l(255.000000, 255.000000, 0.000000, 255.000000)
add r1.xyz, -r1.xzwx, l(1.000000, 1.000000, 1.000000, 0.000000)
mul r1.xyz, r1.xyzx, r2.xywx
mad r1.xyz, r1.xyzx, r2.zzzz, r3.yzwy
// === Glass Transparency Fix ===
lt r40.x, l(0.500000), cb13[13].z
if_nz r40.x
  // Boost transmittance: lerp(r4, 1, 0.5)
  add r40.xyz, -r4.xyzx, l(1.000000, 1.000000, 1.000000, 0.000000)
  mad r40.xyz, r40.xyzx, l(0.500000, 0.500000, 0.500000, 0.000000), r4.xyzx
  // Reduce inscatter intensity
  mul r41.xyz, r1.xyzx, l(0.350000, 0.350000, 0.350000, 0.000000)
  // Modified fog blend
  mad r0.xzw, r0.xxzw, r40.xxyz, r41.xxyz
else
  // Original fog blend
  mad r0.xzw, r0.xxzw, r4.xxyz, r1.xxyz
endif
add r0.xzw, -r7.xxyz, r0.xxzw
mad r9.xyz, r9.wwww, r0.xzwx, r7.xyzx
mul r0.xz, r13.xxyx, l(0.500000, 0.000000, -0.500000, 0.000000)
sqrt r0.xz, |r0.xxzx|
sqrt r0.xz, r0.xxzx
mov r13.z, -r13.y
lt r1.xy, l(0.000000, 0.000000, 0.000000, 0.000000), r13.xzxx
lt r1.zw, r13.xxxz, l(0.000000, 0.000000, 0.000000, 0.000000)
iadd r1.xy, -r1.xyxx, r1.zwzz
itof r1.xy, r1.xyxx
mul r0.xz, r0.xxzx, r1.xxyx
mad r0.xz, r0.xxzx, l(0.500000, 0.000000, 0.500000, 0.000000), l(0.500000, 0.000000, 0.500000, 0.000000)
add r0.y, r0.y, l(-0.100000024)
lt r0.w, l(0.000000), r0.y
lt r0.y, r0.y, l(0.000000)
iadd r0.y, -r0.w, r0.y
itof r0.y, r0.y
mov_sat r0.y, r0.y
add r1.xy, -r0.xzxx, l(0.500000, 0.500000, 0.000000, 0.000000)
mad r0.xy, r0.yyyy, r1.xyxx, r0.xzxx
min o1.xy, r0.xyxx, l(1.000000, 1.000000, 0.000000, 0.000000)
dp3 r0.x, r9.xyzx, l(0.212672904, 0.715152204, 0.072175, 0.000000)
mul r0.x, r9.w, r0.x
max r0.x, r9.w, r0.x
mul_sat r0.x, r0.x, l(10.000000)
lt r0.x, l(0.500000), r0.x
and o1.z, r0.x, l(0x3f800000)
// === Glass Highlight Compression ===
lt r40.x, l(0.500000), cb13[13].z
if_nz r40.x
  dp3 r40.y, r9.xyzx, l(0.212600, 0.715200, 0.072200, 0.000000)
  lt r40.z, l(0.500000), r40.y
  if_nz r40.z
    add r40.w, r40.y, l(-0.500000)
    mul r40.w, r40.w, l(-0.666667)
    exp r40.w, r40.w
    add r40.w, -r40.w, l(1.000000)
    mad r40.w, r40.w, l(1.500000), l(0.500000)
    max r41.x, r40.y, l(0.001000)
    div r41.x, r40.w, r41.x
    mul r9.xyz, r9.xyzx, r41.xxxx
  endif
endif
mov o0.xyzw, r9.xyzw
mov o1.w, l(0)
ret
// Approximately 0 instruction slots used
