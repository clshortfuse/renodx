// ---- Created with 3Dmigoto v1.4.1 on Mon Dec  1 14:31:17 2025

cbuffer _Globals : register(b0)
{
  float4 g_AmbientCube[3] : packoffset(c0);
  float4 g_LayeredSkyUserColor : packoffset(c3);
  float4 g_LayeredSkyUserColor3 : packoffset(c4);
  float4 g_LayeredSkyUserColor4 : packoffset(c5);
  float4 g_CurrentTime : packoffset(c6);
  float4 g_HorizonTextureBlend : packoffset(c7);
  float4 g_SunColor : packoffset(c8);
  float4 g_SunDirection : packoffset(c9);
  float4 g_WorldLoadingRange : packoffset(c10);
  float4 g_GlobalWindPS : packoffset(c11);
  float4 g_SkySpritePosition : packoffset(c12);
  float4 g_VPOSReverseParams : packoffset(c13);
  float4 RainUVScroll : packoffset(c15);
  float4 g_RenderingReflections : packoffset(c17);
  float4 g_ViewportScaleOffset : packoffset(c18);
  float4 g_VPosToUV : packoffset(c19);
  float4 g_ReverseProjectionParams : packoffset(c20);
  float2 g_ReverseProjectionParams2 : packoffset(c21);
  float4x4 g_ViewToWorld : packoffset(c22);
  float4x4 g_WorldToView : packoffset(c26);
  float4 g_WorldEntityPosition : packoffset(c30);
  float4 g_EntityRandomSeed : packoffset(c31);
  float4 g_BoundingVolumeSize : packoffset(c32);
  float4 g_EntityToCameraDistance : packoffset(c33);
  float4 g_LODBlendFactor : packoffset(c34);
  float4 g_WeatherInfo : packoffset(c35);
  float4 g_FogWeatherParams : packoffset(c36);
  float4 g_FogParams : packoffset(c37);
  float4 g_MainPlayerPosition : packoffset(c38);
  float4 g_EyeDirection : packoffset(c39);
  float4 g_EyePosition : packoffset(c40);
  float4 g_DisolveFactor : packoffset(c41);
  float4 g_LightShaftColor : packoffset(c42);
  float4 g_LightShaftFade : packoffset(c43);
  float4 g_LightShaftFade2 : packoffset(c44);
  float4 g_EagleVisionColor : packoffset(c45);
  float4 g_FogColor : packoffset(c60);
  float4 g_FogSunBackColor : packoffset(c61);
  float g_AlphaTestValue : packoffset(c62);
  float4 g_NormalScale : packoffset(c63);

  struct
  {
    float4 m_PositionFar;
    float4 m_ColorFade;
  } g_OmniLights[4] : packoffset(c64);


  struct
  {
    float3 m_Direction;
    float4 m_Color;
  } g_DirectLights[2] : packoffset(c72);


  struct
  {
    float4 m_PositionFar;
    float4 m_ColorFade;
    float4 m_Direction;
    float4 m_ConeAngles;
  } g_SpotLights[2] : packoffset(c76);


  struct
  {
    float3 m_Direction;
    float4 m_Color;
    float3 m_SpecularDirection;
  } g_ShadowedDirect : packoffset(c84);

  float4 g_ProjWorldToLight[8] : packoffset(c87);
  float4 g_LightingIrradianceCoeffsR : packoffset(c95);
  float4 g_LightingIrradianceCoeffsG : packoffset(c96);
  float4 g_LightingIrradianceCoeffsB : packoffset(c97);
  float4 g_ProjShadowParams[2] : packoffset(c98);
  float4 g_EntityUniqueIDCol : packoffset(c120);
  float4 g_MaterialUniqueIDCol : packoffset(c121);
  float4 g_ShaderUniqueIDCol : packoffset(c122);
  float4 g_SelectionOverlayCol : packoffset(c123);
  float4 g_ConstDebugReferencePS : packoffset(c124);
  float4 g_PickingID : packoffset(c125);
  float HairBiasShift_1 : packoffset(c128);
  float4 HairSecondarySpecularColor_2 : packoffset(c129);
  float HairPrimarySpecPower_3 : packoffset(c130);
  float HairSecondarySpecPower_4 : packoffset(c131);
  float4 HairPrimarySpecularColor_5 : packoffset(c132);
  float HairPrimaryBias_6 : packoffset(c133);
  float4 HairColor_7 : packoffset(c134);
  float3x3 HairAnisoUV_8_matrix : packoffset(c135);
  float HairSecondaryBias_9 : packoffset(c138);
  float3x3 HairDiffuseUV_10_matrix : packoffset(c139);
  float4 HairColor2_11 : packoffset(c142);
  float NGTranslucency_12 : packoffset(c143);
  bool g_HasSunOther : packoffset(c144);
}

cbuffer ShadowConstscb : register(b1)
{

  struct
  {
    float4 m_CloudUVScaleOffset;
    float4 m_CloudShadowsParams;
    float4 m_ShadowMapSize;
    float4 m_OffsetsY;
    float4 m_OffsetsX;
    float4 m_ScalesY;
    float4 m_ScalesX;
    float4 m_OffsetsZ;
    float4 m_ScalesZ;
    float4 m_OffsetsW;
    float4 m_ScalesW;
    float4 m_NoiseScale;
    float4 m_NearFar;
    float4 m_FadeParams;
    float4 m_CascadesRangesMax;
    float4 m_ShadowContrast;
    float4x4 m_WorldToLightProj;
  } g_Shadows : packoffset(c0);

}

SamplerState Layer0Diffuse_0_s : register(s0);
SamplerState Operator169_1_s : register(s1);
SamplerState Layer0Normal_2_s : register(s2);
SamplerState HairAlpha_3_s : register(s3);
SamplerState g_ProjectorCookies_s : register(s9);
SamplerState g_ProjectorShadow_s : register(s11);
SamplerState g_AmbientCubeTexture_s : register(s13);
SamplerState g_ShadowNoiseSampler_s : register(s14);
SamplerComparisonState g_ShadowSampler_s : register(s15);
Texture2D<float4> Layer0Diffuse_0 : register(t0);
Texture2D<float4> Operator169_1 : register(t1);
Texture2D<float4> Layer0Normal_2 : register(t2);
Texture2D<float4> HairAlpha_3 : register(t3);
Texture2D<float4> g_ProjectorCookies : register(t9);
Texture2D<float4> g_ProjectorShadow : register(t11);
TextureCube<float4> g_AmbientCubeTexture : register(t13);
Texture2D<float4> g_ShadowNoiseSampler : register(t14);
Texture2D<float4> g_ShadowTexture : register(t15);


// 3Dmigoto declarations
#define cmp -


void main(
  float4 v0 : SV_Position0,
  float4 v1 : TEXCOORD0,
  float4 v2 : TEXCOORD1,
  float4 v3 : COLOR0,
  float4 v4 : TEXCOORD2,
  float4 v5 : TEXCOORD3,
  float4 v6 : TEXCOORD4,
  float4 v7 : TEXCOORD5,
  uint v8 : SV_IsFrontFace0,
  out float4 o0 : SV_Target0,
  out float4 o1 : SV_Target1)
{
  float4 r0,r1,r2,r3,r4,r5,r6,r7,r8,r9,r10,r11,r12,r13,r14,r15,r16,r17,r18,r19,r20;
  uint4 bitmask, uiDest;
  float4 fDest;

  r0.x = cmp(v4.w < 0);
  if (r0.x != 0) discard;
  r0.x = dot(v7.xyz, v7.xyz);
  r0.x = rsqrt(r0.x);
  r0.xyz = v7.xyz * r0.xxx;
  r1.xyzw = Layer0Normal_2.Sample(Layer0Normal_2_s, v2.xy).xyzw;
  r1.xyz = float3(-0.5,-0.5,-0.5) + r1.xyz;
  r1.xyz = r1.xyz + r1.xyz;
  r0.w = dot(v5.xyz, v5.xyz);
  r0.w = rsqrt(r0.w);
  r2.xyz = v5.xyz * r0.www;
  r0.w = dot(v6.xyz, v6.xyz);
  r0.w = rsqrt(r0.w);
  r3.xyz = v6.xyz * r0.www;
  r3.xyz = r3.xyz * r1.yyy;
  r1.xyw = r1.xxx * r2.xyz + r3.xyz;
  r1.xyz = r1.zzz * r0.xyz + r1.xyw;
  r0.w = dot(r1.xyz, r1.xyz);
  r0.w = rsqrt(r0.w);
  r1.xyz = r1.xyz * r0.www;
  r2.xyz = -g_NormalScale.xxx * r1.xyz;
  r3.xyz = -g_NormalScale.xxx * r0.xyz;
  r1.xyz = v8.xxx ? r2.xyz : r1.xyz;
  r0.xyz = v8.xxx ? r3.xyz : r0.xyz;
  r2.xyz = g_EyePosition.xyz + -v4.xyz;
  r0.w = dot(r2.xyz, r2.xyz);
  r1.w = rsqrt(r0.w);
  r3.xyz = r2.xyz * r1.www;
  r4.xy = v2.xy;
  r4.z = 1;
  r5.x = dot(r4.xyz, HairDiffuseUV_10_matrix._m00_m10_m20);
  r5.y = dot(r4.xyz, HairDiffuseUV_10_matrix._m01_m11_m21);
  r5.xyzw = Layer0Diffuse_0.Sample(Layer0Diffuse_0_s, r5.xy).xyzw;
  r6.xyz = HairColor2_11.xyz * r5.zzz;
  r5.xzw = HairColor_7.xyz * r5.xxx + r6.xyz;
  r5.xzw = -g_WeatherInfo.zzz * float3(0.0500000007,0.0500000007,0.0500000007) + r5.xzw;
  r6.xyz = g_EagleVisionColor.www * r5.xzw;
  r7.xyzw = HairAlpha_3.Sample(HairAlpha_3_s, v3.xy).xyzw;
  r2.w = r7.x * r5.y;
  r7.x = dot(r4.xyz, HairAnisoUV_8_matrix._m00_m10_m20);
  r7.y = dot(r4.xyz, HairAnisoUV_8_matrix._m01_m11_m21);
  r4.xyzw = Operator169_1.Sample(Operator169_1_s, r7.xy).xyzw;
  r3.w = HairPrimaryBias_6 + r4.x;
  r4.x = HairSecondaryBias_9 + r4.y;
  r4.y = g_WeatherInfo.z * 1000 + HairPrimarySpecPower_3;
  r4.z = g_WeatherInfo.z * 1000 + HairSecondarySpecPower_4;
  r4.w = g_WeatherInfo.z * g_WeatherInfo.y;
  r4.w = 0.200000003 * r4.w;
  r7.xyz = HairPrimarySpecularColor_5.xyz * v3.www + r4.www;
  r8.xyz = HairSecondarySpecularColor_2.xyz * v3.www + r4.www;
  r4.w = HairBiasShift_1 + -0.5;
  r9.xyz = v4.xyz;
  r9.w = 1;
  r10.y = dot(r9.xyzw, g_Shadows.m_WorldToLightProj._m00_m10_m20_m30);
  r10.z = dot(r9.xyzw, g_Shadows.m_WorldToLightProj._m01_m11_m21_m31);
  r10.w = dot(r9.xyzw, g_Shadows.m_WorldToLightProj._m02_m12_m22_m32);
  r9.xyz = r10.yzw * g_Shadows.m_ScalesX.xyz + g_Shadows.m_OffsetsX.xyz;
  r11.xyz = r10.yzw * g_Shadows.m_ScalesY.xyz + g_Shadows.m_OffsetsY.xyz;
  r12.xyz = r10.yzw * g_Shadows.m_ScalesZ.xyz + g_Shadows.m_OffsetsZ.xyz;
  r10.xyz = r10.yzw * g_Shadows.m_ScalesW.xyz + g_Shadows.m_OffsetsW.xyz;
  r13.xy = cmp(abs(r9.xy) < g_Shadows.m_CascadesRangesMax.xx);
  r5.y = r13.y ? r13.x : 0;
  r13.xy = cmp(abs(r11.xy) < g_Shadows.m_CascadesRangesMax.yy);
  r6.w = r13.y ? r13.x : 0;
  r13.xy = cmp(abs(r12.xy) < g_Shadows.m_CascadesRangesMax.zz);
  r7.w = r13.y ? r13.x : 0;
  r13.xy = cmp(abs(r10.xy) < g_Shadows.m_CascadesRangesMax.ww);
  r8.w = r13.y ? r13.x : 0;
  r13.xyz = r6.www ? r11.xyz : r9.xyz;
  r13.xyz = r7.www ? r12.xyz : r13.xyz;
  r10.xyz = r8.www ? r10.xyz : r13.xyz;
  r9.w = r6.w ? g_Shadows.m_OffsetsY.w : g_Shadows.m_OffsetsX.w;
  r9.w = r7.w ? g_Shadows.m_OffsetsZ.w : r9.w;
  r9.w = r8.w ? g_Shadows.m_OffsetsW.w : r9.w;
  r13.xyz = cmp(float3(0,0,0) != g_Shadows.m_ShadowContrast.yzw);
  r14.xyzw = g_Shadows.m_CascadesRangesMax.yyzz + -abs(r10.xyxy);
  r14.xy = r6.ww ? r14.xy : float2(10,10);
  r14.xy = r7.ww ? r14.zw : r14.xy;
  r14.zw = g_Shadows.m_CascadesRangesMax.ww + -abs(r10.xy);
  r14.xy = r8.ww ? r14.zw : r14.xy;
  r14.xy = saturate(-r14.xy * float2(10,10) + float2(1,1));
  r10.w = max(r14.x, r14.y);
  r5.y = (int)r5.y & (int)r6.w;
  r5.y = (int)r5.y & 0x3f800000;
  r11.w = (int)r6.w & 0x3f800000;
  r5.y = r7.w ? r11.w : r5.y;
  r11.w = (int)r7.w & 0x3f800000;
  r5.y = r8.w ? r11.w : r5.y;
  r5.y = r10.w * r5.y;
  r5.y = r13.x ? r5.y : 0;
  r10.yzw = float3(0.5,0.5,0.5) + r10.xyz;
  r10.x = r10.y * g_Shadows.m_ScalesX.w + r9.w;
  r14.xyzw = r10.zxxx / g_Shadows.m_ShadowMapSize.yxxx;
  r14.xyzw = float4(-2.5,-2.5,-2.5,-2.5) + r14.xyzw;
  r15.xyzw = floor(r14.wxwx);
  r14.xyzw = -r15.wzzz + r14.xyzw;
  r15.xyzw = g_Shadows.m_ShadowMapSize.xyxy * r15.xyzw;
  if (r13.x != 0) {
    r16.xyzw = g_Shadows.m_ShadowMapSize.xyxy * float4(0.5,1.5,1.5,1.5) + r15.zwzw;
    r9.w = g_ShadowTexture.SampleCmpLevelZero(g_ShadowSampler_s, r16.xy, r10.w).x;
    r10.x = g_ShadowTexture.SampleCmpLevelZero(g_ShadowSampler_s, r16.zw, r10.w).x;
    r16.xyzw = g_Shadows.m_ShadowMapSize.xyxy * float4(1.5,0.5,0.5,0.5) + r15.zwzw;
    r10.y = g_ShadowTexture.SampleCmpLevelZero(g_ShadowSampler_s, r16.xy, r10.w).x;
    r10.z = g_ShadowTexture.SampleCmpLevelZero(g_ShadowSampler_s, r16.zw, r10.w).x;
    r16.xyzw = g_Shadows.m_ShadowMapSize.xyxy * float4(2.5,1.5,3.5,1.5) + r15.zwzw;
    r11.w = g_ShadowTexture.SampleCmpLevelZero(g_ShadowSampler_s, r16.xy, r10.w).x;
    r12.w = g_ShadowTexture.SampleCmpLevelZero(g_ShadowSampler_s, r16.zw, r10.w).x;
    r16.xyzw = g_Shadows.m_ShadowMapSize.xyxy * float4(3.5,0.5,2.5,0.5) + r15.zwzw;
    r13.w = g_ShadowTexture.SampleCmpLevelZero(g_ShadowSampler_s, r16.xy, r10.w).x;
    r16.x = g_ShadowTexture.SampleCmpLevelZero(g_ShadowSampler_s, r16.zw, r10.w).x;
    r17.xyzw = g_Shadows.m_ShadowMapSize.xyxy * float4(4.5,1.5,5.5,1.5) + r15.zwzw;
    r16.y = g_ShadowTexture.SampleCmpLevelZero(g_ShadowSampler_s, r17.xy, r10.w).x;
    r16.z = g_ShadowTexture.SampleCmpLevelZero(g_ShadowSampler_s, r17.zw, r10.w).x;
    r17.xyzw = g_Shadows.m_ShadowMapSize.xyxy * float4(5.5,0.5,4.5,0.5) + r15.zwzw;
    r16.w = g_ShadowTexture.SampleCmpLevelZero(g_ShadowSampler_s, r17.xy, r10.w).x;
    r17.x = g_ShadowTexture.SampleCmpLevelZero(g_ShadowSampler_s, r17.zw, r10.w).x;
    r18.xyzw = float4(0.535533905,1.53553391,1,1) + -r14.wwxw;
    r17.yz = saturate(r18.xy + -r14.xx);
    r17.y = r17.y * r17.y;
    r10.z = r17.y * r10.z;
    r17.yw = min(r18.zw, r17.zz);
    r18.xy = saturate(r18.xy);
    r19.xy = float2(1,1) + -r18.xy;
    r19.x = min(r19.x, r17.y);
    r19.z = -r19.x * 0.5 + r17.y;
    r19.x = r19.z * r19.x;
    r17.y = r17.y * r18.x + r19.x;
    r18.x = saturate(0.535533905 + -r14.x);
    r19.x = 1 + -r18.x;
    r19.z = min(r19.x, r17.w);
    r19.w = -r19.z * 0.5 + r17.w;
    r19.z = r19.w * r19.z;
    r17.w = r17.w * r18.x + r19.z;
    r19.z = -r14.x + -r14.w;
    r19.z = saturate(2.53553391 + r19.z);
    r19.w = 1 + -r17.z;
    r19.w = min(r19.z, r19.w);
    r20.x = -r19.w * 0.5 + r19.z;
    r19.w = r20.x * r19.w;
    r17.z = r19.z * r17.z + r19.w;
    r10.y = r17.y * r10.y;
    r10.y = r10.z * 0.5 + r10.y;
    r9.w = r9.w * r17.w + r10.y;
    r9.w = r10.x * r17.z + r9.w;
    r10.x = min(r19.y, r18.z);
    r10.y = -r10.x * 0.5 + r18.z;
    r10.x = r10.y * r10.x;
    r10.x = r18.z * r18.y + r10.x;
    r10.y = saturate(0.535533905 + r14.w);
    r10.z = 1 + -r10.y;
    r10.z = min(r18.z, r10.z);
    r17.y = -r10.z * 0.5 + r18.z;
    r10.z = r17.y * r10.z;
    r10.y = r18.z * r10.y + r10.z;
    r10.z = r14.w + r14.x;
    r10.z = saturate(-1.53553391 + r10.z);
    r10.z = r10.z * r10.z;
    r10.z = -r10.z * 0.5 + 1;
    r17.y = r18.w + r14.x;
    r17.y = saturate(-1.53553391 + r17.y);
    r17.y = r17.y * r17.y;
    r17.y = -r17.y * 0.5 + 1;
    r9.w = r16.x * r10.x + r9.w;
    r9.w = r13.w * r10.y + r9.w;
    r9.w = r11.w * r10.z + r9.w;
    r9.w = r12.w * r17.y + r9.w;
    r10.xy = float2(0.535533905,1) + -r18.ww;
    r10.z = saturate(r10.x + -r14.x);
    r10.z = r10.z * r10.z;
    r10.z = r10.z * r16.w;
    r11.w = -r18.w + -r14.x;
    r16.xw = saturate(float2(1.53553391,2.53553391) + r11.ww);
    r11.w = min(r18.z, r16.x);
    r10.x = saturate(r10.x);
    r12.w = 1 + -r10.x;
    r12.w = min(r12.w, r11.w);
    r13.w = -r12.w * 0.5 + r11.w;
    r12.w = r13.w * r12.w;
    r10.x = r11.w * r10.x + r12.w;
    r10.y = min(r16.x, r10.y);
    r11.w = min(r10.y, r19.x);
    r12.w = -r11.w * 0.5 + r10.y;
    r11.w = r12.w * r11.w;
    r10.y = r10.y * r18.x + r11.w;
    r11.w = 1 + -r16.x;
    r11.w = min(r16.w, r11.w);
    r12.w = -r11.w * 0.5 + r16.w;
    r11.w = r12.w * r11.w;
    r11.w = r16.w * r16.x + r11.w;
    r9.w = r17.x * r10.x + r9.w;
    r9.w = r10.z * 0.5 + r9.w;
    r9.w = r16.y * r11.w + r9.w;
    r9.w = r16.z * r10.y + r9.w;
  } else {
    r9.w = 0;
  }
  if (r13.y != 0) {
    r16.xyzw = g_Shadows.m_ShadowMapSize.xyxy * float4(0.5,3.5,1.5,3.5) + r15.zwzw;
    r10.x = g_ShadowTexture.SampleCmpLevelZero(g_ShadowSampler_s, r16.xy, r10.w).x;
    r10.y = g_ShadowTexture.SampleCmpLevelZero(g_ShadowSampler_s, r16.zw, r10.w).x;
    r16.xyzw = g_Shadows.m_ShadowMapSize.xyxy * float4(1.5,2.5,0.5,2.5) + r15.zwzw;
    r10.z = g_ShadowTexture.SampleCmpLevelZero(g_ShadowSampler_s, r16.xy, r10.w).x;
    r11.w = g_ShadowTexture.SampleCmpLevelZero(g_ShadowSampler_s, r16.zw, r10.w).x;
    r16.xyzw = g_Shadows.m_ShadowMapSize.xyxy * float4(2.5,3.5,3.5,3.5) + r15.zwzw;
    r12.w = g_ShadowTexture.SampleCmpLevelZero(g_ShadowSampler_s, r16.xy, r10.w).x;
    r13.w = g_ShadowTexture.SampleCmpLevelZero(g_ShadowSampler_s, r16.zw, r10.w).x;
    r16.xyzw = g_Shadows.m_ShadowMapSize.xyxy * float4(3.5,2.5,2.5,2.5) + r15.zwzw;
    r16.x = g_ShadowTexture.SampleCmpLevelZero(g_ShadowSampler_s, r16.xy, r10.w).x;
    r16.y = g_ShadowTexture.SampleCmpLevelZero(g_ShadowSampler_s, r16.zw, r10.w).x;
    r17.xyzw = g_Shadows.m_ShadowMapSize.xyxy * float4(4.5,3.5,5.5,3.5) + r15.zwzw;
    r16.z = g_ShadowTexture.SampleCmpLevelZero(g_ShadowSampler_s, r17.xy, r10.w).x;
    r16.w = g_ShadowTexture.SampleCmpLevelZero(g_ShadowSampler_s, r17.zw, r10.w).x;
    r17.xyzw = g_Shadows.m_ShadowMapSize.xyxy * float4(5.5,2.5,4.5,2.5) + r15.zwzw;
    r17.x = g_ShadowTexture.SampleCmpLevelZero(g_ShadowSampler_s, r17.xy, r10.w).x;
    r17.y = g_ShadowTexture.SampleCmpLevelZero(g_ShadowSampler_s, r17.zw, r10.w).x;
    r18.xyz = float3(1.53553391,1,1) + -r14.xwx;
    r18.x = saturate(r18.x);
    r17.z = 1 + -r18.x;
    r17.w = min(r18.y, r17.z);
    r18.w = -r17.w * 0.5 + r18.y;
    r17.w = r18.w * r17.w;
    r17.w = r18.y * r18.x + r17.w;
    r18.w = saturate(0.535533905 + r14.x);
    r19.x = 1 + -r18.w;
    r19.y = min(r19.x, r18.y);
    r19.z = -r19.y * 0.5 + r18.y;
    r19.y = r19.z * r19.y;
    r19.y = r18.y * r18.w + r19.y;
    r19.z = r14.x + r14.w;
    r19.z = saturate(-1.53553391 + r19.z);
    r19.z = r19.z * r19.z;
    r19.z = -r19.z * 0.5 + 1;
    r20.xy = r18.zy + r14.wx;
    r20.xy = saturate(float2(-1.53553391,-1.53553391) + r20.xy);
    r20.xy = r20.xy * r20.xy;
    r20.xy = -r20.xy * float2(0.5,0.5) + float2(1,1);
    r11.w = r11.w * r17.w + r9.w;
    r10.z = r10.z * r19.z + r11.w;
    r10.x = r10.x * r19.y + r10.z;
    r10.x = r10.y * r20.x + r10.x;
    r10.x = r10.x + r16.y;
    r10.x = r10.x + r16.x;
    r10.x = r10.x + r12.w;
    r10.x = r10.x + r13.w;
    r10.y = 1 + -r18.y;
    r10.z = min(r10.y, r17.z);
    r11.w = -r10.z * 0.5 + r10.y;
    r10.z = r11.w * r10.z;
    r10.z = r10.y * r18.x + r10.z;
    r11.w = min(r10.y, r19.x);
    r12.w = -r11.w * 0.5 + r10.y;
    r11.w = r12.w * r11.w;
    r10.y = r10.y * r18.w + r11.w;
    r11.w = r18.z + r18.y;
    r11.w = saturate(-1.53553391 + r11.w);
    r11.w = r11.w * r11.w;
    r11.w = -r11.w * 0.5 + 1;
    r10.x = r17.y * r20.y + r10.x;
    r10.x = r17.x * r10.z + r10.x;
    r10.x = r16.z * r11.w + r10.x;
    r9.w = r16.w * r10.y + r10.x;
  }
  if (r13.z != 0) {
    r16.xyzw = g_Shadows.m_ShadowMapSize.xyxy * float4(0.5,5.5,1.5,5.5) + r15.zwzw;
    r10.x = g_ShadowTexture.SampleCmpLevelZero(g_ShadowSampler_s, r16.xy, r10.w).x;
    r10.y = g_ShadowTexture.SampleCmpLevelZero(g_ShadowSampler_s, r16.zw, r10.w).x;
    r16.xyzw = g_Shadows.m_ShadowMapSize.xyxy * float4(1.5,4.5,0.5,4.5) + r15.zwzw;
    r10.z = g_ShadowTexture.SampleCmpLevelZero(g_ShadowSampler_s, r16.xy, r10.w).x;
    r11.w = g_ShadowTexture.SampleCmpLevelZero(g_ShadowSampler_s, r16.zw, r10.w).x;
    r16.xyzw = g_Shadows.m_ShadowMapSize.xyxy * float4(2.5,5.5,3.5,5.5) + r15.zwzw;
    r12.w = g_ShadowTexture.SampleCmpLevelZero(g_ShadowSampler_s, r16.xy, r10.w).x;
    r13.w = g_ShadowTexture.SampleCmpLevelZero(g_ShadowSampler_s, r16.zw, r10.w).x;
    r16.xyzw = g_Shadows.m_ShadowMapSize.xyxy * float4(3.5,4.5,2.5,4.5) + r15.zwzw;
    r16.x = g_ShadowTexture.SampleCmpLevelZero(g_ShadowSampler_s, r16.xy, r10.w).x;
    r16.y = g_ShadowTexture.SampleCmpLevelZero(g_ShadowSampler_s, r16.zw, r10.w).x;
    r17.xyzw = g_Shadows.m_ShadowMapSize.xyxy * float4(4.5,5.5,5.5,5.5) + r15.zwzw;
    r16.z = g_ShadowTexture.SampleCmpLevelZero(g_ShadowSampler_s, r17.xy, r10.w).x;
    r16.w = g_ShadowTexture.SampleCmpLevelZero(g_ShadowSampler_s, r17.zw, r10.w).x;
    r15.xyzw = g_Shadows.m_ShadowMapSize.xyxy * float4(5.5,4.5,4.5,4.5) + r15.xyzw;
    r15.x = g_ShadowTexture.SampleCmpLevelZero(g_ShadowSampler_s, r15.xy, r10.w).x;
    r10.w = g_ShadowTexture.SampleCmpLevelZero(g_ShadowSampler_s, r15.zw, r10.w).x;
    r17.xyzw = float4(0.535533905,1.53553391,1,1) + -r14.yzxw;
    r14.xy = saturate(r17.xy + -r17.zz);
    r14.x = r14.x * r14.x;
    r10.x = r14.x * r10.x;
    r18.xyzw = float4(1,0.535533905,0.535533905,1) + -r17.zzww;
    r14.x = min(r18.x, r14.y);
    r17.xy = saturate(r17.xy);
    r15.yz = float2(1,1) + -r17.xy;
    r14.z = min(r15.y, r14.x);
    r15.y = -r14.z * 0.5 + r14.x;
    r14.z = r15.y * r14.z;
    r14.x = r14.x * r17.x + r14.z;
    r14.z = min(r17.w, r14.y);
    r15.yw = saturate(r18.zy);
    r19.xy = float2(1,1) + -r15.yw;
    r17.x = min(r19.y, r14.z);
    r18.y = -r17.x * 0.5 + r14.z;
    r17.x = r18.y * r17.x;
    r14.z = r14.z * r15.w + r17.x;
    r17.x = -r17.z + -r14.w;
    r17.x = saturate(2.53553391 + r17.x);
    r18.y = 1 + -r14.y;
    r18.y = min(r18.y, r17.x);
    r19.z = -r18.y * 0.5 + r17.x;
    r18.y = r19.z * r18.y;
    r14.y = r17.x * r14.y + r18.y;
    r11.w = r11.w * r14.z + r9.w;
    r10.z = r10.z * r14.y + r11.w;
    r10.x = r10.x * 0.5 + r10.z;
    r10.x = r10.y * r14.x + r10.x;
    r10.y = min(r18.x, r15.z);
    r10.z = -r10.y * 0.5 + r18.x;
    r10.y = r10.z * r10.y;
    r10.y = r18.x * r17.y + r10.y;
    r10.z = saturate(0.535533905 + r14.w);
    r11.w = 1 + -r10.z;
    r11.w = min(r18.x, r11.w);
    r14.x = -r11.w * 0.5 + r18.x;
    r11.w = r14.x * r11.w;
    r10.z = r18.x * r10.z + r11.w;
    r11.w = r17.z + r14.w;
    r11.w = saturate(-1.53553391 + r11.w);
    r11.w = r11.w * r11.w;
    r11.w = -r11.w * 0.5 + 1;
    r14.x = r17.w + r17.z;
    r14.x = saturate(-1.53553391 + r14.x);
    r14.x = r14.x * r14.x;
    r14.x = -r14.x * 0.5 + 1;
    r10.x = r16.y * r11.w + r10.x;
    r10.x = r16.x * r14.x + r10.x;
    r10.x = r12.w * r10.y + r10.x;
    r10.x = r13.w * r10.z + r10.x;
    r10.y = saturate(r18.z + -r17.z);
    r10.y = r10.y * r10.y;
    r10.y = r10.y * r16.w;
    r10.z = -r17.z + -r17.w;
    r14.xy = saturate(float2(1.53553391,2.53553391) + r10.zz);
    r14.zw = min(r18.xw, r14.xx);
    r16.xy = min(r14.zw, r19.xy);
    r17.xy = -r16.xy * float2(0.5,0.5) + r14.zw;
    r16.xy = r17.xy * r16.xy;
    r14.zw = r14.zw * r15.yw + r16.xy;
    r10.z = 1 + -r14.x;
    r10.z = min(r14.y, r10.z);
    r11.w = -r10.z * 0.5 + r14.y;
    r10.z = r11.w * r10.z;
    r10.z = r14.y * r14.x + r10.z;
    r10.x = r10.w * r10.z + r10.x;
    r10.x = r15.x * r14.w + r10.x;
    r10.x = r16.z * r14.z + r10.x;
    r9.w = r10.y * 0.5 + r10.x;
  }
  r9.w = g_Shadows.m_ShadowContrast.x * r9.w;
  r10.x = -1 + g_Shadows.m_ShadowContrast.x;
  r10.x = 0.5 * r10.x;
  r9.w = saturate(r9.w * 0.0482842699 + -r10.x);
  r10.x = cmp(0 < r5.y);
  if (r10.x != 0) {
    r9.xyz = r7.www ? r11.xyz : r9.xyz;
    r9.xyz = r8.www ? r12.xyz : r9.xyz;
    r10.x = r7.w ? g_Shadows.m_OffsetsY.w : g_Shadows.m_OffsetsX.w;
    r10.x = r8.w ? g_Shadows.m_OffsetsZ.w : r10.x;
    r11.yzw = float3(0.5,0.5,0.5) + r9.xyz;
    r11.x = r11.y * g_Shadows.m_ScalesX.w + r10.x;
    r10.xyzw = r11.zxxx / g_Shadows.m_ShadowMapSize.yxxx;
    r10.xyzw = float4(-2.5,-2.5,-2.5,-2.5) + r10.xyzw;
    r12.xyzw = floor(r10.wxwx);
    r10.xyzw = -r12.wzzz + r10.xyzw;
    r12.xyzw = g_Shadows.m_ShadowMapSize.xyxy * r12.xyzw;
    if (r13.x != 0) {
      r14.xyzw = g_Shadows.m_ShadowMapSize.xyxy * float4(0.5,1.5,1.5,1.5) + r12.zwzw;
      r9.x = g_ShadowTexture.SampleCmpLevelZero(g_ShadowSampler_s, r14.xy, r11.w).x;
      r9.y = g_ShadowTexture.SampleCmpLevelZero(g_ShadowSampler_s, r14.zw, r11.w).x;
      r14.xyzw = g_Shadows.m_ShadowMapSize.xyxy * float4(1.5,0.5,0.5,0.5) + r12.zwzw;
      r9.z = g_ShadowTexture.SampleCmpLevelZero(g_ShadowSampler_s, r14.xy, r11.w).x;
      r11.x = g_ShadowTexture.SampleCmpLevelZero(g_ShadowSampler_s, r14.zw, r11.w).x;
      r14.xyzw = g_Shadows.m_ShadowMapSize.xyxy * float4(2.5,1.5,3.5,1.5) + r12.zwzw;
      r11.y = g_ShadowTexture.SampleCmpLevelZero(g_ShadowSampler_s, r14.xy, r11.w).x;
      r11.z = g_ShadowTexture.SampleCmpLevelZero(g_ShadowSampler_s, r14.zw, r11.w).x;
      r14.xyzw = g_Shadows.m_ShadowMapSize.xyxy * float4(3.5,0.5,2.5,0.5) + r12.zwzw;
      r13.x = g_ShadowTexture.SampleCmpLevelZero(g_ShadowSampler_s, r14.xy, r11.w).x;
      r13.w = g_ShadowTexture.SampleCmpLevelZero(g_ShadowSampler_s, r14.zw, r11.w).x;
      r14.xyzw = g_Shadows.m_ShadowMapSize.xyxy * float4(4.5,1.5,5.5,1.5) + r12.zwzw;
      r14.x = g_ShadowTexture.SampleCmpLevelZero(g_ShadowSampler_s, r14.xy, r11.w).x;
      r14.y = g_ShadowTexture.SampleCmpLevelZero(g_ShadowSampler_s, r14.zw, r11.w).x;
      r15.xyzw = g_Shadows.m_ShadowMapSize.xyxy * float4(5.5,0.5,4.5,0.5) + r12.zwzw;
      r14.z = g_ShadowTexture.SampleCmpLevelZero(g_ShadowSampler_s, r15.xy, r11.w).x;
      r14.w = g_ShadowTexture.SampleCmpLevelZero(g_ShadowSampler_s, r15.zw, r11.w).x;
      r15.xyzw = float4(0.535533905,1.53553391,1,1) + -r10.wwxw;
      r16.xy = saturate(r15.xy + -r10.xx);
      r16.x = r16.x * r16.x;
      r11.x = r16.x * r11.x;
      r16.xz = min(r16.yy, r15.zw);
      r15.xy = saturate(r15.xy);
      r17.xy = float2(1,1) + -r15.xy;
      r16.w = min(r17.x, r16.x);
      r17.x = -r16.w * 0.5 + r16.x;
      r16.w = r17.x * r16.w;
      r15.x = r16.x * r15.x + r16.w;
      r16.x = saturate(0.535533905 + -r10.x);
      r16.w = 1 + -r16.x;
      r17.x = min(r16.z, r16.w);
      r17.z = -r17.x * 0.5 + r16.z;
      r17.x = r17.z * r17.x;
      r16.z = r16.z * r16.x + r17.x;
      r17.x = -r10.x + -r10.w;
      r17.x = saturate(2.53553391 + r17.x);
      r17.z = 1 + -r16.y;
      r17.z = min(r17.x, r17.z);
      r17.w = -r17.z * 0.5 + r17.x;
      r17.z = r17.w * r17.z;
      r16.y = r17.x * r16.y + r17.z;
      r9.z = r15.x * r9.z;
      r9.z = r11.x * 0.5 + r9.z;
      r9.x = r9.x * r16.z + r9.z;
      r9.x = r9.y * r16.y + r9.x;
      r9.y = min(r17.y, r15.z);
      r9.z = -r9.y * 0.5 + r15.z;
      r9.y = r9.z * r9.y;
      r9.y = r15.z * r15.y + r9.y;
      r9.z = saturate(0.535533905 + r10.w);
      r11.x = 1 + -r9.z;
      r11.x = min(r15.z, r11.x);
      r15.x = -r11.x * 0.5 + r15.z;
      r11.x = r15.x * r11.x;
      r9.z = r15.z * r9.z + r11.x;
      r11.x = r10.w + r10.x;
      r11.x = saturate(-1.53553391 + r11.x);
      r11.x = r11.x * r11.x;
      r11.x = -r11.x * 0.5 + 1;
      r15.x = r15.w + r10.x;
      r15.x = saturate(-1.53553391 + r15.x);
      r15.x = r15.x * r15.x;
      r15.x = -r15.x * 0.5 + 1;
      r9.x = r13.w * r9.y + r9.x;
      r9.x = r13.x * r9.z + r9.x;
      r9.x = r11.y * r11.x + r9.x;
      r9.x = r11.z * r15.x + r9.x;
      r9.yz = float2(0.535533905,1) + -r15.ww;
      r11.x = saturate(r9.y + -r10.x);
      r11.x = r11.x * r11.x;
      r11.x = r11.x * r14.z;
      r11.y = -r15.w + -r10.x;
      r11.yz = saturate(float2(1.53553391,2.53553391) + r11.yy);
      r13.x = min(r15.z, r11.y);
      r9.y = saturate(r9.y);
      r13.w = 1 + -r9.y;
      r13.w = min(r13.x, r13.w);
      r14.z = -r13.w * 0.5 + r13.x;
      r13.w = r14.z * r13.w;
      r9.y = r13.x * r9.y + r13.w;
      r9.z = min(r11.y, r9.z);
      r13.x = min(r9.z, r16.w);
      r13.w = -r13.x * 0.5 + r9.z;
      r13.x = r13.w * r13.x;
      r9.z = r9.z * r16.x + r13.x;
      r13.x = 1 + -r11.y;
      r13.x = min(r13.x, r11.z);
      r13.w = -r13.x * 0.5 + r11.z;
      r13.x = r13.w * r13.x;
      r11.y = r11.z * r11.y + r13.x;
      r9.x = r14.w * r9.y + r9.x;
      r9.x = r11.x * 0.5 + r9.x;
      r9.x = r14.x * r11.y + r9.x;
      r9.x = r14.y * r9.z + r9.x;
    } else {
      r9.x = 0;
    }
    if (r13.y != 0) {
      r14.xyzw = g_Shadows.m_ShadowMapSize.xyxy * float4(0.5,3.5,1.5,3.5) + r12.zwzw;
      r9.y = g_ShadowTexture.SampleCmpLevelZero(g_ShadowSampler_s, r14.xy, r11.w).x;
      r9.z = g_ShadowTexture.SampleCmpLevelZero(g_ShadowSampler_s, r14.zw, r11.w).x;
      r14.xyzw = g_Shadows.m_ShadowMapSize.xyxy * float4(1.5,2.5,0.5,2.5) + r12.zwzw;
      r11.x = g_ShadowTexture.SampleCmpLevelZero(g_ShadowSampler_s, r14.xy, r11.w).x;
      r11.y = g_ShadowTexture.SampleCmpLevelZero(g_ShadowSampler_s, r14.zw, r11.w).x;
      r14.xyzw = g_Shadows.m_ShadowMapSize.xyxy * float4(2.5,3.5,3.5,3.5) + r12.zwzw;
      r11.z = g_ShadowTexture.SampleCmpLevelZero(g_ShadowSampler_s, r14.xy, r11.w).x;
      r13.x = g_ShadowTexture.SampleCmpLevelZero(g_ShadowSampler_s, r14.zw, r11.w).x;
      r14.xyzw = g_Shadows.m_ShadowMapSize.xyxy * float4(3.5,2.5,2.5,2.5) + r12.zwzw;
      r13.y = g_ShadowTexture.SampleCmpLevelZero(g_ShadowSampler_s, r14.xy, r11.w).x;
      r13.w = g_ShadowTexture.SampleCmpLevelZero(g_ShadowSampler_s, r14.zw, r11.w).x;
      r14.xyzw = g_Shadows.m_ShadowMapSize.xyxy * float4(4.5,3.5,5.5,3.5) + r12.zwzw;
      r14.x = g_ShadowTexture.SampleCmpLevelZero(g_ShadowSampler_s, r14.xy, r11.w).x;
      r14.y = g_ShadowTexture.SampleCmpLevelZero(g_ShadowSampler_s, r14.zw, r11.w).x;
      r15.xyzw = g_Shadows.m_ShadowMapSize.xyxy * float4(5.5,2.5,4.5,2.5) + r12.zwzw;
      r14.z = g_ShadowTexture.SampleCmpLevelZero(g_ShadowSampler_s, r15.xy, r11.w).x;
      r14.w = g_ShadowTexture.SampleCmpLevelZero(g_ShadowSampler_s, r15.zw, r11.w).x;
      r15.xyz = float3(1.53553391,1,1) + -r10.xwx;
      r15.x = saturate(r15.x);
      r15.w = 1 + -r15.x;
      r16.x = min(r15.y, r15.w);
      r16.y = -r16.x * 0.5 + r15.y;
      r16.x = r16.y * r16.x;
      r16.x = r15.y * r15.x + r16.x;
      r16.y = saturate(0.535533905 + r10.x);
      r16.z = 1 + -r16.y;
      r16.w = min(r16.z, r15.y);
      r17.x = -r16.w * 0.5 + r15.y;
      r16.w = r17.x * r16.w;
      r16.w = r15.y * r16.y + r16.w;
      r17.x = r10.x + r10.w;
      r17.x = saturate(-1.53553391 + r17.x);
      r17.x = r17.x * r17.x;
      r17.x = -r17.x * 0.5 + 1;
      r17.yz = r15.zy + r10.wx;
      r17.yz = saturate(float2(-1.53553391,-1.53553391) + r17.yz);
      r17.yz = r17.yz * r17.yz;
      r17.yz = -r17.yz * float2(0.5,0.5) + float2(1,1);
      r11.y = r11.y * r16.x + r9.x;
      r11.x = r11.x * r17.x + r11.y;
      r9.y = r9.y * r16.w + r11.x;
      r9.y = r9.z * r17.y + r9.y;
      r9.y = r9.y + r13.w;
      r9.y = r9.y + r13.y;
      r9.y = r9.y + r11.z;
      r9.y = r9.y + r13.x;
      r9.z = 1 + -r15.y;
      r11.x = min(r9.z, r15.w);
      r11.y = -r11.x * 0.5 + r9.z;
      r11.x = r11.y * r11.x;
      r11.x = r9.z * r15.x + r11.x;
      r11.y = min(r9.z, r16.z);
      r11.z = -r11.y * 0.5 + r9.z;
      r11.y = r11.z * r11.y;
      r9.z = r9.z * r16.y + r11.y;
      r11.y = r15.z + r15.y;
      r11.y = saturate(-1.53553391 + r11.y);
      r11.y = r11.y * r11.y;
      r11.y = -r11.y * 0.5 + 1;
      r9.y = r14.w * r17.z + r9.y;
      r9.y = r14.z * r11.x + r9.y;
      r9.y = r14.x * r11.y + r9.y;
      r9.x = r14.y * r9.z + r9.y;
    }
    if (r13.z != 0) {
      r13.xyzw = g_Shadows.m_ShadowMapSize.xyxy * float4(0.5,5.5,1.5,5.5) + r12.zwzw;
      r9.y = g_ShadowTexture.SampleCmpLevelZero(g_ShadowSampler_s, r13.xy, r11.w).x;
      r9.z = g_ShadowTexture.SampleCmpLevelZero(g_ShadowSampler_s, r13.zw, r11.w).x;
      r13.xyzw = g_Shadows.m_ShadowMapSize.xyxy * float4(1.5,4.5,0.5,4.5) + r12.zwzw;
      r11.x = g_ShadowTexture.SampleCmpLevelZero(g_ShadowSampler_s, r13.xy, r11.w).x;
      r11.y = g_ShadowTexture.SampleCmpLevelZero(g_ShadowSampler_s, r13.zw, r11.w).x;
      r13.xyzw = g_Shadows.m_ShadowMapSize.xyxy * float4(2.5,5.5,3.5,5.5) + r12.zwzw;
      r11.z = g_ShadowTexture.SampleCmpLevelZero(g_ShadowSampler_s, r13.xy, r11.w).x;
      r13.x = g_ShadowTexture.SampleCmpLevelZero(g_ShadowSampler_s, r13.zw, r11.w).x;
      r14.xyzw = g_Shadows.m_ShadowMapSize.xyxy * float4(3.5,4.5,2.5,4.5) + r12.zwzw;
      r13.y = g_ShadowTexture.SampleCmpLevelZero(g_ShadowSampler_s, r14.xy, r11.w).x;
      r13.z = g_ShadowTexture.SampleCmpLevelZero(g_ShadowSampler_s, r14.zw, r11.w).x;
      r14.xyzw = g_Shadows.m_ShadowMapSize.xyxy * float4(4.5,5.5,5.5,5.5) + r12.zwzw;
      r13.w = g_ShadowTexture.SampleCmpLevelZero(g_ShadowSampler_s, r14.xy, r11.w).x;
      r14.x = g_ShadowTexture.SampleCmpLevelZero(g_ShadowSampler_s, r14.zw, r11.w).x;
      r12.xyzw = g_Shadows.m_ShadowMapSize.xyxy * float4(5.5,4.5,4.5,4.5) + r12.xyzw;
      r12.x = g_ShadowTexture.SampleCmpLevelZero(g_ShadowSampler_s, r12.xy, r11.w).x;
      r11.w = g_ShadowTexture.SampleCmpLevelZero(g_ShadowSampler_s, r12.zw, r11.w).x;
      r15.xyzw = float4(0.535533905,1.53553391,1,1) + -r10.yzxw;
      r10.xy = saturate(r15.xy + -r15.zz);
      r10.x = r10.x * r10.x;
      r9.y = r10.x * r9.y;
      r16.xyzw = float4(1,0.535533905,0.535533905,1) + -r15.zzww;
      r10.x = min(r16.x, r10.y);
      r15.xy = saturate(r15.xy);
      r12.yz = float2(1,1) + -r15.xy;
      r10.z = min(r12.y, r10.x);
      r12.y = -r10.z * 0.5 + r10.x;
      r10.z = r12.y * r10.z;
      r10.x = r10.x * r15.x + r10.z;
      r10.z = min(r15.w, r10.y);
      r12.yw = saturate(r16.zy);
      r14.yz = float2(1,1) + -r12.yw;
      r14.w = min(r14.z, r10.z);
      r15.x = -r14.w * 0.5 + r10.z;
      r14.w = r15.x * r14.w;
      r10.z = r10.z * r12.w + r14.w;
      r14.w = -r15.z + -r10.w;
      r14.w = saturate(2.53553391 + r14.w);
      r15.x = 1 + -r10.y;
      r15.x = min(r15.x, r14.w);
      r16.y = -r15.x * 0.5 + r14.w;
      r15.x = r16.y * r15.x;
      r10.y = r14.w * r10.y + r15.x;
      r10.z = r11.y * r10.z + r9.x;
      r10.y = r11.x * r10.y + r10.z;
      r9.y = r9.y * 0.5 + r10.y;
      r9.y = r9.z * r10.x + r9.y;
      r9.z = min(r16.x, r12.z);
      r10.x = -r9.z * 0.5 + r16.x;
      r9.z = r10.x * r9.z;
      r9.z = r16.x * r15.y + r9.z;
      r10.x = saturate(0.535533905 + r10.w);
      r10.y = 1 + -r10.x;
      r10.y = min(r16.x, r10.y);
      r10.z = -r10.y * 0.5 + r16.x;
      r10.y = r10.z * r10.y;
      r10.x = r16.x * r10.x + r10.y;
      r10.y = r15.z + r10.w;
      r10.y = saturate(-1.53553391 + r10.y);
      r10.y = r10.y * r10.y;
      r10.y = -r10.y * 0.5 + 1;
      r10.z = r15.w + r15.z;
      r10.z = saturate(-1.53553391 + r10.z);
      r10.z = r10.z * r10.z;
      r10.z = -r10.z * 0.5 + 1;
      r9.y = r13.z * r10.y + r9.y;
      r9.y = r13.y * r10.z + r9.y;
      r9.y = r11.z * r9.z + r9.y;
      r9.y = r13.x * r10.x + r9.y;
      r9.z = saturate(r16.z + -r15.z);
      r9.z = r9.z * r9.z;
      r9.z = r9.z * r14.x;
      r10.x = -r15.z + -r15.w;
      r10.xy = saturate(float2(1.53553391,2.53553391) + r10.xx);
      r10.zw = min(r16.xw, r10.xx);
      r11.xy = min(r10.zw, r14.yz);
      r13.xy = -r11.xy * float2(0.5,0.5) + r10.zw;
      r11.xy = r13.xy * r11.xy;
      r10.zw = r10.zw * r12.yw + r11.xy;
      r11.x = 1 + -r10.x;
      r11.x = min(r11.x, r10.y);
      r11.y = -r11.x * 0.5 + r10.y;
      r11.x = r11.y * r11.x;
      r10.x = r10.y * r10.x + r11.x;
      r9.y = r11.w * r10.x + r9.y;
      r9.y = r12.x * r10.w + r9.y;
      r9.y = r13.w * r10.z + r9.y;
      r9.x = r9.z * 0.5 + r9.y;
    }
    r9.x = 0.0482842699 * r9.x;
    r9.y = 1 + -r5.y;
    r6.w = (int)r6.w & (int)g_Shadows.m_NoiseScale.y;
    r6.w = r7.w ? g_Shadows.m_NoiseScale.z : r6.w;
    r6.w = r8.w ? g_Shadows.m_NoiseScale.w : r6.w;
    r6.w = r9.y * r6.w + 1;
    r7.w = g_Shadows.m_ShadowContrast.x * r6.w;
    r6.w = g_Shadows.m_ShadowContrast.x * r6.w + -1;
    r6.w = 0.5 * r6.w;
    r6.w = saturate(r9.x * r7.w + -r6.w);
    r6.w = r6.w + -r9.w;
    r9.w = r5.y * r6.w + r9.w;
  }
  r9.xyz = -g_EyePosition.xyz + v4.xyz;
  r5.y = dot(r9.xyz, r9.xyz);
  r5.y = saturate(r5.y * g_Shadows.m_FadeParams.x + g_Shadows.m_FadeParams.y);
  r5.y = saturate(r9.w + r5.y);
  r6.w = dot(r1.xyz, g_ShadowedDirect.m_Direction.xyz);
  r7.w = NGTranslucency_12 + NGTranslucency_12;
  r8.w = 0.300000012 + -r6.w;
  r8.w = r8.w * r7.w;
  r8.w = max(0, r8.w);
  r9.x = saturate(r6.w);
  r8.w = r9.x + r8.w;
  r9.xyz = g_ShadowedDirect.m_Color.xyz * r8.www;
  r9.xyz = r9.xyz * r5.yyy;
  r3.w = r4.w + r3.w;
  r10.xyz = r3.www * r1.xyz + v6.xyz;
  r3.w = dot(r10.xyz, r10.xyz);
  r3.w = rsqrt(r3.w);
  r10.xyz = r10.xyz * r3.www;
  r3.w = r4.x + r4.w;
  r11.xyz = r3.www * r1.xyz + v6.xyz;
  r3.w = dot(r11.xyz, r11.xyz);
  r3.w = rsqrt(r3.w);
  r11.xyz = r11.xyz * r3.www;
  r2.xyz = r2.xyz * r1.www + g_ShadowedDirect.m_Direction.xyz;
  r1.w = dot(r2.xyz, r2.xyz);
  r1.w = rsqrt(r1.w);
  r2.xyz = r2.xyz * r1.www;
  r1.w = dot(r10.xyz, r2.xyz);
  r1.w = -r1.w * r1.w + 1;
  r1.w = sqrt(r1.w);
  r3.w = 0.200000003 + r6.w;
  r3.w = saturate(5 * r3.w);
  r4.x = r3.w * -2 + 3;
  r3.w = r3.w * r3.w;
  r3.w = r4.x * r3.w;
  r1.w = log2(r1.w);
  r1.w = r4.y * r1.w;
  r1.w = exp2(r1.w);
  r1.w = r3.w * r1.w;
  r2.x = dot(r11.xyz, r2.xyz);
  r2.x = -r2.x * r2.x + 1;
  r2.x = sqrt(r2.x);
  r2.x = log2(r2.x);
  r2.x = r4.z * r2.x;
  r2.x = exp2(r2.x);
  r2.x = r3.w * r2.x;
  r2.xyz = r8.xyz * r2.xxx;
  r2.xyz = r7.xyz * r1.www + r2.xyz;
  r2.xyz = g_ShadowedDirect.m_Color.xyz * r2.xyz;
  r2.xyz = r2.xyz * r5.yyy;
  r2.xyz = r6.xyz * r9.xyz + r2.xyz;
  r9.xyz = g_OmniLights[0].m_PositionFar.xyz + -v4.xyz;
  r1.w = dot(r9.xyz, r9.xyz);
  r3.w = g_OmniLights[0].m_PositionFar.w + -r1.w;
  r3.w = saturate(abs(g_OmniLights[0].m_ColorFade.w) * r3.w);
  r4.x = cmp(0 < r3.w);
  if (r4.x != 0) {
    r1.w = rsqrt(r1.w);
    r12.xyz = r9.xyz * r1.www;
    r4.x = dot(r1.xyz, r12.xyz);
    r4.w = 0.300000012 + -r4.x;
    r4.w = r7.w * r4.w;
    r4.w = max(0, r4.w);
    r5.y = saturate(r4.x);
    r4.w = r5.y + r4.w;
    r12.xyz = g_OmniLights[0].m_ColorFade.xyz * r4.www;
    r13.xyz = r3.www * r6.xyz;
    r9.xyz = r9.xyz * r1.www + r3.xyz;
    r1.w = dot(r9.xyz, r9.xyz);
    r1.w = rsqrt(r1.w);
    r9.xyz = r9.xyz * r1.www;
    r1.w = dot(r10.xyz, r9.xyz);
    r1.w = -r1.w * r1.w + 1;
    r1.w = sqrt(r1.w);
    r4.x = 0.200000003 + r4.x;
    r4.x = saturate(5 * r4.x);
    r4.w = r4.x * -2 + 3;
    r4.x = r4.x * r4.x;
    r4.x = r4.w * r4.x;
    r1.w = log2(r1.w);
    r1.w = r4.y * r1.w;
    r1.w = exp2(r1.w);
    r1.w = r4.x * r1.w;
    r4.w = dot(r11.xyz, r9.xyz);
    r4.w = -r4.w * r4.w + 1;
    r4.w = sqrt(r4.w);
    r4.w = log2(r4.w);
    r4.w = r4.z * r4.w;
    r4.w = exp2(r4.w);
    r4.x = r4.x * r4.w;
    r9.xyz = r8.xyz * r4.xxx;
    r9.xyz = r7.xyz * r1.www + r9.xyz;
    r9.xyz = g_OmniLights[0].m_ColorFade.xyz * r9.xyz;
    r9.xyz = r9.xyz * r3.www;
    r9.xyz = r13.xyz * r12.xyz + r9.xyz;
    r2.xyz = r9.xyz + r2.xyz;
  }
  r9.xyz = g_SpotLights[0].m_PositionFar.xyz + -v4.xyz;
  r1.w = dot(r9.xyz, r9.xyz);
  r3.w = g_SpotLights[0].m_PositionFar.w + -r1.w;
  r3.w = saturate(abs(g_SpotLights[0].m_ColorFade.w) * r3.w);
  r1.w = rsqrt(r1.w);
  r12.xyz = r9.xyz * r1.www;
  r4.x = dot(r12.xyz, g_SpotLights[0].m_Direction.xyz);
  r4.x = g_SpotLights[0].m_ConeAngles.x + -r4.x;
  r4.x = saturate(g_SpotLights[0].m_ConeAngles.y * r4.x);
  r3.w = r4.x * r3.w;
  r4.x = cmp(0 < r3.w);
  r0.xyz = r0.xyz * g_ProjShadowParams[0].www + v4.xyz;
  r13.xyzw = g_ProjWorldToLight[1].xyzw * r0.yyyy;
  r13.xyzw = r0.xxxx * g_ProjWorldToLight[0].xyzw + r13.xyzw;
  r13.xyzw = r0.zzzz * g_ProjWorldToLight[2].xyzw + r13.xyzw;
  r13.xyzw = g_ProjWorldToLight[3].xyzw + r13.xyzw;
  r0.xy = r13.xy / r13.ww;
  r14.xyzw = g_ProjectorCookies.Sample(g_ProjectorCookies_s, r0.xy).xyzw;
  r0.xy = float2(0.015625,0.015625) * v0.xy;
  r15.xyzw = g_ShadowNoiseSampler.Sample(g_ShadowNoiseSampler_s, r0.xy).xyzw;
  if (r4.x != 0) {
    r0.xyz = saturate(r13.xyz / r13.www);
    r4.x = g_Shadows.m_ShadowMapSize.w / g_Shadows.m_ShadowMapSize.z;
    r4.x = trunc(r4.x);
    r0.x = r0.x / r4.x;
    r13.x = g_ProjShadowParams[0].x + r0.x;
    r13.y = 1 + -r0.y;
    r0.xy = g_Shadows.m_ShadowMapSize.zw * float2(0.5,0.5) + r13.xy;
    r4.xw = float2(-0.5,-0.5) + r15.yx;
    r4.xw = g_Shadows.m_NoiseScale.xx * r4.xw;
    r13.xy = float2(0.541754603,-0.286856592) * r4.xx;
    r13.xy = r4.ww * float2(-1.35132504,-1.48180664) + -r13.xy;
    r13.z = dot(r4.wx, float2(0.541754603,-1.35132504));
    r13.xz = r13.xz * g_Shadows.m_ShadowMapSize.zw + r0.xy;
    r15.xyzw = g_ProjectorShadow.SampleLevel(g_ProjectorShadow_s, r13.xz, 0).xyzw;
    r5.y = cmp(r15.x < r0.z);
    r5.y = r5.y ? 0 : 1;
    r13.w = dot(r4.wx, float2(-0.286856592,-1.48180664));
    r13.xy = r13.yw * g_Shadows.m_ShadowMapSize.zw + r0.xy;
    r13.xyzw = g_ProjectorShadow.SampleLevel(g_ProjectorShadow_s, r13.xy, 0).xyzw;
    r6.w = cmp(r13.x < r0.z);
    r6.w = r6.w ? 0 : 1;
    r5.y = r6.w + r5.y;
    r13.xy = float2(1.04466522,-0.378276795) * r4.xx;
    r13.xy = r4.ww * float2(0.0852845609,-0.567544222) + -r13.xy;
    r13.z = dot(r4.wx, float2(1.04466522,0.0852845609));
    r13.xz = r13.xz * g_Shadows.m_ShadowMapSize.zw + r0.xy;
    r15.xyzw = g_ProjectorShadow.SampleLevel(g_ProjectorShadow_s, r13.xz, 0).xyzw;
    r6.w = cmp(r15.x < r0.z);
    r6.w = r6.w ? 0 : 1;
    r5.y = r6.w + r5.y;
    r13.w = dot(r4.wx, float2(-0.378276795,-0.567544222));
    r13.xy = r13.yw * g_Shadows.m_ShadowMapSize.zw + r0.xy;
    r13.xyzw = g_ProjectorShadow.SampleLevel(g_ProjectorShadow_s, r13.xy, 0).xyzw;
    r6.w = cmp(r13.x < r0.z);
    r6.w = r6.w ? 0 : 1;
    r5.y = r6.w + r5.y;
    r13.xy = float2(0.423478186,1.54405284) * r4.xx;
    r13.xy = r4.ww * float2(0.990938425,-1.16682863) + -r13.xy;
    r13.z = dot(r4.wx, float2(0.423478186,0.990938425));
    r13.xz = r13.xz * g_Shadows.m_ShadowMapSize.zw + r0.xy;
    r15.xyzw = g_ProjectorShadow.SampleLevel(g_ProjectorShadow_s, r13.xz, 0).xyzw;
    r6.w = cmp(r15.x < r0.z);
    r6.w = r6.w ? 0 : 1;
    r5.y = r6.w + r5.y;
    r13.w = dot(r4.wx, float2(1.54405284,-1.16682863));
    r13.xy = r13.yw * g_Shadows.m_ShadowMapSize.zw + r0.xy;
    r13.xyzw = g_ProjectorShadow.SampleLevel(g_ProjectorShadow_s, r13.xy, 0).xyzw;
    r6.w = cmp(r13.x < r0.z);
    r6.w = r6.w ? 0 : 1;
    r5.y = r6.w + r5.y;
    r13.xy = float2(1.92713404,1.55501103) * r4.xx;
    r13.xy = r4.ww * float2(-0.0387852415,0.957045197) + -r13.xy;
    r13.z = dot(r4.wx, float2(1.92713404,-0.0387852415));
    r13.xz = r13.xz * g_Shadows.m_ShadowMapSize.zw + r0.xy;
    r15.xyzw = g_ProjectorShadow.SampleLevel(g_ProjectorShadow_s, r13.xz, 0).xyzw;
    r6.w = cmp(r15.x < r0.z);
    r6.w = r6.w ? 0 : 1;
    r5.y = r6.w + r5.y;
    r13.w = dot(r4.wx, float2(1.55501103,0.957045197));
    r13.xy = r13.yw * g_Shadows.m_ShadowMapSize.zw + r0.xy;
    r13.xyzw = g_ProjectorShadow.SampleLevel(g_ProjectorShadow_s, r13.xy, 0).xyzw;
    r6.w = cmp(r13.x < r0.z);
    r6.w = r6.w ? 0 : 1;
    r5.y = r6.w + r5.y;
    r13.xy = float2(-1.77264178,-0.91532582) * r4.xx;
    r13.xy = r4.ww * float2(-0.0350671187,0.835349619) + -r13.xy;
    r13.z = dot(r4.wx, float2(-1.77264178,-0.0350671187));
    r13.xz = r13.xz * g_Shadows.m_ShadowMapSize.zw + r0.xy;
    r15.xyzw = g_ProjectorShadow.SampleLevel(g_ProjectorShadow_s, r13.xz, 0).xyzw;
    r6.w = cmp(r15.x < r0.z);
    r6.w = r6.w ? 0 : 1;
    r5.y = r6.w + r5.y;
    r13.w = dot(r4.wx, float2(-0.91532582,0.835349619));
    r13.xy = r13.yw * g_Shadows.m_ShadowMapSize.zw + r0.xy;
    r13.xyzw = g_ProjectorShadow.SampleLevel(g_ProjectorShadow_s, r13.xy, 0).xyzw;
    r6.w = cmp(r13.x < r0.z);
    r6.w = r6.w ? 0 : 1;
    r5.y = r6.w + r5.y;
    r13.xy = float2(-1.39283884,-0.166904166) * r4.xx;
    r13.xy = r4.ww * float2(-0.903295398,0.204589799) + -r13.xy;
    r13.z = dot(r4.wx, float2(-1.39283884,-0.903295398));
    r13.xz = r13.xz * g_Shadows.m_ShadowMapSize.zw + r0.xy;
    r15.xyzw = g_ProjectorShadow.SampleLevel(g_ProjectorShadow_s, r13.xz, 0).xyzw;
    r6.w = cmp(r15.x < r0.z);
    r6.w = r6.w ? 0 : 1;
    r5.y = r6.w + r5.y;
    r13.w = dot(r4.wx, float2(-0.166904166,0.204589799));
    r13.xy = r13.yw * g_Shadows.m_ShadowMapSize.zw + r0.xy;
    r13.xyzw = g_ProjectorShadow.SampleLevel(g_ProjectorShadow_s, r13.xy, 0).xyzw;
    r6.w = cmp(r13.x < r0.z);
    r6.w = r6.w ? 0 : 1;
    r5.y = r6.w + r5.y;
    r13.xy = float2(0.912372172,-0.0419260412) * r4.xx;
    r13.xy = r4.ww * float2(1.63783836,1.65058625) + -r13.xy;
    r13.z = dot(r4.wx, float2(0.912372172,1.63783836));
    r13.xz = r13.xz * g_Shadows.m_ShadowMapSize.zw + r0.xy;
    r15.xyzw = g_ProjectorShadow.SampleLevel(g_ProjectorShadow_s, r13.xz, 0).xyzw;
    r6.w = cmp(r15.x < r0.z);
    r6.w = r6.w ? 0 : 1;
    r5.y = r6.w + r5.y;
    r13.w = dot(r4.wx, float2(-0.0419260412,1.65058625));
    r13.xy = r13.yw * g_Shadows.m_ShadowMapSize.zw + r0.xy;
    r13.xyzw = g_ProjectorShadow.SampleLevel(g_ProjectorShadow_s, r13.xy, 0).xyzw;
    r6.w = cmp(r13.x < r0.z);
    r6.w = r6.w ? 0 : 1;
    r5.y = r6.w + r5.y;
    r13.xy = float2(-0.977074981,-1.74537897) * r4.xx;
    r13.xy = r4.ww * float2(1.71076834,0.945010006) + -r13.xy;
    r13.z = dot(r4.wx, float2(-0.977074981,1.71076834));
    r13.xz = r13.xz * g_Shadows.m_ShadowMapSize.zw + r0.xy;
    r15.xyzw = g_ProjectorShadow.SampleLevel(g_ProjectorShadow_s, r13.xz, 0).xyzw;
    r6.w = cmp(r15.x < r0.z);
    r6.w = r6.w ? 0 : 1;
    r5.y = r6.w + r5.y;
    r13.w = dot(r4.wx, float2(-1.74537897,0.945010006));
    r0.xy = r13.yw * g_Shadows.m_ShadowMapSize.zw + r0.xy;
    r13.xyzw = g_ProjectorShadow.SampleLevel(g_ProjectorShadow_s, r0.xy, 0).xyzw;
    r0.x = cmp(r13.x < r0.z);
    r0.x = r0.x ? 0 : 1;
    r0.x = r5.y + r0.x;
    r0.x = 0.0625 * r0.x;
    r0.xyz = r14.xyz * r0.xxx;
    r4.x = dot(r1.xyz, r12.xyz);
    r4.w = 0.300000012 + -r4.x;
    r4.w = r7.w * r4.w;
    r4.w = max(0, r4.w);
    r5.y = saturate(r4.x);
    r4.w = r5.y + r4.w;
    r12.xyz = g_SpotLights[0].m_ColorFade.xyz * r4.www;
    r12.xyz = r12.xyz * r0.xyz;
    r13.xyz = r3.www * r6.xyz;
    r9.xyz = r9.xyz * r1.www + r3.xyz;
    r1.w = dot(r9.xyz, r9.xyz);
    r1.w = rsqrt(r1.w);
    r9.xyz = r9.xyz * r1.www;
    r1.w = dot(r10.xyz, r9.xyz);
    r1.w = -r1.w * r1.w + 1;
    r1.w = sqrt(r1.w);
    r4.x = 0.200000003 + r4.x;
    r4.x = saturate(5 * r4.x);
    r4.w = r4.x * -2 + 3;
    r4.x = r4.x * r4.x;
    r4.x = r4.w * r4.x;
    r1.w = log2(r1.w);
    r1.w = r4.y * r1.w;
    r1.w = exp2(r1.w);
    r1.w = r4.x * r1.w;
    r4.y = dot(r11.xyz, r9.xyz);
    r4.y = -r4.y * r4.y + 1;
    r4.y = sqrt(r4.y);
    r4.y = log2(r4.y);
    r4.y = r4.z * r4.y;
    r4.y = exp2(r4.y);
    r4.x = r4.x * r4.y;
    r4.xyz = r8.xyz * r4.xxx;
    r4.xyz = r7.xyz * r1.www + r4.xyz;
    r4.xyz = g_SpotLights[0].m_ColorFade.xyz * r4.xyz;
    r4.xyz = r4.xyz * r3.www;
    r0.xyz = r4.xyz * r0.xyz;
    r0.xyz = r13.xyz * r12.xyz + r0.xyz;
    r2.xyz = r2.xyz + r0.xyz;
  }
  r4.xyzw = g_AmbientCubeTexture.SampleLevel(g_AmbientCubeTexture_s, r1.xyz, 0).xyzw;
  r7.x = dot(r1.xyz, float3(-0.408248007,-0.707107008,0.577350318));
  r7.y = dot(r1.xyz, float3(-0.408248007,0.707107008,0.577350318));
  r7.z = dot(r1.zx, float2(0.577350318,0.816497028));
  r7.w = r1.z;
  r1.xyzw = r7.xyzw * float4(1,1,1,-0.5) + float4(0,0,0,0.5);
  r0.xyz = saturate(r1.xyz);
  r1.xyz = r1.xyz * r0.xyz;
  r0.x = dot(r1.xyzw, g_LightingIrradianceCoeffsR.xyzw);
  r0.y = dot(r1.xyzw, g_LightingIrradianceCoeffsG.xyzw);
  r0.z = dot(r1.xyzw, g_LightingIrradianceCoeffsB.xyzw);
  r0.xyz = r4.xyz + r0.xyz;
  r0.xyz = r0.xyz * r6.xyz + r2.xyz;
  r0.xyz = saturate(g_EagleVisionColor.xyz * r5.xzw + r0.xyz);
  r1.x = g_EyePosition.z + g_FogParams.z;
  r0.w = sqrt(r0.w);
  r1.y = -g_FogParams.x + r0.w;
  r1.z = g_FogParams.y + -g_FogParams.x;
  r1.y = saturate(r1.y / r1.z);
  r1.y = 1 + -r1.y;
  r1.y = r1.y * r1.y;
  r1.y = -r1.y * r1.y + 1;
  r1.x = v4.z + -r1.x;
  r1.x = min(g_FogParams.z, r1.x);
  r1.x = saturate(-r1.x * g_FogParams.w + 1);
  r0.w = -20 + r0.w;
  r0.w = saturate(0.0700000003 * r0.w);
  r0.w = 1 + -r0.w;
  r0.w = -r0.w * r0.w + 1;
  r0.w = g_FogWeatherParams.x * r0.w;
  r0.w = saturate(r1.y * r1.x + r0.w);
  r1.x = dot(g_SunDirection.xyz, r3.xyz);
  r1.x = 1 + r1.x;
  r1.x = -r1.x * 0.5 + 1;
  r1.x = r1.x * r1.x;
  r1.yzw = -g_FogSunBackColor.xyz + g_FogColor.xyz;
  r1.xyz = r1.xxx * r1.yzw + g_FogSunBackColor.xyz;
  r1.xyz = r1.xyz + -r0.xyz;
  r0.xyz = r0.www * r1.xyz + r0.xyz;
  r0.w = 1 + -r0.w;
  r1.x = r2.w * r0.w;
  r0.w = r2.w * r0.w + -g_AlphaTestValue;
  r0.w = cmp(r0.w < 0);
  if (r0.w != 0) discard;
  o0.xyz = g_SelectionOverlayCol.xyz + r0.xyz;
  o1.xyz = v1.zzz / v1.www;
  o0.w = r1.x;
  o1.w = r1.x;

  o0.w = saturate(o0.w);
  o1.w = saturate(o1.w);
  return;
}